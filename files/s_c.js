!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({"./node_modules/@vkontakte/vkui-connect/index.js":function(e){!function(t){var n="function",i="undefined",o=[];typeof t!==i&&(t.CustomEvent||!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=t.Event.prototype,t.CustomEvent=e}(),t.addEventListener("VKWebAppEvent",function(){var e=Array.prototype.slice.call(arguments);o.forEach(function(t){t.apply(null,e)})})),e.exports={send:function(e,o){o||(o={});var r=typeof t!==i,a=r&&t.AndroidBridge,s=r&&t.webkit&&t.webkit.messageHandlers;a&&typeof a[e]==n&&a[e](JSON.stringify(o)),s&&s[e]&&typeof s[e].postMessage==n&&s[e].postMessage(o)},subscribe:function(e){o.push(e)},unsubscribe:function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},supports:function(e){var o=typeof t!==i,r=o&&t.AndroidBridge,a=o&&t.webkit&&t.webkit.messageHandlers;return r&&typeof r[e]==n?!0:a&&a[e]&&typeof a[e].postMessage==n?!0:!1}}}(window)},"./node_modules/process/browser.js":function(e){var t,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function s(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var l,c=[],u=!1,d=-1;function A(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&m())}function m(){if(!u){var e=a(A);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,s(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||a(m)};function f(e,t){this.fun=e,this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function p(){}i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/select/src/select.js":function(e){function t(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(e),i.removeAllRanges(),i.addRange(o),t=i.toString()}return t}e.exports=t},"./node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var i,o=1,r={},a=!1,s=e.document;function l(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return r[o]=a,i(o),o++}function c(e){delete r[e]}function u(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function d(e){if(a)setTimeout(d,0,e);else{var t=r[e];if(t){a=!0;try{u(t)}finally{c(e),a=!1}}}}function A(){i=function(e){t.nextTick(function(){d(e)})}}function m(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function f(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&d(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}function p(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;d(t)},i=function(t){e.port2.postMessage(t)}}function _(){var e=s.documentElement;i=function(t){var n=s.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){i=function(e){setTimeout(d,0,e)}}var v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,"[object process]"==={}.toString.call(e.process)?A():m()?f():e.MessageChannel?p():s&&"onreadystatechange"in s.createElement("script")?_():h(),v.setImmediate=l,v.clearImmediate=c}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()};function r(e,t){this._id=e,this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("./node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e){var t;t=function(){return this}();try{t=t||Function("return this")()||(1,eval)("this")}catch(n){"object"==typeof window&&(t=window)}e.exports=t},"./static/js/al/modules/articles/article_common.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getAppropriateImage=r,t.preloadImage=s,t.mailruStatsPixel=l;{var n=t.ParagraphType={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectAudio:105};t.ResizableObjectTypes=[n.ObjectPhoto,n.ObjectGIF,n.ObjectVideo],t.ObjectResizeType={Normal:0,Float:1,Medium:2,Large:3}}function i(){return window.devicePixelRatio>=2}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.call(e[n],n,e[n])===!1)break;return e}function r(e,t,n){var r=[];if(o(e,function(e,t){n&&-1==["w","z","y","x","m","s"].indexOf(e)||r.push(t)}),!r.length)return[!1];r.sort(function(e,t){return e[1]-t[1]}),t*=i()?2:1;var a=r[r.length-1];return o(r,function(e,n){return n[1]>=t?(a=n,!1):void 0}),a}var a={};function s(e,t){if(a[e]===!0)return t&&t(),!0;if(isArray(a[e]))return a[e].push(t),!1;a[e]=[t];var n=new Image;return n.onload=function(){var t=a[e];a[e]=!0,o(t,function(e,t){t&&t()})},n.src=e,!1}function l(e,t){if(isObject(t)&&!isEmpty(t)){var n="https://vk-callback.go.mail.ru/longread_pxl?action="+e;o(t,function(e,t){n+="&"+e+"="+t});var i=new Image;i.src=n}}},"./static/js/al/modules/articles/article_view.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.initArticle=h,t.updateArticle=v,t.deinitArticle=g;var o=n("./static/js/al/modules/lib/imageproxy.js"),r=n("./static/js/al/modules/articles/article_common.js"),a=n("./static/js/al/modules/articles/article_view_carousel.js"),s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,A=void 0,m=void 0,f=void 0,p=void 0,_=void 0;function h(e,t){u=t||{},m=e,window.cur&&(window.cur.article=e),u.moderDeletePhoto=m.moderDeletePhoto,l=ge("article_view_"+e.owner_id+"_"+e.id),c=u.scrollNode||window,d=u.getScrollTop||function(){var e=document.scrollingElement||window.scrollNode||document.body;return e.scrollTop},s=gpeByClass("article_body",l)||gpeByClass("_article_layer",l),b(),y(),P(),w(),setTimeout(function(){c.click&&c.click(),c.focus()},10),window.onBodyResize=window.onBodyResize||function(){},window.cur&&cur.destroy.push(function(){g()}),!u.mobile&&window.AudioPlaylist&&m.audiosList&&m.audiosList.length>0&&(cur.articlePlaylist=new AudioPlaylist(AudioPlaylist.TYPE_TEMP,m.owner_id,"article_"+m.id),cur.articlePlaylist.mergeWith({list:m.audiosList}))}function v(){u.notFull=!1,y(),P(),S()}function g(){f&&(c.removeEventListener("scroll",f),f=!1),p&&(c.removeEventListener("scroll",p),p=!1),clearTimeout(_)}function w(){if(u.ga)if(window.dataLayer=window.dataLayer||[],window.gtag)gtag("config",u.ga,{page_location:window.location.href});else{var e=document.createElement("script");e.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+u.ga),e.setAttribute("async","true"),document.head.appendChild(e),window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",u.ga)}}function y(){each(geByClass("_article_unmute_button"),function(e,t){t.addEventListener("click",function(){var e=t.parentNode,n=geByTag1("video",e);n.muted=!n.muted,toggleClass(e,"article_object_unmuted",!n.muted)})}),each(geByTag("figure",l),function(e,t){var n=parseInt(domData(t,"type"));n==r.ParagraphType.ObjectPhoto&&a.initPhotoCarousel(t,u),u.mobile||n!=r.ParagraphType.ObjectPhoto||T(t)})}function b(){c.addEventListener("scroll",f=function(){S()},{passive:!0}),S()}function S(){var e={101:-2e3},t=d(),n=window.innerHeight,i=getXY(l)[1];each(geByTag("figure",l),function(o,r){var a=intval(domData(r,"done"));if(!a){var s=getH(r),l=getXY(r)[1]-i,c=intval(domData(r,"type")),u=void 0!==e[c]?e[c]:60,d=t+n-u>=l&&l+s-u>=t;a=C(d,c,r),a&&domData(r,"done",1)}})}function C(e,t,n){var a=!1;switch(t){case r.ParagraphType.ObjectPhoto:if(e){var s=geByTag1("img",n),l=getW(s)||u.width,c=domData(s,"baseurl");if(c)c=o.imageProxyURL(c,{size:l}),r.preloadImage(c,function(){removeClass(s,"article_object_photo__image_blur"),s.src=c});else{var d=domQuery1("[data-sizes]",n),A=JSON.parse(domData(d,"sizes"));A.forEach(function(e,t){if(!(t>3)){var n=r.getAppropriateImage(A[t],l,!0),o=i(n,1),a=o[0];r.preloadImage(a,function(){0==t&&(removeClass(s,"article_object_photo__image_blur"),s.src=a)})}})}a=!0}break;case r.ParagraphType.ObjectGIF:if(!u.mobile){var m=geByTag1("video",n);m?e?m.hasAttribute("autoplay")&&m.play():m.pause():a=!0}}return a}var k=void 0,E=void 0,M=void 0;function T(e){if(!u.noImageOpen){var t=geByTag1("img",e),n=domQuery1("[data-sizes]",e),o=JSON.parse(domData(n,"sizes")),a=r.getAppropriateImage(o[0],window.innerWidth,!0),c=i(a,3),d=c[0],m=c[1],f=c[2],p=I({width:m,height:f},{width:window.innerWidth,height:window.innerHeight}),_=getW(e)<p.width&&getH(e)<p.height;if(d&&_){var h=geByClass1("article_photo_carousel__controls",e)||t;addClass(h,"article_image_full_viewable");var v=data(e,"changePhotoFunction");h.addEventListener("click",function(){var t=intval(domData(e,"photo-carousel-index"));addClass(s,"article_no_scroll");var n=geByTag1("figcaption",e),i=se('<div class="article_full_view"><img class="article_full_view__image"></div>');n&&n.innerHTML&&i.appendChild(se('<div class="article_full_view__caption"><div class="article_full_view__caption_inner">'+n.innerHTML+"</div></div>")),o.length>1&&(toggleClass(M,"article_full_view__carousel",o.length>1),k=se('<div class="article_full_view__right"></div>'),i.appendChild(k),E=se('<div class="article_full_view__left"></div>'),i.appendChild(E),k.addEventListener("click",function(e){return t=Math.min(o.length-1,Math.max(0,t+1)),D(r,o,t),v&&v(1),cancelEvent(e)}),E.addEventListener("click",function(e){return t=Math.min(o.length-1,Math.max(0,t-1)),D(r,o,t),v&&v(-1),cancelEvent(e)})),M=se('<div class="article_full_view__counter"><div class="article_full_view__counter_text"></div><div class="article_full_view__close"></div></div>'),i.appendChild(M),o.length>1&&toggleClass(M,"article_full_view__carousel",o.length>1),l.appendChild(i),i.addEventListener("click",function(e){domClosest("article_full_view__caption_inner",e.target)||x()}),i.addEventListener("mousewheel",x),A=i;var r=geByTag1("img",i);D(r,o,t)})}}}var j=void 0;function D(e,t,n){if(toggleClass(E,"article_full_view__nav_hidden",0==n),toggleClass(k,"article_full_view__nav_hidden",n==t.length-1),t.length>1){var o=geByClass1("article_full_view__counter_text",M);o.innerHTML=getLang("global_article_carousel_counter").replace("{counter}",n+1).replace("{total}",t.length)}j=n;var a=r.getAppropriateImage(t[n],window.innerWidth,!0),s=i(a,3),l=s[0],c=s[1],u=s[2],d=I({width:c,height:u},{width:window.innerWidth,height:window.innerHeight}),A=!1,m=r.preloadImage(l,function(){if(j===n){A=!0,d.width&&isNumeric(d.width)?setStyle(e,{width:d.width,height:d.height}):setStyle(e,{width:null,height:null}),e.src=l,removeClass(e,"article_full_view__image_blurred");for(var o=n;o<Math.min(n+3,t.length);o++){var a=r.getAppropriateImage(t[o],window.innerWidth,!0),s=i(a,1),c=s[0];r.preloadImage(c)}}});if(m)removeClass(e,"article_full_view__image_blurred");else{var f=r.getAppropriateImage(t[n],200,!0),p=i(f,1),_=p[0];r.preloadImage(_,function(){j===n&&(A||(setStyle(e,{width:d.width,height:d.height}),e.src=_))}),addClass(e,"article_full_view__image_blurred")}}function x(){return A?(re(A),s&&removeClass(s,"article_no_scroll"),A=!1,!0):!1}function I(e,t){var n=e.width/e.height,i=t.width/t.height,o={};return n>i?(o.width=Math.min(t.width,e.width),o.height=e.height*(o.width/e.width)):(o.height=Math.min(t.height,e.height),o.width=o.height*n),o}function P(){if(!u.notFull){var e=getH(l),t=getXY(l)[1]-scrollGetY(),n=window.innerHeight,i=Date.now(),o=-1,a=void 0,s=[];f(0);function A(){return Math.round((Date.now()-i)/1e3)}function f(e){if(!(o>=e)){for(var t=o+1;e>=t;t++)s.push(t);if(o=e,clearTimeout(a),a=setTimeout(h,100),3==e&&m.ttr){var n=m.ttr-A();n>0&&(_=setTimeout(function(){document.hidden||(o=4,s=[o],h())},1e3*n))}}}function h(){s.length&&(ajax.post(window.isMVK?"article.php":"al_articles.php",{act:"stats",scroll:s.join(","),spent:A(),hash:m.access_hash,article_owner_id:m.owner_id,article_id:m.id,is_web_view:u.isWebView?1:0,post_id:u.postId,ref:window.cur?window.cur.module:""}),s.forEach(function(e){r.mailruStatsPixel("scroll_"+e,m.mailruStatsData)}),s=[])}function v(){var i=d();i>0&&f(1);for(var o=1;4>o;o++)i+3*n/4>t+e*o/3&&f(o+1);i+n>e-20&&f(4)}c.addEventListener("scroll",p=v,{passive:!0}),v()}}window.initArticle=h,window.deinitArticle=g,window.updateArticle=v,window.articleCloseImageFullSize=x},"./static/js/al/modules/articles/article_view_carousel.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.initPhotoCarousel=r;var o=n("./static/js/al/modules/articles/article_common.js");function r(e,t){var n=domQuery1("[data-sizes]",e),i=JSON.parse(domData(n,"sizes")),o=(domData(n,"media-links")||"").split(",");if(!(i.length<=1||domData(e,"carousel-inited")))if(domData(e,"carousel-inited",1),t.mobile)a(i,e);else{var r=s(i,e,t,o);data(e,"changePhotoFunction",r)}}function a(e,t){var n=geByClass1("article_photo_carousel__controls",t),r=geByClass1("article_photo_carousel__counter",t),a=domData(r,"counter-lang")||getLang("global_article_carousel_counter"),s=getSize(geByClass1("article_figure_content",t)),l=domPN(geByTag1("img",t)),c=0,u=void 0,d=0,A=void 0,m=void 0,f=0,p=!1,_=!1,h=!1;n.addEventListener("touchstart",function(e){m=e.touches[0].pageX,A=e.touches[0].pageY});var v=!1,g=void 0;n.addEventListener("touchmove",function(n){if(!_&&(Math.abs(n.touches[0].pageY-A)>5||p))return void(p=!0);if(!h&&(d=n.touches[0].pageX-m,!(Math.abs(d)<10)||v)){_||window.addEventListener("touchmove",g=function(e){return cancelEvent(e)},{passive:!1}),_=!0,v=!0;var r=Math.min(e.length-1,Math.max(0,c+(0>d?1:-1))),a=0===r&&0===c,w=r===e.length-1&&c===e.length-1;if(f!==r)if(f=r,re(u),a||w)u=!1;else{var y=o.getAppropriateImage(e[r],s[0],!0),b=i(y,1),S=b[0];u=ce("div",{innerHTML:'<img src="'+S+'">'}),setStyle(domFC(u),{"max-width":s[0],"max-height":s[1],width:"initial"}),setStyle(u,{transform:"scale(1.05)",opacity:0}),domInsertBefore(u,domPN(geByTag1("img",t)))}var C=Math.abs(d),k=0;k=a||w?.2*d:d,setStyle(l,{transform:"translateX("+k+"px)"}),u&&setStyle(u,{transform:"scale("+Math.max(1,1.05-5e-4*C)+")",opacity:Math.min(1,.01*C)})}}),n.addEventListener("touchend",function(){v=!1,p=!1,h=!0,_=!1,g&&window.removeEventListener("touchmove",g);var t=0>d,n=Math.abs(d)<50||!u;if(!n){c=f;for(var A=c;A<Math.min(c+3,e.length);A++){var m=o.getAppropriateImage(e[A],s[0],!0),w=i(m,1),y=w[0];o.preloadImage(y)}}r.innerHTML=a.replace("{counter}",c+1).replace("{total}",e.length),addClass(l,"with_transition"),addClass(u,"with_transition"),setTimeout(function(){n?(setStyle(l,{transform:"translateX(0px)",opacity:1}),setStyle(u,{transform:"scale(1.05)",opacity:0})):(setStyle(l,{transform:"translateX("+(t?"-500px":"500px")+")"}),setStyle(u,{transform:"scale(1)",opacity:1}))}),setTimeout(function(){h=!1,f=!1,removeClass(l,"with_transition"),removeClass(u,"with_transition"),n?re(u):(re(l),l=u),u=!1},150)})}function s(e,t,n,r){var a=0,s=geByClass1("article_photo_carousel__controls",t),l=geByClass1("article_photo_carousel__counter",t),c=domData(l,"counter-lang")||getLang("global_article_carousel_counter"),u=getSize(geByClass1("article_figure_content",t)),d=domPN(geByTag1("img",t)),A=geByClass1("article_photo_carousel__left",t),m=geByClass1("article_photo_carousel__right",t);function f(s){a+=s,a=Math.min(e.length-1,Math.max(0,a));var f=o.getAppropriateImage(e[a],u[0],!0),p=i(f,1),_=p[0],h="";if(n.moderDeletePhoto){var v=r[a];h='<a href="'+v+'" target="_blank" class="flat_button article_photo_moder_open">\u041e\u0442\u043a\u0440\u044b\u0442\u044c</a>'}var g=0>s?"fading_in_left":"fading_in_right",w=se('<div class="'+g+'"><img src="'+_+'">'+h+"</div>");setStyle(domFC(w),{"max-width":u[0],"max-height":Math.ceil(u[1])+1,width:"initial"}),domInsertAfter(w,domPN(geByTag1("img",t)));var y=d;setTimeout(function(){removeClass(w,"fading_in_left"),removeClass(w,"fading_in_right"),addClass(y,"fading_out")}),setTimeout(function(){re(y)},150);for(var b=a;b<Math.min(a+3,e.length);b++){var S=o.getAppropriateImage(e[b],u[0],!0),C=i(S,1),k=C[0];o.preloadImage(k)}d=w,l.innerHTML=c.replace("{counter}",a+1).replace("{total}",e.length),toggle(A,a>0),toggle(m,a<e.length-1),domData(t,"photo-carousel-index",a)}var p=void 0;function _(e){clearTimeout(p),toggleClass(s,"article_photo_carousel__mouse_idle",e)}var h=browser.msie&&intval(browser.version)<=11;return m.addEventListener("click",function(e){return f(1),h||t.dispatchEvent(new Event("mousemove")),cancelEvent(e)}),A.addEventListener("click",function(e){return f(-1),h||t.dispatchEvent(new Event("mousemove")),cancelEvent(e)}),t.addEventListener("mousemove",function(){_(!1),addClass(s,"article_photo_carousel__mouse_over"),clearTimeout(p),p=setTimeout(function(){_(!0)},1e3)}),t.addEventListener("mouseleave",function(){clearTimeout(p),removeClass(s,"article_photo_carousel__mouse_over"),removeClass(s,"article_photo_carousel__mouse_idle")}),f}},"./static/js/al/modules/audioplayer/audio_unmask_source.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.audioUnmaskSource=r;var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",i={v:function(e){return e.split("").reverse().join("")},r:function(e,t){e=e.split("");for(var i,o=n+n,r=e.length;r--;)i=o.indexOf(e[r]),~i&&(e[r]=o.substr(i-t,1));return e.join("")},s:function(e,t){var n=e.length;if(n){var i=s(e,t),o=0;for(e=e.split("");++o<n;)e[o]=e.splice(i[n-1-o],1,e[o])[0];e=e.join("")}return e},i:function(e,t){return i.s(e,t^vk.id)},x:function(e,t){var n=[];return t=t.charCodeAt(0),each(e.split(""),function(e,i){n.push(String.fromCharCode(i.charCodeAt(0)^t))}),n.join("")}};function o(){return window.wbopen&&~(window.open+"").indexOf("wbopen")}function r(e){if(!o()&&~e.indexOf("audio_api_unavailable")){var t=e.split("?extra=")[1].split("#"),n=""===t[1]?"":a(t[1]);if(t=a(t[0]),"string"!=typeof n||!t)return e;n=n?n.split(String.fromCharCode(9)):[];for(var r,s,l=n.length;l--;){if(s=n[l].split(String.fromCharCode(11)),r=s.splice(0,1,t)[0],!i[r])return e;t=i[r].apply(null,s)}if(t&&"http"===t.substr(0,4))return t}return e}function a(e){if(!e||e.length%4==1)return!1;for(var t,i,o=0,r=0,a="";i=e.charAt(r++);)i=n.indexOf(i),~i&&(t=o%4?64*t+i:i,o++%4)&&(a+=String.fromCharCode(255&t>>(-2*o&6)));return a}function s(e,t){var n=e.length,i=[];if(n){var o=n;for(t=Math.abs(t);o--;)t=(n*(o+1)^t+o)%n,i[o]=t}return i}},"./static/js/al/modules/audioplayer/player_flash.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=t.PlayerFlash=function(){function e(t){o(this,e),this.opts=t||{},window._flashVoiceInstance=this}return e.prototype.fadeVolume=function(e,t){return this.setVolume(e),t()},e.prototype.destroy=function(){re(e.PLAYER_EL_ID)},e.prototype.onReady=function(t){if(this._player)return t(!0);if(this._player===!1)return t(!1);this._onReady=t;var n={url:"/swf/audio_lite.swf",id:"flash_voice_player",height:2},i={swliveconnect:"true",allowscriptaccess:"always",wmode:"opaque"},o={onPlayFinish:"VoicePlayerFlash.onAudioFinishCallback",onLoadProgress:"VoicePlayerFlash.onAudioLoadProgressCallback",onPlayProgress:"VoicePlayerFlash.onAudioProgressCallback"};ge(e.PLAYER_EL_ID)||document.body.appendChild(ce("div",{id:e.PLAYER_EL_ID,className:"fixed"}));var r=this;renderFlash(e.PLAYER_EL_ID,n,i,o)&&setTimeout(function(){r._checkFlashLoaded()},50)},e.prototype.setUrl=function(e,t){return this._trackOptions={},t&&"object"===("undefined"==typeof t?"undefined":n(t))&&(this._trackOptions=t,t=t.callback),this._url==e?void(t&&t(!0)):(this._url=e,this._player&&this._player.loadAudio(e),void(t&&t(!0)))},e.prototype.setVolume=function(e){this._player&&this._player.setVolume&&this._player.setVolume(e)},e.prototype.play=function(){this._player&&this._player.playAudio()},e.prototype.seek=function(e){var t=(this._total||0)*e;this._player&&this._player.playAudio(t)},e.prototype.pause=function(){this._player&&this._player.pauseAudio()},e.prototype.isFullyLoaded=function(){return!1},e.prototype.getPlayedTime=function(){return 0},e.prototype.getCurrentProgress=function(){return this._currProgress||0},e.prototype.getCurrentBuffered=function(){return this._currBuffered||0},e.prototype.stop=function(){this._player&&this._player.stopAudio()},e.prototype._checkFlashLoaded=function(){var e=ge("flash_voice_player");if(this._checks=this._checks||0,this._checks++,this._checks>10){this._player=!1;var t=this._onReady;return t&&t(!1)}if(e&&e.paused){this._player=e;var t=this._onReady;t&&t(!0),this._onReady=null}else{var n=this;setTimeout(function(){n._checkFlashLoaded()},100)}},e.onAudioFinishCallback=function(){var e=window._flashVoiceInstance;e.opts.onEnd&&e.opts.onEnd()},e.onAudioProgressCallback=function(e,t){var n=window._flashVoiceInstance;t&&(n._total=t,n._currProgress=e/t,n.opts.onProgressUpdate&&n.opts.onProgressUpdate(n._currProgress))},e.onAudioLoadProgressCallback=function(e,t){var n=window._flashVoiceInstance;n._currBuffered=e/t,n.opts.onBufferUpdate&&n.opts.onBufferUpdate(n._currBuffered)},i(e,[{key:"type",get:function(){return"flash"}},{key:"loaded",get:function(){return!!this._player}}]),e}();window.VoicePlayerFlash=r,r.PLAYER_EL_ID="flash_voice"},"./static/js/al/modules/audioplayer/player_html5.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",a=t.PlayerHTML5=function(){e.isSupported=function(e){var t=document.createElement("audio");if(t.canPlayType){e=e||'audio/mpeg; codecs="mp3"';var n=t.canPlayType(e),i=n.replace(/no/,"");return!!i}return!1};function e(t){o(this,e),this.opts=t||{},this._trackOptions={},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}return e.prototype.destroy=function(){},e.prototype.getPlayedTime=function(){for(var e=this._currentAudioEl.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t},e.prototype._setAudioNodeUrl=function(e,t){window.data&&data(e,"setUrlTimesetUrlTime",t==r?0:vkNow()),e.src=t},e.prototype._createAudioNode=function(e){var t=new Audio,n=this;return this.opts.onBufferUpdate&&addEvent(t,"progress",function(){n._currentAudioEl==t&&n.opts.onBufferUpdate(n.getCurrentBuffered());{var e=t.buffered;e.length}1==e.length&&0==e.start(0)&&e.end(0)==t.duration&&(t._fullyLoaded=!0)}),addEvent(t,"stalled",function(){n._currentAudioEl==t&&n._isInvalidDuration()&&n._currentAudioEl.currentTime>=n.duration-1&&n._currentAudioEl.dispatchEvent(new Event("ended"))}),this.opts.onProgressUpdate&&addEvent(t,"timeupdate",function(){n._currentAudioEl==t&&n.opts.onProgressUpdate(n.getCurrentProgress())}),this.opts.onEnd&&addEvent(t,"ended",function(){n._currentAudioEl==t&&n.opts.onEnd()}),this.opts.onSeeked&&addEvent(t,"seeked",function(){n._currentAudioEl==t&&n.opts.onSeeked()}),this.opts.onSeek&&addEvent(t,"seeking",function(){n._currentAudioEl==t&&n.opts.onSeek()}),addEvent(t,"error",function(){n._prefetchAudioEl==t?n._prefetchAudioEl=n._createAudioNode():n._currentAudioEl==t&&n.opts.onFail&&n.opts.onFail()}),addEvent(t,"canplay",function(){if(window.data){var e=data(t,"setUrlTime");e&&(cur.audioLoadTimings=cur.audioLoadTimings||[],cur.audioLoadTimings.push(vkNow()-e),data(t,"setUrlTime",0))}n._prefetchAudioEl==t,n._currentAudioEl==t&&(n.opts.onCanPlay&&n.opts.onCanPlay(),n._seekOnReady&&(n.seek(n._seekOnReady),n._seekOnReady=!1))}),e&&(this._setAudioNodeUrl(t,e),t.preload="auto",t.volume=this._volume||1,t.load()),this._audioNodes.push(t),t},e.prototype.onReady=function(e){e(!0)},e.prototype.prefetch=function(e){this._prefetchAudioEl&&this._setAudioNodeUrl(this._prefetchAudioEl,r),this._prefetchAudioEl=this._createAudioNode(e)},e.prototype.seek=function(e){var t=this._currentAudioEl;this.duration?t.currentTime=this.duration*e:this._seekOnReady=e},e.prototype.setVolume=function(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e},e.prototype._isInvalidDuration=function(){var e=this._currentAudioEl;return isNaN(e.duration)||1/0==e.duration||0==e.duration},e.prototype.getCurrentProgress=function(){var e=this._currentAudioEl;return this.duration?Math.max(0,Math.min(1,e.currentTime/this.duration)):0},e.prototype.getCurrentBuffered=function(){var e=this._currentAudioEl;return e&&e.buffered.length?Math.min(1,e.buffered.end(0)/e.duration):0},e.prototype.isFullyLoaded=function(){return this._currentAudioEl._fullyLoaded},e.prototype.setUrl=function(t,i){var o=this._currentAudioEl;if(this._seekOnReady=!1,this._trackOptions={},i&&"object"===("undefined"==typeof i?"undefined":n(i))&&(this._trackOptions=i,i=i.callback),o.src==t)return this.opts.onCanPlay&&this.opts.onCanPlay(),i&&i(!0);if(this._prefetchAudioEl&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING)if(this._prefetchAudioEl.src==t){this._currentAudioEl.pause(0),this._setAudioNodeUrl(this._currentAudioEl,r);var a=this;this._prefetchAudioEl.readyState>=e.STATE_HAVE_FUTURE_DATA&&setTimeout(function(){a.opts.onCanPlay&&a.opts.onCanPlay()}),o=this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=!1}else this._prefetchAudioEl.src&&this._setAudioNodeUrl(this._prefetchAudioEl,r);return o.src!=t&&(this._setAudioNodeUrl(o,t),o.load()),i&&i(!0)},e.prototype.play=function(t){this._prefetchAudioEl.src==t&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING&&(this._setAudioNodeUrl(this._currentAudioEl,r),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=this._createAudioNode(),this.opts.onCanPlay&&this.opts.onCanPlay());var n=this._currentAudioEl;if(n.src)try{n.play()}catch(i){debugLog("Audio: url set failed (html5 impl)")}},e.prototype.pause=function(){var e=this._currentAudioEl;e.src&&e.pause()},e.prototype.stop=function(){var e=this._currentAudioEl;this._setAudioNodeUrl(e,r)},e.prototype._setFadeVolumeInterval=function(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){var t=new Blob(["         var interval;         onmessage = function(e) {           clearInterval(interval);           if (e.data == 'start') {             interval = setInterval(function() { postMessage({}); }, 20);           }         }       "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(t))}catch(n){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)},e.prototype.fadeVolume=function(e,t){e=Math.max(0,Math.min(1,e));var n=this._currentAudioEl,i=0;if(i=e<n.volume?-.04:.001,Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),t&&t();var o=n.volume;this._setFadeVolumeInterval(function(){i>0&&(i*=1.2),o+=i;var n=!1;return(n=0>i?e>=o:o>=e)?(this.setVolume(e),this._setFadeVolumeInterval(),t&&t()):void this.setVolume(o)}.bind(this))},i(e,[{key:"type",get:function(){return"html5"}},{key:"loaded",get:function(){return!0}},{key:"duration",get:function(){var e=this._currentAudioEl,t=isNaN(e.duration)||1/0==e.duration?0:e.duration;return!t&&this._trackOptions.duration&&(t=parseInt(this._trackOptions.duration)),t}}]),e}();a.STATE_HAVE_NOTHING=0,a.STATE_HAVE_FUTURE_DATA=3,a.HAVE_ENOUGH_DATA=4,a.AUDIO_EL_ID="ap_audio"},"./static/js/al/modules/audioplayer/voice_message_player.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceMessagePlayer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("./static/js/al/modules/audioplayer/player_html5.js"),r=n("./static/js/al/modules/audioplayer/player_flash.js"),a=n("./static/js/al/modules/components/ui/slider.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}{var l,c=!1,u='<div class="audio-msg-player audio-msg-track"><button class="audio-msg-track--btn"></button><div class="audio-msg-track--duration"></div><div class="audio-msg-track--wave-wrapper"><div class="audio-msg-track--slider"></div></div></div>';t.VoiceMessagePlayer=function(){function e(){var t=this;s(this,e),this._reattach=!1,this._audioEl=null,this._playing=!1,this._timer=null,this._duration=0,this._detaching=!1;var n={onEnd:function(){t.detach()},onFail:function(){n.onEnd()},onCanPlay:function(){},onProgressUpdate:function(e){t._updateProgress(e)}};l=!1,o.PlayerHTML5.isSupported()?(o.PlayerHTML5.isSupported('audio/ogg;codecs="opus"')&&!o.PlayerHTML5.isSupported('audio/ogg;codecs="codec_check"')&&(l=!0),this._impl=new o.PlayerHTML5(n)):browser.flash&&window.renderFlash&&(this._impl=new r.PlayerFlash(n)),this.onPlayPause=function(e){return cancelEvent(e),t.toggle()},this.onDurationClick=function(e){t.durationType=!t.durationType,cancelEvent(e)},this._initEvents()}return e.prototype._updateProgress=function(e){this._durationEl&&(this._durationEl.innerHTML=this.durationType?"-"+formatTime(Math.round(this._duration*(1-e))):formatTime(Math.round(this._duration*e))),this._progressSlider&&this._progressSlider.setValue(e)},e.prototype._initInterface=function(){var e=this;this._el=ce("div",{innerHTML:u}).firstChild,window.getLang&&attr(this._el,"aria-label",getLang("mail_audio_message")),this._playBtn=geByClass1("audio-msg-track--btn",this._el),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),this._durationEl=geByClass1("audio-msg-track--duration",this._el),this._durationEl.innerHTML=formatTime(this._duration),this._progressSlider=new a.Slider(geByClass1("audio-msg-track--slider",this._el),{value:0,size:0,hintClass:"audio_player_hint",formatHint:function(t){return formatTime(Math.round(t*e._duration))},onEndDragging:function(t){e._impl.seek(t)}});var t=geByClass1("audio-msg-track--wave-wrapper",this._audioEl).children[0];geByClass1("slider_slide",this._el).appendChild(t.cloneNode(!0)),geByClass1("slider_amount",this._el).appendChild(t.cloneNode(!0)),addEvent(this._playBtn,"click",this.onPlayPause),addEvent(this._durationEl,"click",this.onDurationClick),this._audioEl.parentNode.appendChild(this._el)},e.prototype._destroyInterface=function(){hide(this._el),this._audioEl.parentNode.removeChild(this._el),removeEvent(this._playBtn,"click",this.onPlayPause),this._progressSlider&&(this._progressSlider.destroy(),this._progressSlider=null),this._playBtn=null,this._durationEl=null,this._el=null},e.prototype.attachTo=function(e){var t=this;if(this._audioEl!=e){null!=this._audioEl&&(this._reattach=!0),this.detach(),this._audioEl=e,addClass(this._audioEl,"audio-msg-track_player-attached"),this._duration=attr(e,"data-duration"),this._initInterface();var n=this._audioEl.id.split("_");if(n&&n.length>1&&(this._owner_id=n[1]),this._reattach=!1,!this._impl.loaded)return new Promise(function(n){t._impl.onReady(function(){t._impl.setUrl(attr(e,l?"data-ogg":"data-mp3"),{duration:t._duration,callback:n})})});this._impl.setUrl(attr(e,l?"data-ogg":"data-mp3"),{duration:this._duration})}return!0},e.prototype.detach=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;if(this._audioEl&&this._el&&!this._detaching){if(e&&this.isAttached())return;this._detaching=!0,this.stop(),this._destroyInterface(),removeClass(this._audioEl,"audio-msg-track_player-attached"),this._audioEl=null}this._detaching=!1},e.prototype.play=function(){this._audioEl&&(this._reattach||e.pauseGlobalMedia(),addClass(this._el,"audio-msg-track_playing"),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_pause")),this._playing=!0,this._createTimer(),this._owner_id&&statlogsValueEvent("audio_message_play",this._owner_id),this._impl.play())},e.prototype.pause=function(){this._audioEl&&(!this._reattach&&this._playing&&e.resumeGlobalMedia(),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),removeClass(this._el,"audio-msg-track_playing"),this._playing=!1,this._impl.pause(),this._killTimer())},e.prototype.stop=function(){this.pause(),this._impl.stop()},e.prototype.toggle=function(){this._playing?this.pause():this.play()},e.prototype._createTimer=function(){var e=this;this._duration>0&&(this._killTimer(),this._timer=setInterval(function(){var t=e._impl.getCurrentProgress();e._updateProgress(t)},100))},e.prototype._killTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype._initEvents=function(){var e=this;window.ap?ap.on(this,AudioPlayer.EVENT_PLAY,function(){delete ap.pausedByMsg,e.pause()}):window.audio&&audio.onPlay(function(){delete audio.pausedByMsg,e.pause()}),window.Notifier&&(Notifier.addRecvClbk("audio_start","audio_msg",function(){e.pause()}),Notifier.addRecvClbk("video_start","audio_msg",function(){e.pause()}))},e.prototype.isAttached=function(){if(this._audioEl){for(var e=this._audioEl;e.parentNode;)e=e.parentNode;return!!e.body}return!1},e.pauseGlobalMedia=function(){window.Notifier&&(c=!0,Notifier.lcSend("video_start")),window.ap&&ap.isPlaying()?(ap.pause(),ap.pausedByMsg=!0):window.audio&&audio.playing&&audio.playing()&&(audio.pause(),audio.pausedByMsg=!0)},e.resumeGlobalMedia=function(){window.Notifier&&c&&(c=!1,Notifier.lcSend("video_hide")),window.ap&&ap.pausedByMsg?(ap.play(),delete ap.pausedByMsg):window.audio&&audio.playing&&audio.pausedByMsg&&(audio.play(),delete audio.pausedByMsg)},i(e,[{key:"type",get:function(){return this._impl.type}},{key:"durationType",get:function(){return window.AudioPlayer?!!ls.get(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE):"1"==lsGet("audio_time_left")},set:function(e){window.AudioPlayer?ls.set(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE,!!e):lsSet("audio_time_left",e?"1":"0")}}]),e}()}},"./static/js/al/modules/components/recorder/algorithms/average.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AverageAlgorithm=function(){function e(){n(this,e),this.clear()}return e.prototype.push=function(e){this._count++,this._accum+=e},e.prototype.get=function(){return this._accum/this._count},e.prototype.clear=function(){this._count=0,this._accum=0},e}()},"./static/js/al/modules/components/recorder/algorithms/peak.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.PeakAlgorithm=function(){function e(){n(this,e),this.clear()}return e.prototype.push=function(e){this._max=Math.max(this._max,Math.abs(e))},e.prototype.get=function(){return this._max},e.prototype.clear=function(){this._max=0},e}()},"./static/js/al/modules/components/recorder/algorithms/quad.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.QuadAlgorithm=function(){function e(){n(this,e),this.clear()}return e.prototype.push=function(e){this._count++,this._accum+=e,this._accum_q+=e*e},e.prototype.get=function(){return 1==this._count?this._accum:Math.sqrt((this._accum_q-this._accum*this._accum/this._count)/this._count)},e.prototype.clear=function(){this._count=0,this._accum=0,this._accum_q=0},e}()},"./static/js/al/modules/components/recorder/resampler.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Resampler=void 0,t.fastResample=c;var i=n("./static/js/al/modules/components/recorder/algorithms/average.js"),o=n("./static/js/al/modules/components/recorder/algorithms/peak.js"),r=n("./static/js/al/modules/components/recorder/algorithms/quad.js");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s={avg:i.AverageAlgorithm,peak:o.PeakAlgorithm,quad:r.QuadAlgorithm},l=t.Resampler=function(){function e(t){a(this,e),this._normalizeAlgorithm=!1,s[t.normalizeAlgorithm]&&(this._normalizeAlgorithm=new s[t.normalizeAlgorithm]),this._srcSampleRate=parseInt(t.srcSampleRate||0),this._dstSampleRate=parseInt(t.dstSampleRate||0),this._truncateTo=1,"undefined"!=typeof t.truncateTo&&(this._truncateTo=t.truncateTo),this._sampleRate=this._dstSampleRate>0?this._srcSampleRate/this._dstSampleRate:0,s[t.algorithm]||(t.algorithm="peak"),this._algorithm=new s[t.algorithm],this._sampleCount=0,this._data=[]}return e.prototype.push=function(e){if(this._sampleRate<=0)return[];for(var t=[],n=void 0,i=0;i<e.length;i++)if(this._truncateTo>0&&(e[i]=Math.min(this._truncateTo,Math.abs(e[i]))),this._sampleCount+=1,this._sampleCount>=this._sampleRate)for(;this._sampleCount>=this._sampleRate;)this._sampleCount-=this._sampleRate,this._sampleCount<=.8&&this._algorithm.push(e[i]),n=this._algorithm.get(),t.push(n),this._normalizeAlgorithm&&this._normalizeAlgorithm.push(n),this._algorithm.clear(),this._sampleCount>.2&&this._algorithm.push(e[i]);else this._algorithm.push(e[i]);if(this._normalizeAlgorithm){var o=this._normalizeAlgorithm.get();if(this._normalizeAlgorithm.clear(),o>0)for(var r=0;r<t.length;r++)t[r]=t[r]/o,this._truncateTo>0&&(t[r]=Math.min(this._truncateTo,Math.abs(t[r])))}return t},e}();function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"peak";return new l({srcSampleRate:e.length,dstSampleRate:t,normalizeAlgorithm:n,truncateTo:0}).push(e)}},"./static/js/al/modules/components/ui/slider.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=35;function r(e,t){return Math.log(t)/Math.log(e)}"undefined"==typeof window.isTouch&&(window.isTouch=!1);t.Slider=function(){function e(t,n){if(i(this,e),!t)throw new Error("No element was provided for Slider");t=ge(t),this.options=n||{size:1},"undefined"==typeof this.options.logfbase&&(this.options.logfbase=o),this.options.backValue=this.options.backValue||0;var r=100*this.options.backValue,a=this.options.withBackLine?'<div class="slider_back" style="width:'+r+'%"></div>':"",s='<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> '+a+' <div class="slider_amount"></div> <div class="slider_handler"></div> </div>';this._el=ce("div",{innerHTML:s,className:"slider",id:t.getAttribute("id")||""});var l=this;if(t.classList)for(var c=t.classList,u=0,d=c.length;d>u;u++)addClass(this._el,c[u]);else this._el.className=t.className;each(this._el.attributes,function(e,t){("id"!=t.name||"class"!=t.name)&&l._el.setAttribute(t.name,t.value)}),t.parentNode.replaceChild(this._el,t),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=debounce(this._onValueChange,this.options.debounce)),!isTouch&&n.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,isTouch?"touchstart":"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),addEvent(this._el,"click",cancelEvent),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}return e.prototype.toggleLoading=function(e){e=!!e,toggle(this._progressEl,e),setStyle(this._progressEl,"opacity",e?1:0)},e.prototype.destroy=function(){!isTouch&&this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown));var e=window.re||window.remove;e(this._el),e(this._currHintEl)},e.prototype._updateHint=function(e,t){this._currHintEl||(this._currHintEl=ce("div",{className:"slider_hint",id:"slider_hint"}),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl));var n=this._getPos(),i=Math.round((e.pageX||e.touches[0].pageX)-n[0]),o=this._width;if(i=t?Math.min(Math.max(0,i),o):i,i>=0&&o>=i){var r=i/o;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,r):r;var a=this._currHintEl.getBoundingClientRect();setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+i-(a.right-a.left)/2,top:this._slideEl.offsetTop-(a.bottom-a.top)-10}),!t&&this._toggleHint(!0)}else!t&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)},e.prototype._toggleHint=function(e){toggleClass(this._currHintEl,"visible",e)},e.prototype._onMouseOver=function(t){e._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(t)},e.prototype._onMouseLeave=function(){hasClass(this._el,"active")||this._toggleHint(!1)},e.prototype._onMouseDown=function(t){(0==t.button||t.touches)&&(delete cur._sliderMouseUpNowEl,addEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._onMouseMove(t),e._currenSliderDrag=this,addClass(this._el,"active"),cancelEvent(t))},e.prototype._onMouseUp=function(t){cur._sliderMouseUpNowEl=this._el,removeEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove),removeEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp),this._onValueChange(),removeClass(this._el,"active"),e._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue),cancelEvent(t)},e.prototype._onMouseMove=function(e){var t=this._getPos(),n=t[0];n="undefined"!=typeof e.touches&&e.touches.length>0?e.touches[0].pageX:e.pageX,n=Math.max(n,t[0]),n=Math.min(n,t[0]+this._width),n-=t[0],this.setValue(n/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(e,!0),cancelEvent(e)},e.prototype._getPos=function(){return this._slidePos=getXY(this._slideEl)},e.prototype._logf=function(e){if(!this.options.log)return e;var t=this.options.logfbase;return(Math.pow(t,e)-1)/(t-1)},e.prototype._unlogf=function(e){if(!this.options.log)return e;var t=this.options.logfbase;return r(t,1+e*(t-1))},e.prototype.setValue=function(e,t,n){if(!hasClass(this._el,"active")||n){var i=n?this._logf(e):e;if(this._currValue!=i){this._currValue=i;var o=n?e:this._unlogf(e);o=100*o+"%",setStyle(this._amountEl,{width:o}),setStyle(this._handlerEl,{left:o}),!t&&this._onValueChange()}}},e.prototype.setBackValue=function(e){toggleClass(this._backEl,"slider_back_transition",e>this._backValue),this._backValue=e;var t=100*e+"%";setStyle(this._backEl,{width:t})},e.prototype._onValueChange=function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))},n(e,[{key:"_width",get:function(){if(!this._widthCache){var e=this._el.getBoundingClientRect();this._widthCache=e.right-e.left}return this._widthCache}}]),e}()},"./static/js/al/modules/entries/voice_message_player.js":function(e,t,n){var i=n("./static/js/al/modules/audioplayer/voice_message_player.js"),o=n("./static/js/al/modules/components/recorder/resampler.js"),r=null;function a(e){for(var t=geByClass("audio-msg-track--wave-wrapper",e),n=0,i=0;i<t.length;i++){try{n=parseInt(window.getComputedStyle(t[i],null).getPropertyValue("width"))}catch(o){n=parseInt(t[i].currentStyle.width)}if(n>0)break}return n}function s(e,t){t=Math.round(t),e.length!=t&&(e=o.fastResample(e,t));for(var n="",i=0,r=0;r<e.length;r++)i=Math.floor(10*e[r]*.95),0==i&&(i=.5),n+="M"+(3*r+1)+","+(10-i)+"v"+2*i+"Z";return'<svg class="audio-msg-track--wave" width="'+3*e.length+'px"><path d="'+n+'"></path></svg>'}function l(){for(var e=geByClass("audio-msg-track"),t=0;t<e.length;t++){var n=attr(e[t],"data-wave");hasClass(e[t],"audio-msg-player")&&t>0&&(n=attr(e[t-1],"data-wave"));var i=a(e[t]);if(n&&i){n=n.split(",");for(var o=geByClass("audio-msg-track--wave",e[t]),r=s(n,i/3),l=0;l<o.length;l++){var c=ce("div",{innerHTML:r}).firstChild;o[l].parentNode.replaceChild(c,o[l])}}}}addEvent(window,"orientationchange",function(){return setTimeout(l,500)}),window.mail&&window.mail.onMessagesRepainted&&(onDOMReady(l),window.mail.onMessagesRepainted(l));function c(){return r||(r=new i.VoiceMessagePlayer),r}window.AudioMessagePlayer={loaded:!0,togglePlay:function(e){var t=c(),n=t.attachTo(e);n===!0?t.play():n.then(function(){t.play()})},detachPlayer:function(e){var t=c();t.detach(e)},pauseGlobalMedia:function(){i.VoiceMessagePlayer.pauseGlobalMedia()},resumeGlobalMedia:function(){i.VoiceMessagePlayer.resumeGlobalMedia()},redrawWaves:l,getWave:s};try{stManager.done("voice_message_player.js")}catch(u){}},"./static/js/al/modules/lib/imageproxy.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.imageProxyURL=a;var i=window,o=i.each,r=i.intval;function a(e,t){var n=[];return o(t,function(e,t){switch(e){case"size":t=s(t)}t&&n.push(e+"="+t)}),n.length?e+"&"+n.join("&"):e}function s(e){var t=(""+e).split("x"),i=n(t,2),o=i[0],r=i[1];return o=o?l(o):"",r=r?l(r):"",o+"x"+r}function l(e){return e>0&&1>e?Math.round(100*e)/100:r(e)}},"./static/js/al/modules/lib/random.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.random=i;var n=(t.MAX_SAFE_INTEGER=9007199254740991,t.MAX_INTERGER=2147483647);function i(){try{if(window.crypto){var e=new Int32Array(1);return crypto.getRandomValues(e),Math.abs(e.reduce(function(e,t){return e+t}))}}catch(t){}return intval(rand(0,n).toFixed(0))}},"./static/js/al/modules/lib/sw_client.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}{var i="sw",o="/js/cmodules/sw/sw.js",r="/";t.SWClient=function(){function e(){n(this,e),this.registration=null,this._handlers=[]}return e.addVersion=function(e){return vk&&vk.sw_version?e+"?v="+vk.sw_version:e},e.isSupported=function(){return"serviceWorker"in navigator},e.prototype.register=function(){return e.isSupported()?navigator.serviceWorker.register(e.addVersion(o),{scope:r}).then(this._onactive.bind(this)).then(function(e){return this.registration||(this.registration=e,this._addEventListener(navigator.serviceWorker,"message",this._onmessage.bind(this),!1)),e}.bind(this)):Promise.reject("serviceWorker is unavailable")},e.prototype.unregister=function(){this.registration&&this.registration.unregister(),this._handlers.forEach(function(e){return e[0].removeEventListener(e[1],e[2])}),this._handlers=[]},e.prototype.update=function(){this.registration&&this.registration.update()},e.prototype._addEventListener=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!0,o=!1;this._handlers.forEach(function(i){i[0]===e&&i[1]===t&&i[2]===n&&(o=!0)}),(!o||i)&&(this._handlers.push([e,t,n]),e.addEventListener(t,n))},e.prototype._onactive=function(e){return e.active?Promise.resolve(e):new Promise(function(t){this._addEventListener(e.installing,"statechange",function(n){"activated"===n.currentTarget.state&&t(e)})}.bind(this))},e.prototype.action_isIMLongPollingEnabled=function(){return window.im&&im.isLongPollingEnabled()},e.prototype.action_devicePixelRatio=function(){return window.devicePixelRatio},e.prototype.action=function(e,t){var n=null;return n=Array.isArray(e)?e:[[e,t]],this._message({actions:n}).then(function(e){return e.answers?Promise.resolve(1===n.length?e.answers[0]:e.answers):Promise.reject(new Error("ServiceWorker answer is incorrect"))})},e.prototype._message=function(e){var t=this;return this.register().then(function(){return new Promise(function(t,n){var i=new MessageChannel;i.port1.onmessage=function(e){this._messageCheck(e)?t(e.data.data):n(new Error("ServiceWorker message is incorrect"))}.bind(this),this.registration.active.postMessage(this._messageWrap(e),[i.port2])}.bind(t))})},e.prototype._onmessage=function(e){if(this._messageCheck(e)){var t=e.data.data;if(t.actions&&Array.isArray(t.actions)){var n=[];t.actions.forEach(function(t){var i="action_"+t[0],o=t[1],r=this[i]?this[i](o,e):void 0;r instanceof Promise||(r=Promise.resolve(r)),n.push(r)}.bind(this)),Promise.all(n).then(function(t){var n={};t.forEach(function(e,t){void 0!==e&&(n[t]=e)}),Object.keys(n).length&&e.ports[0].postMessage(this._messageWrap({answers:n}))}.bind(this))}}},e.prototype._messageCheck=function(e){return(""===e.origin||e.origin.match(/^https:\/\/([a-zA-Z0-9\-\.]+\.)?vk\.com$/))&&e.data&&e.data.data&&e.data.type===i},e.prototype._messageWrap=function(e){return{type:i,data:e}},e}()}},"./static/js/al/modules/lib/utils.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.throttleAccumulate=n,t.executionStackPop=i,t.lplog=o,t.toArray=r,t.arrayUnique=a,t.urlBase64ToUint8Array=s,t.unpackStore=l;function n(e,t){var n=[],i=0;return function(o){n.push(o),i||(i=setTimeout(function(){i=!1,e(n),n=[]},t))}}function i(e){return e.length>0&&e.pop().func(),e}function o(e,t){var n=void 0,i=void 0;if(window.__debugMode){switch(t){case"error":n="color: red",i="background: red; color: white";break;case"success":n="color: green",i="background: green; color: white";break;default:n="color: blue;",i="background: #000; color: #fff;"}try{var o=new Date;console.debug("%cLP:["+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+":"+o.getMilliseconds()+"]%c "+e,i,n)}catch(r){}}}function r(e){var t=[];if("undefined"==typeof e.length)return Object.keys(e).map(function(t){return e[t]});for(var n=0;n<e.length;n++)t.push(e[n]);return t}function a(e){for(var t={},n=[],i=0;i<e.length;i++)t[e[i]]||(n.push(e[i]),t[n[i]]=1);return n}function s(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(n),o=new Uint8Array(i.length),r=0;r<i.length;++r)o[r]=i.charCodeAt(r);return o}function l(e){return e.get?e.get():e}},"./static/js/al/modules/notifier/push_notifier.js":function(e,t,n){var i=n("./static/js/al/modules/lib/sw_client.js"),o=n("./static/js/al/modules/lib/utils.js"),r=n("./static/js/al/modules/notifier/push_notifier_constants.js"),a="push_notifier_endpoint",s="push_notifier_related_apps",l="push_notifier_related_apps_ts",c=r.HOUR/2,u="push_notifier_subscribed_ts",d=r.MINUTE,A=window,m=A.lsSet,f=A.lsGet,p=A.ajax,_=A.isMVK;window.PushNotifier={sw_client:null,server_key:"BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",server_url:"push_notifier",init:function(){var e=this;return this.canBeEnabled().then(function(t){t&&vk.id&&(_&&page.onChange(function(){return e.updateHeadClass()}),e.listenPermission(),Promise.resolve(e.updateSubscription())),Promise.resolve(!1)})},listenPermission:function(){var e=this;navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(function(t){t.onchange=function(){e.updateSubscription().then(function(){geByClass1("settingsNotifyPush")&&nav.reload(),e.updateHeadClass()})}})},updateHeadClass:function(){var e=this;this.canBeEnabled().then(function(t){if(t){var n=e.getPermission();document.head&&(removeClass(document.head,"push_notifier_"+r.PUSH_NOTIFIER_PERMISSION_GRANTED),removeClass(document.head,"push_notifier_"+r.PUSH_NOTIFIER_PERMISSION_DENIED),removeClass(document.head,"push_notifier_"+r.PUSH_NOTIFIER_PERMISSION_DEFAULT),n&&addClass(document.head,"push_notifier_"+n),addClass(document.head,"push_notifier_supported"))}})},canBeEnabled:function(){var e=this;return new Promise(function(t){return e.isSupported()?void t(e.isNativeAppInstalled().then(function(e){return!e})):t(!1)})},isSupported:function(){return"PushManager"in window&&"Notification"in window&&i.SWClient.isSupported()&&(browser.chrome||browser.mozilla)},isNativeAppInstalled:function(){var e=(new Date).getTime(),t=f(l),n=f(s);return new Promise(function(i){null!==n&&t&&c>e-t?i(!!n):"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then(function(t){var n=!1,o=!0,r=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if("com.vkontakte.android"===d.id){n=!0;break}}}catch(A){r=!0,a=A}finally{try{!o&&u["return"]&&u["return"]()}finally{if(r)throw a}}m(l,e),m(s,n),i(n)})["catch"](function(){i(!1)}):i(!1)})},updatePermission:function(){var e=this.getPermission();if(e!==r.PUSH_NOTIFIER_PERMISSION_GRANTED){var t=this.loadEndpoint();if(t)return this.unsubscribe(t).then(function(){return e})}return Promise.resolve(e)},subscribe:function(e){var t=this;return this.connect().then(function(e){return e.pushManager.getSubscription()}).then(function(e){return e||t.sw_client.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o.urlBase64ToUint8Array(t.server_key)})}).then(function(n){return new Promise(function(i,o){if(!e&&!t.needUpdateSubscription(n))return void i();var r=n.getKey("p256dh"),a=n.getKey("auth");p.post(t.server_url,{act:"a_subscribe",endpoint:n.endpoint,key:r?btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("p256dh")))):null,token:a?btoa(String.fromCharCode.apply(null,new Uint8Array(n.getKey("auth")))):null},{onDone:function(e){e?(t.saveEndpoint(n.endpoint),i()):o()}})})})},needUpdateSubscription:function(e){var t=(new Date).getTime(),n=this.loadEndpoint(),i=f(u+vk.id),o=!1;return(n!=e.endpoint||!i||t-i>d)&&(m(u+vk.id,t),o=!0),o},updateSubscription:function(){var e=this;return this.updatePermission().then(function(t){return t===r.PUSH_NOTIFIER_PERMISSION_GRANTED?e.subscribe():!1})},connect:function(){return this.sw_client=this.sw_client||new i.SWClient,this.sw_client.register()},unsubscribe:function(e){var t=this;return new Promise(function(n,i){p.post(t.server_url,{act:"a_unsubscribe",endpoint:e},{onDone:function(e){e?(t.saveEndpoint(!1),n()):i()}})})},requestPermission:function(){var e=this.getPermission();return e==r.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise(function(e,t){var n=Notification.requestPermission(function(t){e(t)});n&&n.then(e,t)}):Promise.resolve(e)},getPermission:function(){return Notification.permission},loadEndpoint:function(){return f(a+vk.id)||!1},saveEndpoint:function(e){m(a+vk.id,e||!1)},action:function(e,t){var n=this;return this.connect().then(function(){return n.sw_client.action(e,t)})}},PushNotifier.updateHeadClass()},"./static/js/al/modules/notifier/push_notifier_constants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});{var n=t.SECOND=1e3,i=t.MINUTE=60*n,o=t.HOUR=60*i;t.DAY=24*o,t.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",t.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",t.PUSH_NOTIFIER_PERMISSION_DENIED="denied"}},"./static/js/al/modules/stickers/stickers_animation.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.StickersAnimation=function(){var e=!1,t=!1,i={},o={},r={},a=void 0,s=500,l={};function c(e){if(window.isMVK){var t=document.createElement("script");t.onload=function(){e()},t.src="/js/cmodules/web/bodymovin.js",document.head.appendChild(t)}else stManager.add([jsc("web/bodymovin.js")],function(){e()})}function u(e){var t=f(e),n=1;if(t){hasClass(e,"animation_play")||(hide(geByClass1("sticker_img",e)),addClass(e,"animation_play")),t.play();var i=attr(e,"data-loop-count");i=parseInt(i),isNaN(i)&&(i=3),-1!==i&&(!t._cbs.loopComplete||t._cbs.loopComplete&&0===t._cbs.loopComplete.length)&&t.addEventListener("loopComplete",function o(){n++;var r=!0;i>=n&&(r=!1),r&&(m(e,!1),""!==t._cbs.loopComplete&&t.removeEventListener("loopComplete",o),t.stop())})}}function d(e){var t=attr(e,"data-uid");return t||(t=attr(e,"data-uid",Math.random().toString(32).substr(2))),t}function A(e){return!!l[d(e)]}function m(e,t){l[d(e)]=t}function f(e){var t=attr(e,"data-uniq-id");if(!geByClass1("svg_sticker_animation",e))return!1;var n=o[t];return n?n:!1}function p(e,t){var n=f(e);if(n)return void("function"==typeof t&&t(n));var r=attr(e,"data-uniq-id");if(!A(e)){m(e,!0);var a=attr(e,"data-animation-path"),s=attr(e,"data-sticker-id"),l=!1;if(s&&(l=i[s]?_(e):a&&_(e)),l){var c={container:e,renderer:"svg",loop:!0,autoplay:!1,name:r,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};i[s]?c.animationData=i[s]:c.path=a;var u=geByClass1("svg_sticker_animation",e);if(u&&re(u),n=bodymovin.loadAnimation(c),!i[s])return void n.addEventListener("data_ready",function(){i[s]=n.animationData,o[r]=n,"function"==typeof t&&t(n)})}"function"==typeof t&&(o[r]=n,"function"==typeof t&&t(n))}}return{checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){var t=ge("fc_msg"+e),i=geByClass1("sticker_animation",t);n.loadAndPlaySticker(i)}},checkSettingsAndLoad:function(e,t,i){StickersSettings.getAutoplay()&&(i?n.loadStickerInMvkIMAndPlay(e,t):(e.textFull||e.text).indexOf("sticker_animation",0)&&n.loadStickerInMvkIMAndPlay(e.id,t))},loadStickerInMvkIMAndPlay:function(e,t){var i="_msg"+e;t&&(i="msg_id_"+e);var o=geByClass1("sticker_animation",geByClass1(i));n.loadAndPlayStickerWithTimer(o,500)},loadAutoplayAnimationStickers:function(i){if("undefined"==typeof bodymovin)return void c(function(){n.loadAutoplayAnimationStickers()});if(i){if(t)return;t=!0}if(!e){e=!0;var o=geByClass("sticker_animation_autoplay");o&&each(o,function(e,t){p(t,function(){u(t)})}),e=!1}},loadAndPlaySticker:function(e){return e?"undefined"==typeof bodymovin?(c(function(){n.loadAndPlaySticker(e)}),""):void requestAnimationFrame(function(){p(e,function(){u(e)})}):void 0},loadAndPlayStickerWithTimer:function(e,t){if(e&&!r[e]){t||(t=1e3);var i=ge(e);hasClass(i,"sticker_animation_disabled_timer")||(r[e]=setTimeout(function(){(i||(i=ge(e),!hasClass(i,"sticker_animation_disabled_timer")))&&(n.loadAndPlaySticker(i),clearTimeout(r[e]),r[e]=!1)},t))}},reloadStickers:function(){o={}},touchStartSticker:function(e){window.oncontextmenu||(window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),window.oncontextmenu=null,!1}),a=setTimeout(function(){n.loadAndPlaySticker(e)},s)},touchEndSticker:function(){a&&clearTimeout(a)}};function _(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom,i=t<window.innerHeight&&n>=0;return i&&isVisible(e)}}()},"./static/js/al/modules/stickers/stickers_settings.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=t.StickersSettings={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return n.autoplay}}},"./static/js/mobile/modules/FeedNotifications.js":function(){var e=window,t=e.hide,n=e.lockButton,i=e.gpeByClass,o=window,r=o.ajax;window.FeedNotifications={webActionsAcceptHandlers:{},webActionsDeclineHandlers:{},withoutNavActions:["enable_browser_notifications"],hide:function(e,o,a,s,l,c,u,d){var A={_ajax:1,act:"hide_internal_notification",reason:s,id:o,hash:a},m={},f=i("_block",e),p=!0;if("decline"==s){t(f);var _=this.webActionsDeclineHandlers[c];p=this.runActionHandler(_,e,A,m,u)}else{n(e);var h=this.webActionsAcceptHandlers[c];p=this.runActionHandler(h,e,A,m,u),"add_custom_newsfeed"==c&&(setCookie("remixcustom_feed_added",u),A.action=c,A.action_section=u.section,A.action_hash=u.hash)}return m.onDone=function(){("compact"!==d||"accept"!==s)&&cur.destroy.push(function(){return remove(f)}),~this.withoutNavActions.indexOf(c)||nav.go(e,l)}.bind(this),m.onFail=function(){unlockButton(e)},Promise.resolve(p).then(function(e){(e||isUndefined(e))&&r.post("/index.php",A,m)}),!1},runActionHandler:function(e,t,n,i,o){return isFunction(e)?e(t,n,i,o):!0},addWebActionAcceptHandler:function(e,t){this.webActionsAcceptHandlers[e]=t},addWebActionDeclineHandler:function(e,t){this.webActionsDeclineHandlers[e]=t}}},"./static/js/mobile/modules/Informer.js":function(){var e=window,t=e.hide;window.Informer={close:function(e){t(e)}}},"./static/js/mobile/modules/QuickSearch.js":function(){var e=window,t=e.parseRusKeys,n=e.parseLatKeys,i=e.parseLat,o=e.parseCyr,r=e.escapeRE,a=e.val,s=e.onBodyScrollForce,l=e.extend,c=e.len,u=e.removeClass,d=e.geByClass1,A=e.addClass,m=e.show,f=e.hide,p=e.alLoadingFix,_=e.cancelEvent,h=e.elfocus,v=e.elblur,g=e.ge,w=e.addEvent,y=e.attr,b=e.initAutoScroll,S=window,C=S.ajax;function k(e){k.getQueryREs=lt;var S,E,M,T,j,D,x,I,P,B,F,L=[],O={},N={},H={},R={},V=!1,q=null,U=null,z=null,$=0,W=[],Y=null,X=null,G=null,Q=!1,K=!1,J=10,Z=30,et=!0,tt=!1,nt=!1,it=!1,ot=0,rt=0,at=!1,st=e&&"au_search_field"===e.field&&y(g(e.field),"data-newsearch");function lt(e){e=e.replace(/https?:\/\/(m\.)?vk\.com\/([^#]+#\/)?/,"");for(var a,s,l,c=K,u=[e,s=t(e,c)||e,l=n(e,c)||e,i(s),o(l)],d={},A=[],m=0,f=u.length;f>m;m++)u[m]&&!d[u[m]]&&(d[u[m]]=!0,a=r(u[m]),a=a.replace(/[\u0435\u0451]/gi,"[\u0435\u0451]").replace(/(e|yo)/gi,"(?:e|yo)"),A.push(new RegExp("(^|\\s|\\(|>)("+a+")","gi")));return A}function ct(e,t,n){if(clearTimeout(U),!n)return U=setTimeout(function(){ct(e,t,!0)},10),!1;var i=a(e)||"";if(q==i)return!1;var o,r="_"+i,l=N[r],c=lt(i);if(!st&&!l&&i.length>2&&N["_"+i.slice(0,-2)]){var u="_"+i.slice(0,-2);N[u]&&R[u]&&!N[u].length&&(!it||it&&!H[u])&&(R[r]=!0,l=N[r]=[],it&&(H[r]=""))}if(!l){l=[];var d=0;if(!i&&L.length)for(var A=$,m=$+Math.min(J,L.length);m>A;A++)l.push([L[A]]),d++;else{for(var f={},p=0,A=0,m=L.length;m>A;A++){var _=L[A];if(O[_]){if(f[_]=!0,(o=dt(c,O[_][0]))&&(l.push([_,o]),++p>=Z))break;d++}}if(Z>p)for(var _ in O)if(!f[_]&&(o=dt(c,O[_][0]))){if(l.push([_,o]),++p>=Z)break;d++}}R[r]=R[r]||!i&&L.length||l.length>2*J,R[r]=R[r]||it&&l.length>J}return R[r]||!et&&!it||x||ut(e,i),N[r]=l,q=i,At(l,H[r]),P&&P(i),nt&&!q&&(ot=J),s(),!1}function ut(e,t,n){var i=st?800:200;return clearTimeout(z),n?(C.post(S,{_ajax:1,q:t},{onDone:function(n,i,o){I&&I.apply(null,arguments);for(var r,a="_"+t,d=N[a]||[],A={},m=lt(t),f=0,p=d.length;p>f;f++)A[d[f][0]]=!0;for(var f=0,p=i.length;p>f;f++){var _=i[f];A[_]||((r=dt(m,n[_][0]))||Q||!t)&&d.push([_,r])}R[a]=!0,N[a]=d,it&&(H[a]=o||""),O=l(n,O),et=!tt||c(O)<tt,q==t?(At(d,H[a]),s()):delete N[a],u("input_loading",e)},onFail:function(){delete N["_"+t],u("input_loading",e)}}),void(d("al_loading",M)||A("input_loading",e))):(z=setTimeout(function(){ut(e,t,!0)},i),!1)}function dt(e,t){if(!t)return!1;var n=[t],i=/([\u2116])/gi;-1!==t.search(i)&&n.push(t.replace(i,""));for(var o=0;o<n.length;o++)for(var r=0,a=e.length;a>r;r++)if(-1!==n[o].search(e[r]))return e[r];return!1}function At(e,t){var n="";if(X&&M){for(var i=0,o=e.length;o>i;i++){var r=e[i][0],s=e[i][1];if(O[r]){var l=O[r].slice(1);if(s)for(var c in W){var d=W[c];l[d]&&(l[d]=l[d].replace(s,'$1<em class="found">$2</em>'))}n+=X.apply({id:r,q:q,highlight:function(e){return(""+e).replace(s,'$1<em class="found">$2</em>')},template:function(e,t){var n=(""+e).replace(/%(\d+)%|#(\d+)#/g,function(e,n,i){return+i?(""+t[i-1]).replace(s,'$1<em class="found">$2</em>'):+n?t[n-1]||"":""});return n}},l)}}n||R["_"+q]||!et&&!it||x||(u("input_loading",T),n=q?'<div class="al_loading qs_loading">&nbsp;</div>':'<div id="al_loading"></div>'),!n&&G&&(n=G(q)),a(M,Y?Y(n,q,nt,t):n+(t||"")),D&&(q?m(D):f(D)),!q&&p(),B&&B()}}l(this,{go:function(e){return T?(ct(T,e,!0),T.blur(),_(e),!1):!0},redraw:function(){var e="_"+q;At(N[e],H[e]),s()},clear:function(e,t){return a(T,""),t?h(T):v(T),ct(T,e,!0),_(e),!1},blur:function(){v(T)},init:function(e){e=e||{},M=g(e.container)||null,T=g(e.field)||null,j=g(e.btn)||null,D=g(e.clear_btn)||null,q=null,V&&S==e.action&&e.init_once||(N={},H={},R={},S=e.action||"",E=e.al_action||S,L=e.top_items||[],O=e._cache||{},W=e.hl_fields||[],Y=e.tpl||null,X=e.item_tpl||null,G=e.null_tpl||null,Q=e.soft_filter||!1,K=e.need_invalid_keys||!1,J=e.top_len||10,tt=e.load_limit||!1,I=e.onLoaded||!1,P=e.onFiltered||!1,B=e.onRendered||!1,F=e.onFocusChanged||!1,nt=e.al_need||!1,$=!nt&&e.init_offset||0,it=e.global_search||!1,x=e.no_search_query||!1);var t=null;S&&M&&T&&X&&(et=S!==!0&&(!tt||c(O)<tt),w(T,"focus",function(e){var n=function i(n){!n&&ct(T,e,!0),t=setTimeout(i,100)};clearTimeout(t),F&&F.call({q:q},!0),n(!0)}),w(T,"keydown keypress change blur",function(e){"blur"==e.type&&(clearTimeout(t),F&&F.call({q:q},!1)),ct(T,e,"keydown"!=e.type&&"keypress"!=e.type)}),e._new||j&&!y(j,"onclick")&&y(j,"onclick","return qsearch.go(event);"),!nt||V&&e.init_once||(ot=J,rt=c(O),b(function(){var e=d("_si_container",M)||M,t=e.childNodes;return t[ot]||t[t.length-1]},function(){var e=d("_si_container",M)||M;if(!at&&!q)if(ot+J>rt&&et)at=!0,A(e,"_si_container_loading"),C.post(E,{_ajax:1,offset:rt},{onDone:function(t,n){I&&I.apply(null,arguments);var i=c(t);if(at=!1,u(e,"_si_container_loading"),tt||(L=L.slice(0,rt).concat(n)),rt+=i,O=l(t,O),et=S!==!0&&(!tt&&i||c(O)<tt),!q){ot+=J;for(var o=[],r=0,a=Math.min(ot,L.length);a>r;r++)o.push([L[r]]);At(o,H._),s()}},onFail:function(){at=!1,u(e,"_si_container_loading")}});else if(ot<L.length){ot+=J;for(var t=[],n=0,i=Math.min(ot,L.length);i>n;n++)t.push([L[n]]);At(t,H._),s()}})),!e.skip_init_filter&&ct(T,null,!0),V=!0)}}),e&&this.init(e)}var E=new k;window.QuickSearch=k,window.qsearch=E},"./static/js/mobile/modules/Scroller.js":function(){var e=window,t=e.isUndefined,n=e.getX,i=e.getY,o=e.vkNow,r=e.clog,a=e.cancelEvent,s=e.getW,l=e.setStyle,c=e.getH,u=e.scrollTop,d=e.getCh,A=e.preventEvent,m=e.extend,f=e.hasClass,p=e.gpeByClass,_=e.attr,h=e.toggleClass,v=e.geByClass1,g=e.removeClass,w=e.addClass,y=e.geByClass,b=e.addEvent,S=e.onBodyResize,C=e.removeEvent,k=window,E=k.browser,M=window,T=M.thover;function j(e,k){var M,j,D,x,I,P=k&&k.ignoreMouseWheel,B=k&&k.noAutoScroll,F=!t(document.ontouchmove),L=!0,O=!1,N=!1,H=!1,R=!1,V=0,q=0,U=!1,z=0,$=!1,W=!1,Y=!1,X=!1,G=!1;function Q(e){var t=e.touches,o=n(j),r=i(j),a=(t&&t[0]?t[0].pageX:e.pageX)||0,s=(t&&t[0]?t[0].pageY:e.pageY)||0;return{x:a-o,y:s-r}}function K(e){U||(U=[]),U.push([o(),e]),U=U.slice(-20)}function J(){U=!1}function Z(){if(!U||U.length<2)return[0,0,0];for(var e=o(),t=!1,n=U.pop(),i=U.length-1;i>=0;i--){var r=e-U[i][0];if(r>150)break;t=U[i]}if(!t||!n)return[0,0,0];var a=n[1].x-t[1].x,s=n[1].y-t[1].y,l=Math.sqrt(a*a+s*s),r=n[0]-t[0];return r?[l/r,a/r,s/r]:[0,0,0]}function et(){if(!U)return!1;var e=Z(),t=e[0],n=e[1];if(J(),!t)return!1;var i=4.7,o=t/i,a=n*o-i*o*o/2;return o*=530,a*=140,r("dx",a,"t",o),.1>t||!a?!1:{dx:a,t:o}}function tt(e){"touchstart"==e.type?L=!e.touches||1==e.touches.length:"touchmove"==e.type?L=!1:"click"==e.type&&(L||(a(e),L=!0))}function nt(e){if(!(window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger")||X&&e.touches&&e.touches.length>1)){if(J(),N){if(1>=q)return}else{var t=s(j)-s(D);if(t>=0)return}H=Q(e),R=H,K(R),Y=!0,l.animate(D)}}function it(e){if(H&&(X||Y)){T&&T.cancel(e);var t=Q(e);if(R=t,K(R),Y){var n=H.x-t.x,o=H.y-t.y;if(Math.abs(n)>=Math.abs(o)&&(a(e),X=!0),Y=!1,X){var r=i(j),A=c(j),m=u(),f=d(),p=!B;p&&(m>r-7?u(r-7):r+A+7>m+f&&u(r+A+7-f))}}if(X)if(a(e),N){var _=s(j),n=H.x-t.x;(0>=V&&0>n||V>=q-1&&n>0)&&(n/=3);var h=-V-n/_,v=O?100*h+"%":h*_;l.transform(D,{translate:[v,0]})}else{var g=s(j)-s(D),w=0,n=H.x-t.x,h=z-n;if(g>0&&(g=0),g>h)var v=g-(g-h)/3;else if(h>w)var v=w+(h-w)/3;else var v=z-n;lt(v),l.transform(D,{translate:[v,0]})}}}function ot(e){if(H&&X){if(a(e),N){var t=4.7*Z()[1],n=H.x-R.x,i=s(j),o=Math.abs(n)>=i/2;(V>0&&(o&&0>n||t>1)||q-1>V&&(o&&n>0||-1>t))&&(V+=n>0?1:-1);var r=-V,c=O?100*r+"%":r*i;H=!1,J(),ct(),l.animate(D,"transform",{duration:200,func:"ease"}),l.transform(D,{translate:[c,0]})}else{var u=et(),d=s(j)-s(D),A=0,n=H.x-R.x,r=z-n;u&&(r+=u.dx),d>0&&(d=0),z=d>r?d:r>A?A:r;var m={duration:200,func:"ease"};u&&(m={duration:u.t,func:"cubic-bezier(0, 1, 1, 1)"}),lt(z),l.animate(D,"transform",m),l.transform(D,{translate:[z,0]})}X=G=!1}}function rt(e){if(!(P||window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger"))){if(A(e),N){if(1>=q)return}else{var t=s(j)-s(D);if(t>=0)return}var n=(e.detail?e.detail:e.wheelDelta)>0?3:-3;if($===!1&&($=0),$+=n,!N){var t=s(j)-s(D),i=0,o=z-$;if(t>0&&(t=0),t>o)var r=t-(t-o)/3;else if(o>i)var r=i+(o-i)/3;else var r=z-$;lt(r),l.transform(D,{translate:[r,0]})}clearTimeout(W),W=setTimeout(function(){if(N){(V>0&&0>$||q-1>V&&$>0)&&(V+=$>0?1:-1);var e=-V,t=s(j),n=O?100*e+"%":e*t;ct(),l.animate(D,"transform",{duration:200,func:"ease"}),l.transform(D,{translate:[n,0]})}else{var i=s(j)-s(D),o=0,e=z-$;i>0&&(i=0),i>e?z=i:e>o?z=o:z-=$,lt(n),l.animate(D,"transform",{duration:200,func:"ease"}),l.transform(D,{translate:[z,0]})}$=!1},200)}}function at(e){if(!N){var t=n(e)-n(j),i=t+z,o=i+s(e),a=0,c=s(j),u=!1;a>i?u=a-t+20:o>c&&(u=c-s(e)-t-20);var d=s(j)-s(D),A=0;if(d>0&&(d=0),d>u)var u=d;else if(u>A)var u=A;r(t,z,i,o,a,c,u),u!==!1&&(z=u,lt(z),l.animate(D,"transform",{duration:200,func:"ease"}),l.transform(D,{translate:[z,0]}))}}function st(e){if(N){var t=V;if(e&&e.target){var n=f("sp_ppt",e.target)?e.target:p("sp_ppt",e.target),i=+_(n,"data-i");V=0>i?0:i>q-1?q-1:i}H=!1,J(),X=G=!1;var o=s(j),r=-V,a=O?100*r+"%":r*o;ct(),t!=V&&l.animate(D,"transform",{duration:200,func:"ease"}),l.transform(D,{translate:[a,0]})}}function lt(e){if(!N){e=e||z;var t=s(j)-s(D),n=0;h("sw_left",j,n>e),h("sw_right",j,e>t)}}function ct(){if(N){var e=v("sp_ppt_sel",M);e&&e===I[V]||(g("sp_ppt_sel",e),w("sp_ppt_sel",I[V]))}}function ut(){j=v("scroller_wrap",M),D=v("scroller_cont",j),N?(x=v("sp_pages_pts",M),I=y("sp_ppt",x),q=(y("scroller_page",D)||[]).length,V=0,ct()):(z=0,lt(z)),U=!1,l.transform(D,{translate:[0,0]})}function dt(){ut(),F?(b(j,"touchstart touchmove click",tt),b(j,"touchstart",nt),b(j,"touchmove",it),b(j,"touchend touchcancel",ot)):(b(j,"mousewheel",rt),b(x,"click",st)),O||S(st)}function At(){F?(C(j,"touchstart touchmove click",tt),C(j,"touchstart",nt),C(j,"touchmove",it),C(j,"touchend touchcancel",ot)):(C(j,"mousewheel",rt),C(x,"click",st)),O||S("__clear",st)}m(this,{init:dt,destroy:At,onShow:function(){N?ct():lt(z)},canClick:function(){return L}}),M=e,k=k||{},k.byPage?(N=!0,O=!E.android):(N=!1,O=!1,this.showElem=at)}window.Scroller=j},"./static/js/mobile/modules/Tabs.js":function(){var e=window,t=e.onDOMReady,n=e.onBodyResize,i=e.geByClass1,o=e.removeClass,r=e.addClass,a=e.gpeByClass,s=e.hasClass,l=e.toggleClass,c=window,u=c.clearCookie,d=c.setCookie;!function(){t(e),n(e);function e(){if(i("tabs_block_hideable")){var e=i("tabs_block");i("tabs_list").offsetHeight>i("tabs_list_more").offsetHeight?o("tabs_block_without_show_more",e):r("tabs_block_without_show_more",e)}}function c(e){var t=a("tabs_block",e);s("tabs_block_opened",t)?u("remixm_tabs_expanded"):d("remixm_tabs_expanded",1),l("tabs_block_opened",t)}window.Tabs={actualizeShowMoreVisibility:e,toggle:c}}()},"./static/js/mobile/modules/_ui/mail/MailScrap/MailScrap.js":function(){var e=r(['\n    <div class="','">\n      ',"\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "],['\n    <div class="','">\n      ',"\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "]),t=r(['\n    <div class="','">\n      ',"\n    </div>\n  "],['\n    <div class="','">\n      ',"\n    </div>\n  "]),n=r(['\n    <div class="mailScrap__empty mailScrap__empty_','">\n      ',"\n    </div>\n  "],['\n    <div class="mailScrap__empty mailScrap__empty_','">\n      ',"\n    </div>\n  "]),i=r(["\n    <div ",">\n      ","\n    </div>\n  "],["\n    <div ",">\n      ","\n    </div>\n  "]);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(t){var n=t.scrap,i="peer"===n,o=w(n),r=i?f("before"):"",a=f("after"),l=f("center"),c=s(n),u=h(n),d=i?uCurConvoTyping():"",A=i?g():"";return q.html(e,o,r,c,u,a,d,A,l)}function s(e){var t=q["class"]("mailScrap__items",o({},e,!0)),n=l(e);return Brick({mix:t,inner:n})}function l(e){for(var t=store.mail,n=t.cur,i=t.msgs,o=t.scraps[e],r=o.length,a=[],s=!1,l=0;r>l;l++){if(l>0&&"peer"===e&&!s){var u=i[o[l-1]],d=i[o[l]];if(d.isUnread&&!u.isUnread&&d.authorId!==n.viewerId){s=!0,a.push(c(e,o[l],!0));continue}}a.push(c(e,o[l]))}return q.list(a)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,i=store.mail,o=i.cur,r="";if("folder"===e)if("important"===o.folder){var a=t;r=u(a)}else{var s=t;r=d(s)}else if("search"===e)if("peers"===o.tab){var l=t;r=A(l)}else{var c=t;r=u(c)}else if("peer"===e){var f=t;r=m(f,n)}return r}function u(e){var t=store.mail.msgs[e].peerId;return uConvo(t,e)}function d(e){return uConvo(e,"last")}function A(e){return uConvo(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return uMsg({msgId:e,withDivider:t})}function f(e){var n=q["class"]("mailScrap__loading",o({},e,!0)),i=Spinner();return q.html(t,n,i)}function p(e){var t=store.mail,n=t.cur,i=t.scraps,o=t.reached,r=!1;switch(e){case"peer":var a=n.peerId,s=t.rolls,l=s.peer[a],c=l?l.length:0;0===c&&o.peer.after[a]&&o.peer.before[a]&&(r=!0);break;case"folder":0===i.folder.length&&o.folder[n.folder]&&(r=!0);break;case"search":0===i.search.length&&o.search[n.tab][n.query]&&(r=!0)}return r}function _(e){var t=window.lang,n=store.mail,i=n.cur,o="";switch(e){case"peer":o=t.mobile_mail_history_is_empty;break;case"folder":var r={all:t.mobile_mail_no_messages,important:t.mobile_mail_no_important,unread:t.mobile_mail_no_unreaded,unrespond:t.mobile_mail_sublist_empty};o=r[i.folder];break;case"search":"msgs"===i.tab&&(o=t.mobile_mail_not_found),"peers"===i.tab&&(o=t.mobile_mail_no_peers)}return o}function h(e){var t=_(e);return q.html(n,e,t)}function v(){var e=(window.lang,store.mail);return e.cur.notification||""}function g(){var e=store.mail,t=e.cur.notification||"",n=q.onClick("MailScrap.clearSystemMessage2");return q.html(i,n,t)}function w(e){var t,n=store.mail,i=n.cur,r=n.reached,a=!0,s=!1,l=!1;if("peer"===e){var c=i.peerId,u=n.scraps.peer,d=u.length,A=n.rolls.peer[c]||[];a=r.peer.before[c]&&u[0]===A[0],s=last(u)===last(A)&&r.peer.after[c],0===d&&(s=!0),l=c&&!!n.peers[c].systemMessageCode}else if("folder"===e)s=r.folder[i.folder];else if("search"===e){{var m=i.tab;i.query}if("peers"===m){var f=n.scraps.search.length;s=r.search[i.tab][i.query]||f>0}else s=r.search[i.tab][i.query]}return q["class"]("mailScrap",(t={},o(t,e,!0),o(t,"empty",p(e)),o(t,"systemMessage",l),o(t,"reachedBefore",a),o(t,"reachedAfter",s),o(t,"tab","search"===e?i.tab:!1),t))}window.MailScrap=a,window.MailScrap_class=w,window.MailScrap_ItemsInner=l,window.MailScrap_EmptyInner=_,window.MailScrap_SystemMessageInner=v,window.MailScrap_Item=c},"./static/js/mobile/modules/_ui/mail/MailScrap/MailScrap_0.js":function(){Object.assign(MailScrap,{updateClass:h,clearSystemMessage2:b,onSystemMessageClick:y,resetPrevScraps:m,redrawFolder:w,redrawSearch:g,redrawSystemMessage:v,folderSetItems:u,folderAddItems:A,folderCutItems:d,peerAddItemsBefore:a,peerAddItemsAfter:s,peerReplaceItems:l,peerSetItems:o,peerGoToBottom:n,removeDivider:t,checkDivider:S}),uVK.onReady(function(){if(store.mail&&store.mail.scraps){var t=store.mail.scraps;e.folder=t.folder.slice(),e.search=t.search.slice(),e.peer=t.peer.slice()}});var e={folder:[],search:[],peer:[]};function t(){remove($(".msg__newMsgsDivider"))}function n(){var e=Messenger.getConvoBody();e.scrollTop=e.scrollHeight}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;e=e.filter(unique);var n=store.mail,i=n.cur,o=n.msgs,r=!1,a=void 0;return e.map(function(e,n){var s=o[e];return n>0&&!r&&!t&&!$(".msg__newMsgsDivider")&&!a.isUnread&&s.isUnread&&s.authorId!==i.viewerId?(a=s,r=!0,MailScrap_Item("peer",e,!0)):(a=s,MailScrap_Item("peer",e))}).join("")}function o(e){e=e.filter(unique),$$(".mailScrap__items_peer").forEach(function(t){return t.innerHTML=i(e)})}var r=!1;document.addEventListener("touchstart",function(){return r=!0}),document.addEventListener("touchend",function(){return r=!1});function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;h("peer"),e=e.filter(unique).filter(function(e){return!$(".msg_id_"+e)});{var n=Messenger.getConvoBody();n.scrollHeight-n.scrollTop-n.offsetHeight}window._preventedCheckTop=!0,setTimeout(function(){return window._preventedCheckTop=!1});var o=i(e,t),r='\n    <div class="load_before load_before_closed">\n      '+o+"\n    </div>\n  ";$$(".mailScrap__items_peer").forEach(function(e){return e.insertAdjacentHTML("afterbegin",r)}),uMessenger.expandPeerBefore()}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;e=e.filter(unique).filter(function(e){return!$(".msg_id_"+e)}),$$(".mailScrap__items_peer").forEach(function(n){n.insertAdjacentHTML("beforeend",i(e,t))}),h("peer")}function l(e){e.forEach(function(t){var n=$(".msg_id_"+t);n&&(n.outerHTML=i(e,!0))})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return e=e.filter(unique),e.map(function(e){return $(".mailScrap__items_folder .convo_id_"+e)&&!t?"":MailScrap_Item("folder",e)}).join("")}function u(e){$$(".mailScrap__items_folder").forEach(function(t){return t.innerHTML=c(e,!0)}),$$(".mailScrap_folder").forEach(function(e){return e.className=MailScrap_class("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=MailScrap_EmptyInner("folder")})}function d(e){$$(".mailScrap_folder .mailScrap__items").forEach(function(t){var n=[].slice.call(t.children);n.slice(e).forEach(function(e){return t.removeChild(e)})})}function A(e){$$(".mailScrap__items_folder").forEach(function(t){return t.insertAdjacentHTML("beforeend",c(e))})}function m(){e={folder:[],search:[],peer:[]}}function f(e,t,n){p($(".mailScrap__items_"+e),function(t){return MailScrap_Item(e,t)},t,n)}function p(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];return i||(e.innerHTML="",i=[]),0===n.length?void(e.innerHTML=""):(n.forEach(function(n,o){var r=i.indexOf(n);-1===r?(i.splice(o,0,n),domInsert(e,t(n),o)):r!==o&&(i.splice(r,1),i.splice(o,0,n),before(e.children[r],e.children[o]))}),i.forEach(function(t,i){-1===n.indexOf(t)&&o.push(e.children[i])}),void o.forEach(remove))}function _(){var e=store.mail,t=e.cur,n=e.peers;n[t.peerId].systemMessageCode=null,h("peer"),v()}function h(e){return void $$(".mailScrap_"+e).forEach(function(t){return t.className=MailScrap_class(e)})}function v(){$$(".mailScrap__systemMessage").forEach(function(e){e.innerHTML=MailScrap_SystemMessageInner()})}function g(){$$(".mailScrap__items_search").forEach(function(e){return e.innerHTML=MailScrap_ItemsInner("search")}),$$(".mailScrap_search").forEach(function(e){return e.className=MailScrap_class("search")}),$$(".mailScrap__empty_search").forEach(function(e){return e.innerHTML=MailScrap_EmptyInner("search")})}function w(e){{var t=store.mail,n=t.cur,i=t.scraps;n.folder}f("folder",i.folder,e),$$(".mailScrap_folder").forEach(function(e){return e.className=MailScrap_class("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=MailScrap_EmptyInner("folder")})}function y(){_()}function b(){remove(geByClass1("service_msg_box"))}function S(){var e=last($(".mailScrap__items_peer").children);e.classList.contains("msg__newMsgsDivider")&&t()}},"./static/js/mobile/modules/_ui/mail/uMailWrite/uMailWrite.js":function(){var e=m(['\n      <div class="uMailWrite uMailWrite_unableToWrite">\n        ','\n        <div class="uMailWrite__unableToWriteText">\n          ',"\n        </div>\n      </div>\n    "],['\n      <div class="uMailWrite uMailWrite_unableToWrite">\n        ','\n        <div class="uMailWrite__unableToWriteText">\n          ',"\n        </div>\n      </div>\n    "]),t=m(['\n    <form\n      class="','"\n      method="POST"\n      action="/mail?act=send&to=',"&hash=","&from=dialog",'"\n      ','\n    >\n      <div class="uMailWrite__toBottom" ',">","</div>\n      ","\n      ","\n      ","\n      ","\n    </form>\n  "],['\n    <form\n      class="','"\n      method="POST"\n      action="/mail?act=send&to=',"&hash=","&from=dialog",'"\n      ','\n    >\n      <div class="uMailWrite__toBottom" ',">","</div>\n      ","\n      ","\n      ","\n      ","\n    </form>\n  "]),n=m(["\n    ","\n    ","\n  "],["\n    ","\n    ","\n  "]),i=m(['\n    <div class="uMailWrite__main">\n      <div class="uMailWrite__button uMailWrite__button_attach">','</div>\n      <div class="uMailWrite__button uMailWrite__button_keyboard" ',">",'</div>\n      <div class="uMailWrite__button uMailWrite__button_stickers" ',">","",'</div>\n      <button class="','" type="submit">\n        ',"","","","",'\n      </button>\n      <div class="uMailWrite__textareaContainer">\n        <textarea\n          class="uMailWrite__textarea"\n          name="message"\n          placeholder="','"\n          maxlength="4096"\n          ',"\n          ","\n          ","\n          ","\n          ","\n          ","\n          ","\n        >",'</textarea>\n        <div class="uMailWrite__textareaGhost">',"</div>\n      </div>\n    </div>\n  "],['\n    <div class="uMailWrite__main">\n      <div class="uMailWrite__button uMailWrite__button_attach">','</div>\n      <div class="uMailWrite__button uMailWrite__button_keyboard" ',">",'</div>\n      <div class="uMailWrite__button uMailWrite__button_stickers" ',">","",'</div>\n      <button class="','" type="submit">\n        ',"","","","",'\n      </button>\n      <div class="uMailWrite__textareaContainer">\n        <textarea\n          class="uMailWrite__textarea"\n          name="message"\n          placeholder="','"\n          maxlength="4096"\n          ',"\n          ","\n          ","\n          ","\n          ","\n          ","\n          ","\n        >",'</textarea>\n        <div class="uMailWrite__textareaGhost">',"</div>\n      </div>\n    </div>\n  "]),o=m(['\n    <div class="uMailWrite__SVGIcon uMailWrite__SVGIcon_','"></div>\n  '],['\n    <div class="uMailWrite__SVGIcon uMailWrite__SVGIcon_','"></div>\n  ']),r=m(['\n    <div class="uMailWrite__keyboard">\n\n    </div>\n  '],['\n    <div class="uMailWrite__keyboard">\n\n    </div>\n  ']),a=m(['\n    <div class="uMailWrite__keyboard_row">\n      ',"\n    </div>\n  "],['\n    <div class="uMailWrite__keyboard_row">\n      ',"\n    </div>\n  "]),s=m(['\n    <button type="button" class="','" ',">\n      ","\n    </button>\n  "],['\n    <button type="button" class="','" ',">\n      ","\n    </button>\n  "]),l=m(['\n    <div class="uMailWrite__button_keyboard_icon"></div>\n  '],['\n    <div class="uMailWrite__button_keyboard_icon"></div>\n  ']),c=m(['\n    <div class="',' _preventMenuOpen">\n      ',"\n      ","\n      ","\n    </div>\n  "],['\n    <div class="',' _preventMenuOpen">\n      ',"\n      ","\n      ","\n    </div>\n  "]),u=m(['\n    <div class="uMailWrite__attachedMsgs">\n      ',"\n      ",'\n      <div class="uMailWrite__attachedMsgsText">',"</div>\n    </div>\n  "],['\n    <div class="uMailWrite__attachedMsgs">\n      ',"\n      ",'\n      <div class="uMailWrite__attachedMsgsText">',"</div>\n    </div>\n  "]),d=m(['\n    <input type="hidden" name="attached_messages" value="','" />\n  '],['\n    <input type="hidden" name="attached_messages" value="','" />\n  ']);function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(){var n=window.lang,i=store.mail,o=i.cur.peerId;if(!o)return'<form class="uMailWrite"></form>';var r=i.peers[o];if(r.unableToWrite){if(r.isVkcomgroup)return"";var a=r.kickedMessage||n.mobile_msg_mail_privacy_error,s=Icon({mix:"uMailWrite__unableToWriteIcon",icon:"warning"});return q.html(e,s,a)}var l=q.onSubmit("uMailWrite._onSubmit","event","this"),c=q.onClick("uMailWrite.onToBottomClick"),u=v(o),d=S(o),A=_(o),m=g(),f=p(),h=q["class"]("uMailWrite",{canAttachMoney:!!r.canAttachMoney,canAttachPoll:!0});return q.html(t,h,o,r.hashSend,i.cur.communityParam,l,c,f,d,A,u,m)}function p(){var e=store.mail,t=e.cur,i=e.peers,o=i[t.peerId]?i[t.peerId].countUnread:null,r=o?Oval({mix:"uMailWrite__toBottomValue",value:o}):"",a=Icon({mix:"uMailWrite__toBottomIcon",icon:"arrowDown"});return q.html(n,r,a)}function _(e){var t=lang,n=store.mail,o=n.cur,r=n.queue,a=q.onMouseDown("uMailWrite._onStickersClick","event"),s=q.onMouseDown("uMailWrite._onKeyboardClick","event"),l=n.peers[e],c=o.groupId,u=Math.abs(c),d=c?"&community="+u:"",A=Unfold({icon:"attach",name:"uMailWrite_attachments",position:"bottomLeft",items:[{text:o.inlineUploadHTML,icon:"camera"},{text:t.mobile_attachments_add_photo_vk,url:"/attachments?act=choose_photo&target=mail"+e+d,icon:"photo"},{text:t.mobile_attachments_add_video,url:"/attachments?act=choose_video&target=mail"+e+d,icon:"video"},{text:t.mobile_attachments_add_audio,url:"/attachments?act=choose_audio&target=mail"+e+d,icon:"audio"},{text:t.mobile_attachments_add_doc,url:"/attachments?act=choose_doc&target=mail"+e+d,icon:"doc"},l.canAttachMoney?{text:t.mobile_attachments_add_money,url:"/attachments?act=attach_money&target=mail"+e+d,icon:"money"}:null,l.canAttachPoll?{text:t.mobile_attachments_add_poll,url:"/attachments?act=attach_poll&target=mail"+e+d,icon:"poll_blue",mix:"uMailWrite__pollUnfoldItem"}:null]}),m=q.onKeyUp("uMailWrite._onKeyUp"),p=q.onInput("uMailWrite._onInput","event","this"),_=q.onKeyDown("uMailWrite._onKeyDown","event","this"),v=q.onFocus("uMailWrite._onFocus","event","this"),g=q.onBlur("uMailWrite._onBlur","event"),w=q.onClick("uMailWrite._onClick","event","this"),y=Icon({mix:"uMailWrite__button_send_icon",icon:"send"}),S=Icon({mix:"uMailWrite__button_send_icon",icon:"send",active:!0}),C=h("accept"),k=h("remove"),E=Icon({mix:"uMailWrite__button_send_icon",icon:"spinner"}),M=Icon({mix:"uMailWrite__button_stickers_icon",icon:"sticker"}),T=Icon({mix:"uMailWrite__button_stickers_icon",icon:"sticker",active:!0}),j=b(),D=l.attachmentsHTML.length,x=o.msgAttached[o.peerId],I=x&&x.length,P=!!(r[o.peerId]||[]).length,B=q["class"]("uMailWrite__button",{send:!0,send_active:!!(D>150||I),loading:P}),F=o.texts[o.peerId]||"",L=o.textsHTML[o.peerId]||"";return requestAnimationFrame(function(){return f._onRedraw()}),q.html(i,A,s,j,a,M,T,B,y,S,E,C,k,t.mobile_mail_message_placeholder,v,m,p,_,v,g,w,F,L)}function h(e){return q.html(o,e)}function v(){var e="";return Brick({mix:"uMailWrite__popupStickers _preventMenuOpen",inner:e})}function g(){return q.html(r)}function w(e){return q.html(a,e)}function y(e,t){var n=q["class"]("uMailWrite__keyboard_button",{primary:"primary"===e.color,positive:"positive"===e.color,negative:"negative"===e.color}),i=q.onClick("uMailWrite._onKeyboardButtonClick","event",{action:e.action,authorId:t.author_id});return q.html(s,n,i,e.action.label)}function b(){return q.html(l)}function S(e){var t=store.mail,n=t.cur,i=t.peers[e],o=i.attachmentsHTML,r=q["class"]("uMailWrite__attachments",A({},e,!0)),a=n.msgAttached[e]||[],s=a.length,l="",u="";if(s>0){var d=a.join(";");l=C(s),u=k(d)}return requestAnimationFrame(function(){return f._onAttachmentsRedraw()}),q.html(c,r,u,l,o)}function C(e){var t=window.lang,n=q.onClick("uMailWrite.onAttachedMsgsRemove"),i=Icon({mix:"uMailWrite__attachedMsgsIcon",icon:"msgMini"}),o=Icon({mix:"uMailWrite__attachedMsgsRemove",icon:"close9",attrs:n}),r=langNumeric(e,t.mobile_mail_messages);return q.html(u,o,i,r)}function k(e){return q.html(d,e)}window.uMailWrite=f,window.uMailWrite_Attachments=S,window.uMailWrite_ToBottomInner=p,window.uMailWrite_KeyboardRow=w,window.uMailWrite_KeyboardButton=y},"./static/js/mobile/modules/_ui/mail/uMailWrite/uMailWrite_0.js":function(e,t,n){var i=n("./static/js/al/modules/lib/random.js"),o=n("./static/js/mobile/modules/lib/device_keyboard.js"),r=s(o),a=n("./static/js/mobile/modules/core/store/mail_utils.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.assign(uMailWrite,{onToBottomClick:befall(),onAttachedMsgsRemove:befall(),onAfterSend:befall(),onSubmit:befall(),onMsgSend:befall(),showToBottom:E,hideToBottom:M,preventShowToBottom:C,openStickersPanel:N,uiClearAttachments:G,uiRedrawAttachments:Q,updateAttachmentsVisibility:j,redrawToBottom:T,drawStickers:F,setModifiers:K,hideStickersPanel:O,setText:wt,renderKeyboardIfNeeded:bt}),function(){uVK.onReady(j),uVK.onReady(D),uMailWrite._onAttachmentsRedraw=j,uMailWrite._onBlur=at,uMailWrite._onKeyUp=Z,uMailWrite._onKeyDown=it,uMailWrite._onFocus=rt,uMailWrite._onInput=et,uMailWrite._onSubmit=J,uMailWrite._onClick=ot,uMailWrite._onAttachClick=W,uMailWrite._onStickersClick=L,uMailWrite._onKeyboardClick=H,uMailWrite._onKeyboardButtonClick=R,mediaUpload.onRemove(x),mediaUpload.onComplete(B),mediaUpload.onStart(I),mediaUpload.onError(P),post.onStickersTabSelected(Y),post.onStickerClick(X),uMailWrite._onRedraw=b,Unfold.onOpen("uMailWrite_attachments")(S),uMailWrite.onToBottomClick(function(){var e=$(".uMailWrite__toBottom_visible");e&&e.classList.remove("uMailWrite__toBottom_visible"),MailScrap.removeDivider()})}();var l="uMailWrite__popupAttach_open",c="uMailWrite__popupStickers_open",u="uMailWrite__keyboard_open",d={canAttachPoll:"uMailWrite_canAttachPoll"},A={mailWrite:".uMailWrite",pollAttachment:".attachment_type_poll"},m=!1,f=!1,p=null,_=null,h=null,v=[],g=void 0,w="",y=debounce(st,100);function b(){k(),D()}function S(){function e(e,t){return e=e.replace(/&edit_msg_id=\d+/,"").replace(/=mailedit(-?\d+)/,"=mail$1"),store.mail.cur.editing&&(e=e.replace(/=mail(-?\d+)/,"=mailedit$1"),e+=t?"&edit_msg_id="+store.mail.cur.editing:""),e}$$("a.Unfold__item").forEach(function(t){var n=t.getAttribute("href"),i=e(n,!0);t.setAttribute("href",i)}),$$("input.inline_upload").forEach(function(t){t.setAttribute("data-upload-url",e(t.getAttribute("data-upload-url")))})}function C(){m=!0,setTimeout(function(){m=!1},300)}function k(){var e=$(".uMailWrite__textareaGhost");$$(".uMailWrite__textarea").forEach(function(t){return setStyle(t,"height",e.offsetHeight)}),$$(".uMailWrite__main").forEach(function(t){return setStyle(t,"height",e.offsetHeight)}),st()}function E(){m||(p&&(clearTimeout(p),p=null),addClass("uMailWrite__toBottom_visible",$(".uMailWrite__toBottom")))}function M(){clearTimeout(_),p=setTimeout(function(){removeClass("uMailWrite__toBottom_visible",$(".uMailWrite__toBottom"))},100)}function T(){$$(".uMailWrite__toBottom").forEach(function(e){return e.innerHTML=uMailWrite_ToBottomInner()})}function j(){if("/mail"===location.pathname||0===location.pathname.indexOf("/write")){var e=store.mail.cur;if(e&&e.peerId){var t=geBySel(".uMailWrite__attachments .medias_thumb").length,n=geBySel(".uMailWrite__attachments .medias_row").length,i=(e.msgAttached[e.peerId]||[]).length?1:0;$$(".uMailWrite__attachments").forEach(function(e){toggleClass("uMailWrite__attachments_hasAttachments",e,t+n+i>0)}),vt()}}}function D(){var e=store.mail.cur;e&&e.peerId&&(v=tt(e.peerId),Mention.init({defaultItems:v,items:v,appendTo:geByClass1("uMailWrite__main"),url:null,params:{},afterInsert:function(e){var t=$(".uMailWrite__textareaGhost"),n=e.value;t.innerText=n,k()}}))}function x(e){if(store.mail.cur){var t=store.mail,n=t.cur,i=t.peers,o=n.peerId;if(o&&(i[o].attachmentsHTML=geBySel1(".uMailWrite__attachments_"+o+" .cp_attached_wrap").outerHTML,Q(o),st()),e.closest(A.pollAttachment)){var r=$(A.mailWrite);r.classList.add(d.canAttachPoll)}}}function I(){store.mail.cur&&st()}function P(){if(store.mail.cur){var e=store.mail,t=e.cur,n=(e.peers,t.peerId);n&&(G(),Q(n),Messenger.scrollConvoToBottom())}}function B(){if(store.mail.cur){var e=store.mail,t=e.cur,n=e.peers;if(t){var i=t.peerId;i&&(n[i].attachmentsHTML=geBySel1(".uMailWrite__attachments_"+i+" .cp_attached_wrap").outerHTML,st())}}}function F(){var e=store.mail.cur,t=$(".uMailWrite__popupStickers");t.childElementCount||(t.innerHTML=e.stickersPanelHTML.replace(/mail0/g,"mail"+e.peerId),post.stickersSelectTab(null,-1))}function L(e){var t=$(".uMailWrite__popupStickers"),n=$(".uMailWrite__keyboard");preventEvent(e),F(),$(".uMailWrite__textarea").blur(),hasClass(u,n)&&V(),hasClass(c,t)?O():N()}function O(){"stickers"===w&&(w="");var e=$(".uMailWrite__popupStickers");removeClass(c,e),lt(!1);var t=ge("stickers_panel");t&&"block"===t.style.display&&(t.style.display="none")}function N(){w="stickers";var e=$(".uMailWrite__popupStickers");addClass(c,e),post.stickersInit(),lt(!0)}function H(e){var t=$(".uMailWrite__keyboard"),n=$(".uMailWrite__popupStickers");preventEvent(e),$(".uMailWrite__textarea").blur(),hasClass(c,n)&&O(),hasClass(u,t)?V({store:!0}):U({store:!0})}function R(e,t){var n=t.authorId,o=t.action,r=o.payload,a=o.rawLabel,s=store.mail,l=s.cur,c=s.members,u=s.peers,d=c[n],A=u[l.peerId],m=i.random();l.localOutMsgIds.push(m);var f=void 0;if(l.peerId>=2e9){var p=d.url.replace(/^\//,"");f="@"+p+" ("+d.firstName+") "+a}else f=a;ut({act:"send",to:l.peerId,from:"dialog",hash:A.hashSend,message:f,media:"",_af:l._af,random_id:m,payload:r})}function V(e){"buttons"===w&&(w="");var t=$(".uMailWrite__keyboard");if(removeClass(u,t),ct(!1),e&&e.store){var n=store.mail.cur.peerId,i=store.mail.peers[n];i&&i.keyboard&&(g[n]=i.keyboard.chat_local_id,lsSet("mail_keyboard_hidden",g))}}function U(e){w="buttons";var t=$(".uMailWrite__keyboard"),n=e&&e.forceRender;addClass(u,t),ct(!0);var i=a.getKeyboardState(store.mail.cur.peerId),o=n?!1:!!i.rendered;o||St(),e&&e.store&&z()}function z(){var e=store.mail.cur.peerId;g&&(delete g[e],lsSet("mail_keyboard_hidden",g))}function W(e){var t=$(".uMailWrite__popupAttach"),n=$(".uMailWrite__popupStickers");preventEvent(e),stopEvent(e),hasClass(c,n)&&removeClass(c,n),hasClass(l,t)?removeClass(l,t):(addClass(l,t),addEvent(window,"click",i));function i(){removeClass(l,t),removeEvent(window,"click",i)}}function Y(){store.mail.cur&&(cur.scroller&&cur.scroller.destroy(),geByClass1("sp_body").scrollTop=0,removeClass("scroller_wrap",geByClass1("sp_cont")),geByClass("sp_page").forEach(function(e){return removeClass("scroller_page",e)}))}function X(e){if(store.mail.cur){var t=store.mail,n=t.cur,o=t.peers,r=(geByClass1("uMailWrite"),$(".uMailWrite__popupStickers")),a=i.random();n.localOutMsgIds.push(a),ut({act:"send",to:n.peerId,from:"dialog",hash:o[n.peerId].hashSend,message:"",media:"sticker"+e,_af:n._af,random_id:a}),st(),removeClass(c,r);var s=ge("stickers_panel");return s&&"block"===s.style.display&&(s.style.display="none"),lt(!1),!0}}function G(){var e=geByClass1("uMailWrite__attachments");e&&(e.innerHTML=Brick({mix:"cp_attached_wrap",attrs:'id="attached_wrap"'}),e.classList.remove("uMailWrite__attachments_hasAttachments"))}function Q(e){$$(".uMailWrite__attachments_"+e).forEach(function(t){t.outerHTML=uMailWrite_Attachments(e)}),$(".uMailWrite__textarea")&&st();var t=$(A.mailWrite),n=!!t.$(A.pollAttachment);t.classList.toggle(d.canAttachPoll,!n)}function K(e){$$(".uMailWrite").forEach(function(t){var n=q.parseClass("uMailWrite",t.getAttribute("class"));t.setAttribute("class",q["class"]("uMailWrite",Object.assign({},n,e)))})}function J(e){preventEvent(e);var t=$(".uMailWrite__textarea");if(!mediaUpload.checkUploading())return!1;var n=store.mail,o=n.cur,r=n.peers,a=i.random(),s=store.mail.cur.editing,l=s&&store.mail.msgs[s],c=l?{act:"edit_message",id:s,peerId:l.peerId,hash:r[o.peerId].hashSend}:{act:"send",to:o.peerId,from:"dialog",hash:r[o.peerId].hashSend,_af:o._af,random_id:a,entrypoint:store.mail.cur.mvk_entrypoint||""},u=!0;if(each(geByClass1("uMailWrite"),function(e,t){return!t.name||t.disabled?!0:("radio"!==t.type||t.checked)&&("checkbox"!==t.type||t.checked)?"button"===t.type?!0:"submit"===t.type?!0:"image"===t.type?!0:(c[t.name]=t.value,void("message"!==t.name&&(u=!1))):!0}),(c.message||"").trim().length&&(u=!1),u)return l&&MailDialog.openDialog({isEditing:!0}),!1;s?(uMailHat.onCancelEditing(!0),ajaxRequest("/mail",c)):(o.localOutMsgIds.push(a),ut(c),store.mail.cur.mvk_entrypoint=""),t.value="",o.texts[o.peerId]="",o.textsHTML[o.peerId]="",$$(".uMailWrite__textareaGhost").forEach(function(e){return e.innerHTML=""});var d=$(".uMailWrite__textareaGhost");$$(".uMailWrite__textarea").forEach(function(e){return setStyle(e,"height",d.offsetHeight)}),$$(".uMailWrite__main").forEach(function(e){return setStyle(e,"height",d.offsetHeight)}),uMailWrite.onAfterSend(),MailScrap.onSystemMessageClick(),j(),Q(o.peerId),StickersHints.actualizeVisibility();var A=browser.ios?setTimeout:requestAnimationFrame;f&&!l&&(t.focus(),A(function(){return t.focus()}))}function Z(){var e=Z,t=e.typingData||(e.typingData={});if(0!==$(".uMailWrite__textarea").value.length&&!store.mail.cur.editing){var n=Date.now(),i=store.mail,o=i.cur,r=i.peers,a=o.peerId;-2e9>=a||t[a]&&n-t[a]<7e3||(t[a]=n,ajaxRequest("/mail",{_ajax:1,act:"typing",peer:a,hash:r[a].hashTyping,community:nav.getQuery("community")}))}}function et(e,t){var n=$(".uMailWrite__textareaGhost"),i=t.value;n.innerText=i,"\n"===last(i)&&(n.innerHTML+="&nbsp;");var o=store.mail.cur;o.texts[o.peerId]=i,o.textsHTML[o.peerId]=i.replace(/\n/g,"<br/>"),$$(".uMailWrite__textarea").forEach(function(e){return setStyle(e,"height",n.offsetHeight)}),$$(".uMailWrite__main").forEach(function(e){return setStyle(e,"height",n.offsetHeight)}),y(),nt(e,t,function(){Mention.onKeyUp(e,t)})}function tt(e){var t=store.mail,n=t.peers,i=t.members,o=n[e],r=o.memberIds||[],a=[];return r.forEach(function(e){var t=i[e];if(t){var n=[t.id,t.name,t.url.replace("/","@"),t.avatar,t.url.replace("/",""),null,null,null,t.firstName];a.push(n)}}),a}function nt(e,t,n){if(v.length){var i=!hasClass("Mention_inited",geByClass1("uMailWrite__main"));i&&D(),n(e,t)}}function it(e,t){nt(e,t,function(){Mention.onKeyDown(e,t)}),(10==e.keyCode||13==e.keyCode&&(e.ctrlKey||e.metaKey))&&J()}function ot(e,t){nt(e,t,function(){Mention.onClick(e,t)})}function rt(e,t){w="text";var n=function(){F(),O(),V(),StickersHints.init(),nt(e,t,function(){Mention.onFocus(e,t)})};browser.ios?n():requestAnimationFrame(function(){requestAnimationFrame(function(){n()})}),clearTimeout(h),f=!0,r.onOpen()}function at(){"text"===w&&(w=""),r.onClose(),h=setTimeout(function(){f=!1},1e3)}function st(){var e=store.mail,t=e.cur,n=e.peers,i=e.queue;if(t.peerId){var o=n[t.peerId].attachmentsHTML,r=t.msgAttached[t.peerId],a=r&&r.length,s=yt(),l=q["class"]("uMailWrite__button",{send:!0,send_active:!!(!s||o.length>150||a),loading:!!(i[t.peerId]||[]).length,uploading:!mediaUpload.checkUploading(),edit_accept:!(!t.editing||s),edit_remove:!(!t.editing||!s)});$$(".uMailWrite__button_send").forEach(function(e){return e.className=l})}}function lt(e){var t=q["class"]("uMailWrite__button",{stickers:!0,stickers_active:e});$$(".uMailWrite__button_stickers").forEach(function(e){return e.className=t})}function ct(e){var t=q["class"]("uMailWrite__button",{keyboard:!0,keyboard_active:e});$$(".uMailWrite__button_keyboard").forEach(function(e){return e.className=t})}function ut(e){var t=store.mail.cur.peerId,n=store.mail.ref,i=store.mail.ref_source;if(t){store.mail.queue[t]||(store.mail.queue[t]=[]),i&&(e.ref_source=i,e.ref=n,store.mail.ref_source=void 0,store.mail.ref=void 0);var o=store.mail.queue[t];o.push(e),dt(t);var r=store.mail.peers[t];if(r&&r.keyboard&&r.keyboard.one_time){r.keyboard=null;var s=a.getKeyboardState(t);s.updateTime=Date.now(),uMailWrite.renderKeyboardIfNeeded()}}st()}function dt(e){var t=store.mail.queue[e];1===t.length&&mt(e)}function At(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,"/mail?act=send&to="+e.to+"&from="+e.from+"&hash="+e.hash+"&_af="+e._af);e.ref&&(n+="&ref"+e.ref),e.ref_source&&(n+="&ref_source"+e.ref_source),Object.keys(e).forEach(function(t){("act"===t||"to"===t||"from"===t||"hash"===t||"_af"==t)&&delete e[t]}),ajaxRequest(n,e,function(e){uMailWrite.onMsgSend(e),ft(t)},function(t){if(2===t){delete e._ajax,delete e.random_id;var i=document.createElement("div"),o=Object.keys(e);i.innerHTML='\n        <form action="'+n+'" method="POST">\n          '+o.map(function(t){return'<input name="'+t+'" value="'+e[t]+'" />'}).join("")+"\n        </form>\n      ";var r=i.$("form");document.body.appendChild(r),r.submit()}})}function mt(e){var t=store.mail.queue[e];if(t.length){var n=t[0];At(n,e)}else _t()}function ft(e){{var t=store.mail.queue[e];t.shift()}MailScrap.clearSystemMessage2(),remove(geByClass1("message__newMsgsDivider")),remove(geByClass1("Unfold__item_returnToChat")),t.length?mt(e):pt(e)}function pt(){_t()}function _t(){st()}function ht(){var e=$(".uMailWrite__attachments");return e?e.$$(".thumb_item").length+e.$$(".medias_row").length-e.$$(".fwd_item").length:0}function vt(){var e=$(".uMailWrite__button_attach");if(e){var t=ht()>=10;e.classList.add("uMailWrite__button_disabled",t),t?e.addEventListener("mousedown",gt,!0):e.removeEventListener("mousedown",gt,!0)}}function gt(e){e.stopPropagation(),alert(lang.mobile_mail_attachments_limit)}function wt(e){var t=document.createElement("textarea");t.innerHTML=e;var n=t.value,i=$$(".uMailWrite__textarea");i.forEach(function(e){return e.value=n}),et({},i[0]),k()}function yt(){var e=!0;return each(geByClass1("uMailWrite"),function(t,n){return!n.name||n.disabled?!0:("radio"!==n.type||n.checked)&&("checkbox"!==n.type||n.checked)?"button"===n.type?!0:"submit"===n.type?!0:"image"===n.type?!0:void("message"!==n.name?e=!1:(n.value||"").trim().length&&(e=!1)):!0}),e}function bt(e){var t=$(".uMailWrite__keyboard");if(t){var n=store.mail,i=n.cur,o=n.peers,r=i.peerId&&o[i.peerId],s=void 0;s=i.groupId||!r||r.closed||r.kicked?!1:!(!r.keyboard||!r.keyboard.buttons.length);var l=$(".uMailWrite"),c=q.parseClass("uMailWrite",l.className);c.keyboard!==s&&(l.className=q["class"]("uMailWrite",Object.assign({},c,{keyboard:s})));var u=a.getKeyboardState(i.peerId);if(u.rendered=!1,!s)return void V();g||(g=lsGet("mail_keyboard_hidden")||{});var d=r.keyboard,A=g[i.peerId],m=(e&&e.update===!0,!w||"buttons"===w),f=!1;A&&(A==d.chat_local_id?m=!1:f=!0),m?U({store:f}):f&&z()}}function St(){var e=store.mail,t=e.cur,n=e.peers,i=t.peerId&&n[t.peerId];if(i&&i.keyboard&&i.keyboard.buttons){var o=i.keyboard.buttons.map(function(e){var t=e.map(function(e){return uMailWrite_KeyboardButton(e,i.keyboard)});return uMailWrite_KeyboardRow(t.join(""))}).join(""),r=$(".uMailWrite__keyboard");r.innerHTML=o;var s=a.getKeyboardState(t.peerId);s.rendered=!0}}},"./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger.js":function(){var e=o(['\n    <div class="','">\n      <div class="messenger__layer messenger__layer_main">\n        <div class="messenger__header">',"</div>\n        ",'\n      </div>\n      <div class="messenger__layer messenger__layer_convo ','">\n        ',"\n      </div>\n    </div>\n  "],['\n    <div class="','">\n      <div class="messenger__layer messenger__layer_main">\n        <div class="messenger__header">',"</div>\n        ",'\n      </div>\n      <div class="messenger__layer messenger__layer_convo ','">\n        ',"\n      </div>\n    </div>\n  "]),t=o(['\n    <div class="messenger__header">\n      ','\n      <div class="messenger__pinned">',"</div>\n    </div>\n    ",'\n    <div class="messenger__footer">\n      <div class="messenger__write">','</div>\n      <div class="messenger__acts">','</div>\n      <div class="messenger__dialog">',"</div>\n    </div>\n  "],['\n    <div class="messenger__header">\n      ','\n      <div class="messenger__pinned">',"</div>\n    </div>\n    ",'\n    <div class="messenger__footer">\n      <div class="messenger__write">','</div>\n      <div class="messenger__acts">','</div>\n      <div class="messenger__dialog">',"</div>\n    </div>\n  "]),n=o(['\n    <div class="messenger__spinner">\n      ',"\n    </div>\n  "],['\n    <div class="messenger__spinner">\n      ',"\n    </div>\n  "]);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.assign(window,{Messenger:a,uMessenger:r,uMessenger_class:u,uMessenger_getPinnedMsg:c,Messenger_renderConvoLayer:s,uMessenger_hasSelectedMsgs:d});function r(){var e=store.mail.cur.query,t=MailScrap({scrap:"folder"}),n=MailScrap({scrap:"search"});return a({mix:u(),actionsOpen:d()?"messenger_actionsOpen":"",mailHat:uMailHat(),convo:s(),query:e,createChatUrl:"/mail?act=new_chat",scrapFolder:t,scrapSearch:n})}function a(t){var n=window.lang,i=n.mobile_mail_search_only_messages,o=MailFilter({query:t.query,createUrl:t.createChatUrl}),r=q.onClick("Messenger._onSearchMsgsClick"),a=ScrollView({mix:"messenger__body",attrs:q.onScroll("Messenger._onMainScroll","this"),inner:[Brick({mix:"messenger__filter",inner:o}),Brick({mix:"messenger__searchMsgs",attrs:r,inner:i}),Brick({mix:"messenger__loadable",inner:[Brick({mix:"messenger__folderList",inner:t.scrapFolder}),Brick({mix:"messenger__searchList",inner:t.scrapSearch}),l()]})]});return q.html(e,t.mix,t.mailHat,a,t.actionsOpen,t.convo)}function s(){var e=store.mail,n=e.cur,i=e.peers[n.peerId],o=uMailHat(),r=c(),a=uMailWrite(),s=i&&i.canPin,u=MailActs({canPin:s,isVkcomgroup:i.isVkcomgroup}),d=MailDialog({}),A=MailScrap({scrap:"peer"}),m=ScrollView({mix:"messenger__body",attrs:q.onScroll("Messenger._onConvoScroll","this"),inner:[Brick({mix:"messenger__spacer"}),Brick({mix:"messenger__convoList",inner:A}),l()]});return q.html(t,o,r,m,a,u,d)}function l(){var e=Spinner();return q.html(n,e)}function c(){var e=store.mail,t=e.cur.peerId;return t&&e.peers[t].pinnedMsg}function u(){var e,t=store.mail.cur,n=void 0;return n=t.peerId?"view_dialog":t.query&&"msgs"===t.tab?"view_searchMsgs":t.query?"view_searchPeers":"folder_"+t.folder,q["class"]("e","messenger","uMessenger",(e={},i(e,n,!0),i(e,"community",!!t.groupId),e))}function d(){var e=store.mail.cur.msgSelected;return Object.keys(e).length>0}},"./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger_0.js":function(){Object.assign(Messenger,{scrollMainBodyToTop:e,onMainScroll:befall("scrollElem"),onQueryChange:MailFilter.onChange,onQueryClear:MailFilter.onClear,onSearchMsgsClick:befall(),setQuery:MailFilter.setQuery,getMainBody:function(){return i("main")},setMainLoading:function(e){return n("main",e)},onConvoAtTop:befall(),onConvoAtBottom:befall(),onConvoScroll:befall("scrollElem"),setConvoLoading:function(e){return n("convo",e)},getConvoBody:function(){return i("convo")},scrollConvoToBottom:o,redrawConvoLayer:t}),function(){Messenger._onMainScroll=s,Messenger._onConvoScroll=l,Messenger._onSearchMsgsClick=Messenger.onSearchMsgsClick}();function e(){var e=$(".messenger__layer_main .messenger__body");e.scrollTop=0}function t(){var e=Messenger_renderConvoLayer();$$(".messenger__layer_convo").forEach(function(t){t.innerHTML=e})}function n(e,t){$$(".messenger__layer_"+e).forEach(function(e){e.classList.toggle("messenger__layer_loading",t)})}function i(e){return $(".messenger__layer_"+e+" .messenger__body")}function o(){var e=Messenger.getConvoBody();e&&(e.scrollTop=e.scrollHeight)}Object.assign(uMessenger,{scrollToMsg:a});var r=void 0;uVK.onReady(function(){return r=window.innerHeight});function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,i=Msg.getElem(e);if(i){{var o=Messenger.getConvoBody();$(".mailScrap__loading_before")}if(t)o.scrollTop=i.offsetTop-.18*o.offsetHeight;else{var r=$(".typing_id_curConvo").offsetHeight;o.scrollTop=i.offsetTop-.5*(o.offsetHeight+2)+(i.offsetHeight+r)/2,i.offsetHeight>o.offsetHeight&&(o.scrollTop=i.offsetTop)}n&&(addClass("msg_highlight",i),setTimeout(function(){removeClass("msg_highlight",i)},1500))}}function s(e){Messenger.onMainScroll(e)}function l(e){Messenger.onConvoScroll(e),e._isScrolling=!0,c(e)&&Messenger.onConvoAtTop(),u(e)&&Messenger.onConvoAtBottom(),e._scrollingTimer&&clearTimeout(e._scrollingTimer),e._scrollingTimer=setTimeout(function(){e._isScrolling=!1},100)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return window._preventedCheckTop?!1:e&&A(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&d(e)}function d(e){return e.scrollHeight&&e.scrollHeight-e.scrollTop-e.offsetHeight<=1.5*window.innerHeight}function A(e){return e.scrollHeight&&e.scrollTop<=2.5*window.innerHeight}function m(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}function f(e,t){e.scrollTop=e.scrollHeight-e.offsetHeight-t}function p(){var e=Messenger.getConvoBody();e&&(e.prevHeight&&e.prevHeight!==e.offsetHeight&&f(e,e.scrollBottom),e.prevHeight=e.offsetHeight,e.scrollBottom=m(e),_&&requestAnimationFrame(p))}var _=!1;uMessenger.startPolling=function(){_=!0,p()},uMessenger.stopPolling=function(){_=!1};if(Object.assign(uMessenger,{redraw:w,redrawView:y,redrawMailActions:b,redrawPinnedMsg:S,setPinnedVisibility:C,expandPeerBefore:g}),browser.ios){var h=null;Messenger.onConvoScroll(function(e){e.isScrolling=!0,h&&clearTimeout(h),h=setTimeout(function(){return e.isScrolling=!1},50)})}var v=null;function g(){if($(".load_before_closed")){var e=Messenger.getConvoBody();if(browser.ios){var t=function(){var t=e.scrollHeight-e.scrollTop-e.offsetHeight;setStyle(e,"overflow","hidden"),$$(".load_before_closed").forEach(function(e){return e.classList.remove("load_before_closed")}),e.scrollTop=e.scrollHeight-t-e.offsetHeight,setStyle(e,"overflow","auto")};e.isScrolling?(v&&clearInterval(v),v=setInterval(function(){e.isScrolling||(clearInterval(v),t())},10)):t()}else if(e.scrollTop<=184){var n=e.scrollHeight-e.scrollTop-e.offsetHeight;$$(".load_before_closed").forEach(function(e){return e.classList.remove("load_before_closed")}),e.scrollTop=e.scrollHeight-n-e.offsetHeight}}}function w(){$$(".uMessenger").forEach(function(e){return e.outerHTML=uMessenger()})}function y(){$$(".uMessenger").forEach(function(e){return e.className=uMessenger_class()});var e=store.mail,t=e.cur,n=e.peers;t.peerId&&(S(),MailActs.togglePin(n[t.peerId].canPin))}function b(){var e=uMessenger_hasSelectedMsgs();$$(".messenger__layer_convo").forEach(function(t){t.classList.toggle("messenger_actionsOpen",e),MailActs.update();var n=t.$(".messenger__write").offsetHeight,i=t.$(".messenger__acts").offsetHeight,o=i-n,r=t.$(".messenger__body");requestAnimationFrame(function(){!r._fixed&&o&&(r.style.paddingBottom=o+"px",r._fixed=!0),0>=o&&(r.style.paddingBottom=0,r._fixed=!1)})})}function S(){var e=store.mail,t=e.peers,n=e.cur,i=uMessenger_getPinnedMsg(),o=t[n.peerId].hasPinnedMsg;$(".messenger__pinned").innerHTML=i,MailHat_convo.setHasPinnedMsg(o)}function C(e){var t=store.mail,n=t.peers,i=t.cur,o=n[i.peerId].hasPinnedMsg;$$(".messenger").forEach(function(t){t.classList.toggle("messenger_pinnedVisible",o&&e),t.classList.toggle("messenger_pinnedHidden",o&&!e)})}},"./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger_logic.js":function(e,t,n){var i=n("./static/js/mobile/modules/emoji_html.js"),o=n("./static/js/mobile/modules/core/store/mail_utils.js");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){uVK.onReady(b),Messenger.onQueryChange(k),Messenger.onQueryClear(E),uConvo.onTap(_),uMailHat.onUnreadClick(s),uMailHat.onBackClick(z),uMailHat.onBackToDialogClick(W),uMailHat.onCancelEditing(jt),uMailWrite.onAfterSend(K),uMailWrite.onAttachedMsgsRemove(p),uMailWrite.onToBottomClick(H),uMailWrite.onMsgSend(d),Msg.onClick(_t),Msg.onRestoreClick(ht),Voting.onHtmlUpdate(It),Messenger.onMainScroll(N),Messenger.onConvoScroll(R),Messenger.onSearchMsgsClick(C),Messenger.onConvoScroll(uMessenger.expandPeerBefore),Messenger.onConvoAtTop(F),Messenger.onConvoAtBottom(L),MailActs.onCloseClick(ot),MailActs.onRemoveClick(rt),MailActs.onImportantClick(dt),MailActs.onReplyClick(At),MailActs.onForwardClick(mt),MailActs.onSpamClick(ut),MailActs.onPinClick(nt),MailActs.onEditClick(it),MailDialog.onConfirmDelete(st),PinnedMsg.onHideClick(Ct),im.onNewMsg(A),im.onEditMsg(m),im.onTyping(Y),im.onOnlineChange(X),im.onMsgReadByMe(G),im.onMsgReadByOther(Q),im.onMsgImportantRemove(v),im.onMsgImportantAdd(h),im.onMsgRemove(g),im.onPeerKeyboard(w),uVK.onReady(c),uVK.onResize(c),page.onChange(c),mediaUpload.onStart(f),nav.onPopState(J),nav.onBeforeGo(Z),nav.onBeforeGo2(et),page.onChange(tt),uVK.onReady(kt),page.onChange(kt),uVK.onReady(Et),page.onChange(Et),page.onChange(u),page.onChange(xt),uVK.onReady(u),uVK.onReady(bt),uVK.onReady(xt),uVK.onOrientationChange(l),uMessenger.onShowPinnedMsgClick=St,uMessenger.onHidePinnedMsgClick=Ct}();var a=!1;function s(){Messenger.scrollMainBodyToTop()}function l(){browser.ios&&document.activeElement.blur()}function c(){window.innerWidth>881&&$$(".messenger").forEach(function(e){return setStyle(e,"height",window.innerHeight)})}function u(){var e=nav.getQuery("msg")||nav.getQuery("id");requestAnimationFrame(e?function(){uMessenger.scrollToMsg(e)}:Messenger.scrollConvoToBottom)}function d(e){var t=store.mail.cur;storeMethods.injectMail({msgs:r({},e.id,e)}),t.groupId&&(e.adminId=t.userId),U(e,!0)}function A(e){-1===store.mail.cur.localOutMsgIds.indexOf(e.randomId)&&U(e)}function m(e){U(e)}function f(){uMailWrite.updateAttachmentsVisibility()}function p(){{var e=store.mail,t=e.cur;e.peers}t.msgAttached[t.peerId]={},uMailWrite.uiRedrawAttachments(t.peerId)}function _(e){{var t=store.mail,n=(t.cur,t.rolls),i=t.msgs,o=Number(qs2obj(e.split("?")[1]).peer),r=last(n.peer[o]||[]);i[r]}return S(e)}function h(e){var t=store.mail,n=t.cur,i=t.msgs,o=t.scraps,r=t.rolls,a=i[e];if(a&&(a.isImportant=!0,r.folder.important=r.folder.important.concat(e).filter(unique).sort(desc),Msg.toggleImportant(e,!0),"important"===n.folder)){var s=o.folder.slice();o.folder=o.folder.concat(e).filter(unique).sort(desc),MailScrap.redrawFolder(s)}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,n=store.mail,i=n.cur,o=n.msgs,r=n.scraps,a=n.rolls,s=o[e];if(s&&(s.isImportant=t?!1:!0,arrayRemove(a.folder.important,e),Msg.toggleImportant(e,!1),"important"===i.folder)){var l=r.folder.slice();arrayRemove(r.folder,e),MailScrap.redrawFolder(l)}}function g(e){var t=g,n=store.mail,i=n.cur,o=n.msgs,r=n.scraps,a=n.rolls,s=n.peers,l=o[e];if(l&&l.isUnread&&(s[l.peerId].countUnread=s[l.peerId].countUnread-1,i.countUnread=i.countUnread-1,uMailWrite.redrawToBottom(),0===s[l.peerId].countUnread&&(a.folder.unread=a.folder.unread.filter(function(e){return e!==l.peerId}))),l&&!i.msgRemoved[e]&&-1===t.destroyPrevented.indexOf(e)){var c=a.peer[l.peerId];arrayRemove(c,e),i.peerId===l.peerId&&(arrayRemove(r.peer,e),Msg.destroy(e),i.msgSelected[e]&&(delete i.msgSelected[e],MailActs.setCount(Object.keys(i.msgSelected).length),uMessenger.redrawMailActions()),MailScrap.checkDivider())}l&&l.isImportant&&v(e,!1),l&&a.peer[l.peerId].length&&MailScrap.redrawFolder(),uMailHat.redrawCounter(),a.folder[i.folder]=[],r.folder=[],y()}g.destroyPrevented=[];function w(e){var t=store.mail,n=t.peers,i=t.cur,r=n[e];if(r){var a=o.getKeyboardState(e),s=Date.now();if(!(s-a.updateTime<=500)){var l=a.updateTime;ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(t){l===a.updateTime&&(storeMethods.injectMail(t),e==i.peerId&&uMailWrite.renderKeyboardIfNeeded({update:!0}))})}}}function y(){var e=store.mail,t=e.cur,n=e.msgs,i=e.scraps,o=e.rolls;ajaxRequest("/mail",{act:"all"===t.folder?null:t.folder,offset:0},function(e,r){if(store.mail.cur){storeMethods.injectMail(e),("all"===t.folder||"unread"===t.folder)&&Object.keys(e.msgs).forEach(function(t){t=toInt(t);var i=e.msgs[t].peerId;o.peer[i]=(o.peer[i]||[]).concat(t).filter(function(e){return!!n[e]}).filter(unique).sort(asc)});var a="important"===t.folder,s=a?desc:vt,l=Object.keys(a?e.msgs:e.peers).map(toInt).sort(s).filter(function(e){return-1===i.folder.indexOf(e)}),c=[].concat(l).filter(unique).sort(s);o.folder[t.folder]=c,i.folder=first(20,c),store.mail.reached.folder[t.folder]=r,MailScrap.redrawFolder(),Messenger.setMainLoading(!1),uMailHat.redrawCounter()}})}function b(){if("/mail"===location.pathname||0===location.pathname.indexOf("/write")){if(!store.mail.cur)return;im.on(),wt(),yt(),Messenger.scrollConvoToBottom(),uMessenger.startPolling(),store.mail.cur.peerId&&(uMailWrite.renderKeyboardIfNeeded(),G(null,store.mail.cur.peerId))}}function S(e){var t=M(e);return e=makeUrl(e),t&&location.pathname+location.search!==e&&nav.go(e,!1,{push_only:!0}),t||(MailScrap.resetPrevScraps(),store.mail={},store.uiLastId=0,store.uiState={}),t}function C(){var e=store.mail.cur.query;S("/mail?q="+e+"&tab=messages")}function k(e){var t=k;if(t.timer&&clearTimeout(t.timer),store.mail.cur)if(e){var n=makeUrl("/mail?q="+e+("msgs"===store.mail.cur.tab?"&tab=messages":""));M(n),t.timer=setTimeout(function(){S(n)},300)}else S("/mail")}k.clearTimer=function(){self=k,self.timer&&(clearTimeout(self.timer),self.timer=null)};function E(){Messenger.setMainLoading(!1),Messenger.setConvoLoading(!1),k.clearTimer(),S("/mail")}function M(e){e=makeUrl(e);var t=e.split("?"),n=t[0],i=qs2obj(t[1]),o=store.mail,r=o.cur,s=o.scraps;if(r){var l=i.act,c=i.peer,u=i.chat,d=i.email,A=i.m,m=toInt(i.msg)||toInt(i.id)||null,f="messages"===i.tab?"msgs":"peers",p=i.q||"";if(Z())return!0;if("/mail"!==n||"add_to_chat"===l||"flush_history"===l||"info"===l||"msg"===l||"unpin"===l||"leave_chat"===l||"new_chat"===l||"chat_preview"===l||"return_to_chat"===l||"show_medias"===l||"toggle_community_block"===l||"community_toggle_important"===l||"ban_user"===l||"community_mark_answered"===l||"invite_link"===l||"reset_link"===l||"send"===l||"show"===l&&i.id||70==A||71==A||76==A||784==A||783==A||786==A||785==A||787==A)return im.off(),uMessenger.stopPolling(),void uMailHat.cancelStatusUpdate();m&&(a=!0),MailScrap.clearSystemMessage2();var _=c?toInt(c):u?toInt(u)+2e9:d?-toInt(d)-2e9:null,h="unread"===l||"important"===l||"unrespond"===l?l:"all";return r.peerId&&!_&&p?(r.query=p,r.peerId=null,r.tab=f,x(),Messenger.setQuery(p),B()):(r.query!==p||r.tab!==f)&&(r.peerId===_?(r.query=p,r.tab=f,s.search=[],r.tab!==f&&(store.mail.reached.search.msgs={}),uMessenger.redrawView(),Messenger.setQuery(p),MailScrap.redrawSearch(),p?B():(pt(),0===s.folder.length&&P())):"peers"===r.tab?(store.mail.cur.mvk_entrypoint="conversations_search",r.query="",Messenger.setQuery(""),uMessenger.redrawView()):"msgs"===r.tab&&(store.mail.cur.mvk_entrypoint="message_search",setTimeout(function(){return store.mail.cur.mvk_entrypoint="message_search"},60))),r.peerId!==_?_?D(_,m):x():_&&A?(store.mail.peers[_].systemMessageCode=toInt(A),MailScrap.updateClass("peer"),MailScrap.redrawSystemMessage(),Messenger.scrollConvoToBottom()):r.folder!==h&&(T(h),Messenger.getMainBody().scrollTop=0,P()),!0}}function T(e){{var t=store.mail,n=t.cur,i=t.scraps,o=t.rolls;t.reached}n.folder=e,j()?Messenger.setMainLoading(!0):(i.folder=first(20,o.folder[e]),MailScrap.folderSetItems(i.folder),uMessenger.redrawView(),uMailHat.redraw())}function j(){var e=store.mail,t=e.rolls,n=e.cur,i=t.folder[n.folder];return!(i&&i.every(function(e){return t.peer[e]&&t.peer[e].length>0}))}function D(e,t){var n=store.mail,i=n.cur,o=n.msgs,r=n.peers,s=n.scraps,l=n.rolls,c=n.reached,u=l.peer[e]||[];if(!t&&r[e].countUnread>0){Messenger.setConvoLoading(!0),window._preventedCheckTop=!0,a=!0,i.peerId=e,s.peer=[],bt(),uConvo.redrawUnread(e),uMessenger.redrawView(),Messenger.redrawConvoLayer(),kt(),uMailHat.startStatusUpdate(),A(),MailScrap.peerSetItems([]),uMailWrite.renderKeyboardIfNeeded();var d={act:"show",peer_id:e,msg:"unread"};return void ajaxRequest("/mail",d,function(t,n,i){if(store.mail.cur){var r=t.rolls.peer[e];if(storeMethods.injectMail(t),c.peer.after[e]=n,c.peer.before[e]=i,u=l.peer[e]||[],(arrayIntersects(r,u)||n&&0===u.length)&&(l.peer[e]=u.concat(r).filter(unique).sort(asc)),store.mail.cur.peerId===e){uMailWrite.preventShowToBottom(),s.peer=r.slice(),geByClass1("mailScrap__items_peer").innerHTML="",MailScrap.updateClass("peer"),MailScrap.peerSetItems(r),wt(),AudioMessagePlayer.redrawWaves(),I(e);var d=r.find(function(e){return o[e].isUnread});uMessenger.scrollToMsg(d,!0,!1),requestAnimationFrame(function(){window._preventedCheckTop=!1,a=!1,Messenger.setConvoLoading(!1)})}}})}i.peerId=e,s.peer=[],bt(),t?(s.peer=[t],l.peer[e]=[],c.peer.before[e]=!1,c.peer.after[e]=!1,Messenger.setConvoLoading(!0)):(s.peer=last(20,u),A()),store.mail.reached.peer.after[e]=!0,MailScrap.updateClass("peer");function A(){i.forwardFromId&&(i.query="",i.tab="peers",s.search=[],Messenger.setQuery(i.query),At(),i.forwardFromId=null)}uMessenger.redrawView(),Messenger.redrawConvoLayer(),kt(),uMailHat.startStatusUpdate(),MailScrap.peerSetItems(s.peer),uMailWrite.renderKeyboardIfNeeded(),t||I(e);r[e];t&&(MailScrap.updateClass("peer"),uMessenger.scrollToMsg(t)),t?F(t):F(),requestAnimationFrame(function(){t||Messenger.scrollConvoToBottom(),AudioMessagePlayer.redrawWaves(),requestAnimationFrame(function(){t||Messenger.scrollConvoToBottom()})})}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0,t=store.mail,n=t.cur,i=t.scraps;uMailHat.cancelStatusUpdate(),jt(),n.peerId=null,n.mvk_entrypoint="",i.peer=[],bt(),e&&(n.msgSelected={}),uMessenger.redrawView(),uMailHat.redraw(),requestAnimationFrame(function(){MailActs.setCount(0),uMessenger.redrawMailActions(),uCurConvoTyping.redraw(),P(),requestAnimationFrame(function(){MailScrap.peerSetItems(i.peer)})})}function I(e,t){t||(t=function(){});var n=store.mail.peers[e];!n||n.countUnread>0?ajaxRequest("/mail",{act:"read_dialog",peer_id:e,hash:n.hashRead},function(){G(null,e)}):setTimeout(function(){G(null,e)},500)}function P(){var e=P,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,o=n.scraps,r=n.rolls,a=n.reached,s=i.folder,l=o.folder,c=r.folder[s],u="folder_"+s,d=a.folder[s]&&last(l)===last(c);if(Messenger.setMainLoading(0===l.length&&!d),!t[u]&&!d){var A="important"===s,m=j(),f=A?desc:vt,p=[];if(0===l.length)p=first(20,c);else{var _=c.indexOf(last(l));p=_>=0?c.slice(_+1,_+21):[]}if(p.length&&!m){var h=l.concat(p).filter(unique).sort(f);o.folder=h,MailScrap.folderAddItems(p),wt()}else{t[u]=!0;var v="all"===s?null:s,g=m?0:l.length;ajaxRequest("/mail",{act:v,offset:g},function(e,n){if(store.mail.cur){storeMethods.injectMail(e),Object.keys(e.peers).forEach(function(e){store.mail.reached.peer.after[e]=!0}),("all"===s||"unread"===s)&&Object.keys(e.msgs).forEach(function(t){t=toInt(t);var n=e.msgs[t].peerId;r.peer[n]=(r.peer[n]||[]).concat(t).filter(unique).sort(asc)});var d=Object.keys(A?e.msgs:e.peers).map(toInt).sort(f).filter(function(e){return-1===l.indexOf(e)}),p=c.concat(d).filter(unique).sort(f);if(r.folder[s]=p,n&&(a.folder[s]=n),t[u]=!1,i.folder===s){{o.folder.slice()}o.folder=p,MailScrap.updateClass("folder"),MailScrap.folderAddItems(d),wt(),Messenger.setMainLoading(!1),m&&(MailScrap.folderSetItems(o.folder),uMessenger.redrawView(),uMailHat.redraw())}}})}}}function B(){var e=B,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,o=n.scraps,r=n.rolls,a=n.reached,s=i.tab,l=i.query,c="search_msgs_"+s+"_"+l,u=o.search,d=r.search[s][l]||[],A=a.search[s][l]&&last(u)===last(d);if(Messenger.setMainLoading(0===u.length&&!A),!t[c]&&!A){var m=[];if("peers"===s&&(d.length||(d=ft()),d.length))if(0===u.length)m=first(20,d);else{var f=d.indexOf(u);m=f>=0?d.slice(f+1,f+41):[]}if(m.length&&(o.search=u.concat(m).filter(unique),MailScrap.redrawSearch(),MailScrap.updateClass("search"),wt(),Messenger.setMainLoading(!1)),!m.length||"peers"===s){var p="msgs"===s?{act:"search",q:l,offset:o.search.length,messages:1}:{act:"search",q:l};e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){t[c]=!0,ajaxRequest("/mail",p,function(e,n){if(store.mail.cur){t[c]=!1,storeMethods.injectMail(e);var u=Object.keys("peers"===s?e.peers:e.msgs).map(toInt),A="peers"===s?vt:desc,m=d.concat(u).filter(unique).sort(A);r.search[s][l]=m,n&&(a.search[s][l]=n),i.tab===s&&i.query===l&&(Messenger.setMainLoading(!1),o.search=o.search.concat(u).filter(unique).sort(A),MailScrap.redrawSearch(),MailScrap.updateClass("search"),wt())}})},300)}}}function F(e){if(!$(".load_before_closed")){var t=F,n=t.locked||(t.locked={}),i=store.mail,o=i.cur,r=i.scraps,s=i.rolls,l=i.reached;if(o){var c=o.peerId,u=r.peer,d=s.peer[c]||[],A="peer_before_"+c,m=l.peer.before[c]&&u[0]===d[0];if(Messenger.setConvoLoading(u.length<=1&&!m),!n[A]&&!m){var f=Messenger.getConvoBody(),p=!arrayIntersects(u,d),_=first(u),h=_?d.indexOf(_):-1,v=0===u.length?last(10,d):h>=0?d.slice(h-20,h):[];if(v.length&&!e){if(f.scrollTop>6e3&&!p)return;if(window._preventedCheckTop)return;var g=r.peer.slice(),w=u.concat(v).filter(unique).sort(asc);r.peer=w,MailScrap.peerAddItemsBefore(v.filter(function(e){return-1===g.indexOf(e)})),wt(),AudioMessagePlayer.redrawWaves(),MailScrap.updateClass("peer"),Messenger.setConvoLoading(!1)}else{if(!c)return;var y={act:"show",peer_id:c,msg:u[0],direction:e?"around":"before"},b=u[0];n[A]=!0,ajaxRequest("/mail",y,function(t,i,o){if(store.mail.cur){e&&setTimeout(function(){a=!1},10),n[A]=!1,storeMethods.injectMail(t);var m=Object.keys(t.msgs).map(toInt).filter(function(e){return-1===u.indexOf(e)}),_=u.concat(m).filter(unique).sort(asc);if(o&&(l.peer.before[c]=!0),i&&(l.peer.after[c]=!0),d=s.peer[c]||[],(arrayIntersects(_,d)||i&&0===d.length)&&(s.peer[c]=(s.peer[c]||[]).concat(_).filter(unique).sort(asc)),store.mail.cur.peerId===c){if(uMailWrite.preventShowToBottom(),f.scrollTop>6e3&&!p)return;var h=r.peer.slice();r.peer=_,MailScrap.updateClass("peer"),b?(MailScrap.peerAddItemsBefore(m.filter(function(e){return-1===h.indexOf(e)&&b>e}),!0),MailScrap.peerAddItemsAfter(m.filter(function(e){return-1===h.indexOf(e)&&e>b}),!0)):MailScrap.peerAddItemsBefore(m,!0),e&&(uMessenger.scrollToMsg(e),Messenger.setConvoLoading(!1)),wt(),AudioMessagePlayer.redrawWaves(),Messenger.setConvoLoading(!1),uMessenger.expandPeerBefore(),setTimeout(uMessenger.expandPeerBefore,100),e&&At()}}})}}}}}function L(){var e=L,t=e.locked||(e.locked={}),n=store.mail,i=n.cur,o=n.scraps,r=n.rolls,s=n.reached;if(!a&&i){var l=i.peerId,c=o.peer,u=r.peer[l]||[],d="peer_after_"+l;if(!(t[d]||s.peer.after[l]&&last(c)===last(u))){var A=Messenger.getConvoBody(),m=!arrayIntersects(c,u),f=function(){return A.scrollHeight-A.scrollTop-A.offsetHeight},p=last(c),_=p?u.indexOf(p):-1,h=_>=0?u.slice(_+1,_+21):[];if(!h.length||nav.getQuery("msg")||nav.getQuery("id")){if(!l)return;var v={act:"show",peer_id:l,msg:last(c),direction:"after"};t[d]=!0,ajaxRequest("/mail",v,function(e,n){if(store.mail.cur){t[d]=!1,storeMethods.injectMail(e);var i=Object.keys(e.msgs).map(toInt).filter(function(e){return-1===c.indexOf(e)}).sort(asc),a=c.concat(i).filter(unique).sort(asc);if(n&&(s.peer.after[l]=n),u=r.peer[l]||[],(arrayIntersects(a,u)||n&&0===u.length)&&(r.peer[l]=(r.peer[l]||[]).concat(a).filter(unique).sort(asc)),store.mail.cur.peerId===l){if(f()>6e3&&!m)return;n&&MailScrap.updateClass("peer"),o.peer=a,MailScrap.updateClass("peer"),MailScrap.peerAddItemsAfter(i),wt(),AudioMessagePlayer.redrawWaves()}}})}else{if(f()>6e3&&!m)return;var g=c.concat(h).filter(unique).sort(asc);o.peer=g,MailScrap.peerAddItemsAfter(h),MailScrap.updateClass("peer"),wt(),AudioMessagePlayer.redrawWaves()}}}}var O=!1;function N(e){var t=store.mail,n=t.cur,i=t.scraps,o=t.rolls,r=e.scrollTop,a=e.scrollHeight,s=e.offsetHeight;if(!n.query&&20>=r&&i.folder.length){if(O){O=!1;{i.folder.slice()}i.folder=first(20,o.folder[n.folder]),MailScrap.folderCutItems(20)}}else r>20&&(O=!0,a-r-s<window.innerHeight&&(n.query?B():P()))}function H(){var e=store.mail,t=e.cur,n=e.scraps,i=e.rolls,o=e.reached,r=n.peer,a=i.peer[t.peerId]||[];if(a.length&&last(r)===last(a)&&o.peer.after[t.peerId])Messenger.scrollConvoToBottom(),uMailWrite.hideToBottom(),MailScrap.updateClass("peer");else{var s=t.peerId,l={act:"show",peer_id:s};ajaxRequest("/mail",l,function(e){if(store.mail.cur){var t=e.rolls.peer[s];i.peer[s]=t.slice(),storeMethods.injectMail(e),o.peer.after[s]=!0,store.mail.cur.peerId===s&&(uMailWrite.preventShowToBottom(),n.peer=t.slice(),geByClass1("mailScrap__items_peer").innerHTML="",MailScrap.peerAddItemsBefore(t),MailScrap.updateClass("peer"),Messenger.scrollConvoToBottom(),wt(),AudioMessagePlayer.redrawWaves())}})}}function R(e){var t=R,n=50;t.timer||(t.timer=setTimeout(function(){t.timer=null,V(e)},n))}function V(e){var t=store.mail,n=t.cur,i=t.scraps,o=t.msgs,r=t.peers;if(n){var a=i.peer,s=a.find(function(e){return o[e]&&o[e].isUnread&&o[e].authorId!==n.viewerId}),l=e.scrollTop,c=e.scrollHeight-l-e.offsetHeight,u=0;if(s){var d=Msg.getElem(s),A=e.scrollHeight-d.offsetTop;u=c-A,100>=u&&I(n.peerId)}e._prevScroll||(e._prevScroll=0),300>c&&$(".mailScrap_reachedAfter")?uMailWrite.hideToBottom():l>e._prevScroll-5||n.peerId&&r[n.peerId].countUnread?uMailWrite.showToBottom():uMailWrite.hideToBottom(),e._prevScroll=l}}function q(e){var t=vk.id==e.peerId&&!cur.groupId;return t||2&e.flags}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=e.peerId,a=e.msgId,s=e.authorId,l=e.text,c=e.date,u=e.hasAttachments,d=e.flags,A=e.adminId,m=e.isService,f=e.keyboard,p=store.mail,_=p.cur,h=p.peers,v=(p.msgs,p.members),g=p.rolls,w=p.scraps,y=p.reached;a||(a=e.id);var b=_.groupId?_.groupId===s:_.userId===s,S=!b,C=h[n]&&0===h[n].countUnread&&S,k=!!e.edited||!!e.refreshed,E=h[n]&&h[n].pinnedMsgId==a;if(A&&s>0&&(s=-s),!t&&(m||!l||u||!h[n]||!v[s]||A&&!v[A]||/\[id\d+\|.+\]/.test(l)||E)){if(!k&&S){var M=o.getKeyboardState(n);M.updateTime=Date.now()}return void ajaxRequest("/mail",{act:"message",message_id:a,forcePinned:E},function(e,t){if(store.mail.cur){if(storeMethods.injectMail(e),t.unpin){h[n].pinnedMsg="",h[n].hasPinnedMsg=!1;var i=Mt();delete i[n],Tt(i),_.peerId===n&&(uMessenger.redrawPinnedMsg(),kt())}else t.pinned&&(h[n].pinnedMsg=t.pinned,h[n].hasPinnedMsg=!0,_.peerId===n&&(uMessenger.redrawPinnedMsg(),kt()));if(k)MailScrap.peerReplaceItems([a]);else{var o=last(g.peer[n]||[]);if(g.peer[n]=(g.peer[n]||[]).concat(a).filter(unique).sort(asc),g.folder.all=g.folder.all.concat(n).filter(unique).sort(vt),S&&(g.folder.unread=g.folder.unread.concat(n).filter(unique).sort(vt)),_.groupId&&(S?g.folder.unrespond=g.folder.unrespond.concat(n).filter(unique).sort(vt):arrayRemove(g.folder.unrespond,n)),n===_.peerId&&(uCurConvoTyping.redraw(),uMailWrite.renderKeyboardIfNeeded({update:!0})),C&&(_.countUnread+=1,uMailHat.redrawCounter()),"all"===_.folder){var r=w.folder.slice();w.folder=w.folder.concat(n).filter(unique).sort(vt),MailScrap.redrawFolder(r)}else if("unread"===_.folder&&S){var l=w.folder.slice();w.folder=w.folder.concat(n).filter(unique).sort(vt),MailScrap.redrawFolder(l)}else if("unrespond"===_.folder){var c=w.folder.slice();S?w.folder=w.folder.concat(n).filter(unique).sort(vt):arrayRemove(w.folder,n),MailScrap.redrawFolder(c)}if(y.peer.after[n]||(y.peer.after[n]=!0,y.peer.before[n]=!1),_.peerId===n&&(arrayIntersects(w.peer,g.peer[n])||0===w.peer.length)&&last(w.peer)===o){w.peer=w.peer.concat(a).filter(unique).sort(asc);var u=Messenger.getConvoBody(),d=u.scrollTop+u.offsetHeight>=u.scrollHeight-2;MailScrap.peerAddItemsAfter([a]);var A=u.scrollHeight-u.scrollTop-u.offsetHeight<400;d&&Messenger.scrollConvoToBottom(),u.scrollTop+u.offsetHeight===u.scrollHeight&&Messenger.scrollConvoToBottom(),A?I(n):uMailWrite.showToBottom(),s===_.viewerId&&MailScrap.removeDivider(),s!==_.viewerId&&e.msgs&&e.msgs[a]&&StickersAnimation.checkSettingsAndLoad(e.msgs[a],!0)}}uConvo.redrawLastMsg(n),uConvo.redrawTyping(n),uConvo.redrawUnread(n),AudioMessagePlayer.redrawWaves()}})}var T=e.textShort||(b?'<span class="convo__msgAuthor">'+lang.mobile_mail_you+":</span> "+l:s!==n?'<span class="convo__msgAuthor">'+v[s].firstName+":</span> "+l:l),j=store.mail.msgs[a],D=Messenger.getConvoBody(),x=j?!j.isUnread:_.viewerId===n||_.peerId===n&&S&&D.scrollHeight-D.scrollTop-D.offsetHeight<400&&!!$(".mailScrap_reachedAfter"),P={id:a,peerId:n,authorId:s,date:c,dateShort:e.dateShort||c,textShort:T,textFull:e.textFull||mail.wrapLinks(l,d),isUnread:!x,edited:e.edited,canE:t?e.canE:q(e)};if(A&&(P.adminName=e.adminName||(A===_.userId?lang.mobile_mail_you:v[A].name),P.adminUrl=e.adminUrl||v[A].url),storeMethods.injectMail({msgs:r({},a,P)}),x&&(ajaxRequest("/mail",{act:"read_message",msg_id:a,peer_id:n,hash:h[n].hashRead},function(){}),G(null,n)),k)MailScrap.peerReplaceItems([a]);else{var B=last(g.peer[n]||[]);g.peer[n]=(g.peer[n]||[]).concat(a).filter(unique).sort(asc),g.folder.all=g.folder.all.concat(n).filter(unique).sort(vt),y.peer.after[n]||(y.peer.after[n]=!0,y.peer.before[n]=!1);var F=h[n];if(S){if(f){if(f.buttons&&f.buttons.length){F.keyboard=Object.assign(f,{author_id:s,chat_local_id:a});var L=document.createElement("div");F.keyboard.buttons.forEach(function(e){e.forEach(function(e){var t=e.action.label;L.textContent=t;var n=L.innerHTML;e.action.label=i.emojiToHTML(n),e.action.rawLabel=t})}),L=null}else F.keyboard=null;var O=o.getKeyboardState(n);O.updateTime=Date.now(),uMailWrite.renderKeyboardIfNeeded({update:!0})}g.folder.unread=g.folder.unread.concat(n).filter(unique).sort(vt),F.countUnread||(F.countUnread=0),F.countUnread+=1,uMailWrite.redrawToBottom()}if(F.typing.length&&(arrayRemove(F.typing,s),n===_.peerId?uCurConvoTyping.redraw():(uConvo.redrawLastMsg(n),uConvo.redrawTyping(n))),C&&(_.countUnread+=1,uMailHat.redrawCounter()),_.groupId&&(S?g.folder.unrespond=g.folder.unrespond.concat(n).filter(unique).sort(vt):arrayRemove(g.folder.unrespond,n)),"all"===_.folder){var N=w.folder.slice();w.folder=w.folder.concat(n).filter(unique).sort(vt),MailScrap.redrawFolder(N)}else if("unread"===_.folder&&s!==_.viewerId){var H=w.folder.slice();w.folder=w.folder.concat(n).filter(unique).sort(vt),MailScrap.redrawFolder(H)}else if("unrespond"===_.folder){var R=w.folder.slice();S?w.folder=w.folder.concat(n).filter(unique).sort(vt):arrayRemove(w.folder,n),MailScrap.redrawFolder(R)}if(_.peerId===n&&(arrayIntersects(w.peer,g.peer[n])||0===w.peer.length)&&last(w.peer)===B){{w.peer.slice()}w.peer=w.peer.concat(a).filter(unique).sort(asc);var V=Messenger.getConvoBody(),U=V.scrollTop+V.offsetHeight>=V.scrollHeight-2;MailScrap.peerAddItemsAfter([a]),t&&MailScrap.peerGoToBottom();var z=V.scrollHeight-V.scrollTop-V.offsetHeight<400;U&&Messenger.scrollConvoToBottom(),S&&(z||uMailWrite.showToBottom()),s===_.viewerId&&MailScrap.removeDivider()}s===_.viewerId&&StickersAnimation.checkSettingsAndLoad(e,!0)}uConvo.redrawLastMsg(n),uConvo.redrawUnread(n),AudioMessagePlayer.redrawWaves()}function z(){if(store.mail.cur){var e=store.mail.cur.query;e?M("/mail?q="+e):S("/mail")}}function W(){var e=store.mail.cur,t=e.msgSelected,n=e.forwardFromId;e.forwardFromId=null,Object.keys(t).forEach(function(e){delete t[e]}),Msg.unselectAll(),uMessenger.redrawMailActions(),D(n)}function Y(e,t){var n=Y,i=n.timers||(n.timers={}),o=store.mail,r=o.cur,a=o.peers,s=a[e];if(s){var l=s.typing||(s.typing=[]);-1===l.indexOf(t)&&(l.unshift(t),s.typing=l,e===r.peerId&&uCurConvoTyping.redraw(),uConvo.redrawTyping(e));var c=e+"_"+t;i[c]&&clearTimeout(i[c]),i[c]=setTimeout(function(){arrayRemove(s.typing,t),e===r.peerId&&uCurConvoTyping.redraw(),uConvo.redrawTyping(e)},7e3)}}Y.clearTimers=function(){var e=Y;e.timers&&(Object.keys(e.timers).forEach(function(t){clearTimeout(e.timers[t])}),e.timers={})};function X(e){var t=e.userId,n=e.isOnline,i=e.onlinePlatform,o=e.lastActionTime,r=store.mail,a=r.cur,s=r.peers,l=s[t];l&&(l.isOnline=n,"onlinePlatform"in e&&(l.onlinePlatform=i),o&&(l.lastActionTime=o),uConvo.redrawOnline(t),a.peerId===t&&uMailHat.redrawOnline())}function G(e,t){var n=store.mail,i=n.cur,o=n.peers,r=n.msgs,a=n.scraps,s=n.rolls;if(i){var l=i.peerId===t?a.peer:[],c=s.peer[t]||[],u=o[t];if(c.concat(l).forEach(function(e){var t=r[e];t&&t.isUnread&&t.authorId!==i.viewerId&&(delete t.isUnread,Msg.markAsRead(e))}),u?u.countUnread&&(i.countUnread-=1,u.countUnread=0):i.countUnread-=1,arrayRemove(s.folder.unread,t),"unread"===i.folder){var d=a.folder.slice();arrayRemove(a.folder,t),MailScrap.redrawFolder(d)}uMailHat.redrawCounter(),uMailWrite.redrawToBottom(),uConvo.redrawUnread(t)}}function Q(e,t){var n=store.mail,i=n.cur,o=n.msgs,r=n.rolls,a=n.scraps,s=r.peer[t]||[],l=o[e];if(l)for(var c=s.indexOf(e);c>0;){var u=o[s[c]];u.authorId===i.viewerId&&u.isUnread&&(delete u.isUnread,Msg.markAsRead(u.id)),c--}else last(s)&&e<=last(s)&&s.forEach(function(e){var t=o[e];t.authorId===i.viewerId&&t.isUnread&&(delete t.isUnread,Msg.markAsRead(t.id))});i.peerId===t&&a.peer.forEach(function(e){var t=o[e];t.authorId===i.viewerId&&t.isUnread&&(delete t.isUnread,Msg.markAsRead(t.id))}),uConvo.redrawUnread(t)}function K(){var e=store.mail,t=e.cur,n=e.peers,i=n[t.peerId];i.attachmentsHTML=Brick({mix:"cp_attached_wrap",attrs:'id="attached_wrap"'}),t.msgAttached[t.peerId]={},uMailWrite.uiClearAttachments()}function J(){if(Z())return!0;browser.safari&&browser.safari_mobile&&document.activeElement.blur();var e=qs2obj(location.search.slice(1)).act;if(!$(".uMessenger")&&"/mail"===location.pathname&&"show_medias"!==e)return nav.go(location,null,{no_push:!0,need_restore:!1}),!0;var t=new RegExp(/z=photo/).test(location.search);return!$(".uMessenger")||t||ge("z_photoview")||ge("StoriesView")?void 0:M(location.pathname+location.search)}function Z(){var e=Z;return mediaUpload.isUploading?(e.noAlert||alert(unescapeAttr(lang.mobile_mail_wait_until_uploaded)),e.noAlert=!0,setTimeout(function(){e.noAlert=!1},10),!0):void 0}function et(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=store.mail.cur;return"/mail"===n&&o&&o.groupId||i.replace?void 0:!t.m&&geByClass1("uMessenger")?S(n):void 0}function tt(){if(window.isNewMail){var e=store.mail.cur;if(!e)return k.clearTimer(),void Y.clearTimers();nav.getQuery("msg")||nav.getQuery("id")||Messenger.scrollConvoToBottom(),"/mail"!==location.pathname&&0!==location.pathname.indexOf("/write")||(im.on(),uMessenger.startPolling(),yt(),uMailWrite.renderKeyboardIfNeeded(),e&&e.peerId&&uMailWrite.uiRedrawAttachments(e.peerId))}}function nt(){var e=store.mail,t=e.cur,n=(e.msgs,e.peers),i=e.hash,o=t.msgSelected,r=toInt(Object.keys(o)[0]),a=n[t.peerId];t.msgSelected={},a.pinnedMsgId=r,a.hasPinnedMsg=!0,Msg.unselectAll(),uMessenger.redrawMailActions(),ajaxRequest("/mail?act=pin",{hash:i.pin,chat:nav.getQuery("chat")||store.mail.cur.peerId-2e9,msg:r,_ajax:1})}function it(){var e=store.mail,t=e.cur,n=(e.msgs,e.peers),i=e.hash,o=t.msgSelected,r=toInt(Object.keys(o)[0]),a=t.peerId,s=n[a];store.mail.cur.editing=r,Dt(),ajaxRequest("/mail?act=edit_message_start",{hash:i.edit,edit_msg_id:r,peerId:a,_ajax:1},function(e,t){s.attachmentsHTML=e,uMailWrite.onAttachedMsgsRemove(),uMailWrite.uiRedrawAttachments(a),uMailWrite.setModifiers({editing:!0}),uMailHat.setModifiers({editing:!0}),uMessenger.redrawMailActions(),ot(),uMailWrite.setText(t)})}function ot(){var e=store.mail.cur,t=e.msgSelected;Object.keys(t).forEach(function(e){delete t[e]}),Msg.unselectAll(),MailActs.setCount(0),uMessenger.redrawMailActions()}function rt(){var e=store.mail,t=(e.msgs,e.cur),n=Object.keys(t.msgSelected).every(at),i=Object.keys(t.msgSelected).length;1!==i||n?MailDialog.openDialog({canDeleteForAll:n}):ct()}function at(e){var t=store.mail,n=t.msgs,i=(t.cur,t.peers),o=vk.id,r=n[e],a=nav.getQuery().community,s=i[r.peerId];return!r||r.authorId!==o&&r.authorId!==-a?!1:r.peerId!==o||a?333===r.peerId?!1:Date.now()/1e3-r.ts>86400?!1:s.kicked||s.closed||s.unableToWrite||s.kickedMessage?!1:!0:!1}function st(){var e=store.mail.cur.editing;e?(lt(e),jt(!0)):ct(!1,MailDialog.isDeleteMessagesForAll()),MailDialog.closeDialog()}function lt(e){var t=store.mail,n=t.cur,i=(t.hash,t.msgs),o=t.peers,r=n.peerId,a=n.msgRemoved,s=i[e];a[e]="for_all",delete i[e],Msg.remove(e,!0),s.isImportant&&n.countImportant--,ajaxRequest("/mail",{act:"delete_for_all",peer:r,ids:e+"",hash:o[r].hashRemove},function(){}),uMessenger.redrawMailActions()}function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=store.mail,i=n.cur,o=(n.hash,n.msgs),r=n.peers,a=i.peerId,s=i.msgRemoved,l=i.msgSelected,c=Object.keys(l);c.forEach(function(n){var r=o[n];s[n]=e?"spam":t?"for_all":!0,delete l[n],r.isImportant&&i.countImportant--,t?delete o[n]:g.destroyPrevented.push(n),e?Msg.spam(n):Msg.remove(n,t)}),ajaxRequest("/mail",{act:t?"delete_for_all":e?"spam":"delete",peer:a,ids:c.join(","),hash:r[a].hashRemove},function(){}),uMessenger.redrawMailActions()}function ut(){ct(!0)}function dt(){var e=store.mail,t=e.cur,n=e.hash,i=e.msgs,o=t.msgSelected,r=Object.keys(o),a=r.some(function(e){return!i[e].isImportant})?1:0;r.forEach(function(e){delete o[e],i[e].isImportant!=!!a&&(a?t.countImportant++:t.countImportant--),i[e].isImportant=!!a,Msg.toggleImportant([e],!!a)}),ajaxRequest("/mail",{act:"mark_important",ids:r,hash:n.important,val:a},function(){}),Msg.unselectAll(),uMessenger.redrawMailActions()}function At(){var e=store.mail.cur,t=e.peerId,n=Object.keys(e.msgSelected).map(toInt);e.msgAttached[t]=n,n.forEach(function(t){delete e.msgSelected[t]}),Msg.unselectAll(),MailActs.setCount(0),uMailWrite.uiRedrawAttachments(t),uMessenger.redrawMailActions()}function mt(){var e=store.mail.cur;e.forwardFromId=e.peerId,e.query="",e.tab="peers",T("all"),Messenger.setQuery(""),x(!1),Messenger.getMainBody().scrollTop=0}function ft(){var e=store.mail,t=e.cur,n=e.peers,i=(e.rolls,Object.keys(n).map(toInt)),o=QuickSearch.getQueryREs(t.query),r=[];return o.forEach(function(e){i.forEach(function(t){n[t].title.match(e)&&r.push(t)})}),r.filter(unique).sort(vt)}function pt(){var e=store.mail,t=e.cur,n=e.scraps;t.query="",t.tab="peers",n.search=[],uMessenger.redrawView(),MailScrap.redrawSearch(),Messenger.setQuery("")}function _t(e){if(store.mail.cur){var t=store.mail,n=t.cur,i=t.peers,o=t.msgs,r=n.msgRemoved,a=n.msgSelected,s=i[n.peerId];if(uMailWrite.hideStickersPanel(),!r[e]){a[e]?delete a[e]:a[e]=!0;var l=Object.keys(a),c=l.length,u=1===c&&l[0]==i[n.peerId].pinnedMsgId,d=l.reduce(function(e,t){return e&&o[t].isImportant},!0);MailActs.setCount(c),MailActs.setModifiers({pinned:u,important:d}),MailActs.setLabels({pinned:u,important:d});var A=toInt(Object.keys(a)[0]),m=1==c&&o[A];if(MailActs.setEditAvailable(m&&m.canE&&!s.unableToWrite),MailActs.setImportantAvailable(c>0&&n.viewerId>0),s.canPin){var f=toInt(Object.keys(a)[0]);MailActs.togglePin(1===c&&f!==s.pinnedMsgId)}else MailActs.togglePin(!1);uMessenger.redrawMailActions()}}}function ht(e){var t=store.mail,n=t.cur,i=t.hash,o=t.msgs,r=o[e],a="spam"===n.msgRemoved[e]?"nospam":"restore";delete n.msgRemoved[e],Msg.restore(e),ajaxRequest("/mail",{act:a,id:e,hash:i.restore},function(){}),r.isImportant&&(n.countImportant++,h(e)),MailScrap.redrawFolder()}function vt(e,t){var n=store.mail.rolls,i=n.peer[e]||[0],o=n.peer[t]||[0];return last(o)-last(i)}function gt(){var e=store.mail,t=e.cur,n=e.scraps;return t?{folder:t.folder,peerId:t.peerId,scraps:{folder:n.folder.slice(),peer:n.peer.slice(),search:n.search.slice()},scrolls:{main:0,peer:0},query:t.query,tab:t.tab}:null}function wt(){history.replaceState(gt(),null)}function yt(){var e=qs2obj(location.search.slice(1));store.mail.cur.mvk_entrypoint=e.mvk_entrypoint||"notifications"===e.from&&"notifications"||""}function bt(){if(store.mail.cur){var e=!!store.mail.cur.peerId;$$(".vk__page_mail").forEach(function(t){return t.classList.toggle("messenger_noPullToRefresh",e)})}}function St(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){var n=(Number(t.dataset.id),Mt());delete n[e],Tt(n),kt()}}function Ct(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){var n=Number(t.dataset.id),i=Mt();i[e]=n,Tt(i),kt()}}function kt(){{var e=store.mail,t=e.cur;e.peers}if(t){var n=t.peerId;if(n){var i=$(".pinnedMsg"),o=Mt(),r=o[n],a=i?intval(i.dataset.id):null;uMessenger.setPinnedVisibility(a&&r!==a)}}}function Et(){var e=$(".pinnedMsg");if(e){var t=Number(e.dataset.id);if(!t){var n=store.mail.cur.peerId,i=Mt();delete i[n],Tt(i)}}}function Mt(){return lsGet("messenger.pinHidden")||{}}function Tt(e){lsSet("messenger.pinHidden",e)}function jt(e){if(store.mail.cur&&store.mail.cur.editing){store.mail.cur.editing=!1,Dt(),e!==!0&&ajaxRequest("/mail?act=edit_message_cancel",{peerId:store.mail.cur.peerId}),K(),uMailWrite.setText(""),uMailWrite.uiRedrawAttachments(),uMailWrite.setModifiers({editing:!1}),uMailHat.setModifiers({editing:!1});var t=Messenger.getConvoBody(),n=t.scrollTop+t.offsetHeight>=t.scrollHeight-2;n&&Messenger.scrollConvoToBottom()}}function Dt(){var e=nav.getQuery();store.mail.cur.editing?e.edit_msg_id=store.mail.cur.editing||void 0:delete e.edit_msg_id,nav.go(location.pathname+obj2qs(e),!1,{replace:!0,push_only:!0})}function xt(){if(store.mail.msgs){var e=+nav.getQuery("edit_msg_id");e&&store.mail.msgs[e]&&(store.mail.cur.msgSelected[e]=!0,it())}}function It(e){var t=e.closest("."+Msg["class"]);if(t){var n=Msg.getId(t);store.mail.msgs[n].textFull=Msg.getTextHtml(t)}}},"./static/js/mobile/modules/ajax.js":function(){var e=need("$"),t=need("befall"),n=window,i=n.se,o=n.each,r=n.remove,a=n.ajx2q,s=n.isArray,l=n.geByTag,c=n.checkElementNav,u=n.isHttpHref,d=n.attr,A=n.getHref,m=n.extend,f=n.ge,p=n.geByClass1,_=n.obj2qs,h=n.unlockButton,v=n.scrollToHash,g=n.lockButton,w=(n.tag,n.addEvent,n.val),y=n.alLoadingFix,b=n.scrollTop,S=n.removeClass,C=n.addClass,k=n.clone,E=n.gpeByClass,M=n.outer,T=n.gpeByTag,j=n.geByTag1,D=n.getCh,x=n.hasClass,I=n.stripTags,P=n.langNumeric,B=n.clog,F=n.before,L=n.ce,O=n.append,N=n.escapeAttr,H=n.geByClass,R=n.htsc,V=n.getY,q=n.getCw,U=n.qs2obj,z=n.parseJSON,$=n.setNotify,W=n.setDocumentDomain,Y=n.createIframe,X=n.getW,G=n.escapeStr,Q=n.geBySel1,K=window,J=K.browser,Z={onBeforeRedirect:t("url"),onBeforePageParse:t(),onRedirect:i(),_tStart:!1,_tAlStart:!1,RESPONSE_CAPTCHA:2,_init:function(){try{new XMLHttpRequest&&(Z._req=function(){return new XMLHttpRequest})}catch(e){var t=window,n=t.ActiveXObject;try{new n("Msxml2.XMLHTTP")&&(Z._req=function(){return new n("Msxml2.XMLHTTP")})}catch(e){try{new n("Microsoft.XMLHTTP")&&(Z._req=function(){return new n("Microsoft.XMLHTTP")})}catch(e){Z._req=!1}}}},_getreq:function(){return Z._req||Z._init(),Z._req()},_al_reqs:[],_last_req:null,save_req:function(e){Z._al_reqs.push(e||Z._last_req)},abort_reqs:function(){o(Z._al_reqs,function(e,t){t.readyState<4&&t.abort()}),Z._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,t,n,i){Z._failed_reqs.push([e,t,n,i])},repeat_reqs:function(){o(Z._failed_reqs,function(){var e=this.shift(),t=this;Z._post.apply(null,t),r(e)}),Z._failed_reqs=[]},plainpost:function(e,t,n,i,o,r,s,l){var c=Z._last_req=Z._getreq(),u="string"!=typeof t?a(t):t;c.onreadystatechange=function(){4==c.readyState&&(c.status>=200&&c.status<300?n&&n(c.responseText,c):i&&i(c.responseText,c))};try{c.open("POST",e,!0)}catch(d){return!1}return c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o||l||c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(u),c},post:function(e,t,n){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],Z._post(e,t,n||{})},onPrepared:i(),prepare_click:function(e){var t=window,n=t.al;if(J.ios&&!(J.ios>=7)&&window.al&&n.ver){var i=[],o=!1;e&&"a"==(e.tagName||"").toLowerCase()?i.push(e):s(e)?i=e:(i=l("a",e),o=!0);for(var r=0,a=i.length;a>r;r++){var m=i[r],f=m&&m.target||"";if(m&&m.getAttribute&&(!o||!m.getAttribute("data-href")&&c(m,{skip_onclick:!0})&&"_blank"!=f)){var p=m.getAttribute("href");if(null==p||!u(p))continue;d(m,"data-href",A(m)),d(m,"href",!1)}}}},click:function(e,t,n){var i=window,r=i.nav;t=t||{};var a,s=!1,l={_ajax:1},c=m(t,{link:e});if(n=n||{},t.onStart){var u=Z.tAlGetParam();Z.tAlStart=(new Date).getTime(),u&&(l._talstat=u)}if(n.use_cache){var d=f(n.use_cache===!0?"preload_data":n.use_cache),A=d.innerHTML.replace(/(^<!--|-->$)/g,""),w=A.split("--><!--");if(A){d.innerHTML="",t.onStart&&t.onStart.apply(c),n.nav&&r.go(s,null,{push_only:!0}),t.onDone&&t.onDone.apply(c,w);var e=p("show_more",p("pcont","mcont"));e&&Z.click(e,{onDone:function(){var e="";o(arguments,function(t,n){e+="<!--"+(n||"")+"-->"}),d.innerHTML=e,f("show_more_loading")&&Z.click(!1,t,n)}})}else t.onStart&&t.onStart.apply(c),n.nav&&r.go(s,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var y=e.form,b={};s=(y.action||"").replace(/^https?:\/\/[^\/]+/i,""),o(y,function(t,n){return!n.name||n.disabled?!0:("radio"!==n.type||n.checked)&&("checkbox"!==n.type||n.checked)?"button"===n.type?!0:"submit"===n.type&&n!==e?!0:"image"===n.type&&n!==e?!0:void(b[n.name]=n.value):!0}),"image"==e.type&&(b[e.name]=e.value,b[e.name+".x"]=1,b[e.name+".y"]=1),y.method&&"get"!=y.method?m(l,b):s=s.split("?",1).shift()+_(b)}else e.getAttribute&&(s=e.getAttribute("data-href")||e.getAttribute("href"));if(s||(s=e.pathname?e.pathname+e.search+e.hash:e),!s)return!0;m(l,n.url_params||{});var S=window,C=S.pStats,k=C.getSeenData();if(k){var E=window,M=E.cur;l._pstat=k.data,M&&M.module&&(l._pstatref=M.module)}return a=Z.post(s,l,{onDone:function(){k&&C.onSend(k.seen),n.lock&&h(e),t.onDone&&t.onDone.apply(c,arguments),(n.nav||n.scroll)&&v()},onFail:function(){n.lock&&h(e),t.onFail&&t.onFail.apply(c,arguments),(n.nav||n.scroll)&&v()}}),a&&(t.onStart&&t.onStart.apply(c),n.nav&&r.go(s,null,{push_only:!0}),n.lock&&g(e)),!a},prepare_nav:function(e){return},nav:function et(t,n){var i=window,et=i.nav,a=window,s=a.page,l=window,c=l.menu,u=window,h=u.cur;n=n||{},n.nav=n.nav||{};var g,z,$=A(t),W=s.getHash(n.nav);if(!($=et.checkUrl($)))return!1;"/"!=$.substr(0,1)&&($="/"+$),c.close(null,!0);var Y=Z.tGetParam();if(Z.tStart=(new Date).getTime(),n.need_restore&&c&&c.closeSearch(),window.isNewMail&&(n.need_restore&&n.nav.push&&Z.abort_reqs(),et.onBeforeGo2(n.nav.path,U(n.nav.params),n.nav.push,n)))return Z.abort_reqs(),!0;if(n.need_restore&&n.nav.push&&(z=s.restore(W)))return Z.abort_reqs(),z.lm&&m(z.lm,{tn:!1,bn:!1}),s.set(W,z),n.zProcess&&(n.zProcess(z.st),delete n.zProcess),et.set(n),Z.tModule=window.cur.module,Z.tRestoreRender=(new Date).getTime(),!0;var X=!1,G=!1;if(n.fast)X=!0,s.set(W,!1,{before:!0,beforeAppend:n.beforeAppend,afterAppend:n.afterAppend}),G=n.onAfterFast||!1;else if(n.target&&n.target.className){var g=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(n.target.className),Q=g&&g[1]||!1,K=g&&g[2]||!1;switch(K){case"menu":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(t){if(window.isNewHeader){var i=e(".vk__page");i.className=i.className.replace("vk__page_notifications","")}if(window.isNewMail){var o=p("mcont",t)||p("layout__basis");w(o,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else w(p("mcont",t),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');s.setMhead(t,d(n.target,"data-header"),"/")},afterAppend:function(){y(),b(0)}});break;case"tab":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){w(p("upanel",e),'<div id="al_loading"></div>'),w(p("basisDefault",e),'<div id="al_loading"></div>');var t=p("tabs_block",e)||p("tabs",e),n=p("active",t);n&&(x("tab_item_top",n)?(S("tab_item_cur",p("tab_item_cur",t)),C("tab_item_cur",p("tab_item",t))):(S("tab_item_cur",p("tab_item_cur",t)),C("tab_item_cur",n)))},afterAppend:function(){y()}},n);break;case"post":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){function t(e,t,n,i,o,r,a,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(t||"")+'<div class="op_cont">'+(n||"")+'<div class="op_info"><span class="item_date">'+(i||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(o||"")+'</div><div class="pi_body">'+(r||"")+"</div></div>"+(s||"")+"</div>"+(a||"")+"</div>"}var i=window,o=i.lang,a=k(E("post_item",n.target)),l=a.id,c=M(T("a",p("pi_img",a))).replace("pi_img","op_img"),u=T("div",p("pi_author",a)),A=r(p("pi_date",a)),m=M(r(p("explain",u))),f=r(p("pi_fronly",a)),_=M(u),h=p("pi_body",a),v=p("pi_text_more",h),A=p("pi_date",a),g=p("pi_info",h),y=p("pi_links",h),b=p("replies_link",y),S=w(r(p("pi_actions_wrap",a))),C=w(r(p("item_replies",g))),j=C?w(b):o.mobile_wall_post_replies_title,D=b?'<a name="comments"></a><h4 class="slim_header">'+(j||"")+'</h4><div id="al_loading"></div>':"";if(v){var x=v.nextSibling?v:v.parentNode;x.nextSibling.style.display="inline",x.style.display="none"}w(y,M(p("like_wrap",h))),A&&d(A,"data-date")&&w(A,d(A,"data-date")),s.setMhead(e,d(n.target,"data-header"),!0),w(p("mcont",e),t(l,c,_,w(A)+(f?'<b class="pi_fronly"></b>':""),m,w(h),D,S))},afterAppend:function(e){var t=j("h4",e);t&&y(n.nav.hash?D()-t.offsetHeight:0),n.nav.hash?v(n.nav.hash):b(0)}},n);break;case"wall":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){function t(e,t,n){return'<div class="pcont"><div class="wall_item single_wall_item" id="'+(e||"")+'">'+(t||"")+"</div>"+(n||"")+"</div>"}var i=window,o=i.lang,a=k(x("wall_item",n.target)?n.target:E("wall_item",n.target)),l=a.id,c=p("wi_body",a),u=p("wi_buttons",a),A=p("item_like",u),m=p("v_like",A),f=p("item_share",u),_=p("v_share",f),h=r(p("item_replies",u)),v=h?p("v_replies",h):!1,g=+I(w(v)).replace(/\D/g,""),y=p("pi_text_more",c),b=p("wi_date",a),S=g?P(g,o.mobile_wall_post_comments):o.mobile_wall_post_replies_title,C=h&&50>g?'<a name="comments"></a><h4 class="slim_header">'+(S||"")+'</h4><div id="al_loading"></div>':"";if(B("item_replies",h),r(p("wi_actions_btn",a)),r(p("post__subscribeBtn",a)),r(p("post__extraHeader",a)),m?w(m):O(L("span",{className:"v_like"}),A),_?w(_):O(L("span",{className:"v_share"}),f),y){var M=y.nextSibling?y:y.parentNode;M.nextSibling.style.display="inline",M.style.display="none"}b&&d(b,"data-date")&&w(b,d(b,"data-date")),s.setMhead(e,d(n.target,"data-header"),!0),w(p("mcont",e),t(l,w(a),C))},afterAppend:function(e){var t=j("h4",e);t&&y(n.nav.hash?D()-t.offsetHeight:0),n.nav.hash?v(n.nav.hash):b(0)}},n);break;case"pinfo":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){var t=window,n=t.lang,i=p("owner_panel",e),r=p("pp_img",i),a=p("op_header",i),l=p("lvi",a),c=p("pp_last_activity",i),u=L("div");C("mhi_back",p("mh_header",e)),w(i,'<img src="'+N(d(r,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+I(w(a))+'</h2><div class="pp_online">'+(l?n.mobile_online:w(c))+"</div></div>"),o(H("_pinfo",e),function(e,t){u.appendChild(t)}),w(p("ipanel",e),"<div>"+w(u)+'</div><div id="al_loading"></div>'),s.setMhead(e,!1,!0)},afterAppend:function(){y(),b(0,10)}},n);break;case"player":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){var t=window,n=t.lang,i=window,o=i.audio,r=o.playlist(),a=o.playlist_q(),l=r[0]||{},c=(l.id||"").split("_").slice(2).join("_")||"",u="";s.setMhead(e,n.mobile_menu_player_head_title,!0),w(p("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="audioPage__header">\n                    '+AudioPlaylist.tplPlayerSearch(c)+'\n                  </div>\n                  <div id="au_search_items" class="upanel bl_cont">\n                    <div class="audios_block audios_list _si_container" data-query="'+N(a)+'">'+u+"</div>\n                  </div>\n                </div>"),w("m",e.innerHTML)}},n),G=function(){var e=window,t=e.qsearch,n=window,i=n.audio,r=i.playlist(),a=r[0]||{},s=(a.id||"").split("_").slice(2).join("_")||"",l="/audio"+_({act:"player",list:s}),c=[],u={};o(r,function(e,t){c.push(t.id);var n=!1;u[t.id]=[t.artist+" "+t.title,t.id,t.src,t.artist,t.title,t.dur,t.can_add,n,t.cover_style,t.is_disabled,t.mix]}),t.init({action:l,al_action:l,container:f("au_search_items"),field:f("au_search_field"),btn:f("au_search_btn"),top_items:c,_cache:u,tpl:function(e,t,n,o){return t?o?o:""==o?'<div class="audios_block audios_list _si_container" data-query="'+N(t)+'">'+e+"</div>":'<div class="audios_block audios_list _si_container" data-query="'+N(t)+'"><div class="al_loading qs_loading">&nbsp;</div></div>':'<div class="audios_block audios_list _si_container" data-query="'+N(i.playlist_q())+'">'+e+"</div>"},item_tpl:function(e,t,n,i,o,r,a,s,l,c){var u=window,d=u.audioplayer;return d&&d.getDOMFromAudio({id:e,src:t,dur:o,artist:this.highlight(n),title:this.highlight(i),can_add:r,can_del:a,cover_style:s,is_disabled:l,mix:c},!0,this.q)||""},null_tpl:function(e){var t=window,n=t.lang;return'<div class="service_msg_box"><div class="service_msg service_msg_null">'+(e?n.mobile_audio_search_not_found.replace("%s",R(e)):n.mobile_audio_no_audio)+"</div></div>"},soft_filter:!0,need_invalid_keys:J.desktop,top_len:50,global_search:!0,onRendered:function(){var e=window,t=e.audioplayer;t&&t.initAudio()},al_need:!0,init_offset:0});var d=i.getCurrentId(),A=f("audio"+d);if(A){var m=V(A)+A.offsetHeight/2-D()/2;b(m)}};break;case"photo":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){function t(e,t,n){return'<div class="pcont bl_cont"><div class="media_view photo_view"><div class="pv_summary">&nbsp;<div class="summary_loading" style="float:left;"><i class="i_loading"></i></div></div><div class="pv_body"><div class="thumb_item" style="'+(t||"")+'"><img src="'+e+'" class="ph_img" alt="" style="'+(n||"")+'" /></div></div><div id="al_fill"></div></div></div>'}var i=j("img",n.target),r=i&&i.src||"/images/mobile/blank.gif",a="",l="",c=(d(i,"data-src_big")||"").split("|"),u=c[0],A=+c[1]||0,m=+c[2]||0,f=!0;if(A&&m||(A=i&&i.width||0,m=i&&i.height||0,f=!1),u){if(A&&m){var _=Math.min(604,q()),h=_/A,v=Math.min(604,Math.ceil(h>=1&&f?m:m*h));a+="height:"+v+"px;"}a+="background:url("+r+") #f7f7f7 no-repeat center top;",v>100&&o(["-moz-","-o-","-webkit-",""],function(e,t){a+=t+"background-size:contain;"}),r=u}else l+="width:100%;";s.setMhead(e,d(n.target,"data-header"),!0),w(p("mcont",e),t(r,a,l))},afterAppend:function(){y(0,"al_fill"),b(0)}},n);break;case"u":case"g":case"p":case"e":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){function t(e,t){return"g"===K||"p"===K||"e"===K?'<div class="al_loading"></div>':'<div class="pcont fit_box"><div class="owner_panel profile_panel"><img src="'+(e||"")+'" class="pp_img" /><div class="pp_cont"><h2 class="op_header">'+(t||"")+'</h2></div></div><div id="al_loading"></div>'}var i,o=window,r=o.lang,a=Q.substr(2),l=p(a,e,"a")||p(a,e,"span"),c=I(d(n.target,"data-name")||d(l,"data-name")||w(l)||""),u=l&&l.parentNode&&p("lvi",l.parentNode),A=M(u),m=p(a,e,"img"),f=m&&m.src||d(n.target,"data-photo")||"/images/mobile/blank.gif";"u"==K?i=c.split(" ").shift():"g"==K?i=r.mobile_group_head_title:"p"==K?i=r.mobile_public_head_title:"e"==K&&(i=r.mobile_event_head_title),s.setMhead(e,i,"/"),w(p("mcont",e),t(f,c,A))},afterAppend:function(){y(),b(0)}},n);break;case"playlists":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){var t=H("audioPlaylists__item",e),i="";t&&o(t,function(e,t){i+=AudioPlaylist.tplSearchListItem({href:d(p("audioPlaylists__itemLink",t),"href"),thumb_style:d(p("audioPlaylists__itemCover",t),"style"),grid_covers:w(p("audioPlaylists__itemCover",t)),title:w(p("audioPlaylists__itemTitle",t)),author_name:w(p("audioPlaylists__itemAuthor",t)),short_stats:w(p("audioPlaylists__itemStats",t))},!0)});var r=AudioPlaylist.tplPlayerSearch("",!0),a=AudioPlaylist.tplPlaylistsPage(i,r);w(p("mcont",e),'<div class="pcont bl_cont">'+a+"</div>"),s.setMhead(e,d(n.target,"data-header"),"/"),b(0)}});break;case"empty":case"playlist":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){w(p("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>'),s.setMhead(e,d(n.target,"data-header"),"/")},afterAppend:function(){y(),b(0)}});break;case"news_subsection":X=!0,s.set(W,!1,{before:!0,beforeAppend:function(e){var t=p("news_subsections",e);t&&!x("summary_loading",t.firstChild)&&F(L("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)}});default:var tt=window,h=tt.cur;h.al_fast&&h.al_fast[K]&&(X=!0,s.set(W,!1,h.al_fast[K](n),n))}}if(Z.abort_reqs(),n.local){var nt=!0;s.set(W,{},{after:!0,no_scroll:!0,force:!0},!1),G&&G()}else{var it=U(n.nav.params);m(it,n.params||{}),window.al&&window.al.menu||(it._nlm=1),Y&&(it._tstat=Y);var ot=window,rt=ot.pStats,at=rt.getSeenData();at&&(it._pstat=at.data,h&&h.module&&(it._pstatref=h.module)),it._ref||(it._ref=(et.path||"").substr(1));var nt=Z.post($,it,{onPageDone:function(e,t,i,o,r){var a=window,l=a.cur;at&&rt.onSend(at.seen),Z.tProcess=(new Date).getTime(),s.set(W,{title:e,html:t,js:i,lm:o,bc:r,st:n.st||0},{after:X,no_scroll:X},X?!1:n),Z.tModule=l.module,Z.tRender=(new Date).getTime()}});Z.save_req()}return X&&(n.zProcess&&(n.zProcess(),delete n.zProcess),et.set(n),Z.tModule=h.module,Z.tFastRender=(new Date).getTime()),nt},confirm:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,i){return confirm(t)?Z.click(e,i,{url_params:{hash:n}}):!1}),_post:function(e,t,n){var i=function(e,t){n.onFail&&n.onFail.call(window,0,e,t)},o=function(o){var r=!1;try{r=z(o)}catch(a){r=!1}r===!1?i():Z.parseResponse(r,e,t,n)};return Z.plainpost(e,t,o,i)},parseResponse:function(e,t,n,i){var o=window,r=o.al,a=window,l=a.nav,c=window,u=c.menu,d=window,A=d.page,m=e.shift(),f=e.shift(),p=e.shift(),_=t.indexOf("community")>=0,h=_?window.al&&m>r.ver:window.al&&m>r.ver||(window.menu?!u.refreshCounters(f):!1);switch(f===!1||_||$(f[2]),p){case 0:if(h)return l.hard_go(l.cur,null,{replace:!0});var v=e.shift();i&&i.onDone&&(s(e)?i.onDone.apply(window,v):i.onDone.call(window,v));break;case 1:Z.onRedirect(!0,e[0]);var g=e.shift(),w=e.shift(),y=e.shift();if(window.isNewMail&&Z.onBeforeRedirect(g))break;if(h||w)l.hard_go(g);else if(y){W();var b=g+(-1==g.indexOf("?")?"?":"&")+"__extra=1",S=Y({src:b})}else l.go(g,null,{ignore_cur_process:!0});break;case Z.RESPONSE_CAPTCHA:var g=e.shift();i&&i.onFail?(e.unshift(g),e.unshift(p),i.onFail.apply(window,e)):l.hard_go(g);break;case 3:A.need_hard_go=h;var C=e[3];if(C&&C.rdr&&window.al&&r.menu&&X("vk_wrap")>=614){l.go(C.rdr,null,{replace:!0});break}i=i||{},i.onPageDone||(i.onPageDone=function(e,n,i,o,r){l.go(t,null,{push_only:!0}),A.set(A.getHash(l),{title:e,html:n,js:i,lm:o,bc:r})}),i.onPageDone.apply(window,e);break;case 4:if(i.redirectToLoginPage){var b=e.shift();return window.location=b,!1}if(!Z._failed_relogin){var b=e.shift(),g=e.shift();W();var S=Y({src:b})}Z._failed_relogin=!0,Z.save_failed_req(S,t,n,i)}},onReLoginDone:function(){Z.repeat_reqs(),Z._failed_relogin=!1},tGetParam:function(){if(Z.tStart&&Z.tModule){var e=Z.tFastRender-Z.tStart,t=Z.tRestoreRender-Z.tStart,n=Z.tProcess-Z.tStart,i=Z.tRender-Z.tProcess,o="/"==Z.tModule.substr(0,1)?Z.tModule.substr(1):Z.tModule,r=[o,e,t,n,i];for(var a in r)(!r[a]||r[a]<0)&&(r[a]=0);return Z.tStart=!1,r.join(",")}},tAlGetParam:function(){if(Z.tAlStart&&Z.tAlModule){var e=Z.tAlProcess-Z.tAlStart,t=Z.tAlRender-Z.tAlProcess,n="/"==Z.tAlModule.substr(0,1)?Z.tAlModule.substr(1):Z.tAlModule,i=["al_"+n,e,t];for(var o in i)(!i[o]||i[o]<0)&&(i[o]=0);return Z.tAlStart=!1,i.join(",")}},refreshLinks:function(e,t){if(e){var n=p("mmi_fv","lm_cont"),i=n&&p("lfm_item",n),o=p("mmi_fv","mfoot"),r=o&&p("lfm_item",o),a=f("fv_link"),s=Q('link[rel="canonical"]');d(i,"href",e),d(r,"href",e),d(a,"href",e),d(s,"href",d(f("mcont"),"data-canonical"))}if(t){var l=p("mmi_app","lm_cont"),c=l&&p("lfm_item",l),u=p("mmi_app","mfoot"),A=u&&p("lfm_item",u),m=f("app_link"),_=t?"return nav.app_go(this, event, '"+G(t)+"');":!1;d(c,"onclick",_),d(A,"onclick",_),d(m,"onclick",_)}}};window.ajax=Z},"./static/js/mobile/modules/ajax_objects.js":function(){var e=window,t=e.ge,n=e.geByClass1,i=e.toggle,o=e.val,r=e.ce,a=e.intval,s=e.toggleClass,l=e.after,c=e.cdf,u=e.gpeByClass,d=e.hide,A=e.addClass,m=e.remove,f=e.show,p=e.getY,_=e.getH,h=e.scrollTop,v=e.hasClass,g=e.each,w=e.geByClass,y=e.attr,b=e.getCw,S=e.getHref,C=e.before,k=e.onBodyScrollForce,E=e.removeClass,M=e.scrollToEl,T=e.geByTag1,j=e.replace,D=window,x=D.ajax,I=window,P=I.ownerPhotoUpload,B=window,F=B.nav;var L={onDone:function(e,r,a,l){var c=t(e)||n("like_box","z")||n("like_box")||n("wall_item_for_like_"+e);if(c&&e){var u;u=v("wall_item",c)||v("market_item",c)?n("wi_like_wrap",c):n("item_like",c);var d=n("item_repost",c),A=n("like_wrap",c);u&&(u.innerHTML=r||"",s("is_empty",u,!r),i(u,r)),d&&(d.innerHTML=a||"",i(d,a)),A&&o(A,l||"")}},onFail:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();switch(t){case 2:F.hard_go(e[0])}}},O={onDone:function(e,t,i,s,l){var c=window,u=c.photo;if(L.onDone.apply(this,arguments),this.photo_id){var d=u.get(this.photo_id);if(d){var A=r("div",{innerHTML:d.likes});o(n("item_like",A),t),d.likes=o(A),d.publish='<span class="item_repost">'+i+"</span>",d.likes_cnt=a((y(n("v_like",A),"data-like_count")||"").replace(/\D+/g,"")),d.likes_me=l;var A=r("div",{innerHTML:d.actions}),m=n("like_wrap",A);o(m,s),d.actions=o(A),u.save(d)}}},onFail:L.onFail},N={onDone:function(){var e=window,t=e.photo;if(this.photo_id){var i=t.get(this.photo_id);i&&(i.tag_info="",t.save(i));var r=n("photo_view"),a=n("pv_tag_wrap",r);o(a,"")}}},H={onDone:function(e,t,i){var r=window,a=r.photo,l=window,c=l.menu,u=n("photo_view"),d=n("photo_msg"),A=!!t;if(u&&d){o(d,t||""),s("photo_deleted",u,A);var m=a.get(e);m&&(m.deleted=t,a.save(m)),i&&c&&c.refresh({pp:i})}}},R={onDone:function(e,t){var n=window.isNewMail&&$(".messenger")&&this.link.closest(".msg");if(o(e,t),n){var i=Number(n.className.match(/msg_id_(\d+)/)[1]);store.mail.msgs[i].textFull=n.$(".msg__text").innerHTML}}},V={onDone:function(e){this.link&&(l(c(e),u("pic_body_wrap",this.link)),d(this.link))}},q={onStart:function(){A("cm_item_loading",this.link)},onDone:function(e){this.link&&o(this.link.parentNode,e)}},U={onDone:function(e,i){if(e){var a=window,s=a.photo;m(e+"_msg");var c=t(e);if(c){if(i){var u=r("div",{id:e+"_msg",className:(c.className||"")+" post_message_item"});o(u,'<div class="pi_cont">'+i+"</div>"),l(u,c),d(c),n("rtm_reply_wrap",c)&&window.reply&&window.reply.edithide()}else f(e);if(this.photo_id){var A=s.get(this.photo_id);if(A){var p=n("photoview"),_=n("comments_wrap",p);A.comments_html=o(_)}}}}}},z={onDone:function(e,n,i,a){if(e){m(e+"_msg");var s=t(e);if(s)if(n){var c=(/^([a-z]+)_item$/i.exec(i||"")||[])[1]||"inline",u=r("div",{id:e+"_msg",className:c+"_item "+c+"_message_item"}),A=a||"message_item_cont";o(u,'<div class="'+A+'">'+n+"</div>"),l(u,s),d(s)}else n===!1?d(s):f(s)}}},W={onDone:function(e,i,a){if(e){var c=t(e),u=p(c)||p(e+"_msg"),d=_(c)||_(e+"_msg"),A=u+(320>C?d:0)-h();if(m(e+"_msg"),c){var f=v("wall_item",c)||v("post",c)?"wall":"post";if(a){var S=r("div",{id:e+"_msg",className:f+"_item post_message_item"});o(S,'<div class="pi_cont">'+a+"</div>"),l(S,c)}if(i){g(w(f+"_item"),function(){var e=this.id?this.id.match(/^wall((-?\d+)_(-?\d+)(_\d+)?)$/):!1,t=y(this,"data-copy"),n=t?t.match(/^(-?\d+)_(-?\d+)$/):!1;return e?void((!e[4]&&e[2]==i||e[4]&&e[3]==i||n&&n[1]==i)&&s("post_item_ignored",this,a)):!0});var C=b(),u=p(c)||p(e+"_msg"),d=_(c)||_(e+"_msg"),k=u+(320>C?d:0)-A;n("wall_item")===c&&(k=0),h(k)}}}}},Y={onDone:function(e,n){if(e){var i=t(e);if(m(e+"_msg"),i&&n){var a=v("wall_item",i)||v("post",i)?"wall":"post",c=r("div",{id:e+"_msg",className:a+"_item post_message_item"});o(c,'<div class="pi_cont">'+n+"</div>"),l(c,i)}s("post_item_ignored",i,n)}}},X={onDone:function(e,n,i){if(e){var a=t(e);if(m(e+"_msg"),a){if(i){var c=r("div",{id:e+"_msg",className:"wall_item post_message_item"});o(c,'<div class="pi_cont">'+i+"</div>"),l(c,a)}s("post_item_ignored",a)}}}},G={onStart:function(){var e=u("show_more_wrap",this.link),t=n("show_more",e)||this.link,i=r("div",{id:"show_more_loading",className:"show_more_loading",innerHTML:'<i class="i_loading">&nbsp;</i>'}),o=r("div",{id:"show_more_wrap",className:"show_more_wrap"});y(i,"data-href",S(t)),o.appendChild(i),C(o,e),m(e)},onDone:function(e){var n=window,i=n.cur;x.tAlProcess=(new Date).getTime();var o=t("show_more_wrap"),r=c(e);C(r,o),m(o),x.prepare_nav("mcont"),x.prepare_click("mcont"),k(100),x.tAlModule=i.module,x.tAlRender=(new Date).getTime()}},Q={onStart:G.onStart,onDone:function(e,i){var o=window,r=o.cur;x.tAlProcess=(new Date).getTime();var a=n("photos_page","mcont"),s=t("show_more_wrap"),l=c(i);e=e.replace(/<img src="([^"]+)" class="/gi,'<img data-src="$1" class="_image ');var u=c(e);a&&a.appendChild(u),C(l,s),m(s),x.prepare_nav("mcont"),x.prepare_click("mcont"),k(100),x.tAlModule=r.module,x.tAlRender=(new Date).getTime()}},K={onStart:G.onStart,onDone:function(e,i){var o=window,r=o.cur;x.tAlProcess=(new Date).getTime();var a=n("audios_block",n("audios","mcont")),s=t("show_more_wrap"),l=c(i),u=c(e);a&&a.appendChild(u),C(l,s),m(s),x.prepare_nav("mcont"),x.prepare_click("mcont"),x.tAlModule=r.module,x.tAlRender=(new Date).getTime()}},J={onDone:function(e){var t=this.link.parentNode;o(t,e)}},Z={onStart:function(){A("mva_item_loading",this.link)},onDone:function(e,t){E("mva_item_loading",this.link),e.upload_url||t&&F.hard_go(t),P&&P.crop(e)||t&&F.hard_go(t)},onFail:function(){E("mva_item_loading",this.link)}},et={onStart:function(){var e=this.link,t=u("notify_lite",e);if(t)return m(t);for(;e=e.parentNode;)if(v("notify_item",e)){m(v("notify_panel",e.parentNode)?e.parentNode:e);break}}},tt={onStart:function(){var e=w("pagination","mcont");g(e,function(e,t){C(r("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,i,r){var a=window,s=a.mail,l=t("messages"+i);l&&(o(l,e),s.onMessagesRepainted(!0),!this.save&&M()),this.save&&s.saveDialog({messages:e},i),this.clear&&(o(T("textarea","write_form"),""),m(n("pi_medias","write_form"))),E("cp_attach_btn_sel",n("cp_attach_btn")),window.isNewMail&&MailScrap.clearSystemMessage2(),r&&r.play_animation_msg_id&&StickersSettings.getAutoplay()&&StickersAnimation.loadStickerInMvkIMAndPlay(r.play_animation_msg_id)},onFail:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();switch(t){case 2:this.link.form&&this.link.form.submit()}}},nt={onStart:function(){var e=w("pagination","mcont");g(e,function(e,t){C(r("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,n){var i=window,r=i.mail,a=t("dialogs");a&&(o(a,e),!this.no_scroll&&M(),r.cacheDialogsPage()),r.save(n)}},it={onFail:function(e,t){if(e===x.RESPONSE_CAPTCHA){var n=this.link&&this.link.form,i=n&&n.code?n.code.value:"";t+="&code="+i,F.hard_go(t)}}},ot={onStart:function(){var e=u("friendsList__showMoreBtnWrap",this.link),t=n("friendsList__showMoreBtn",e)||this.link,i=r("div",{id:"show_more_loading",className:"wait_loading"}),o=r("div",{id:"show_more_wrap",className:"friendsList__showMoreBtnWrap"});y(i,"data-href",S(t)),o.appendChild(i),C(o,e),m(e)},onFail:function(){var e=this,t=this.link.getAttribute("data-href")||this.link.getAttribute("href"),n=500;setTimeout(function(){x.post(t,{_ajax:1},{onDone:ot.onDone.bind(e),onFail:ot.onFail.bind(e)})},n)},onDone:G.onDone},rt={onDone:function(e,n){if(e){var i=t(e);i&&i.parentNode&&n&&j(c(n),i.parentNode)}}},at={onDone:function(e,t){if(e){var n=w(e);if(n.length&&t)for(var i=0,o=n.length;o>i;i++)n[i].parentNode&&j(c(t),n[i].parentNode)}}},st={onDone:function(e,a,l,c){if(e){var u=t(e);if(u){var d=n("wia_close",u);if(d&&(o(d,l),d.href=a),v("single_wall_item",u)){var A=t("nc_form"),m=n("wall_replies");A?i(A,!!c):c&&(m?domInsert(m,c):(domInsertAfter(r("div",{innerHTML:c}),u),m=n("wall_replies"))),s("closed_comments",m,!c)}}}}};window.Like=L,window.PhotoLike=O,window.PhotoTag=N,window.PhotoDelete=H,window.Poll=R,window.CopyHistory=V,window.ToggleMenu=q,window.Comment=U,window.ItemDelete=z,window.FeedIgnore=W,window.FeedIgnoreItem=Y,window.FeedIgnoreComments=X,window.Wall=G,window.Photos=Q,window.Audios=K,window.FixPost=J,window.ProfileMove=Z,window.Notify=et,window.Dialog=tt,window.Dialogs=nt,window.LoginCheckAuthCodePage=it,window.WallSubscribe=rt,window.FeedSubscribe=at,window.ImportedFriends=ot,window.CloseComments=st},"./static/js/mobile/modules/audio.js":function(e,t,n){var i=n("./static/js/al/modules/audioplayer/audio_unmask_source.js");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=need("befall"),a=window,s=a.cancelEvent,l=a.removeEvent,c=a.srand,u=a.ce,d=a.addEvent,A=a.ssSet,m=a.lsGet,f=a.vkNow,p=a.onDOMReady,_=a.ssGet,h=a.se,v=a.lsSet,g=a.each,w=a.AudioSubscribe,y=a.isTouch,b=a.HTMLAudioElement,S=function(){var e;if(!b)return{init:function(){},playing:function(){},onInit:function(){},onSelect:function(){},pause:function(){}};var t=!1,n=!1,a=!1,C=!1,k=function et(e){(t||C!==!1)&&(t=!1,B&&C===!1||(a=!0,V.pause.call(T))),s(e),l(T,"play",et),l(document,y?"touchstart":"click",M)},E=function(){C!==!1&&C()},M=function tt(){n&&(n=!1,t=!0,V.play.call(T),l(document,y?"touchstart":"click",tt))},T=q(),j=c(),D=[],x=null,I={},P="",B=!1,F=!1,L=!1,O=!1,N=null,H=!1,R=!1;delete b.prototype.play,delete b.prototype.pause,delete b.prototype.load,delete b.prototype.canPlayType;var V={play:b.prototype.play,pause:b.prototype.pause,load:b.prototype.load,canPlayType:b.prototype.canPlayType};function q(e){var n=window.Audio?new Audio:u("audio");return n.autobuffer=!0,n.muted=!1,e&&(n.volume=e.volume,l(e,"play",U),l(e,"pause",z),l(e,"progress",$),l(e,"timeupdate",W),l(e,"ended",Y),l(e,"play",k),l(e,"progress canplaythrough",E),l(document,y?"touchstart":"click",M),e.muted=!0,e.pause(),e.src=null),O=!1,F=!1,L=!1,t=!1,a=!1,C=!1,d(n,"play",U),d(n,"pause",z),d(n,"progress",$),d(n,"timeupdate",W),d(n,"ended",Y),d(n,"play",k),d(n,"progress canplaythrough",E),d(document,y?"touchstart":"click",M),n}function U(){B||(B=!0,S.onPlay(!0),A("audio_play","1"),clearTimeout(N),N=setTimeout(K,100))}function z(){return a?void(a=!1):void(B&&(B=!1,S.onPause(!0),A("audio_play","0"),clearTimeout(N)))}function $(){S.onProgress(!0)}function W(){a||(S.onProgress(!0),S.onPositionChanged(!0,S.position(),S.duration()),A("audio_pos",S.position()),!O&&T.duration-T.currentTime<.5&&(O=!0),F&&(F=!1,S.next()))}function Y(){S.onEnded(!0),O?(O=!1,S.next()):F=!0}function X(){return D[x]||!1}function G(){return X().id||!1}function Q(e){e&&(T.src=i.audioUnmaskSource(e.src),V.load.call(T),S.onSelect(!0,e))}function K(){if(B){var e=m("audio_current_player");j!=e?S.pause():N=setTimeout(K,100)}}function J(){var e=G();A("audio_id",e),A("audio_pos",0),H&&(document.cookie=H+"="+e+"; expires="+new Date(f()+864e5).toUTCString()+"; path="+R)}function Z(e){A("audio_query",e),H&&(document.cookie=H+"q="+encodeURIComponent(e)+"; expires="+new Date(f()+864e5).toUTCString()+"; path="+R)}return e={onInit:r(),init:function(e){return S.support?(e.cookie&&(H=e.cookie,R=e.cookie_path||"/"),void p(function(){e.playlist&&S.playlist(e.playlist,{q:e.playlist_q||""});var t=_("audio_id");if(t){var i=_("audio_pos"),o=_("audio_vol"),r=_("audio_play");S.select(t),"1"==r&&(null!==i&&S.position(i),null!==o&&S.volume(o),n=!0,S.play())}S.onInit()})):!1},support:T.canPlayType&&V.canPlayType.call(T,"audio/mpeg")&&"no"!=V.canPlayType.call(T,"audio/mpeg")||!1,onPlay:h(G),onPause:h(G),onDeselect:h(G,function(){return S.duration()}),onSelect:h(),onProgress:h(G,function(){return S.loaded()},function(){return S.duration()}),onPositionChanged:h(G),onVolumeChanged:h(G,function(){return T.volume}),onEnded:h(G),onNotFoundError:h(),onEmptyPlaylistError:h(),playing:B,getCurrent:X,getCurrentId:G,operate:function(e){return S.support?void(!e||D[x]&&e==D[x].id?B?S.pause():S.play():S.play(e)):!1}},o(e,"playing",function(){return w.badBrowser?w.touchTrack():B&&!w.audioSubscribe&&(w.isSleep||w.isVisibilityChange&&w.isHidden()?w.backgroundPlayCountdown.start():w.sleepModeStart()),B}),o(e,"select",function(e){if(!S.support)return!1;if(e)return D.length?D[I[e]]?(G()&&S.onDeselect(!0),x=I[e],Q(D[x]),J(),!0):void S.onNotFoundError(!0,e):void S.onEmptyPlaylistError(!0,e)}),o(e,"play",function(e){if(!S.support)return!1;if(e){if(B&&S.pause(),!S.select(e))return;try{T.currentTime=.01}catch(t){}}B||(T.muted=!1,V.play.call(T),B=!0,S.onPlay(!0),A("audio_play","1"),v("audio_current_player",j))}),o(e,"pause",function(){return S.support?void(B&&(V.pause.call(T),B=!1,S.onPause(!0),A("audio_play","0"),w.sleepModePause())):!1}),o(e,"position",function(e,t){if(!S.support)return!1;if("undefined"==typeof e)return T.currentTime;t&&(e=S.duration()*e),e=Math.max(0,Math.min(e,S.duration()));var n=B;n&&(B=!1,V.pause.call(T));try{T.currentTime=e,S.onPositionChanged(!0,S.position(),S.duration()),A("audio_pos",e),n&&(B=!0,T.muted=!1,V.play.call(T))}catch(i){S.onPositionChanged(!0,e,S.duration()),C=function(){C=!1,S.position(e)},n&&(B=!0)}}),o(e,"volume",function(e){if(!S.support)return!1;if("undefined"==typeof e)return T.volume;try{T.volume=e||0}catch(t){}S.onVolumeChanged(!0),A("audio_vol",e||0)}),o(e,"loaded",function(){return T.buffered&&T.buffered.length&&T.buffered.end(T.buffered.length-1)||0}),o(e,"duration",function(){return T.duration||D[x]&&D[x].dur||0}),o(e,"next",function(){return S.support?(B&&S.pause(),S.onDeselect(!0),++x>=D.length&&(x=0),Q(D[x]),J(),n=!0,(w.hasTouch&&w.badBrowser||w.audioSubscribe||!w.badBrowser)&&S.play(),w.hasTouch||!w.badBrowser||w.audioSubscribe||w.showPaymentAlert(),void(w.badBrowser&&(w.hasTouch=!1))):!1}),o(e,"prev",function(){return S.support?(B&&S.pause(),S.onDeselect(!0),--x<=0&&(x=D.length-1),Q(D[x]),J(),n=!0,void S.play()):!1}),o(e,"playlist",function(e,t){return S.support?"undefined"==typeof e?D:(B&&S.pause(),X()&&S.onDeselect(!0),D=e,P=t&&t.q||"",x=null,I={},g(e,function(e,t){I[t.id]=e}),Z(P),void 0):!1}),o(e,"playlist_q",function(){return P}),o(e,"closeAttention",function(e,t){s(t),hide(gpeByClass("audioAttention",e))}),e}();window.audio=S},"./static/js/mobile/modules/audioplayer.js":function(){var e=need("$"),t=window,n=t.lsGet,i=t.ge,o=t.addClass,r=t.removeClass,a=t.each,s=t.geByClass,l=t.hide,c=t.show,u=t.val,d=t.geByClass1,A=t.gpeByClass,m=t.attr,f=t.addEvent,p=t.cancelEvent,_=t.hasClass,h=t.getX,v=t.geByTag1,g=t.htsc,w=t.stripTags,y=t.toggleClass,b=t.lsSet,S=(t.append,t.bem),C=t.HTMLAudioElement,k=window,E=k.ajax,M=window,T=M.nav,j=window,D=j.isTouch,x=window,I=x.audio,P=function(){if(!C)return{init:function(){},initAudio:function(){}};var t="1"==n("audio_time_left"),k="",M="",j="",x=null,B=0,F={};I.onPlay(N),I.onPause(H),I.onSelect(R),I.onDeselect(V),I.onProgress(function(e,t,n){var i=geBySel('.audio_item[data-id="'+e+'"]');I.playing()?(a(i,function(e,t){o("ai_playing",t)}),o("ai_playing","lm_audio")):(a(i,function(e,t){r("ai_playing",t)}),r("ai_playing","lm_audio")),i&&a(i,function(e,i){Z(i,t/n),o("ai_current",i)})}),I.onPositionChanged(q),I.onVolumeChanged(function(e,t){var n=geBySel('.audio_item[data-id="'+e+'"]');n&&a(n,function(e,n){tt(n,t)})}),I.onEnded(function(e){var t=geBySel('.audio_item[data-id="'+e+'"]');t&&a(t,function(e,t){et(t,1)})}),I.onNotFoundError(U),I.onEmptyPlaylistError(U);function L(e,t){e&&p(e);var n=I.getCurrent(),o=A("_audioPlaylist",t),r=n?n.id:!1;r&&A("_audioPlaylist",i("audio"+r))||(r=m(d("audio_item",o?o:i("mcont")),"data-id")),r&&pt(e,r)}function O(){a(s("ai_current"),function(e,t){t=nt(t),V(t.id,t.dur)});var e=I.getCurrentId(),t=geBySel('.audio_item[data-id="'+e+'"]'),n=I.loaded(),i=I.position(),l=I.duration();I.playing()?(a(t,function(e,t){o("ai_playing",t)}),o("ai_playing","lm_audio")):(a(t,function(e,t){r("ai_playing",t)}),r("ai_playing","lm_audio")),R(I.getCurrent()),a(t,function(e,t){Z(t,n/l)}),q(I.getCurrentId(),i,l),setTimeout(function(){ft()},1)}function N(e){o("ai_playing","lm_audio");var t=geBySel('.audio_item[data-id="'+e+'"]');t&&(a(t,function(e,t){o("ai_playing",t),o("ai_current",t)}),P.playback(e))}function H(e){r("ai_playing","lm_audio");var t=geBySel('.audio_item[data-id="'+e+'"]');t&&(a(t,function(e,t){r("ai_playing",t),o("ai_current",t)}),P.playback(e,!0))}function R(e){if(!e)return void l("lm_player");c("lm_player");var t=i("lm_audio");t&&(u(d("ai_artist",t),e.artist),u(d("ai_title",t),e.title),m(d("ai_play",t),"style",e.cover_style));var n=geBySel('.audio_item[data-id="'+e.id+'"]');n&&a(n,function(e,t){Z(t,0),et(t,0),J(t,rt(0,I.duration())),tt(t,I.volume()),o("ai_current",t)})}function V(e,t){r("ai_playing","lm_audio");var n=geBySel('.audio_item[data-id="'+e+'"]');n&&(a(n,function(e,n){J(n,ot(t)),r("ai_playing",n),r("ai_current",n)}),B=0,F[e]&&delete F[e])}function q(e,t,n){var i=geBySel('.audio_item[data-id="'+e+'"]');i&&(a(i,function(e,i){var o=t/n;.01>=t&&1>=n&&(o=0),z||et(i,o),J(i,P.getFormatedTime(t,n))}),t>1&&(F[e]=1))}function U(e){var t=A("audios_list","audio"+e),n=s("audio_item",t),i=[],o=!1;a(n,function(t,n){return(n=nt(n))?(i.push(n),void(n.id==e&&(o=!0))):!0}),I.playlist(i,{q:m(t,"data-query")}),o&&I.play(e)}var z=null,$=null,W=!1,Y=!1;f(document,D?"touchend touchcancel":"mouseup",G),f(document,D?"touchmove":"mousemove",X);function X(e){if(z){var t=A("audio_item",z),n=K(z,e);e&&p(e);var i=geBySel('.audio_item[data-id="'+m(t,"data-id")+'"]');a(i,function(e,t){W&&et(t,n),Y&&(tt(t,n),I.volume(n))}),$=n}}function G(e){if(z){var t=A("audio_item",z),n=K(z,e)||$;e&&p(e);var i=geBySel('.audio_item[data-id="'+m(t,"data-id")+'"]');a(i,function(e,i){W&&(et(i,n),I.position(n,!0)),Y&&tt(t,n)}),z=$=null,W=Y=!1}}function Q(e){return e.getBoundingClientRect().left}function K(e,t){var n=A("Slider__scroll",e),i=_("touch",window.bodyNode)?10:8,o=t.pageX||t.touches&&t.touches[0]&&t.touches[0].pageX||0,r=o-(n?Q(e):h(e))-i/2,a=e.offsetWidth-i,s=a?Math.max(0,Math.min(r/a,1)):0;return s}function J(e,t){if(e){var n=d("ai_dur",e);u(n,t)}}function Z(e,t){if(e){var n=d("aic_progress_wrap",e),i=d("aic_load_line",n);i.style.width=100*Math.max(0,Math.min(t,1))+"%"}}function et(e,t){if(e){{var n=d("aic_progress_wrap",e),i=d("aic_progress_line",n);d("aic_slider",i)}i.style.width=100*t+"%"}}function tt(e,t){if(e){{var n=d("aic_volume_wrap",e),i=d("aic_progress_line",n);d("aic_slider",i)}i.style.width=100*t+"%"}}function nt(e){if(e=i(e),!e||!m(e,"data-id"))return!1;if(_("ai_deleted",e))return!1;var t=m(e,"data-id"),n=u(v("input",e)),o=m(d("ai_dur",e),"data-dur"),r=u(d("ai_artist",e)),s=u(d("ai_title",e)),l=!!d("ai_add",e),c=!!d("ai_del",e),A=m(d("ai_play",e),"style"),f=!!d("audio_item_disabled",e),p={};return a((m(e,"class")||[]).split(" "),function(e,t){var n="audio_item_",i=t.slice(0,n.length);i===n&&(p[t.slice(n.length)]=!0)}),{id:t,src:n,dur:o,artist:g(w(r)),title:g(w(s)),can_add:l,can_del:c,cover_style:A,is_disabled:f,mix:p}}function it(e,t,n){if(!e)return"";var i=g(e.id),o=g(e.src),r=+e.dur,a=e.artist,s=e.title,l=e.can_add,c=e.can_del,u=s?'<span class="divider"> &ndash; </span>':"",d=D?"ontouchstart":"onmousedown",A="",m="",f=e.cover_style||"",p=e.is_disabled||"",_=S["class"]("audio_item",e.mix)||"audio_item";if(p)return'<div class="audio_item audio_item_disabled"></div>';if(ct(i)){if(n)return"";A+=" ai_deleted"}at(i)&&(A+=" ai_added"),c?(A+=" ai_has_btn",m='<div class="ai_del wia_item" onclick="audioplayer.del(\''+i+"', event);\">"+lang.global_delete_audio+"</div>"):l&&(A+=" ai_has_btn",m='<div class="ai_add wia_item" onclick="audioplayer.add(\''+i+"', event);\">"+lang.global_add_to_audio+"</div>"),i==I.getCurrentId()&&(I.playing()&&(A+=" ai_playing"),A+=" ai_current");var h="";return m?h='<div class="ai_menu_wrap"><i class="i_pointer"></i><a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a><div class="ai_menu wi_actions" id="ai_menu_'+i+'">'+m+"</div></div>":A+=" ai_no_menu",'<div id="audio'+i+'" data-id="'+i+'" class="'+A+" "+_+'" onclick="audioplayer.playPause(event, \''+i+"'"+(t?", true":"")+');"><div class="ai_info"><div class="ai_play" style="'+f+'"><i class="i_play"></i></div>'+h+'<div class="ai_body"><div class="ai_dur" data-dur="'+r+'" onclick="audioplayer.switchTimeFormat(this, event);">'+ot(r)+'</div><div class="ai_label"><span class="ai_title">'+s+"</span>"+u+'<span class="ai_artist">'+a+'</span></div><input type="hidden" value="'+o+'"></div></div><div class="ai_controls"><table class="row_table"><tr><td class="aic_progress_wrap"><div class="aic_line" '+d+'="audioplayer.setPosition(this, event);" onclick="cancelEvent(event);"><div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_load_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);"><div class="aic_ln aic_progress_line" onclick="cancelEvent(event);"><div class="aic_slider" onclick="cancelEvent(event);"></div></div></div></div></td><td class="aic_volume_wrap"><div class="aic_line" '+d+'="audioplayer.setVolume(this, event);" onclick="cancelEvent(event);"><div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div><div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);"><div class="aic_ln aic_progress_line" onclick="cancelEvent(event);"><div class="aic_slider" onclick="cancelEvent(event);"></div></div></div></div></td></tr></table></div></div>'}function ot(e){var t,n,i,o=0>e;return e=Math.round(o?-e:e),n=e%60,t=10>n?"0"+n:n,e=Math.floor(e/60),i=e%60,t=i+":"+t,e=Math.floor(e/60),e>0&&(10>i&&(t="0"+t),t=e+":"+t),o&&(t="-"+t),t}function rt(e,n){return ot(t&&n?e-n:e)}function at(e){var t=window,n=t.cur;return n.addedAudios?n.addedAudios[e]:!1}function st(e){var t=window,n=t.cur;n.addedAudios||(n.addedAudios={}),n.addedAudios[e]=!0}function lt(e){var t=window,n=t.cur;n.addedAudios&&delete n.addedAudios[e]}function ct(e){var t=window,n=t.cur;return n.deletedAudios?n.deletedAudios[e]:!1}function ut(e){var t=window,n=t.cur;n.deletedAudios||(n.deletedAudios={}),n.deletedAudios[e]=!0}function dt(e){var t=window,n=t.cur;n.deletedAudios&&delete n.deletedAudios[e]}function At(e,t){t?st(e):lt(e);var n=geBySel('.audio_item[data-id="'+e+'"]');a(n,function(e,n){y("ai_added",n,t),u(d("ai_add",n),t?lang.global_delete_audio:lang.global_add_to_audio)});var i=geBySel1('body > [id="ai_menu_'+e+'"]'),o=d("ai_add",i);u(o,t?lang.global_delete_audio:lang.global_add_to_audio),ActionMenu.update()}function mt(e,t){t?ut(e):dt(e);var n=geBySel('.audio_item[data-id="'+e+'"]');a(n,function(e,n){y("ai_deleted",n,t),u(d("ai_del",n),t?lang.global_add_to_audio:lang.global_delete_audio)});var i=geBySel1('body > [id="ai_menu_'+e+'"]'),o=d("ai_del",i);u(o,t?lang.global_add_to_audio:lang.global_delete_audio),ActionMenu.update()}function ft(){var e=I.getCurrentId(),t=!1;return e&&(t=A("mcont",i("audio"+e))),t?void a(s("_AudioPlayStatus",t),function(e,t){y("playing",t,I.playing())}):void a(s("_AudioPlayStatus"),function(e,t){y("playing",t,!1)})}function pt(e,t,n){var o=window,r=o.isArticleWebView;if(r)return Article.audioPlay(I.getCurrentId(),I.playlist()),p(e),!1;var a=window,s=a.lang;if(I.support){var l=i("audio"+t);if(l&&_("ai_deleted",l)&&!_("ai_current",l))return!0;n&&t!=I.getCurrentId()?U(t,!0):I.operate(t),ft()}else alert(s.mobile_audio_player_not_support);return p(e),!1}return{init:function(e){k=e.add_hash||"",M=e.del_hash||"",j=e.res_hash||""},initAudio:O,getDOMFromAudio:it,add:function(e,t){var n=i("audio"+e);if(!_("ai_ajax",n)){var a=_("ai_added",n);At(e,!a),o("ai_ajax",n),E.post("/audio",{_ajax:1,act:a?"delete":"add",audio:a?m(n,"data-deleteid"):e,hash:a?M:k},{redirectToLoginPage:!0,onDone:function(t){r("ai_ajax",n),t?m(n,"data-deleteid",t):At(e,a)},onFail:function(){r("ai_ajax",n),At(e,a);var t=Array.prototype.slice.call(arguments),i=t.shift();switch(i){case 2:T.go("/audio?act=add&audio="+e+"&hash="+k)}}}),t&&p(t)}},del:function(e,t){var n=i("audio"+e);if(n){var o=_("ai_deleted",n);mt(e,!o),o?dt(e):ut(e),E.post("/audio",{_ajax:1,act:o?"restore":"delete",audio:e,hash:o?j:M},{redirectToLoginPage:!0,onDone:function(t){t||mt(e,o)},onFail:function(){mt(e,o);var t=Array.prototype.slice.call(arguments),n=t.shift();switch(n){case 2:T.go("/audio?act="+(o?"restore":"delete")+"&audio="+e+"&hash="+(o?j:M))}}}),t&&p(t)}},playPause:pt,getFormatedTime:rt,switchTimeFormat:function(e,n){var o=A("audio_item",e);if(!_("ai_current",o)||_("ai_select",o))return!0;t=!t,b("audio_time_left",t?"1":"0");var r=i("audio"+I.getCurrentId());return J(r,rt(I.position(),I.duration())),n&&p(n),!1},setPosition:function(e,t){z||(z=e,W=!0,X(t))},setVolume:function(e,t){z||(z=e,Y=!0,X(t))},playback:function(e,t){if(clearTimeout(x),!t&&e&&e!=B){var n=function i(){return F[e]?void E.post("/audio",{_ajax:1,act:"playback",audio:e,hash:k},{onDone:function(){B=e}}):void(x=setTimeout(i,1e4))};x=setTimeout(n,1e4)}},openPlayer:function(e,t){var n=T.path,i=T.params,o="#player",r=n+(i?"?"+i:"")+o;return T.al_go(r,null,{local:!0,target:e,nav:{push:r,path:n,params:i,hash:o},no_push:t})},getCurrentElem:function(){return e(".ai_current")},playFirst:L,hasArticleWebViewClientAudioSupport:function(){return window.clientWebviewAudioSupport}}}();window.audioplayer=P},"./static/js/mobile/modules/browser.js":function(){var e=window,t=e.ce,n=e.getCssPropertyName;if(!window._ua)var i=navigator.userAgent.toLowerCase();var o={version:(i.match(/.+(?:me|ox|on|rv|it|era|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],amigo:/amigo.*mrchrome soc/i.test(i),opera:/opera/i.test(i),msie:/msie/i.test(i)&&!/opera/i.test(i),msie6:/msie 6/i.test(i)&&!/opera/i.test(i),msie7:/msie 7/i.test(i)&&!/opera/i.test(i),msie8:/msie 8/i.test(i)&&!/opera/i.test(i),msie9:/msie 9/i.test(i)&&!/opera/i.test(i),mozilla:/firefox/i.test(i),chrome:/chrome/i.test(i)||/crios/i.test(i),safari:!/crios/i.test(i)&&!/chrome/i.test(i)&&/webkit|safari|khtml/i.test(i),iphone:/iphone/i.test(i),ipod:/ipod/i.test(i),iphone4:/iphone.*OS 4/i.test(i),ipod4:/ipod.*OS 4/i.test(i),ipad:/ipad/i.test(i),ios:+(i.match(/.+(?:ipod|ipad|iphone.*os) ([\d.]+)_/i)||[0,0])[1],android:/android/i.test(i),bada:/bada/i.test(i),opera_mini:/opera mini/i.test(i),uc_mini:/mobile safari.*ucbrowser/i.test(i),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile/i.test(i),msie_mobile:/iemobile/i.test(i),msie_edge:/edge/i.test(i)&&!/opera/i.test(i),safari_mobile:/iphone|ipod|ipad/i.test(i),opera_mobile:/opera mini|opera mobi/i.test(i),mac:/mac/i.test(i),mi:/miuibrowser/i.test(i)};o.desktop=(o.opera||o.msie||o.mozilla||o.chrome||o.safari)&&!o.mobile,o.wkwebview=function(){if(!o.ios)return!1;if(window.webkit&&window.webkit.messageHandlers)return!0;var e=/constructor/i.test(window.HTMLElement),t=!!window.indexedDB;if(-1===i.indexOf("safari")||-1===i.indexOf("version")||navigator.standalone){if(!t&&e||!window.statusbar.visible);else if(!e||t)return!0}else;return!1}();var r={1:1,2:1,3:1,4:1,5:1},a="ontouchstart"in window,s=function(e){if("WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix)return!0;if("MSCSSMatrix"in e&&"m11"in new e.MSCSSMatrix)return!0;if("CSSMatrix"in e&&"m11"in new e.CSSMatrix)return!0;try{var i=t("div"),o=n(i,"transform");return o?(i.style[o]="translate3d(1px,1px,1px)",i.style[o]&&"none"!=i.style[o]):!1}catch(r){return!1}}(window);window._ua=i,window.browser=o,window.mobPlatforms=r,window.isTouch=a,window.has3d=s},"./static/js/mobile/modules/checkin.js":function(){var e=window,t=e.hide,n=e.ge,i=e.ce,o=e.append,r=e.geByClass1,a=e.val,s=e.addClass,l=e.show,c=e.obj2qs,u=e.unescapeAttr,d=e.elfocus,A=e.lockButton,m=e.unlockButton,f=e.extend,p=e.scrollToEl,_=e.remove,h=e.gpeByTag,v=e.each,g=e.removeClass,w=window,y=w.geo,b=window,S=b.ajax,C=window,k=C.nav,E=function(){var e=null,w=!1,b=!1,C={},M=[],T=0,j=null,D="",x="";function I(e,t){return t?!1:q(e)}function P(e){b=!1;var t=n("medias_map"),c=n("attached_wrap");t||(t=i("div",{id:"medias_map",className:"pi_medias"}),o(t,c));var u=+e[1]||0,d=e[3]||"",A=e[4]||"",m=e[5]||"",f=+e[6].lat||0,p=+e[6].lng||0,_=f+"_"+p,h=r("medias_map",t),v='<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+d+(m?", "+m:A?", "+A:"")+"</div>",g='<input type="hidden" name="place_id" value="'+u+'"><input type="hidden" name="place" value="'+_+'">';if(h)a(h,v+g);else{var v='<div class="medias_map">'+v+g+"</div>";a(t,v)}s("cp_geo_btn_sel","geo_btn"),w=!0,l(t)}function B(){return q(e)}function F(n,i){var o=window,r=o.lang,s="/places.php"+c({act:"add_place",latitude:e.latitude,longitude:e.longitude,hash:D});a("place_add_box",'<h4 class="sub_header">'+r.mobile_geo_new_place_header+'</h4><div class="form_item fi_fat"><form id="place_add_form" action="'+s+'" method="post"><dl class="fi_row"><dt class="fi_label">'+r.mobile_geo_place_name_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_name_fld" name="title" /></dd></dl><dl class="fi_row"><dt class="fi_label">'+r.mobile_geo_place_address_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_address_fld" name="address" /></dd></dl><dl class="fi_row"><dd><input class="button" type="submit" id="place_add_btn" value="'+r.mobile_geo_place_add_btn+'" onclick="return checkin.addNewPlace(this);" /><a class="near_btn" onclick="checkin.addPlaceCancel(); return false;">'+r.mobile_cancel+"</a></dd></dl></form></div>"),a("place_name_fld",u(n)||""),a("place_address_fld",u(i)||""),t("places_box"),l("place_add_box"),d(n?"place_address_fld":"place_name_fld")}function L(){a("place_add_box",""),t("place_add_box"),l("places_box")}function O(){var t=a("place_name_fld"),i=a("place_address_fld");return t?(A("place_add_btn"),S.post("/places.php",{_ajax:1,act:"add_place",latitude:e.latitude,longitude:e.longitude,title:t,address:i,hash:D},{onDone:function(e,t){if(m("place_add_btn"),e){var n={};n[e]=t,f(C,n),M.splice(M[0]?0:1,0,e),L(),N(null,e)}},onFail:function(){m("place_add_btn");var e=Array.prototype.slice.call(arguments),t=e.shift(),i=n("place_add_form");switch(t){case 2:i&&i.submit()}}}),!1):(d("place_name_fld"),!1)}function N(t,n){H();var i=C[n];i&&(e={latitude:+i[6].lat||0,longitude:+i[6].lng||0},n?P(i):R(e,i))}function H(e){if(!j)return!0;a("m",j),j=null,p(r("create_post_extra","mcont"));var t=k.path+(k.params?"?"+k.params:"");return k.go(t,null,{push_only:!0,no_push:e}),!1}function R(e,t){b=!0;var o=n("medias_map"),c=n("attached_wrap");o||(o=i("div",{id:"medias_map",className:"pi_medias"}),c.appendChild(o));var u=e.latitude,d=e.longitude,A=(window.devicePixelRatio>=1.5?2:1,t&&t[4]||!1),m=r("medias_map",o),f=A?'<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+A+"</div>":"",p="",_=u+"_"+d+"_0",h='<input type="hidden" name="map" value="'+_+'">';if(m)a(m,f+p+h);else{var v='<div class="medias_map">'+f+p+h+"</div>";a(o,v)}w=!0,s("cp_geo_btn_sel","geo_btn"),l(o)}function V(){e=null,C={},M=[],T=0,S.post(x,{_ajax:1}),_("medias_map")}function q(e){var t=window,n=t.al;_("feed_extra_field");var r=Math.round(1e8*e.latitude)/1e8,a=Math.round(1e8*e.longitude)/1e8,s=h("form","geo_btn"),l=i("input",{id:"feed_extra_field",type:"hidden",name:"add_place",value:r+","+a});if(!s)return k.go(k.path+"?act=places&lat="+r+"&lng="+a);var c=!1;return v(s,function(e,t){return"submit"===t.type?(c=t,!1):void 0}),c?(o(l,s),window.al&&n.ver?k.go(c):s.submit()):void 0}function U(t){t&&t.coords&&(e={latitude:+t.coords.latitude||0,longitude:+t.coords.longitude||0},I(e))}function z(){E.remove(),t("geo_waiting")}return{toggle:function(){w?E.remove():E.add()},addNewPlace:O,addPlaceShow:F,addPlaceCancel:L,selectPlace:N,changePlace:B,back:H,refreshCurrentPosition:function(){y.getCurrentPosition(U,z)},getCurrentAddress:function(){return C[0]&&C[0][5]||""},savePlaces:function(e){f(C,e)},add:function(t){return!t&&w?B():void(t&&(t.latitude||t.longitude)&&t.place?(e={latitude:+t.latitude||0,longitude:+t.longitude||0},t.place[1]?P(t.place):R(e,t.place),I(e,!0)):(y.getCurrentPosition(U,z),l("geo_waiting")))},add_place:function(t){return!t&&w?B():void(t&&(t.latitude||t.longitude)&&t.place?(e={latitude:+t.latitude||0,longitude:+t.longitude||0},t.place[1]?P(t.place):R(e,t.place),I(e,!0)):(y.getCurrentPosition(U,z),l("geo_waiting")))},remove:function(){w=!1,g("cp_geo_btn_sel","geo_btn"),V()},stash:function(t){return t?(e=t[0],w=t[1],b=t[2],C=t[3],M=t[4],T=t[5],j=t[6],void 0):[e,w,b,C,M,T,j]},init:function(n,i,o){return t("geo_waiting"),e=null,w=!1,b=!1,C={},M=[],T=0,j=null,D=i||"",x=o||"",n&&E.add(n),y.init()}}}();window.checkin=E},"./static/js/mobile/modules/components/article/Article.js":function(e,t,n){var i=n("./node_modules/@vkontakte/vkui-connect/index.js"),o=a(i);n("./static/js/al/modules/articles/article_view.js");var r=n("./static/js/al/modules/articles/article_common.js");function a(e){return e&&e.__esModule?e:{"default":e}}var s=window,l=s.toggleClass,c=s.geByClass1,u=s.ajax,d=s.addClass,A=s.removeClass,m=void 0,f=void 0,p=void 0,_=void 0,h=void 0;function v(e,t){e=e.split("_");for(var n=0;n<t.length;n++){var i=t[n].split("_");if(i[0]==e[0]&&i[1]==e[1])return n}return-1}var g=function(){function e(e,n){f=e,p=n,p.audiosList=p.audiosList.split(","),window.cur&&(window.cur.lang=window.cur.lang||{},extend(window.cur.lang,n.lang||{}));function i(){var e=document.scrollingElement||window.scrollNode||document.body;return e.scrollTop}if(!p.isWebView){var r=void 0,a=i(),s=c("articleView__header"),u=c("articleView__footer"),m=c("articleView__layout");document.addEventListener("scroll",r=function(){var e=m.clientHeight,t=Math.max(0,i()),n=t-a>0,o=t+window.innerHeight+20>e;l(s,"articleView__header--narrow",n),u&&l(u,"articleView__footer--hidden",!o&&n),a=t}),window.cur&&cur.destroy.push(function(){document.removeEventListener("scroll",r),A(document.body,"article_body_with_transition")}),p.isStandalone&&(window.al=!1)}if(p.preloadMoreHash||show(c("article_layer_prev_next")),p.isWebView){var _=c("article");d(_,"article_webview")}p.isWebView&&p.audioBridge&&t(),initArticle(e,{notFull:!!p.preloadMoreHash,isWebView:p.isWebView,mobile:!0,width:p.width}),p.isWebView&&o["default"].send("articleReady")}function t(){window.audioplayer={playPause:function(e,t){var n=gpeByClass("audio_item",e.target);if(_&&_!=n&&(A(_,"ai_playing"),_=!1),h&&(A(h,"article_object_audioplaylist_playing"),h=!1),hasClass(n,"ai_playing"))o["default"].send("audioPause",{}),console.log("audioPause",{}),A(n,"ai_playing");else{var i=v(t,p.audiosList),r=p.audiosList;-1==i&&(r.unshift(t),i=0),o["default"].send("audioPlay",{audioIds:r,pos:i}),console.log("audioPlay",{audioIds:r,pos:i}),d(n,"ai_playing"),_=n}}}}function n(e,t,n){u.post("article.php",{act:"subscribe",owner_id:t,hash:n},{onDone:function(t,n){l(e,"articleView__subscribed",t),e.innerHTML=n}})}function i(e,t,n){var i=!hasClass(e,"active");u.post("article.php",{act:"fave",url:t,add:intval(i),hash:n}),r.mailruStatsPixel(i?"fave":"unfave",f.mailruStatsData),l(e,"active")}function a(e){m||(m=setTimeout(function(){var t=c("articleView__layout");l(t,"article_dark",e),l(document.body,"article_dark",e);var n=intval(hasClass(t,"article_dark"));m=!1,void 0!==e||p.isWebview||u.post("article.php",{act:"set_dark_mode",dark:n});var i=c("articleMenu");i&&Unfold.setTitle(i,"dark_mode",getLang(n?"mobile_articles_menu_dark_disable":"mobile_articles_menu_dark"))},e?0:10))}function s(){for(var e=c("article"),t=e.children,n=0;n<t.length;n++){var i=n>0?t[n-1]:!1,o=t[n],a=n+1<t.length?t[n+1]:!1,s=i?i.tagName+"_"+domData(i,"type"):"",u=o?o.tagName+"_"+domData(o,"type"):"",d=a?a.tagName+"_"+domData(a,"type"):"",A=!1,m=!1,f=!1;s&&u==s||(A=!0),d&&u==d||(m=!0),r.ResizableObjectTypes.includes(+d.type)&&(f=!0),l(o,"article_decoration_first",A),l(o,"article_decoration_last",m),l(o,"article_decoration_before",f)}}function g(e){e=e||{};var t=c("article");p.preloadMoreHash&&u.post("article.php",{act:"load_more",rev:p.rev,hash:p.preloadMoreHash,article_owner_id:f.owner_id,article_id:f.id,audio_bridge:intval(p.audioBridge)},{onDone:function(e,n){var i=ce("div",{innerHTML:e}),o=c("article",i).children,r=c("article_layer_prev_next",t);r&&r.remove(),"figure"!==t.lastChild.tagName.toLowerCase()&&t.lastChild.remove();for(var a=t.children.length;a<o.length;)t.appendChild(o[a]);r&&(t.appendChild(r),show(r));var l=c("article_preload_spinner");l&&l.parentNode.removeChild(l),p.audiosList=n,s(),updateArticle()}}),e.paddingTop&&setStyle(t,"marginTop",intval(e.paddingTop)),e.paddingBottom&&setStyle(t,"marginBottom",intval(e.paddingBottom)),e.noDarkModeTransition&&d(t,"article_dark_no_transition")}function w(e,t,n){var i=gpeByClass("article_object_audioplaylist_webview",e);if(_&&(A(_,"ai_playing"),_=!1),h){var r=h;if(A(r,"article_object_audioplaylist_playing"),h=!1,r==i)return o["default"].send("audioPause",{}),console.log("audioPause (playlist)",{}),cancelEvent(n)}var a=v(t,p.audiosList),s=p.audiosList;return-1==a&&(s.unshift(t),a=0),o["default"].send("audioPlay",{audioIds:s,pos:a}),console.log("audioPlay (playlist)",{audioIds:s,pos:a}),d(i,"article_object_audioplaylist_playing"),h=i,cancelEvent(n)}function y(e,t){_&&(A(_,"ai_playing"),_=!1),h&&(A(h,"article_object_audioplaylist_playing"),h=!1),e=e.split("_"),e=e[0]+"_"+e[1];var n=ge("audio"+e);n&&l(n,"ai_playing","play"==t);for(var i=geByClass("_article_object_audioplaylist_webview"),o=0;o<i.length;o++){var r=(domData(i[o],"ids")||"").split(",");if(r.indexOf(e)>=0&&"play"==t){d(i[o],"article_object_audioplaylist_playing"),h=i[o];break}}}return{init:e,fave:i,subscribe:n,toggleDarkMode:a,onWebViewShow:g,audioPlayPlaylist:w,onAudioStateChanged:y}}();window.Article=g},"./static/js/mobile/modules/components/assistance/FeedAssistance.js":function(){var e=window,t=e.ajax,n=e.domCA,i=e.remove,o=e.FeedAssistanceStats;window.FeedAssistance={hide:u,setFilled:A};var r="/feed",a="hide_assistance",s="feedAssistance",l="."+s,c="feedAssistance_filled";function u(e,t,o){var r=n(e,l),a=hasClass(r,c);return i(r),a||d(e,t,o),!1}function d(e,n,i){var s=o.getFromRef(e);t.post(r,{_ajax:1,type:n,hash:i,act:a,from:s})}function A(e){var t=hasClass(e,s)?e:n(e,l);addClass(c,t)}},"./static/js/mobile/modules/components/assistance/FeedAssistanceExploreBait.js":function(){var e=window,t=e.Groups,n=e.Friends,i=e.FeedAssistanceStats,o=e.hasClass,r=(e.each,e.geByClass1),a=e.nav,s=e.domCA,l=e.domPN,c=e.page,u=e.ge,d=e.addEvent,A=e.attr,m=e.escapeAttr;window.FeedAssistanceExploreBait={onSubscribeLinkClick:k},i.registerTrackingCls("post_exploreBait"),i.onStartViewElement(x),a.onBeforeGo(j),c.onChange(D);var f="post__subscribeBtn_unsubscribe",p="post__subscribeBtnIcon_unsubscribe",_="post__subscribeBtnIcon_subscribe",h="post__subscribeBtnIcon",v="mobile_groups_you_are_in_public",g="mobile_groups_public_subscribe",w="feed",y="group",b=".post_exploreBait",S=!1,C=!1;function k(e,t,n,i,a,s){var l=o(e,f),c=l?i:n,u=getLang(l?g:v),d=!l,w=r(h,e),b=T(e);return w&&(toggleClass(p,w,d),toggleClass(_,w,!d)),A(e,"aria-label",m(u)),toggleClass(f,e,d),a===y?E(t,c,l,s):M(t,c,l,b,s),!1}function E(e,n,o,r){var a=o?t.leave:t.enter,s=o?i.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:i.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;r&&P(s),a.call(t,e,n,w)}function M(e,t,o,r,a){var s=o?n.decline:n.accept,l=o?i.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:i.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;a&&P(l),s.call(n,e,t,w,r)}function T(e){var t=s(e,b);return intval(domData(t,"block-id"))}function j(e){return S?void(I(e)&&(C=o("item_replies",e),F(e))):void(C=!1)}function D(){S&&C&&L()}function x(e){if(i.getElementType(e)===i.BLOCKS.BLOCK_TYPE_EXPLORE_BAIT){if(e._exploreBaitClickHandlerAdded)return;S=!0,d(e,"click",function(t){R(t,e)}),e._exploreBaitClickHandlerAdded=!0}}function I(e){return e.tagName&&"explore-bait"===domData(e,"post-type")}function P(e){i.dispatchEvent({type:i.EVENTS.EVENT_EXPLORE_BAIT,data:i.serializeEventData(i.EVENTS.EVENT_EXPLORE_BAIT_SUB,e)})}function B(e){if("A"!==e.tagName||!o("item_sel",e)){if(o("item_like",e))return P(i.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0;var t=(o("i_like",e)||o("v_like",e))&&!o("item_sel",l(e));return t?(P(i.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0):void 0}}function F(e){var t=["pi_text_more","wi_date","pi_text","i_replies","v_replies","item_replies"],n=!0,r=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=s.value;if(o(c,e))return P(i.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPENED),!0}}catch(u){r=!0,a=u}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw a}}}function L(){var e=u("nc_submit");d(e,"click",function(){P(i.EVENTS.SUB_EVENT_EXPLORE_BAIT_COMMENT)})}function O(e){var t=domData(e,"post-owner-type");if(t){var n=domData(e,"post-owner-type"),o="user"===n?i.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_USER:i.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP;return P(o),!0}}function N(e){var t={report:i.EVENTS.SUB_EVENT_EXPLORE_BAIT_REPORT,hide:i.EVENTS.SUB_EVENT_EXPLORE_BAIT_HIDE},n=domData(e,"post-action"),o=t[n];return o?(P(o),!0):void 0}var H=[B,O,N];function R(e){var t=e.target,n=!0,i=!1,o=void 0;try{for(var r,a=H[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if(s.call(null,t)===!0)return}}catch(l){i=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}}},"./static/js/mobile/modules/components/assistance/FeedAssistanceImportContacts.js":function(){var e=window,t=e.Friends,n=e.domData,i=e.FeedAssistanceStats,o=e.getLang;window.FeedAssistanceImportContacts={importContacts:u};var r={},a="feedAssistanceImportContacts__desc",s="mobile_friends_import_error",l="mobile_join_friends_found_count",c=!1;i.registerTrackingCls("feedAssistance_importContacts"),i.onStartViewElement(function(e){i.getElementType(e)===i.BLOCKS.BLOCK_TYPE_IMPORT_CONTACTS&&(c=!0)}),t.onImportSuccess(function(){var e=arguments[0],t=arguments[2],n=r[e];if(n){var s=geByClass1(a,n);s.textContent=o(l,t)}c&&i.dispatchEvent({type:i.EVENTS.EVENT_FEED_ASSISTANCE,data:i.serializeEventData(i.EVENTS.EVENT_FEED_ASSISTANCE,n,"m_mp",i.EVENTS.SUB_EVENT_FILLED)})}),t.onImportFailed(function(e){var t=r[e];if(t){var n=geByClass1(a,t);n.textContent=o(s)}});function u(e,t,i){if(window.XMLHttpRequest&&!i){var o=n(e,"service-id");return window.open(t),r[o]=e,!1}}},"./static/js/mobile/modules/components/assistance/FeedAssistanceProfilePhoto.js":function(){var e=window,t=e.ownerPhotoUpload,n=e.setStyle,i=e.remove,o=e.domData,r=e.geByClass,a=e.geByClass1,s=e.getLang,l=e.FeedAssistance,c=e.FeedAssistanceStats;t.onUploadedDone(v),c.registerTrackingCls("feedAssistance_profilePhoto");var u="feedAssistance_profilePhoto",d="feedAssistanceProfilePhotoContent__avatar",A="feedAssistanceProfilePhotoContent__title",m="feedAssistanceProfilePhotoContent__desc",f="feedAssistance__footerButton",p="feedAssistanceProfilePhotoContent__avatar_uploaded",_="mobile_assistance_profile_photo_uploaded_title",h="mobile_assistance_profile_photo_uploaded_desc";function v(e){var t=a(u);if(t){var n=a(d,t),o=a(m,t),r=a(A,t),c=a(f,t);e=b(e),g(e,n),r&&(r.textContent=s(_)),o&&(o.textContent=s(h)),l.setFilled(t),i(c)}}function g(e,t){if(window.Image){var n=new Image;n.onload=function(){return y(e,t)},n.src=e}else y(e,t)}function w(e){var t=r("al_u"+vk.id);t.forEach(function(t){o(t,"photo")&&o(t,"photo",e);var n=a("_u"+vk.id,t);n&&"IMG"===n.tagName&&(n.src=e)})}function y(e,t){t&&(addClass(p,t),n(t,"background-image","url("+e+")")),w(e)}function b(e){return e.replace(/"/g,"").replace(/'/g,"").replace(/</g,"").replace(/>/g,"")}},"./static/js/mobile/modules/components/assistance/FeedAssistancePromoButton.js":function(){var e=window,t=e.FeedAssistanceStats;t.registerTrackingCls("feedAssistance_promoButton"),t.onStartViewElement(i);function n(e,n,i){t.dispatchEvent({type:t.EVENTS.EVENT_PROMO_BUTTON,data:t.serializeEventData(t.EVENTS.EVENT_PROMO_BUTTON_SUB,e,n,i)})}function i(e){if(t.getElementType(e)===t.BLOCKS.BLOCK_TYPE_PROMO_BUTTON){if(e._promoButtonClickHandlerAdded)return;var i=geByClass1("feedAssistancePromoButtonInstallApp__button",e),o=i?"install_app":"",r=i||e;addEvent(r,"click",function(){n(e,t.EVENTS.SUB_EVENT_PROMO_BUTTON_CLICK,o)}),e._promoButtonClickHandlerAdded=!0}}},"./static/js/mobile/modules/components/assistance/FeedAssistancePushNotificationsSwitch.js":function(e,t,n){var i=n("./static/js/al/modules/notifier/push_notifier_constants.js"),o=window,r=(o.addClass,o.FeedAssistanceStats),a=o.page,s=o.geByClass1,l=o.onDOMReady,c=o.FeedNotifications;l(m),a.onChange(m);var u="feedAssistance_pushNotificationsSwitch",d="enable_browser_notifications",A="m_push_switch";function m(){PushNotifier&&PushNotifier.canBeEnabled().then(function(e){return e&&PushNotifier.getPermission()===i.PUSH_NOTIFIER_PERMISSION_DEFAULT}).then(function(e){if(e){c.addWebActionAcceptHandler(d,f),c.addWebActionDeclineHandler(d,p);var t=s(u);if(!t)return;r.registerTrackingCls(u),r.register(t,"feed")}})}function f(e){return PushNotifier.requestPermission().then(function(t){var n=void 0,o=!0;return unlockButton(e),t===i.PUSH_NOTIFIER_PERMISSION_DEFAULT?o=!1:(n=t===i.PUSH_NOTIFIER_PERMISSION_GRANTED?r.EVENTS.SUB_EVENT_ENABLE_PUSH:r.EVENTS.SUB_EVENT_DECLINE_PUSH,h(e,n),_(),PushNotifier.init(),o)},function(){return p(e)})}function p(e){var t=!0;return unlockButton(e),h(e,r.EVENTS.SUB_EVENT_DECLINE_PUSH),_(),t}function _(){var e=s(u);remove(e)}function h(e,t){r.dispatchEvent({type:r.EVENTS.EVENT_FEED_ASSISTANCE,data:r.serializeEventData(r.EVENTS.EVENT_FEED_ASSISTANCE,e,A,t)})}},"./static/js/mobile/modules/components/assistance/FeedAssistanceRecommendedFriendsSlider.js":function(){var e=window,t=e.domPN,n=e.remove,i=e.lockButton,o=e.addClass,r=e.obj2qs,a=e.domCA,s=e.intval,l=e.geByClass1,c=e.getLang,u=e.domData,d=e.page,A=e.nav,m=(e.onDOMReady,e.each),f=e.addEvent,p=e.cdf,_=e.domChildren,h=e.append,v=e.Friends,g=e.ajax;window.FeedAssistanceRecommendedFriendsSlider={hideRecommended:V,onPrettyCardBtnClick:q,onScrollSlider:U},FeedAssistanceStats.registerTrackingCls("feedAssistance_recommendedFriends"),d.onRestore(Z),d.onChange(et),FeedAssistanceStats.onStartViewElement(tt);var w="/friends",y="hide_possible",b="prettyCard__button",S="prettyCard__button_accepted",C="prettyCard__button_loading",k="feed",E="recommended_carousel",M="mobile_friends_feed_recom_got_notification",T="prettyCard__closeButton",j="prettyCard__closeButton_hidden",D="Slider__line",x=".feedAssistance_recommendedFriends",I=".prettyCard",P="/feed",B="click_recommended_friends_slider",F=20,L=500,O=3,N=2,H=void 0,R=void 0;function V(e,n,i){var o=t(e);if(!o)return!1;var a=G(o);Y(o);var s=w+r({act:y,hash:i,id:n,from:k,block_id:a});return g.post(s,{_ajax:1}),!1}function q(e,t,n){return z(e,t,n)}function U(e){if(H=e,H._lastScroll=H.scrollLeft,!e.ajaxIsRunning&&!e.allLoaded){var t=e.scrollLeft+e.clientWidth>=e.scrollWidth/2;t&&X(e)}}function z(e,t,n){if(hasClass(S,e))return!1;var r=G(e);return o(C,e),i(e),v.accept(t,n,k,r,function(t){var n=t||c(M);unlockButton(e),removeClass(C,e),o(S,e),e.textContent=n,W(e)},function(t,n){t===N&&A.hard_go(n),removeClass(C,e),unlockButton(e)}),!1}function $(e){var t=a(e,I);if(t)return l(T,t)}function W(e){var t=$(e);o(j,t)}function Y(e){var i=t(e);if(n(e),i&&!i.firstElementChild){var o=a(i,x);n(o)}}function X(e){if(e.currentPage=e.currentPage||1,e.currentPage++>=O)return void(e.allLoaded=!0);var t=s(u(e,"offset"))||F,n=s(u(e,"prev-post")),i=G(e),o=w+r({act:E,offset:t,"prev-post":n,block_id:i});e.ajaxIsRunning=!0,g.post(o,{_ajax:1},{onDone:function(t,n,i){u(e,"offset",n);var o=l(D,e),r=p(i),a=_(r);h(r,o),m(a,function(){FeedAssistanceStats.register(this,"feed")}),e.ajaxIsRunning=!1,e.allLoaded=n>=t},onFail:function(){setTimeout(function(){return e.ajaxIsRunning=!1},L)}})}function G(e){var t=a(e,x);return s(u(t,"block-id"))}function Q(){var e=l("acceptFriendBtn");e&&f(e,"click",function(){s(u(e,"uid"));FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_ACCEPT_FRIEND,data:FeedAssistanceStats.serializeEventData(B,e,"profile")})})}function K(e){var t=e.target;if(t=a(t,".prettyCard__bodyLink")||t,u(t,"friend-link")&&FeedAssistanceStats.dispatchElementEvent(FeedAssistanceStats.EVENTS.EVENT_OPEN_USER,t),hasClass(t,b)){var n=hasClass("goodAuthorsSlider",FeedAssistanceStats.getRoot(t.fake_btn||t))?"authors_rec":"user_rec";FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_ACCEPT_FRIEND,data:FeedAssistanceStats.serializeEventData(B,t,n)})}}function J(){FeedAssistanceStats.onScroll()}function Z(){if(R=!0,H){var e=geByClass("prettyCard_friend",H);m(e,function(){FeedAssistanceStats.forceRegister(this,"feed")})}}function et(){H&&H._lastScroll&&R&&(H.scrollLeft=H._lastScroll),A.cur===P&&(H=null),R=!1,"user_rec"===A.getQuery("from")&&Q()}function tt(e){var t=FeedAssistanceStats.getElementType(e);if(t===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_RECOMMENDED_SLIDER||t===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_RECOMMENDED_SLIDER){if(e._friendsSliderHandlersAdded)return;f(e,"scroll wheel touchmove",J),f(e,"click",K);var n=geByClass("prettyCard_friend",e);m(n,function(){FeedAssistanceStats.register(this,"feed"),FeedAssistanceStats.setParenViewableX(this,e)}),FeedAssistanceStats.forceProcessTrack(),e._friendsSliderHandlersAdded=!0}}},"./static/js/mobile/modules/components/audio/AudioPlaylist.js":function(){var e=window,t=e.preventEvent,n=e.toggleClass,i=e.attr,o=e.gpeByClass,r=e.geByClass1,a=e.ajax,s=e.val,l=e.ge,c=e.addClass,u=e.removeClass,d=e.geBySel1,A=function(){var e="_audioSnippet",A="audio_item",m="audioPlaylist__add_added",f="data-follow_text",p="data-unfollow_text",_="_audioPlaylistsPage__item",h="audioPlaylistsPage__item_removed";function v(a,s){t(a);var l=o(e,s),c=r(A,l);audioplayer.playPause(a,i(c,"data-id")),n("audioSnippet__playpause_paused",s)}function g(e,t){var i=s(e),o=l(t+"_field"),r="tab_item_cur_noactive";s(o,i),cur&&cur[t]&&cur[t].go();var a=d(".audioPage__tabs .tab_item_cur");a&&n(r,a,i)}function w(e){return'<div class="audioPlaylists__item">\n              <a href="'+e.href+'" class="audioPlaylists__itemLink al_playlist">\n                <span class="audioPlaylists__itemCover" style="'+e.thumb_style+'">'+e.grid_covers+'</span>\n                <span class="audioPlaylists__itemTitle">'+e.title+'</span>\n                <span class="audioPlaylists__itemAuthor">'+e.author_name+'</span>\n                <span class="audioPlaylists__itemStats">'+e.short_stats+"</span>\n              </a>\n            </div>"}function y(e,t,n,i){return e?'<div class="audioPlaylists">\n                <div class="audioPlaylists__header">\n                  <div class="audioPlaylists__cell">\n                    <div class="audioPlaylists__title">'+n+'</div>\n                  </div>\n                  <div class="audioPlaylists__cell">'+i+'</div>\n                </div>\n                <div class="audioPlaylists__body _preventMenuOpen">\n                  <div class="audioPlaylists__items">\n                    '+e+"\n                  </div>\n                </div>\n              </div>":""}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="audioPlaylistsPage">\n              <div class="audioPage__search">\n                '+t+'\n              </div>\n              <div class="audioPlaylistsPage__list _si_container" id="au_search_playlist_items">\n                '+e+"\n              </div>\n            </div>"}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                  <a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n                  <i class="i_pointer"></i>\n                  <div class="ai_menu wi_actions">\n                    '+e.follow_link+"\n                    "+e.publish_link+"\n                  </div>\n                </div>\n             </div>\n             "+e.actions;return t&&(n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                   <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                     <a href="#" class="ai_menu_toggle_button"></a>\n                   </div>\n                 </div>'),'<div class="audioPlaylistsPage__item _audioPlaylistsPage__item'+e.owner_id+"_"+e.id+'">\n              <div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_link">\n                <a href="'+e.href+'" class="audioPlaylistsPage__itemLink">\n                  <span class="audioPlaylistsPage__container">\n                    <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_cover">\n                      <span class="audioPlaylistsPage__cover" style="'+e.thumb_style+'">'+e.grid_covers+'</span>\n                    </span>\n                    <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_desc">\n                      <span class="audioPlaylistsPage__title">'+e.title+'</span>\n                      <span class="audioPlaylistsPage__author">'+e.author_name+'</span>\n                      <span class="audioPlaylistsPage__stats">'+e.short_stats+"</span>\n                    </span>\n                  </span>\n                </a>\n              </div>\n              "+n+"\n            </div>"}function C(e){return'<div class="audioPlaylistsPage__notFound">\n              '+e+"\n            </div>"}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=window,i=n.lang,o=('<input type="hidden" name="act" value="player"><input type="hidden" name="list" value="'+escapeAttr(e)+'">','<input id="au_search_btn" class="button qs_button al_tab" type="submit" value="'+i.mobile_audio_search_btn+'" />',function(e,t,n){return'<form action="/audio" class="qsearch" onsubmit="return cur.au_search.go(event);">'+e(t,n)+"</form>"}),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="audioPage__search">\n              <div class="hp_block">\n                '+e+'\n                <div class="qsearch">\n                  <table class="row_table">\n                    <tr>\n                      <td class="row_table_main_column">\n                        <div class="qs_field_wrap">\n                          <div class="iwrap">\n                            <input id="au_search_field" type="text" class="textfield qs_textfield" name="q" placeholder="'+i.mobile_audio_search_placeholder_simple+'">\n                          </div>\n                        </div>\n                      </td>\n                      <td class="row_table_last_column">\n                        '+t+"\n                      </td>\n                    </tr>\n                  </table>\n                </div>\n              </div>\n            </div>"};return t?r():o(r)}function E(e,o){t(e);var a=r(_+i(o,"data-playlist_owner_id")+"_"+i(o,"data-playlist_id"));hasClass(m,o)?(o.innerText=i(o,f),c(h,a)):(o.innerText=i(o,p),u(h,a)),M(o),n(m,o)}function M(e){a.post("/audio",{_ajax:1,act:"follow_playlist",playlist_owner_id:i(e,"data-playlist_owner_id"),playlist_id:i(e,"data-playlist_id"),hash:i(e,"data-hash")},{redirectToLoginPage:!0})}return{playPause:v,followPlaylist:E,tplSearchBlockItem:w,tplSearchBlock:y,tplSearchListItem:S,tplSearchListNull:C,tplPlaylistsPage:b,tplPlayerSearch:k,copyValue:g}}();window.AudioPlaylist=A},"./static/js/mobile/modules/components/audio/AudioSubscribe.js":function(e,t,n){var i=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n("./static/js/mobile/modules/components/common/Countdown.js"),r=a(o);function a(e){return e&&e.__esModule?e:{"default":e}}var s=window,l=s.removeEvent,c=s.addEvent,u=s.addClass,d=s.removeClass,A=s.hasClass,m=s.getCookie,f=s.setCookie,p=s.browser,_=s.setDocumentDomain,h=function(){_();var e=window.audioSubscribe,t=q(),n=!1,o=N("remixaudio_show_alert_today"),a=N("remixaudio_show_alert_to_three_month"),s=m("remixaudio_date"),h=!1,v=!1,g=6e5,w=new r["default"](g,{onEnd:function(){R()}}),y="remixaudio_background_play_time_",b=N(y,1),S=N("remixaudio_background_play_time_limit"),C=1,k=S-b===0,E=new r["default"](1e3*S,{tick:1e3*C,onTick:function(e){if(P&&!x.hidden)return void E.pause();var t=S-Math.round(e/1e3);return window.audio.playing()?(E.start(),void(S===b+t?V():b+t>S?(V(),f(y,S,1)):f(y,b+t,1))):void E.pause()},onEnd:function(){V()}}),M=O(),T=i(M,2),j=T[0],D=T[1],x={hidden:!1},I=!1,P=j&&D;if(P)e||c(document,D,L);else{var B=18e4;I=new r["default"](B,{tick:1e3,onTick:function(){},onEnd:function(){n=!0,k?V():E.start()}})}function F(){return x.hidden}function L(){document[j]?(E.start(),x.hidden=!0):(E.pause(),x.hidden=!1)}function O(){var e=void 0,t=void 0;if("undefined"!=typeof document.hidden)e="hidden",t="visibilitychange";else if("undefined"!=typeof document.msHidden)e="msHidden",t="msvisibilitychange";else{if("undefined"==typeof document.webkitHidden)return[!1,!1];e="webkitHidden",t="webkitvisibilitychange"}return[e,t]}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(m(e),10);return isNaN(n,10)?t:n}function H(){var e=geByClass1("audioAttention");e&&2>o&&10>a&&(u(e,"audioAttention_show"),w.start(),f("remixaudio_show_alert_today",++o,1),f("remixaudio_show_alert_to_three_month",++a,1),1===a&&f("remixaudio_show_alert_to_three_month_date",s,93))}function R(){d(geByClass1("audioAttention"),"audioAttention_show"),w.stop()}function V(){e||(k=!0,window.audio.pause(),E.pause(),H())}function q(){var e=p.opera_mini,t=p.opera_mobile,n=p.msie_mobile,i=p.msie_edge,o=p.amigo,r=window.opera|window.opr|navigator.userAgent.indexOf(" OPR/")>-1|navigator.userAgent.indexOf(" Coast/")>-1|navigator.userAgent.indexOf(" OPiOS/")>-1,a=navigator.userAgent.indexOf("OPR/")>-1&&navigator.userAgent.indexOf("Mobile")>-1&&navigator.userAgent.indexOf("Presto/")<0,s=navigator.userAgent.indexOf("Opera Mini/")>-1&&navigator.userAgent.indexOf("Presto/")>-1;return r&&A("_hover",document.body)?!1:"undefined"==typeof document.hidden?!0:r||a||s||e||t||n||i||o?!0:!1}function U(){I&&(n||I.isStarted()||(c(document,isTouch?"touchstart":"mousedown scroll",z),I.start()))}function z(){I&&(E.pause(),n=!1,l(document,isTouch?"touchstart":"mousedown scroll",z),I.stop())}function $(){h&&c(document,isTouch?"touchstart":"mousedown",W())}function W(){l(document,isTouch?"touchstart":"mousedown",W()),v=!0,h=!1}return{badBrowser:t,audioSubscribe:e,isSleep:n,hasTouch:v,backgroundPlayCountdown:E,touchTrack:$,touchUnTrack:W,sleepModeStart:U,sleepModePause:z,showPaymentAlert:H,hidePaymentAlert:R,isBadBrowser:q,isVisibilityChange:P,isHidden:F}}();window.AudioSubscribe=h},"./static/js/mobile/modules/components/audio/hmAudioBlock.js":function(){var e=need("page"),t=need("audio"),n=need("onDOMReady"),i=need("audioplayer"),o=need("AudioSpecialForYou");window.hmAudioBlock={},function(){n(r),hmAudioBlock._onSpecialPlayAllClick=a}();function r(){s(),t.onInit(s),t.onSelect(s),e.onChange(s)}function a(){l()?i.playPause():i.playFirst(),s()}function s(){o.setPlaying(t.playing()&&l())}function l(){var e=i.getCurrentElem();return e&&!!e.closest(o.selector)}},"./static/js/mobile/modules/components/audio/hmAudioSerp.js":function(){var e=need("nav"),t=need("ajax"),n=need("Url"),i=need("TabRow"),o=need("AudioSerp");window.hmAudioSerp={_init:c},function(){hmAudioSerp._onQueryChange=u}();var r=300,a={},s=null,l=null;function c(){d(),cur.processNav=A,cur.destroy.push(function(){return e.clear()})}function u(t){var i=t.query,c=m(i);if(l&&l.abort(),s&&clearTimeout(s),c in a||!c)return void u();o.setView("spinner"),s=setTimeout(u,r);function u(){e.go(n.make(e.path,{q:i,tab:!0}))}}function d(){var t=m(e.getQuery("q"));t&&(a[t]=o.getFoundHtml())}function A(r){var s=e.path,c=r.nav.path,u=qs2obj(e.params),d=qs2obj(r.nav.params);if(s!==c||d.act)return!1;if(u.tab!==d.tab){var A=d.tab||"owned";o.setTab(A),i.setSelectedTab("hmAudioSerp",A)}else{var f=d.q||"",p=m(f);l&&l.abort();var _=n.make(s,{q:f,tab:null}),h=n.make(s,{q:f,tab:"global"});i.setTabUrl("hmAudioSerp","owned",_),i.setTabUrl("hmAudioSerp","global",h),SearchPanel.setQuery("hmAudioSerp",f),f?p in a?(o.setFoundHtml(a[p]),o.setView("found")):(o.setView("spinner"),l=t.post(s,{q:f,_ajax:1},{onDone:function(e){o.setFoundHtml(e),o.setView("found"),a[p]=e}})):o.setView("owned")}return!0}function m(e){return(e||"").trim().toLowerCase()}},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("./static/js/mobile/modules/lib/befall.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a=window,s=a.addEvent,l=a.removeEvent,c={onIframeReady:o["default"]("{ is_api, check_transfer_url, on_success_url }"),onPostMessage:o["default"](),onAcceptCookieClick:o["default"]()};c.onIframeReady(function(){s(window,"message",u),window.cur.destroy.push(function(){l(window,"message",u)})});function u(e){var t=e.origin,n=void 0;if(t.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)){try{n=JSON.parse(e.data)}catch(i){n={}}"billing"===n.type&&c.onPostMessage(n.action,n.action_params)}}window.BasisMoneyTransfer=c,t["default"]=c},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_hideKeyboard.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}o["default"].onPostMessage(function(e){("waiterStart"===e||"3dsPage"===e)&&document.activeElement&&document.activeElement.blur()})},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_iframeHeight.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a=window,s=a.setStyle,l=a.geByClass1,c="pageMoneyTransfer__iframe";o["default"].onPostMessage(function(e,t){"resizeFrame"===e&&s(l(c),"height",t.height+40)})},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_removeTouchEventsForApi.js":function(e,t,n){var i=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),r=a(o);function a(e){return e&&e.__esModule?e:{"default":e}}var s=window,l=s.registeredEvents,c=s.removeEvent,u=["touchstart","touchend","touchmove","touchcancel"];r["default"].onIframeReady(function(e){var t=e.is_api;t&&l.forEach(function(e){var t=i(e,3),n=t[0],o=t[1],r=t[2];u.indexOf(o)>=0&&c(n,o,r)})})},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_scrollTop.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}o["default"].onPostMessage(function(e){"putPixel"!==e&&"addCard"!==e&&window.scrollTop(0)})},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_transferSendAccept.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a=window,s=a.nav,l=a.ajax,c=a.geByClass1,u=a.addClass,d=a.val,A="pageMoneyTransfer",m="pageMoneyTransfer_error",f="pageMoneyTransfer_errorCookie",p="pageMoneyTransfer_success",_="pageMoneyTransfer__errorText",h="pageMoneyTransfer__iframe",v=2e3,g=void 0,w=void 0,y=void 0;o["default"].onIframeReady(function(e){S(),w={checkUrl:e.check_transfer_url,onSuccessUrl:e.on_success_url},C(),window.cur.destroy.push(k)}),o["default"].onPostMessage(function(e,t){"paySuccess"===e?u(p,c(A)):"payError"===e?(k(),u(m,c(A)),d(c(_),t.descr)):"session_fail"===e&&(k(),u(m,c(A)),u(f,c(A)))});var b=0;o["default"].onAcceptCookieClick(function(){var e=window.open("https://top-fwz1.mail.ru/counter2?id=1;","","width=300; height=300");setTimeout(function(){e.close();var t=c(h),n=clone(t);removeClass(m,c(A)),replace(n,t);var i=n.contentWindow.document;i.open("text/html","replace"),i.write(attr(t,"data-html")),i.close(),C()},400+b),750>b&&(b+=150)});function S(){var e=c(h);if(!e)return void setTimeout(S,2e3);var t=e.contentWindow.document;t.open("text/html","replace"),t.write(attr(e,"data-html")),t.close()}function C(){var e=w,t=e.checkUrl,n=e.onSuccessUrl;g=setInterval(function(){y=l.post(t,{},{onDone:function(e,t,i){if(1===e||3===e){if(k(),i)return void s.go(i,null,{replace:!0});"/"===n[0]?s.go(n,null,{replace:!0}):location.href=n}else 2===e&&(k(),u(m,c(A)),d(c(_),t))}})},v)}function k(){g&&(clearInterval(g),g=null),y&&(y.abort(),y=null)}},"./static/js/mobile/modules/components/basis/BasisMoneyTransfer/index.js":function(e,t,n){n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_hideKeyboard.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_iframeHeight.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_removeTouchEventsForApi.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_scrollTop.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/BasisMoneyTransfer_transferSendAccept.js")},"./static/js/mobile/modules/components/basis/BasisStory.js":function(){var e=window,t=e.onDOMReady,n=e.page,i=e.geByClass1,o=e.setStyle;t(r),n.onChange(r);function r(){var e=i("basisStory__media");if(e){var t=window.innerHeight-97;o(e,"height",t),setTimeout(function(){o(e,"max-height",800)})}}},"./static/js/mobile/modules/components/common/ActionMenu.js":function(){var e=window,t=e.cancelEvent,n=e.gpeByClass,i=e.geByClass1,o=e.getY,r=e.getX,a=e.getW,s=e.addClass,l=e.hasClass,c=e.append,u=e.tooltip,d=e.addEvent,A=e.removeClass,m=e.removeEvent,f=e.before,p=e.remove,_=e.clone,h=e.setStyle,v=e.each,g=e.getStyle,w=function(){var e="ai_menu_opened",w=void 0,y=void 0,b=!1;function S(e){w=n("ai_menu_wrap",e),y=i("ai_menu",w)}function C(e){return e.getBoundingClientRect().top}function k(e){return e.getBoundingClientRect().left}function E(e){for(var t=!1;e;){var n=g(e,"overflow-y");if(("scroll"===n||"auto"===n)&&e.offsetHeight<e.scrollHeight){t=!0;break}e=e.parentElement}return{cursor:e,isOverflowYContainer:t}}function M(e){for(var t=!1;e;){var n=g(e,"overflow-x"),i=l(e,"Slider__scroll");if("scroll"===n||"auto"===n||i){t=!0;break}e=e.parentElement}return{cursor:e,isOverflowXContainer:t}}function T(){if(w&&y){var e=i("i_pointer",w);E(e).isOverflowYContainer?h(y,"top",C(e)):h(y,"top",o(e)),M(e).isOverflowXContainer?h(y,"left",k(e)-a(y)):h(y,"left",r(e)-a(y))}}function j(){if(y){var e=geByClass("wia_item",y);e&&v(e,function(e,t){var n=_(t);f(n,t),p(t),s("unhover",n),setTimeout(function(){A("unhover",n)},100)})}}function D(e){e&&"A"===e.target.tagName&&requestAnimationFrame(function(){T()})}function x(t){S(t),s(e,w),c(y,document.body),b=I,u.addHandler(b),u.show(w,y),d(window,"resize",T),d(y,"click",D);var n=i("i_pointer",w),o=E(n);o.isOverflowYContainer&&d(o.cursor,"scroll",T);var r=M(n);r.isOverflowXContainer&&d(r.cursor,"scroll",T),T()}function I(){A(e,w),c(y,w),u.removeHandler(b),u.hide(),m(window,"resize",T),m(y,"click",T);var t=i("i_pointer",w),n=E(t);n.isOverflowYContainer&&m(n.cursor,"scroll",T);var o=M(t);o.isOverflowXContainer&&m(o.cursor,"scroll",T)}return{toggleMenu:function(n,i){t(n),l(e,w)?I():x(i)},update:function(){j(),T()}}}();window.ActionMenu=w},"./static/js/mobile/modules/components/common/AdultConfirm.js":function(){var e=window,t=e.cancelEvent,n=e.gpeByClass,i=e.geByClass1,o=e.toggleClass,r=e.hasClass,a=e.ajax,s=e.attr,l=need("Control"),c=need("Popup"),u=function(){var e="adultConfirm__submit_disabled";return{init:function(){var t=i("_adultConfirm"),n=i("_adultConfirm__submit",t),r=i("adultConfirm__checkbox",t);o(e,n,!l.isChecked(r))},toggle:function(t){var r=n("_adultConfirm",t.$control),a=i("_adultConfirm__submit",r);o(e,a,!t.checked)},submit:function(o,l){if(t(o),!r(e,l)){var u=n("_adultConfirm",l),d=i("_adultConfirm__form",u),A={_ajax:1};each(geByTag("input",d),function(e,t){var n=t.type.toLowerCase(),i=t.name.toLowerCase();("hidden"===n||"checkbox"===n||"radio"===n)&&(A[i]=t.value)});var m=s(d,"action");a.post(m,A),c.close()}},back:function(e){t(e),window.history?window.history.back():window.location="/"}}}();window.AdultConfirm=u},"./static/js/mobile/modules/components/common/ChromeTabColor.js":function(){var e=window,t=e.$,n=window,i=n.page,o=window,r=o.photoview;!function(){i.onChange(c),r.onHide(c),r.onShow(u)}();var a="#5181b8",s="#000",l=t('meta[name="theme-color"]');function c(){d(a)}function u(){d(s)}function d(e){l.setAttribute("content",e)}},"./static/js/mobile/modules/components/common/Countdown.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t,i){n(this,e);var o=Object.assign({},{tick:100,onEnd:function(){},onTick:function(){},onStart:function(){},onPause:function(){},onStop:function(){}},i);this.left=t,this.initialTime=t,this.tick=o.tick,this.onEnd=o.onEnd,this.onTick=o.onTick,this.onStart=o.onStart,this.onPause=o.onPause,this.onStop=o.onStop,this.started=!1}return e.prototype.stop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.started&&(this.pause(e),this.left=this.initialTime,e||this.onStop())},e.prototype.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.timer&&(this.timer=clearInterval(this.timer),this.started=!1,e||this.onPause())},e.prototype.start=function(){var e=this;if(this.started)return!1;var t=new Date(Date.now()+this.left).getTime();this.started=!0,this.timer=setInterval(function(){var n=(new Date).getTime();e.left=t-n,e.left<=0?(e.onTick(0),e.onEnd(),e.stop(!0)):e.onTick(e.left)},this.tick),this.onStart()},e.prototype.isStarted=function(){return this.started},e.prototype.getTimeLeft=function(){return this.left},e}();t["default"]=i},"./static/js/mobile/modules/components/common/Dropdown.js":function(){var e=window,t=e.preventEvent,n=e.stopEvent,i=e.gpeByClass,o=e.toggleClass,r=e.removeClass,a=e.addEvent,s=e.removeEvent,l="dropdown",c="dropdown_open",u={_onTogglerClick:function(e,u){t(e),n(e);var d=i(l,u);if(o(d,c),d.isFirstClick!==!1){d.isFirstClick=!1;var A=function(){r(d,c)};a(window,"click",A),window.cur.destroy.push(function(){s(window,"click",A),d.isFirstClick=!0})}}};window.Dropdown=u},"./static/js/mobile/modules/components/common/GiftsSendFormCounter.js":function(){var e=window,t=e.langNumeric,n=e.show,i=e.hide,o=function(){var e=document.getElementsByClassName("gift_create_post_counter");function o(o){var r=e[0];if(r){var a=o.value.length,s=o.maxLength;if(a>s)o.value=o.value.substr(0,s);else if(a>s/2){var l=Math.max(s-a,0);r.innerText=t(l,lang.text_N_symbols_remain),n(r)}else i(r)}}return{counter:o}}();window.GiftsSendFormCounter=o},"./static/js/mobile/modules/components/common/GroupCover.js":function(){var e=window,t=e.page,n=e.browser,i=e.nav,o=e.menu,r=e.zlayer,a=window,s=a.onDOMReady,l=a.onBodyScroll,c=a.onBodyResize,u=window,d=u.geByClass1,A=u.addClass,m=u.removeClass,f=(u.getW,u.getH),p="groupCover-vk_animationYes",_="groupCover-vk_animationStep",h=function(){return{vk:d("vk"),basis:d("basis"),header:d("basis__header"),headerTitle:d("mh_header",d("basis__header")),cover:d("groupCover"),coverImage:d("groupCover__image"),coverDimmer:d("groupCover__dimmer")}},v=!1,g=void 0,w=void 0,y=void 0,b=void 0,S=void 0;s(function(){j()&&(C(),t.onChange(C),r.onClose(function(){setTimeout(C,0)}))});function C(){v||(g=h(),g.cover&&(v=!0,A(g.vk,p),w=!n.chrome||Number(n.version.split(".")[0])>50,y="fixed"===getStyle(g.header,"position"),b=f(g.header),S=f(g.cover),l(M),c(T),M(),window.cur.destroy.push(E),i.onBeforeGo(k)))}function k(e){(e||o.opened())&&(m(g.vk,_),m(g.vk,p)),l("__clear",M),c("__clear",T),i.onBeforeGo.off(k),v=!1}function E(){k(!0)}function M(){var e=scrollTop();if(y)if(0>e)setStyle(g.header,"top",-e),A(g.vk,_),setStyle(g.coverDimmer,"opacity",0),setStyle(g.coverImage,"top",0);else{var t=Math.min(1,e/(S-b));setStyle(g.header,"top",0),setStyle(g.headerTitle,"display","block"),.9>=t?(A(g.vk,_),w&&setStyle(g.coverImage,"top",.5*e),setStyle(g.coverDimmer,"opacity",t/.9),setStyle(g.headerTitle,"opacity",0)):(setStyle(g.headerTitle,"opacity",1),m(g.vk,_))}else{var n=Math.min(1,e/S);1>n?(A(g.vk,_),setStyle(g.coverDimmer,"opacity",0),w&&setStyle(g.coverImage,"top",.5*e),setStyle(g.headerTitle,"display","none")):m(g.vk,_)}}function T(){E(),C()}function j(){return n.chrome||n.safari&&n.ios>=9}},"./static/js/mobile/modules/components/common/Mention.js":function(){var e=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=window,n=t.preventEvent,i=t.val,o=t.ce,r=t.replaceEntities,a=t.elfocus,s=t.parseLat,l=t.parseCyr,c=t.show,u=t.hide,d=t.extend,A=(t.isEmpty,t.nav),m=t.addEvent,f=t.trim,p=(t.cancelEvent,t.geByClass),_=t.getXY,h=t.domPS,v=t.domNS,g=t.browser,w=function(){var t={UP:38,DOWN:40,RETURN:13,ESC:27},w="MentionContainer_opened",y="Mention_inited",b="Mention_noScroll",S="MentionItem_active",C={},k={},E=!1;M();function M(){C={ignoredTerm:null,curValue:"",curTerm:"",curPos:"",input:{}},k={container:null,scroll:null,index:{},cache:{},shown:[],lastQ:null,text:null,requestTimer:null,opts:{}}}var T=!0;function j(){T=!1}function D(){if(!E){var e=g.ipad?"touchend":"click";E=!0,m(window,e,L),m(window,"touchmove",j),A.onBeforeGo(L)}}function x(){if(E){var e=g.ipad?"touchend":"click";removeEvent(window,e,L),removeEvent(window,"touchmove",j),A.onBeforeGo.off(L),E=!1}}function I(e){if(void 0!==e.selectionStart)return e.selectionStart!==e.selectionEnd?e.selectionEnd:e.selectionStart;if("undefined"!=typeof window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var n=t.getRangeAt(0),r=n.cloneRange(),a=o("div");return r.selectNodeContents(e),r.setEnd(n.startContainer,n.startOffset),a.appendChild(r.cloneContents()),i(a).replace(/\n$/,"").length}return 0}function P(){var e=i(C.input),t=Math.max(e.lastIndexOf("@"),e.lastIndexOf("*")),n=!1;if(t>-1){var o=I(C.input),r=e.substr(0,o);t=Math.max(r.lastIndexOf("@"),r.lastIndexOf("*"));var a=r.match(/(^|[\s.,:\'\"\u00BB\u00AB;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);a&&"."!==a[2].substr(-1)&&(n=a[2])}n===!1&&delete C.ignoredTerm,void 0!==C.ignoredTerm&&n==C.ignoredTerm&&(n=!1),C.curValue=e,C.curTerm=n,C.curPos=t,k.text=n,X()}function B(e){C.input=e}function F(){document.addEventListener("click",O,!0),addClass(w,k.opts.appendTo),c(k.container),D()}function L(e){return g.ipad&&!T?void(T=!0):void(e&&e.target&&gpeByClass(y,e.target)&&!gpeByClass("uMailWrite__button",e.target)&&!hasClass("uMailWrite__button",e.target)||hasClass(w,k.opts.appendTo)&&(removeClass(w,k.opts.appendTo),u(k.container),x()))}function O(e){var t=e.target;t&&!gpeByClass(y,t)&&(e.preventDefault(),e.stopImmediatePropagation(),L()),document.removeEventListener("click",O,!0)}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M(),k.opts=d({appendTo:document.body,url:"hints",params:{act:"a_json_friends",from:"composer"},delimeter:/[\s\(\)\.,\-]+/g,requestWait:300,wholeIndex:2,maxItems:51,searchKeys:[1,4],defaultItems:[],items:[],afterInsert:function(){}},e),addClass("Mention_inited",k.opts.appendTo),k.scroll&&removeClass(b,k.scroll),H()}function H(){var e=k.opts.defaultItems,t=k.opts.items,n=[],i=void 0,o=void 0;for(i=0,o=e.length;o>i;++i)n.push(i);for(k.cache[""]=n,i=0,o=t.length;o>i;++i)R(i,t[i])}function R(e,t){var n=void 0,i=void 0,o=void 0,r="",a=k.opts.searchKeys,c={};for(n=0,o=a.length;o>n;++n)r+=" "+(t[a[n]]||"").replace(k.opts.delimeter," ").replace(/<[^>]*>/g,"");for(r+=(s(r)||"")+(l(r)||""),r=f(r.toLowerCase()).split(/\s+/),n=0;n<r.length;n++)for(i=1;i<=k.opts.wholeIndex;i++){var u=r[n].substr(0,i);c[u]||(k.index[u]||(k.index[u]=[]),k.index[u].push(e),c[u]=1)}}function V(){var e=f(k.text);e&&ajax.post(k.opts.url,d({str:e,mobile:1},k.opts.params||{}),{onDone:function(t){k.cache[e]=q(e).concat(t),z(k.cache[e],!0,!0)}})}function q(e){if(e=f(e.toLowerCase().replace(k.opts.delimeter," ")),!e)return k.cache[""];var t=k.opts.wholeIndex;if(e.length<=t&&-1===e.indexOf(" "))return k.index[e]||[];e=e.split(" ");var n=0,i="",o=void 0,r=void 0;for(o=0,r=e.length;r>o;++o){var a=e[o].substr(0,t),c=k.index[a];if((!i||!c||c.length<n)&&(n=c?c.length:0,i=a),!n)return[]}var u=[],d=k.opts.searchKeys,A=d.length,m=e.length;for(o=0,r=k.index[i].length;r>o;++o){for(var p=k.index[i][o],_=k.opts.items[p],h=!1,v="",g=0;A>g;++g)v+=" "+(_[d[g]]||"").replace(k.opts.delimeter," ").replace(/<[^>]*>/g,"");v+=(s(v)||"")+(l(v)||""),v=v.toLowerCase();for(var w=0;m>w;++w)if(-1===v.indexOf(" "+e[w])){h=!0;break}h||u.push(p)}return u}function U(e,t){if(k.cache[""]){if(t=void 0!==t?t:f(k.text),k.lastQ===t&&!e)return void F();k.lastQ=t,clearTimeout(k.requestTimer);var n=k.cache[t];n?z(n,!0):(n=q(t),z(n,!k.opts.url),k.opts.url&&(k.requestTimer=setTimeout(V,k.opts.requestWait)))}}function z(e){var t=[];k.shown=[];for(var r=e.slice(0,k.opts.maxItems),a=0,s=r.length;s>a;++a){var l=r[a];isArray(l)||(l=k.opts.items[l]),k.shown[l[0]]||(k.shown[l[0]]=l,t.push(G(l)))}k.container&&k.opts.appendTo.contains(k.container)||(k.container=o("div"),addClass("Mention",k.container),k.scroll=o("div"),addClass("ScrollView Mention__scroll",k.scroll),k.opts.appendTo.appendChild(k.container),k.container.appendChild(k.scroll),m(k.scroll,"touchmove",function(e){hasClass(b,k.scroll)&&n(e)})),toggleClass("Mention_empty",k.container,!t.length),i(k.scroll,t.join("")),k.scroll.scrollTop=0,J(),setTimeout(function(){toggleClass(b,k.scroll,!$())},0)}function $(){return g.ios||g.ipad?k.scroll.scrollHeight>k.scroll.offsetHeight?!0:!1:!0}function W(){var e=ge("mhead").offsetHeight,t=k.container.getBoundingClientRect(),n=C.input.offsetHeight,i="Mention_openToBottom",o=parseInt(getStyle(k.scroll,"maxHeight"),10),r=!1;r=hasClass(i,k.container)?t.top-n-o<e:t.bottom-o<e;var a=_(C.input);a[1]>=e+o&&(r=!1),toggleClass(i,k.container,r),toggleClass(i,k.opts.appendTo,r)}function Y(){U(!1,C.curTerm),F(),W()}function X(){C.curTerm===!1?L():Y()}function G(t){var n=e(t,4),i=n[0],o=n[1],r=n[2],a=n[3];return'<div class="MentionItem" onclick="Mention.onSelect(\''+i+'\');" onmouseover="Mention.onItemHover(this);">\n              <div class="MentionItem__cell">\n                <img src="'+a+'" class="MentionItem__img"/>\n              </div>\n              <div class="MentionItem__cell MentionItem__cell_name">\n                <div class="MentionItem__name">'+o+'</div>\n                <div class="MentionItem__tag">'+r+"</div>\n              </div>\n            </div>"}function Q(e){var t=k.shown[e];t&&it(t),L()}function K(){var e=geByClass1(S,k.container),t=e.offsetTop;k.scroll.scrollTop=t-e.offsetHeight-parseInt(getStyle(k.scroll,"paddingTop"),10)}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=p("MentionItem",k.container);if(t.length){var n=t.find(function(e){return hasClass(S,e)});e?(removeClass(S,n),addClass(S,e)):n||addClass(S,t[0])}}function Z(){var e=geByClass1(S,k.container);return e?(e.click(),!0):!1}function et(){var e=geByClass1(S,k.container);if(e){var t=h(e);t&&(J(t),K())}else J(),K()}function tt(){var e=geByClass1(S,k.container);if(e){var t=v(e);t&&(J(t),K())}else J(),K()}function nt(e){J(e)}function it(e){if(!e)return!1;var t=e[2].replace("@",""),n=e[8]||e[1],o=C.curValue.substr(0,C.curPos),s=C.curValue.substr(C.curPos),l=o.match(/\#[\w_\.\u0400-\u04FF]+$/i)?!0:!1;n=r(n);var c=new RegExp("^(@|\\*)"+escapeRE(C.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return s=s.replace(c,function(e,i){var o=i+t+" ";return l||(o+="("+n.replace(/[\(\)\]\[]/g,"")+") "),o}),l||!o||o.match(/[\.\(\)\?\!\s\n\r\'\"\u00BB\u00AB \u00A0]$/)||(s=" "+s),L(),i(C.input,o+s),a(C.input),k.opts.afterInsert&&k.opts.afterInsert(C.input),!1}function ot(e,n){e.keyCode!==t.UP&&e.keyCode!==t.DOWN&&(U(!0),B(n),P())}function rt(e,t){setTimeout(function(){B(t),P()},0)}function at(e){hasClass(w,k.opts.appendTo)&&(e.keyCode===t.UP?(et(),e.preventDefault()):e.keyCode===t.DOWN?(tt(),e.preventDefault()):e.keyCode===t.RETURN?Z()&&e.preventDefault():e.keyCode===t.ESC&&(L(),e.preventDefault()))}return{onKeyUp:ot,onKeyDown:at,onFocus:rt,onClick:rt,onSelect:Q,onItemHover:nt,init:N}}();window.Mention=w},"./static/js/mobile/modules/components/common/ReCaptcha.js":function(){var e=window,t=e.geByClass1,n={show:function(e,t){window.grecaptcha?grecaptcha.reset():(window.recaptchaCallback=function(){n.onCallback(e)},document.body.appendChild(ce("script",{type:"text/javascript",src:"https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+t})))},onResponse:function(e){ge("field_recaptcha").value=e,ge("recaptcha_form").submit()},onCallback:function(e){if(grecaptcha&&e){var i=t("recaptcha_box"),o=t("recaptcha",i);o&&(val(o,""),grecaptcha.render(o,{sitekey:e,callback:n.onResponse}))}}};window.ReCaptcha=n},"./static/js/mobile/modules/components/common/ReplyOwnerPicker.js":function(){var e=window,t=e.geBySel1,n=e.geByClass1,i=e.gpeByClass,o=e.each,r=e.removeClass,a=e.addClass,s=e.hasClass,l=e.attr,c=e.addEvent,u=e.removeEvent,d=e.ajax,A=(e.replace,e.domClosestOverflowHidden),m={OPEN_CLASS:"reply_owner_show",OPEN_BOTTOM_CLASS:"reply_owner_open_bottom",NO_LIMIT_CLASS:"reply_owner_picker_nolimit",CONTAINER_CLASS:"reply_owner_picker_container",PICKER_CLASS:"reply_owner_picker",PICKER_ITEM_CLASS:"reply_owner_option",LOADING_CLASS:"reply_owner_loading",IMAGE_CLASS:"_reply_owner_image",SELECTED_IMAGE_CLASS:"_reply_owner_selected_image",SELECTED_IMAGE_CONTAINER_CLASS:"reply_owner_selected_image",OPTION_CLASS:"reply_owner_option",PICKER_MAX_HEIGHT:null,LOADING_SHOW_TIME:300,container:null,picker:null,clickEvent:"ontouchend"in document.documentElement?"touchend":"click",clickHandler:null,requestHandler:null,request:null,loading:!1,setElements:function(e){this.container=i(this.CONTAINER_CLASS,e),this.picker=n(this.PICKER_CLASS,this.container),this.clickHandler=this.clickHandler||bind(this.onDocumentClick,this),this.requestHandler=this.requestHandler||bind(this.onDocumentClickBeforeLoad,this)},unsetElements:function(){u(document.body,this.clickEvent,this.clickHandler),u(document.body,this.clickEvent,this.requestHandler),this.container=this.picker=null},show:function(e){this.setElements(e),a(this.OPEN_CLASS,this.container),this.calcPosition()},hide:function(){r(this.OPEN_CLASS,this.container),r(this.OPEN_BOTTOM_CLASS,this.container),this.unsetElements()},toggle:function(){toggleClass(this.OPEN_CLASS,this.container),this.calcPosition(),s(this.OPEN_CLASS,this.container)?(this.scrollToSelected(),c(document.body,this.clickEvent,this.clickHandler)):(this.hide(),this.unsetElements())},calcPosition:function(){var e=ge("mhead").offsetHeight,t=this.picker.getBoundingClientRect(),n=(window.pageYOffset||document.documentElement.scrollTop,A(this.picker)),i=!0;n&&n.getBoundingClientRect().bottom<this.container.getBoundingClientRect().bottom+this.PICKER_MAX_HEIGHT?i=!1:s(this.LOADING_CLASS,this.container)?i=t.top-e-this.PICKER_MAX_HEIGHT+t.height<0:s(this.OPEN_BOTTOM_CLASS,this.container)||(i=t.top-e<0),toggleClass(this.OPEN_BOTTOM_CLASS,this.container,i)},onDocumentClick:function(e){var t=e.target;t===this.container||i(this.CONTAINER_CLASS,t)||this.hide()},onDocumentClickBeforeLoad:function(e){var t=e.target;t===this.container||i(this.CONTAINER_CLASS,t)||this.cancelRequest()},cancelRequest:function(){this.request&&(this.request.abort(),this.unsetElements())},getList:function(){var e=this;if(!this.loading){this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10);var n=t('input[name="from_oid"]',this.container).value,i=t('input[name="post_oid"]',this.container).value;this.loading=!0;var o=setTimeout(function(){a(e.LOADING_CLASS,e.container),e.calcPosition()},this.LOADING_SHOW_TIME);c(document.body,this.clickEvent,this.requestHandler),this.request=d.post("/wall.php",{act:"get_reply_clubs_list",oid:n,post_oid:i},{onDone:function(t){clearTimeout(o),e.picker.innerHTML=t,e.onLoadEnd(),e.toggle(e.picker)},onFail:function(){e.onLoadEnd()}})}},onLoadEnd:function(){this.loading=!1,r(this.LOADING_CLASS,this.container),u(document.body,this.clickEvent,this.requestHandler)},onChange:function(e){var t=i(this.OPTION_CLASS,e),r=n(this.IMAGE_CLASS,t).src;o(geByClass(this.SELECTED_IMAGE_CLASS),function(){this.src=r}),l(n("al"+this.SELECTED_IMAGE_CLASS),"href",l(t,"data-href")),this.hide()},onClick:function(e){this.setElements(e);var t=geByClass(this.PICKER_ITEM_CLASS,this.picker).length;t?this.toggle():this.getList()},scrollToSelected:function(){var e=i(this.OPTION_CLASS,t(":checked",this.picker));this.PICKER_MAX_HEIGHT||(this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10)),e&&(this.picker.scrollTop=e.offsetTop-this.PICKER_MAX_HEIGHT/2+e.offsetHeight/2)}};window.replyOwnerPicker=m},"./static/js/mobile/modules/components/common/SubscribeBtn.js":function(){var e=window,t=e.Friends,n=e.Groups,i=e.hasClass,o=e.geByClass1,r=e.getLang;window.SubscribeBtn={onClick:f};var a="_unsubscribe",s="Icon_unsubscribe",l="Icon_subscribe",c="Icon",u="mobile_groups_you_are_in_public",d="mobile_groups_public_subscribe",A="group",m=".feedAssistance";function f(e,t,n,m,f,v){try{var g=v+a,w=v+c,y=v+s,b=v+l,S=i(e,g),C=S?m:n,k=r(S?d:u),E=!S,M=o(w,e),T=h(e),j=domData(e,"from")||null;M&&(toggleClass(y,M,E),toggleClass(b,M,!E)),attr(e,"aria-label",escapeAttr(k)),toggleClass(g,e,E),f===A?p(t,C,S):_(t,C,S,j,T)}catch(D){console.trace(D)}return!1}function p(e,t,i,o){var r=i?n.leave:n.enter;r.call(n,e,t,o)}function _(e,n,i,o,r){var a=i?t.decline:t.accept;a.call(t,e,n,o,r)}function h(e){var t=intval(domData(e,"block-id"));if(!t){var n=domCA(e,m);t=intval(domData(n,"block-id"))||null}return t}},"./static/js/mobile/modules/components/common/TopMenu.js":function(e,t,n){{var i=n("./static/js/mobile/modules/lib/befall.js");o(i)}function o(e){return e&&e.__esModule?e:{"default":e}}var r="tabs_block",a="mhb_back",s="TopMenu_open",l="tab_item_top",c="TopMenu__switcher",u="TopMenu__switcher_on",d=function(){return geByClass1(r)},A=function(){return geByClass1(a)},m=function(){return geByClass1(c)},f=function(){return geByClass1(l)},p=!0,_=0;window.TopMenu={onHeaderClick:h};function h(e){if(p){var t=d();if(stopEvent(e),preventEvent(e),hasClass(s,t))removeClass(s,t);else{var n=A(),i=f();addClass(s,t),geByClass1("_hfixed")&&setStyle(t,"max-height",window.innerHeight-70),append(t,n),addEvent(window,"touchstart mousedown",g),addEvent(i,"touchstart mousedown",v),addEvent(i,"click",function(e){stopEvent(e),preventEvent(e)}),cur.destroy.push(w),cur.destroy.push(function(){return removeEvent(i,"touchstart mousedown",v)})}}}function v(e){stopEvent(e),preventEvent(e),_=300,p&&(toggleClass(u,m()),"touchstart"===e.type&&setTimeout(function(){nav.go(f(),null)},130))}function g(e){gpeByClass(r,e.target)||gpeByClass(a,e.target)||(stopEvent(e),preventEvent(e),removeClass(s,d()),w())}function w(){removeEvent(window,"touchstart mousedown",g)}!function(){nav.onBeforeGo(function(){p=!1,setTimeout(function(){removeClass(s,d()),_=0,p=!0},_)})}()},"./static/js/mobile/modules/components/feed/FeedBlocks.js":function(){window.FeedBlocks={hideReason:function e(t,n){if(e.progress)return!1;e.progress=!0;var i="block_"+t,o=ge(i);cur.feedBlocksHTML&&delete cur.feedBlocksHTML[i],ajax.post("feed.php",{act:"block_hide_reason",block_id:t,reason:0|n,hash:attr(o,"data-hash"),pos:attr(o,"data-pos"),ref:attr(o,"data-ref")},{onDone:function(t){e.progress=!1,t?val(o,t):hide(o),e.progress=!1},onFail:function(){e.progress=!1}})},restore:function(e){var t="block_"+e,n=ge(t);cur.feedBlocksHTML&&cur.feedBlocksHTML[t]&&val(t,cur.feedBlocksHTML[t]),ajax.post("feed.php",{act:"block_restore",block_id:e,hash:attr(n,"data-hash"),pos:attr(n,"data-pos"),ref:attr(n,"data-ref")})},hide:function t(e){if(t.progress)return!1;t.progress=!0,post.wallActionsHide();var n="block_"+e,i=ge(n);return ajax.post("feed.php",{act:"block_hide",block_id:e,hash:attr(i,"data-hash"),pos:attr(i,"data-pos"),ref:attr(i,"data-ref")},{onDone:function(e){post.wallActionsHide(),cur.feedBlocksHTML||(cur.feedBlocksHTML={}),cur.feedBlocksHTML[n]=val(i),val(i,e),t.progress=!1},onFail:function(){t.progress=!1}}),!1}}},"./static/js/mobile/modules/components/join/Join.js":function(){var e=need("$"),t=need("$$"),n=need("Btn"),i=need("Input"),o=need("Control"),r=window.Join||(window.Join={});!function(){r._onCountryChange=l,r._onPhoneChange=c,r._onTermsAcceptChange=c}();var a={eu:"Join_eu"},s={join:".Join",phone:".Join__phone",accept:".Join__accept",submit:".Join__submit"};function l(n){var r=n.$option,l=e(s.join),u="1"===r.getAttribute("data-eu");l.classList.toggle(a.eu,u);var d=e(s.phone),A=r.value;i.setPrefix(d,A),t(s.accept).forEach(function(e){return o.setChecked(e,!1)}),c()}function c(){var r=Array.prototype.slice.call(t(s.accept)),a=e(s.phone),l=e(s.submit);if(!l)return l=e('.button[type="submit"]'),void(l.disabled=!o.isChecked(r[0]));var c=r.some(o.isChecked)&&i.getValue(a).trim().length>0;n.toggleDisabled(l,!c)}},"./static/js/mobile/modules/components/landings/index.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/landings/slider.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}window.landingsSlider=o["default"]},"./static/js/mobile/modules/components/landings/slider.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=window,o=i.isObject,r=i.extend,a=i.ge,s=i.geByClass1,l=i.val,c=i.addClass,u=i.addEvent,d=i.removeEvent,A=i.setStyle,m=i.cancelEvent,f=i.vkNow,p=i.getW,_=function(){function e(t,i){n(this,e),o(i)||(i={items:i}),this.opts=r({slideClassName:"",onStartChange:!1,onChange:!1,pointsWrap:!1,slideContFn:!1,shownSlidesNum:1},i),this.wrap=a(t),this.parseItems(i.items),this.init()}return e.prototype.parseItems=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i&&(i={className:i}),i=r({html:"",className:"",pos:t.length},i),t.push(i)}this.items=t},e.prototype.init=function(){if(c("landings_slider_wrap",this.wrap),u(this.wrap,"touchstart mousedown",this.touchStart.bind(this)),this.opts.pointsWrap){var e="";for(var t in this.items)e+='<div class="landings_slider_point"></div>';c("landings_slider_points",this.opts.pointsWrap),l(this.opts.pointsWrap,e)}this.changeSlide(0)},e.prototype.getTouchX=function(e){return e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].pageX:e.pageX},e.prototype.getTouchY=function(e){return e.targetTouches&&e.targetTouches.length>0?e.touches[0].pageY:e.pageY},e.prototype.touchStart=function(e){var t=this.getTouchX(e),n=this.getTouchY(e),i=this,o=!1,r=!1,a=f(),s=0,l=this.getTouchX(e),c=p(this.wrap);function _(e){if(!r){if(!o&&Math.abs(i.getTouchY(e)-n)>20)return void(r=!0);i.lock&&(o=!0,t=i.getTouchX(e),a=f(),i.changeSlide(i.newPos),m(e),i.lock=0,clearTimeout(i.changeTimeout));var u=i.getTouchX(e),d=t-u;(Math.abs(d)>20||o)&&(m(e),o||(t=i.getTouchX(e),d=0,o=!0),s=d,l=u,d=-(100+d/c*100),d-=100*i.opts.shownSlidesNum-100,A(i.helper,"transform","translateX("+d+"%)"))}}function h(){if(d(bodyNode,"mousemove touchmove",_),d(bodyNode,"mouseup touchend touchcancel",h),!i.lock)if(i.lock=1,Math.abs(s)>50){var e=0>s?"prev":"next",n=Math.abs(l-t)/(a/f());n+=.2*n;var o=100*i.opts.shownSlidesNum;o="next"==e?100+o:o-100,A(i.helper,{transition:"transform "+n+"ms",transform:"translateX(-"+o+"%)"});var r=i.items.length-1,c="prev"==e?i.pos-1:i.pos+1;0>c?c=r:c>r&&(c=0),i.opts.onStartChange&&i.opts.onStartChange(c,e),i.newPos=c,i.changeTimeout=setTimeout(function(){i.lock=0,i.changeSlide(c)},n)}else A(i.helper,{transition:"transform 200ms",transform:"translateX(-"+100*i.opts.shownSlidesNum+"%)"}),setTimeout(function(){i.lock=0},200)}d(bodyNode,"mousemove touchmove",_),d(bodyNode,"mouseup touchend touchcancel",h),u(bodyNode,"mousemove touchmove",_),u(bodyNode,"mouseup touchend touchcancel",h)},e.prototype.makeItem=function(e){var t=this.pos==e.pos?"_active_slide ":"",n=this.opts.slideContFn?this.opts.slideContFn(e):e.html;return'<div class="landings_slider_item '+t+e.className+" "+this.opts.slideClassName+'">'+n+"</div>"},e.prototype.getSlidesHtml=function(e){for(var t=this.opts.shownSlidesNum,n=this.items.length-1,i="",o=e,r=0;t>r;r++)o--,0>o&&(o=n),i=this.makeItem(this.items[o])+i;i+=this.makeItem(this.items[e]),o=e;for(var a=0;t>a;a++)o++,o>n&&(o=0),i+=this.makeItem(this.items[o]);return i},e.prototype.changeSlide=function(e){if(this.pos=Math.max(0,Math.min(e,this.items.length-1)),this.replaceHtml(this.getSlidesHtml(this.pos)),this.opts.onChange&&this.opts.onChange(this.pos),this.opts.pointsWrap){var t=a(this.opts.pointsWrap);removeClass("selected",s("selected",t)),c("selected",t.children[this.pos])}},e.prototype.replaceHtml=function(e){l(this.wrap,'<div class="landings_slider_helper">'+e+"</div>"),this.helper=s("landings_slider_helper",this.wrap),A(this.helper,"transform","translateX(-"+100*this.opts.shownSlidesNum+"%)")},e.prototype.toSlide=function(e,t){this.lock=1;var n=this.makeItem(this.items[this.pos]),i=this.makeItem(this.items[e]);e>this.pos?n+=i:n=i+n,this.replaceHtml(n),t||(t=e>this.pos?"next":"prev");var o="next"==t?0:-100;A(this.helper,"transform","translateX("+o+"%)"),this.opts.onStartChange&&this.opts.onStartChange(e,t);var r=this;clearTimeout(this.toSlideTimer),this.toSlideTimer=setTimeout(function(){o="next"==t?-100:0,A(r.helper,{transition:"transform 200ms",transform:"translateX("+o+"%)"}),r.toSlideTimer=setTimeout(function(){r.lock=0,r.changeSlide(e)},200)},10)},e}();t["default"]=_},"./static/js/mobile/modules/components/mail/ChatPreview.js":function(){function e(e,t,n){if(browser.wkwebview){attr(t,"onclick",""),attr(t,"href","vk://vk.com/write"+(2e9+e));var i=new Event("click");return t.dispatchEvent(i),void setTimeout(function(){attr(t,"href","/mail?act=show&chat="+e),t.textContent=n})}browser.android?location.href="https://vk.com/write"+(2e9+e):browser.ios?(attr(t,"onclick",""),attr(t,"href","/mail?act=show&chat="+e),t.textContent=n,location.href="vk://vk.com/write"+(2e9+e)):location.href="/mail?act=show&chat="+e}window.ChatPreview={join:function(t,n,i){return ajax.post(t,{},{onDone:function(t){e(t,n,i)}}),!1},open:function(t,n,i){return setTimeout(function(){e(t,n,i)}),!1}}},"./static/js/mobile/modules/components/mail/MessagesActions.js":function(){var e=need("Voting"),t=window,n=t.attr,i=t.removeClass,o=t.addClass,r=t.hasClass,a=t.toggleClass,s=t.ge,l=t.val,c=t.geByClass1,u=t.langNumeric,d=t.each,A=t.lockButton,m=window,f=m.browser,p=window,_=p.ajax,h=window,v=h.nav,g=window,w=g.page,y=window,b=y.mail,S=window,C=S.im,k=function(){var t,m,p=[],h=!1,g=!1,y={};function S(e){return function(){return h?void 0:e.apply(this,arguments)}}function k(e){return"A"===e.tagName}function M(e){var t=n(e,"data-id"),a=p.indexOf(t);a>=0?(p.splice(a,1),i("mi_selected",e),delete y[t]):(p.push(t),o("mi_selected",e),y[t]=r("msg_item_important",e))}function T(){g=p.length>0,a("vk_messages_actions_visible",s("vk"),g)}function j(){var e=window,t=e.lang,n=Math.max(p.length,1);l(c("messagesActions__row_counter"),u(n,t.mobile_mail_messages_selected).replace("{count}",n))}function D(){g&&(y={},d(p,function(e,t){i("mi_selected",c("_msg"+t))}),h=!1,p=[],T())}function x(){return window.getSelection?window.getSelection().toString().length>0:!1}function I(t){var n=t.target,i=t.currentTarget,o=k(n)||k(n.parentNode);return n.closest("."+e.cls)?void t.stopPropagation():(o&&D(),void(f.uc_mini||x()||o||setTimeout(function(){x()||(M(i),T(),j())},40)))}function P(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;h=!0,A(e),C.off(),_.click("/mail",{},{url_params:{act:i?"spam":"delete",peer:t,hash:n,ids:p.join(","),community:E()}})}function B(e,t,n){P(e,t,n,!0)}function F(e,t,n){h=!0,A(e),_.click("/attachments",{},{url_params:{act:"add",target:"mail"+t,hash:n,object:"mail"+p.join(";"),community:E()}})}function L(e,n){h=!0,A(e),t="mail"+p.join(";"),m=n;var i=E(),o=i?"?community="+i:"";v.go(location.pathname+o,null,{ignore_cur_process:!0})}function O(){return Boolean(t)}function N(e){_.click("/attachments",{},{url_params:{act:"add",target:"mail"+e,hash:m,object:t,community:E()}}),t=""}function H(){s("dialogs")&&O()?o("vk_dialogs_forwarding",s("vk")):t="",D()}function R(e){var t,n=p.length,i=0;for(t=0;n>t;t++)if(!y[p[t]]){i=1;break}for(t=0;n>t;t++)a("msg_item_important",c("_msg"+p[t]),1===i);_.post("/mail",{_ajax:1,act:"mark_important",ids:p,val:i,hash:e}),D()}return w.onChange(H),b.onShowDialogsPageFromCache(H),b.onShowDialogFromCache(H),b.onMessagesRepainted(function(){d(p,function(e,t){o("mi_selected",c("_msg"+t))})}),{onMessageClick:S(I),remove:S(P),reply:S(F),forward:S(L),spam:S(B),close:S(D),toggleImportant:S(R),hasFwdMessages:O,attachFwdMessages:N}}();function E(){return v.getQuery("community")}window.MessagesActions=k},"./static/js/mobile/modules/components/mail/PinnedMsg.js":function(){var e=need("$"),t=need("nav");window.PinnedMsg={onHideClick:befall(),getByMsgId:o};var n={pinnedMsg:function(e){return'.pinnedMsg[data-msg-id="'+e+'"]'}};!function(){PinnedMsg._onClick=i,PinnedMsg._onHideClick=PinnedMsg.onHideClick}();function i(e,n){t.go(n,e,{force:!0})}function o(t){return e(n.pinnedMsg(t))}},"./static/js/mobile/modules/components/mail/StickersHints.js":function(){var e=window,t=e.preventEvent,n=e.onDOMReady,i=e.lsCheck,o=e.geByClass1,r=e.qs2obj,a=e.geByTag1,s=e.gpeByTag,l=e.addEvent,c=e.onBodyResize,u=e.removeEvent,d=e.hide,A=e.each,m=e.show,f=e.vkNow,p=e.gpeByClass,_=e.attr,h=e.val,v=e.escapeRE,g=e.hasClass,w=e.lsGet,y=e.isEmpty,b=e.lsSet,S=e.geByClass,C=e.setStyle,k=window,E=k.ajax,M=window,T=(M.page,window),j=T.post,D=window,x=D.Scroller;window.StickersHints=function(){var e,k,M,T,D,I,P,B,F=864e5,L=300,O=30,N=64,H=8,R=4,V=!0,q=0,U={D83DDE0A:[0,":-)"],D83DDE03:[1,":-D"],D83DDE09:[2,";-)"],D83DDE06:[3,"xD"],D83DDE1C:[4,";-P"],D83DDE0B:[5,":-p"],D83DDE0D:[6,"8-)"],D83DDE0E:[7,"B-)"],D83DDE12:[8,":-("],D83DDE0F:[9,";-]"],D83DDE14:[10,"3("],D83DDE22:[11,":'("],D83DDE2D:[12,":_("],D83DDE29:[13,":(("],D83DDE28:[14,":o"],D83DDE10:[15,":|"],D83DDE0C:[16,"3-)"],D83DDE20:[17,">("],D83DDE21:[18,">(("],D83DDE07:[19,"O:)"],D83DDE30:[20,";o"],D83DDE33:[21,"8|"],D83DDE32:[22,"8o"],D83DDE37:[23,":X"],D83DDE1A:[24,":-*"],D83DDE08:[25,"}:)"],2764:[26,"<3"],D83DDC4D:[27,":like:"],D83DDC4E:[28,":dislike:"],"261D":[29,":up:"],"270C":[30,":v:"],D83DDC4C:[31,":ok:"]};n(function(){i()&&!o("vk_stickers_hints_support_no")&&(j.onStickersInit(function(){z()}),o("stickersHints")&&z())}),E.onRedirect(function(e){r(e.split("?")[1]).invalidate_stickers_hints&&Y()}),j.onReplyClick(function(e){var t=window,n=t.cur;B=e,setTimeout($,10),n.destroy.push(function(){B=""})});function z(){var t=window,n=t.cur;if(T=a("textarea",s("form",o("cp_sticker_btn"))),T&&!T.initialized){var i=function(){var t=T.value.length;e=t-q>1,q=t,$(),V&&(W(),V=!1)};T.initialized=!0,I=o("stickersHints"),D=o("stickersHints__content"),l(T,"focus",$),l(T,"input",i),l(document,"click",X),c(J),c(At),n.destroy.push(function(){I=null,D=null,T=null,u(T,"focus",$),u(T,"input",i),u(document,"click",X),c("__clear",J),c("__clear",At),M&&M.destroy(),q=0})}}function $(){if(T){k&&clearTimeout(k);var e=Z(T.value);et(function(t){var n=e&&t[e];n?k=setTimeout(function(){var t=n.userStickers||[],i=n.promotedStickers||[];if(t.length>0||i.length>0){var o=[];A(t,function(t,n){o.push(tt({stickerId:n,query:e,isPromoted:!1}))}),A(i,function(t,n){o.push(tt({stickerId:n,query:e,isPromoted:!0}))}),D.innerHTML=o.join(""),m(I),J(),At(),M=new x(I),M.init()}},L):(M&&M.destroy(),d(I))})}}function W(){lt()&&f()-ut()>F*(2+Math.random())&&Y(),nt(function(e){e*=1e3,lt()&&e>ut()&&Y()})}function Y(){it(function(e){P=e,dt(e),$()})}function X(e){var t=e.target;t===T||p(t,"stickersHints")||d(I)}function G(e,n,i,r){window.isNewMail&&t(e);var a=p("sticker_item",n),s=o("th_img",a);return _(a,"style",""),_(n,"style",""),_(s,"style",""),d(I),T.value="",j.sendSticker(n,i,!0,r)}function Q(e,t){setTimeout(function(){ot(h(a("input",e.parentElement))?1:0,t,Y)},0)}function K(e,t){setTimeout(function(){rt(h(a("input",e.parentElement))?1:0,t,Y)},0)}function J(){_(D,"style","")}function Z(t){return t.length>O?"":(A(U,function(e,n){var i=new RegExp("(\\s|^)("+v(n[1])+(")"==n[1][n[1].length-1]?"+":"")+")([\\s\\.,]|$)","g");t=t.replace(i,function(t,n,i,o){return(n||"")+st(e)+(o||"")})}),0===t.indexOf(B)&&(t=t.replace(B,"")),t=t.toLowerCase().replace(/^(\s+)|([\.!\?]+)$/g,"").replace("\u0451","\u0435"),e&&(t=t.replace(/\s+$/,"")),t)}function et(e){P?e(P):lt()?(P=ct(),e(P)):it(function(t){P=t,dt(t),e(t)})}function tt(e){var t=e.isPromoted,n=t?"":"onclick=\"return StickersHints.onStickerThumbClick(event, this, {{stickerId}}, '{{stickerReferrer}}');\"",i=o("sticker_thumb",o("stickers_list")),r=t?'href="/attachments?'+["act=stickers_store","target="+_(I,"data-target"),"sticker_id={{stickerId}}","from=inline","sticker_referrer={{stickerReferrer}}"].join("&")+'"':'href="'+(_(i,"href")||_(i,"data-href")).replace(/media=[\w\d]+/,"media=sticker{{stickerId}}")+'"';return('<div class="sticker_item sticker{{stickerId}} {{promotedClass}}">        <a class="sticker_thumb thumb_item" '+r+" "+n+'>          <img class="th_img" src="/images/stickers/{{stickerId}}/{{stickerSize}}.png" />        </a>      </div>').replace(/{{stickerId}}/g,e.stickerId).replace("{{promotedClass}}",t?"sticker_item_promoted":"").replace("{{stickerReferrer}}","suggestion_"+e.query).replace("{{stickerSize}}",g("x2",window.bodyNode)?256:128)}function nt(e){E.post("/attachments",{_ajax:1,act:"stickers_hints_change_date"},{onDone:e})}function it(e){E.post("/attachments",{_ajax:1,act:"stickers_hints_keywords"},{onDone:function(t){e(at(t))}})}function ot(e,t,n){var i={_ajax:1,act:"stickers_hints_enabled",value:e,hash:t};E.post("/attachments",i,{onDone:n})}function rt(e,t,n){var i={_ajax:1,act:"stickers_auto_animation_enabled",value:e,hash:t};E.post("/attachments",i,{onDone:n})}function at(e){var t={};return A(e,function(e,n){var i=n.user_stickers,o=n.promoted_stickers;A(n.words,function(e,n){t[n]={userStickers:i,promotedStickers:o}})}),t}function st(e){for(var t=Math.round(e.length/4),n="",i=0;t--;)n+=String.fromCharCode(parseInt(e.substr(i,4),16)),i+=4;return n}function lt(){return Boolean(w("stickers_keywords"))}function ct(){return w("stickers_keywords").keywords}function ut(){return w("stickers_keywords").time}function dt(e){!e||y(e)?b("stickers_keywords"):b("stickers_keywords",{keywords:e,time:f()})}function At(){var e=o("stickersHints__callout");if(e){var t=e.offsetWidth-R,n=t/N,i=n%1;.3>i?n=Math.floor(n)-.5:i>.7&&(n=Math.ceil(n)-.5);var r=Math.round(t/n-H);A(S("sticker_item",e),function(e,t){var n=o("sticker_thumb",t),i=o("th_img",t);C(t,"width",r),C(t,"height",r),C(n,"width",r),C(n,"height",r),C(i,"height",r)})}}return{actualizeVisibility:$,init:z,onStickerThumbClick:G,onCheckboxLabelClick:Q,onCheckboxAutoAnimationLabelClick:K}}()},"./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("./static/js/mobile/modules/lib/befall.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a={_onMouseDown:o["default"](),_onCancelClick:o["default"]()};window.MoneyTransferButton=a,t["default"]=a},"./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton_preventMessageHighlight.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a=window,s=a.gpeByClass,l=a.setStyle,c="msg_item",u="-webkit-tap-highlight-color";o["default"]._onMouseDown(function(e){for(var t=e;;)if(t=s(c,t),!t||t&&attr(t,"data-id"))break;t&&(d(t),setTimeout(function(){return A(t)},400))});function d(e){l(e,u,"transparent")}function A(e){l(e,u,"initial")}},"./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton_transferCancel.js":function(e,t,n){var i=n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton.js"),o=r(i);function r(e){return e&&e.__esModule?e:{"default":e}}var a=window,s=a.preventEvent,l=a.cancelEvent,c=a.lockButton,u=a.attr,d=a.ajax,A=1500,m=void 0,f=void 0,p=!1,_=null;o["default"]._onCancelClick(function(e,t){t?(p=!1,s(e),l(e),c(t)):(p=!0,t=e.$btn,e=null,_=t,Btn.setLoading(t,!0)),h({cancelUrl:u(t,"href")}),window.cur.destroy.push(v)});function h(e){var t=e.cancelUrl;m=setInterval(function(){f=d.post(t,{_ajax:1},{onDone:function(e){if(1===e){if(p){var t=arguments[1];return _.closest(".BtnStack").outerHTML='\n            <div class="notification__tempText">'+t+"</div>\n          ",void v()}var n=window.scrollTop();nav.go(location.pathname+location.search,null,{replace:!0}),cur.destroy.push(function(){window.scrollTop(n)}),v()}}})},A)}function v(){_&&Btn.setLoading(_,!1),m&&(clearInterval(m),m=null),f&&(f.abort(),f=null)}},"./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/index.js":function(e,t,n){n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton.js"),n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton_preventMessageHighlight.js"),n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/MoneyTransferButton_transferCancel.js")},"./static/js/mobile/modules/components/money_transfer/SendMoneyForm.js":function(){var e=need("$"),t=(need("attr"),need("geByClass1"),need("preventEvent")),n=need("Popup");window.SendMoneyForm={},function(){SendMoneyForm._onAmountChange=c,SendMoneyForm._onSubmit=f,SendMoneyForm._onRecommAmountChange=u,SendMoneyForm._onAutoAcceptToggle=p,SendMoneyForm._onNoAmountToggle=_,SendMoneyForm._onChooseCardClick=l,SendMoneyForm._onChooseCardCancelClick=s,SendMoneyForm._onChooseCardContinueClick=r,SendMoneyForm._onCardSelect=a}();var i={form:"sendMoneyForm",errorMin:"sendMoneyForm_error_min",errorMax:"sendMoneyForm_error_max",addCardVisible:"sendMoneyForm_addCardVisible",recommErrorMin:"sendMoneyForm_recommErrorMin",recommErrorMax:"sendMoneyForm_recommErrorMax",noAmount:"sendMoneyForm_noAmount",autoAccept:"sendMoneyForm_autoAccept"},o={form:".sendMoneyForm",cardsPopup:".sendMoneyForm__cardsPopup",amountInput:".sendMoneyForm__input_amount",recommInput:".sendMoneyForm__recommAmountInput input"};function r(){var t=e('.Control__native[name="card"]:checked').value,i=e('.Control__native[name="card"]:checked ~ .Control__label').innerText;e('input[name="accept_card"]').value=t,e('input[name="accept_card"]').setAttribute("data-value",t),e(".sendMoneyForm__chooseCard").innerText=i,n.close()}function a(t){var n="-1"===t.value,r=e(o.form);r.classList.toggle(i.addCardVisible,n)}function s(){n.close()}function l(){var t=e(o.cardsPopup);n.open(t)}function c(t){A(t),m(t,6);var n=t.closest(o.form),r="1"===n.getAttribute("data-is-chat-request"),a=Number(t.value),s=Number(n.getAttribute("data-max-amount"));if(n.classList.remove(i.errorMin),n.classList.remove(i.errorMax),r||a>s&&n.classList.add(i.errorMax),r){var l=Number(n.getAttribute("data-min-amount")),c=Number(n.getAttribute("data-chat-members-count")),u=Math.ceil(a/c),d=Math.min(s,Math.max(l,u)),f=e(o.recommInput);f.value=d,n.classList.remove(i.recommErrorMax),n.classList.remove(i.recommErrorMin)}}function u(e){A(e),m(e,6);var t=e.closest(o.form),n=Number(e.value),r=t.getAttribute("data-max-amount");t.classList.remove(i.recommErrorMax),t.classList.remove(i.recommErrorMin),n>r&&t.classList.add(i.recommErrorMax)}function d(){var t=e('input[name="no_amount"]');return t&&t.checked}function A(e){e.value=parseInt(e.value,10)||""}function m(e,t){e.value=e.value.slice(0,t)}function f(n,r){var a=r.$(o.amountInput),s=a.value,l=Number(s),c=Number(r.getAttribute("data-min-amount")),u=Number(r.getAttribute("data-max-amount")),A="1"===r.getAttribute("data-is-chat-request"),m=!1;if(r.classList.remove(i.errorMin),r.classList.remove(i.errorMax),A&&(r.classList.remove(i.recommErrorMax),r.classList.remove(i.recommErrorMin)),d()||(c>l||!s||s!==l.toString()?(r.classList.add(i.errorMin),m=!0):l>u&&!A&&(r.classList.add(i.errorMax),m=!0)),A){var f=r.$(o.recommInput),p=f.value,_=Number(p);c>_||!p||p!==_.toString()?(r.classList.add(i.recommErrorMin),m=!0):_>u&&(r.classList.add(i.recommErrorMax),m=!0)}if(m)t(n),stopEvent(n);else{t(n),stopEvent(n),r.insertAdjacentHTML("beforeend",'<input id="submit" type="submit" style="display: none" />');var h=e("#submit");ajax.click(h)}}function p(t){var n=e(o.form);n.classList.toggle(i.autoAccept,t.checked),e('input[name="accept_card"]').value=t.checked?e('input[name="accept_card"]').getAttribute("data-value"):""}function _(t){var n=e(o.form);n.classList.toggle(i.noAmount,t.checked)}},"./static/js/mobile/modules/components/notifications/Notification.js":function(){window.groupInvitationClick=function(e,t){var n=t.$btn,i=n.getAttribute("href"),o=n.nextElementSibling||n.previousElementSibling;o.remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n    <div class="notification__tempText">'+e+"</div>\n  "},window.NotifyItem={_onPhotoTagAcceptClick:function(e,t,n){{var i=n.$btn,o=i.getAttribute("href");i.nextElementSibling||i.previousElementSibling}ajax.post(o,{_ajax:1},{onDone:function(){}}),i.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'+t+"</div>\n    "},_onPhotoTagDeclineClick:function(e,t,n){{var i=n.$btn,o=i.getAttribute("href");i.nextElementSibling||i.previousElementSibling}ajax.post(o,{_ajax:1},{onDone:function(){}}),i.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'+t+"</div>\n    "},_onHideClick:function(e,t){e.preventDefault();var n=e.target,i=n.getAttribute("href"),o=!t||confirm(t);if(o){ajax.post(i,{_ajax:1});var r=n.closest(".notificationList__items");n.closest(".notification").remove();var a=r.closest(".notificationList");if(a.classList.contains("notificationList_type_unread")){var s=a.$(".pad__title"),l=parseInt(s.innerText,10),c=l-1;s.innerText=langNumeric(c,lang.mobile_notifications_new)}0===r.innerHTML.trim().length&&a.classList.add("pad_empty")}},_onBodyScroll:function(){$$(".notification_actionsOpen").forEach(function(e){e.classList.remove("notification_actionsOpen")}),window.removeEventListener("scroll",NotifyItem._onBodyScroll)},_onActionTriggerClick:function(e){window.addEventListener("scroll",NotifyItem._onBodyScroll);var t=e.closest(".notification");t.classList.remove("notification_reverse"),t.classList.toggle("notification_actionsOpen"),$$(".notification_actionsOpen").forEach(function(e){e!==t&&e.classList.remove("notification_actionsOpen")});var n=t.$(".notification__actionsBubble").getBoundingClientRect();n.y<50&&t.classList.add("notification_reverse")}},window.FriendRequest={_onAcceptClick:function(e,t){var n=t.$btn,i=n.getAttribute("href"),o=n.nextElementSibling||n.previousElementSibling;o.remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'+e+"</div>\n    "},_onDeclineClick:function(e,t){var n=t.$btn,i=n.getAttribute("href"),o=n.nextElementSibling||n.previousElementSibling;o.remove(),ajax.post(i,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'+e+"</div>\n    "}}},"./static/js/mobile/modules/components/settings/LoginHistory.js":function(){window.LoginHistory={_onSubmit:e};function e(e,t,n){var i=geByClass1("loginHistory__iframe");preventEvent(e),t.submit(),addEvent(i,"load",function(){return nav.go(n)})}},"./static/js/mobile/modules/components/settings/SettingsEmail.js":function(){window.SettingsEmail={},function(){SettingsEmail._onFrequencyChange=e}();function e(e,i){var o=i.$select,r=i.value,a=o.closest(t.email);a.classList.toggle(n.groupsVisible,e.includes(r)||e.includes(Number(r)))}var t={email:".settingsEmail"},n={groupsVisible:"settingsEmail_groupsVisible"}},"./static/js/mobile/modules/components/settings/SettingsNotifyGroup.js":function(){window.SettingsNotifyGroup={},function(){SettingsNotifyGroup._onChange=t}();var e={notifyGroup:".settingsNotifyGroup",description:".settingsNotifyGroup__description"};function t(t,n){var i=n.$control,o=i.closest(e.notifyGroup).$(e.description);o.innerHTML=t}},"./static/js/mobile/modules/components/settings/SettingsNotifyPush.js":function(e,t,n){var i=n("./static/js/al/modules/notifier/push_notifier_constants.js");window.SettingsNotifyPush={},function(){SettingsNotifyPush._onSwitch=o}();function o(e){PushNotifier.canBeEnabled().then(function(t){var n=e.$control?geByTag1("input",e.$control):!1;if(n){if(!t)return void(n.checked=!1);var o=PushNotifier.getPermission();return o===i.PUSH_NOTIFIER_PERMISSION_DENIED?(n.checked=!1,void addClass("Popup_open",geByClass1("pageAllowPushPopup"))):o!==i.PUSH_NOTIFIER_PERMISSION_GRANTED&&e.checked?void(o===i.PUSH_NOTIFIER_PERMISSION_DEFAULT&&PushNotifier.requestPermission().then(function(t){t===i.PUSH_NOTIFIER_PERMISSION_GRANTED?PushNotifier.subscribe(!0).then(function(){return r(e)}):n.checked=!1})):PushNotifier.subscribe(!0).then(function(){return r(e)})}})}function r(e){var t=ce("input",{type:"submit"},{display:"none"});e.$control.form.appendChild(t),ajax.click(t),e.$control.form.removeChild(t)}},"./static/js/mobile/modules/components/settings/SettingsRow.js":function(){var e=need("wd");window.SettingsRow_select={},function(){SettingsRow_select._onChange=n}();var t={row:".settingsRow",description:".settingsRow__description"};function n(t,n){i(n),e.handle(t,n)}function i(e){var n=e.$select,i=e.label,o=n.closest(t.row).$(t.description);o.textContent=i}},"./static/js/mobile/modules/components/settings/SettingsSms.js":function(){window.SettingsSms={},function(){SettingsSms._onEnabledChange=e("enabled"),SettingsSms._onTimeLimitedChange=e("timeLimited"),SettingsSms._onFrequencyChange=t}();function e(e){return function(t){var o=t.$control,r=o.closest(n.sms);r.classList.toggle(i[e])}}function t(e,t){var o=t.$select,r=t.value,a=o.closest(n.sms);a.classList.toggle(i.pmUsersVisible,e.includes(r)||e.includes(Number(r)))}var n={sms:".settingsSms"},i={enabled:"settingsSms_enabled",timeLimited:"settingsSms_timeLimited",pmUsersVisible:"settingsSms_pmUsersVisible"}},"./static/js/mobile/modules/components/wall/CreatePost.js":function(){var e=10;window.CreatePost={setMaxAttach:function(t){e=t},checkAttaches:function(){CreatePost.toggleEnableAttaches(mediaUpload.getAttachesCount()<e)},toggleEnableAttaches:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;geByClass("cp_attach_btn","feed_add_form").forEach(function(t){t.classList.toggle("cp_disabled_btn",!e)}),["photo","video","audio","doc","poll"].forEach(function(t){Unfold.toggleItemEnabled(Unfold.getByName("attaches"),t,e)})}}},"./static/js/mobile/modules/components/wall/PostSuggest.js":function(){window.closePostSuggest=function(e,t){return re(geByClass1("post_suggest")),ajax.post("wall.php",{_ajax:1,act:"close_suggest_post",suggest_id:e.getAttribute("data-suggest-id")}),cancelEvent(t)}},"./static/js/mobile/modules/cookies.js":function(){var e;function t(){e={};for(var t=document.cookie.split(";"),n=/^[\s]*([^\s]+?)$/i,i=0,o=t.length;o>i;i++){var r=t[i].split("=");2==r.length&&(e[r[0].match(n)[1]]=unescape(r[1].match(n)?r[1].match(n)[1]:""))}}function n(n){return t(),e[n]}function i(e,t,n,i){var o=window.locDomain,r="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toGMTString()}document.cookie=[e,"=",escape(t),r,"; path=/",o?"; domain=."+o:"",i&&"https:"==window.locProtocol?"; secure":""].join("")}function o(e){i(e,null,-1)}window.getCookie=n,window.setCookie=i,window.clearCookie=o},"./static/js/mobile/modules/core/store/mail_utils.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyboardState=n;function n(e){var t=store.mail.cur.keyboards,n=t[e];return n||(n=t[e]={}),n}},"./static/js/mobile/modules/core/store/store.js":function(){var e={uiLastId:0,uiState:{},mail:{}},t={newId:function(){return e.uiLastId++},newState:function(n){var i=t.newId();return e.uiState[i]=n,i},getState:function(t){return e.uiState[t]||(e.uiState[t]={})},injectStore:function(t){e.uiLastId=0,e.uiState={},e.mail={};{var n=t.mail,i=n.cur,o=n.rolls,r=n.reached;n.msgs,n.queue}isArray(t.mail.msgs)&&(t.mail.msgs={}),isArray(o.peer)&&(o.peer={}),isArray(o.search.peers)&&(o.search.peers={}),isArray(o.search.msgs)&&(o.search.msgs={}),isArray(r.search.peers)&&(r.search.peers={}),isArray(r.search.msgs)&&(r.search.msgs={}),isArray(r.peer.before)&&(r.peer.before={}),isArray(r.peer.after)&&(r.peer.after={}),e.uiState=t.uiState,e.uiLastId=t.uiLastId,e.mail=t.mail,i.msgSelected={},i.msgRemoved={},i.msgAttached={},i.keyboards={},i.localOutMsgIds=[],e.mail.queue={},"notificationsCount"in e||(e.notificationsCount=t.notificationsCount)},injectMail:function(t){var n=e.mail,i=t;isObject(i.msgs)&&Object.keys(i.msgs).forEach(function(e){var t=i.msgs[e],o=n.msgs[e];o&&(o.textShort&&!t.textShort&&(t.textShort=o.textShort),o.textFull&&!t.textFull&&(t.textFull=o.textFull))}),isObject(i.msgs)&&Object.assign(n.msgs,i.msgs),isObject(i.peers)&&Object.assign(n.peers,i.peers),isObject(i.members)&&Object.assign(n.members,i.members)}};window.storeMethods=t,window.store=e},"./static/js/mobile/modules/dialogs_filtering.js":function(){var e,t=window,n=t.qs2obj,i=t.preventEvent,o=t.im,r=t.nav,a=t.toggle,s=t.attr,l=t.ge,c=t.val,u=t.geByClass1,d=t.removeClass,A=t.show,m=t.hide,f=t.qsearch,p=t.browser,_=t.toggleClass,h=t.intval,v=t.mail;function g(){return n(r.params)}function w(e){return"dialogs"===e.tab||!e.q}function y(e){var t=r.getQuery("community");return t?(e?"?":"&")+"community="+t:""}o.clearSearchInput=function(e){if(i(e),w(g())){var t=l("ma_search_field");c(t,""),o.onFilterKeyDown(t)}else r.go("/mail"+y(!0))},o.onFilterKeyDown=function(t){setTimeout(function(){var n=window,i=n.lang,o=encodeURIComponent(t.value),f=g();if(a(u("mail_search_clear_button"),o),s(u("tab_dialogs_search"),"href",o?"/mail?tab=dialogs&q="+o+y():"/mail"+y(!0)),s(u("tab_messages_search"),"href","/mail?q="+o+y()),w(f)){var p,v=l("mail_tabs"),b=l("ma_search_items"),S=l("dialogs"),C=f.offset;if(d("mail_show_filtered",u("mail")),e&&clearTimeout(e),_("dialogs_filter_without_important",l("dialogs_filter"),o||0===h(c(u("dialogs_filter_button_important")))),o)A(v),A(b),m(S),e=setTimeout(function(){p="/mail?tab=dialogs&q="+o+(C?"&offset="+C:"")+y(),"/mail"!==r.path||g().act||r.go(p,null,{push_only:!0})},200);else{if(m(v),m(b),A(S),!r.getQuery("community")){var k=u("mhb_back"),E=u("mh_header");c(E,i.mobile_mail_head_title),d("mhi_back",E),k.outerHTML=k.outerHTML.replace("<a","<div").replace("</a>","</div>")}p="/mail"+(C?"?offset="+C:"")+y(C?!1:!0),r.go(p,null,{push_only:!0})}}},40)};function b(){var e=window,t=e.lang;f.init({init_once:!0,action:"/mail?act=write&fast=1",container:l("ma_search_items"),field:l("ma_search_field"),btn:l("ma_search_btn"),top_items:[],_cache:{},item_tpl:function(e,t,n,i,o){return this.id>2e9||-1===this.id?'<a href="'+(e||"")+'" class="simple_item'+(-1==this.id?" simple_item_create":"")+'">'+(t||"")+'<div class="si_body"><span class="si_owner">'+this.highlight(n||"")+"</span>"+(i||"")+(o?'<div class="si_slabel">'+o+"</div>":"")+"</div></a>":'<a href="'+(e||"")+'" class="inline_item"><div class="ii_body">'+(t||"")+'<span class="ii_owner">'+this.highlight(n||"")+"</span>"+(i||"")+"</div></a>"},null_tpl:function(){return'<div class="service_msg_box"><div class="service_msg service_msg_null">'+t.mobile_mail_no_peers+"</div></div>"},need_invalid_keys:p.desktop,onLoaded:function(e){for(var t in e)v.saveDialog(e[t][e[t].length-1],t)}})}v.onShowWritePageFromCache(b),v.onShowDialogsPageFromCache(b)},"./static/js/mobile/modules/emoji.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.emojiJoiners=t.emojiRegEx=t.emojiCharSeq=void 0,t.emojiMap=a,t.emojiReplace=s,n("./static/js/mobile/modules/browser.js");var i=t.emojiCharSeq=/[0-9\uD83D\uD83C\uD83E\uDB40]/,o=t.emojiRegEx=/((?:[\u203C\u2049\u2122\u2328\u2601\u260E\u261d\u2626\u262A\u2638\u2639\u263a\u267B\u267F\u2702\u2708]|[\u2600\u26C4\u26BE\u2705\u2764]|[\u2194-\u2199\u21AA\u21A9]|[\u231A-\u231B]|[\u23E9-\u23EF]|[\u23F0-\u23F4]|[\u23F8-\u23FA]|[\u24C2]|[\u25AA-\u25AB]|[\u25B6\u25C0]|[\u25FB-\u25FE]|[\u2602-\u2618]|[\u2648-\u2653]|[\u2660-\u2668]|[\u26A0-\u26FA]|[\u2692-\u269C]|[\u262E-\u262F]|[\u2622-\u2623]|[\u2709-\u2764]|[\u2795-\u2797]|[\u27A1]|[\u27BF]|[\u2934-\u2935]|[\u2B05-\u2B07]|[\u2B1B]|[\u2B50\u2B55]|[\u303D]|[\u3297\u3299]|[\uE000-\uF8FF]|[\uD83D\uD83C\uD83E][\uDC00-\uDFFF]|\uDB40[\uDC20-\uDC7F]|[0-9]\u20E3|[\u0023-\u0039\u203C-\u21AA\u1F3F3]\uFE0F\u20E3|[\u200C\u200D\u2640\u2642\uFE0F])+)/g,r=t.emojiJoiners=["2640","2642","200D","200C"];function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.replaceSymbols;if(browser.safari&&browser.safari_mobile)return e;for(var r={D83DDE07:/(\s|^)([0O\xce]:\))([\s\.,]|$)/g,D83DDE09:/(\s|^)(;-\)+)([\s\.,]|$)/g,D83DDE06:/(\s|^)([X\xd5x\xf5]-?D)([\s\.,]|$)/g,D83DDE0E:/(\s|^)(B-\))([\s\.,]|$)/g,D83DDE0C:/(\s|^)(3-\))([\s\.,]|$)/g,D83DDE20:/(\s|^)(&gt;\()([\s\.,]|$)/g,D83DDE30:/(\s|^)(;[o\xeeO\xce])([\s\.,]|$)/g,D83DDE33:/(\s|^)(8\|)([\s\.,]|$)/g,D83DDE32:/(\s|^)(8-?[o\xeeO\xce])([\s\.,]|$)/g,D83DDE0D:/(\s|^)(8-\))([\s\.,]|$)/g,D83DDE37:/(\s|^)(:[X\xd5])([\s\.,]|$)/g,D83DDE28:/(\s|^)(:[o\xeeO\xce])([\s\.,]|$)/g,2764:/(\s|^)(&lt;3)([\s\.,]|$)/g},a=0;2>a;a++)for(var l in r)e=e.replace(r[l],function(e,n,i,o){return(n||"")+t(l)+(o||"")});var r={D83DDE0A:/(:-\))([\s\.,]|$)/g,D83DDE03:/(:-D)([\s\.,]|$)/g,D83DDE1C:/(;-[P\xd0])([\s\.,]|$)/g,D83DDE0B:/(:-[p\xf0])([\s\.,]|$)/g,D83DDE12:/(:-\()([\s\.,]|$)/g,"263A":/(:-?\])([\s\.,]|$)/g,D83DDE0F:/(;-\])([\s\.,]|$)/g,D83DDE14:/(3-?\()([\s\.,]|$)/g,D83DDE22:/(:&#039;\()([\s\.,]|$)/g,D83DDE2D:/(:_\()([\s\.,]|$)/g,D83DDE29:/(:\(\()([\s\.,]|$)/g,D83DDE10:/(:\|)([\s\.,]|$)/g,D83DDE21:/(&gt;\(\()([\s\.,]|$)/g,D83DDE1A:/(:-\*)([\s\.,]|$)/g,D83DDE08:/(\}:\))([\s\.,]|$)/g,D83DDC4D:/(:like:)([\s\.,]|$)/g,D83DDC4E:/(:dislike:)([\s\.,]|$)/g,"261D":/(:up:)([\s\.,]|$)/g,"270C":/(:v:)([\s\.,]|$)/g,D83DDC4C:/(:ok:|:\xee\xea:)([\s\.,]|$)/g};for(var l in r)e=e.replace(r[l],function(e,n,i){return t(l)+(i||"")});return i&&(e=e.replace(o,function(e){return s(e,t)})),e}function s(e,t){var n=0,o="",a="",s="",l=[],c=[],u=!0;e.match(/\uFE0F\u20E3/g)&&(e=e.replace(/\uFE0F/g,""));do{var s=e.charCodeAt(n++);if(s){var d=s.toString(16).toUpperCase(),A=e.charAt(n-1);if(8419!=s)o+=d,a+=A,A.match(i)||(c.push(o),l.push(a),o="",a="");else{var m=n-2,f=e.charAt(m);c.push("003"+f+"20E3"),l.push(f),o="",a=""}}else u=!1}while(u);o&&(c.push(o),l.push(a));var p="",_=!1,h=!1;o="",a="";for(var n in c){var d=c[n],A=l[n];if(d&&"FE0F"!=d)if(A.match(/\uDB40[\uDC20-\uDC7F]/))o+=d,a+=A,h=!1;else if(A.match(/\uD83C[\uDFFB-\uDFFF]/))o+=d,a+=A;else if(_)o+=d,a+=A,_=!1;else if(-1===r.indexOf(d)){if(A.match(/\uD83C[\uDDE6-\uDDFF]/)){if(h){o+=d,a+=A,h=!1;continue}h=!0}else h&&(h=!1);o&&(p+=t(o,a,!0)),o=d,a=A}else o?(_=!0,o+=d,a+=A):p+=A,h=!1}return o&&(p+=t(o,a,!0)),p}},"./static/js/mobile/modules/emoji_html.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.emojiWithJoiners=t.emojiJoinersRegEx=t.imgEmoji=t.cssEmoji=void 0,t.emojiToHTML=l,t.getEmojiHTML=c;var i=n("./static/js/mobile/modules/emoji.js"),o=t.cssEmoji={D83DDE0A:[0,":-)"],D83DDE03:[1,":-D"],D83DDE09:[2,";-)"],D83DDE06:[3,"xD"],D83DDE1C:[4,";-P"],D83DDE0B:[5,":-p"],D83DDE0D:[6,"8-)"],D83DDE0E:[7,"B-)"],D83DDE12:[8,":-("],D83DDE0F:[9,";-]"],D83DDE14:[10,"3("],D83DDE22:[11,":'("],D83DDE2D:[12,":_("],D83DDE29:[13,":(("],D83DDE28:[14,":o"],D83DDE10:[15,":|"],D83DDE0C:[16,"3-)"],D83DDE20:[17,">("],D83DDE21:[18,">(("],D83DDE07:[19,"O:)"],D83DDE30:[20,";o"],D83DDE33:[21,"8|"],D83DDE32:[22,"8o"],D83DDE37:[23,":X"],D83DDE1A:[24,":-*"],D83DDE08:[25,"}:)"],2764:[26,"<3"],D83DDC4D:[27,":like:"],D83DDC4E:[28,":dislike:"],"261D":[29,":up:"],"270C":[30,":v:"],D83DDC4C:[31,":ok:"]},r=t.imgEmoji={D83DDE15:1,D83DDE1F:1,D83DDE2E:1,D83DDE34:1},a=t.emojiJoinersRegEx=/2640|2642|200D|200C/g,s=t.emojiWithJoiners=["D83DDC71200D2640FE0F","D83DDC6E200D2640FE0F","D83DDC77200D2640FE0F","D83DDD75200D2640FE0F","D83DDE47200D2640FE0F","D83DDC81200D2642FE0F","D83DDE45200D2642FE0F","D83DDE46200D2642FE0F","D83DDE4E200D2642FE0F","D83DDE4D200D2642FE0F","D83DDC86200D2642FE0F","D83DDC87200D2642FE0F","D83DDEB6200D2640FE0F","D83CDFC3200D2640FE0F","D83CDFCB200D2640FE0F","26F9200D2640FE0F","D83CDFC4200D2640FE0F","D83CDFCA200D2640FE0F","D83DDEB5200D2640FE0F","D83DDEB4200D2640FE0F","D83DDC6F200D2642FE0F","D83CDFCC200D2640FE0F","D83DDE4B200D2642FE0F","D83DDC73200D2640FE0F","D83DDC82200D2640FE0F","D83CDFF3200DD83CDF08FE0F","D83EDD26D83CDFFB200D2642FE0F","D83EDD37D83CDFFB200D2640FE0F","D83EDD37D83CDFFB200D2642FE0F","D83EDD3DD83CDFFB200D2642FE0F","D83EDD3DD83CDFFB200D2640FE0F","D83EDD3ED83CDFFB200D2642FE0F","D83EDD3C200D2642FE0F","D83EDD38D83CDFFB200D2642FE0F","D83EDD37200D2642FE0F","D83EDD37D83CDFFC200D2642FE0F","D83EDD37D83CDFFD200D2642FE0F","D83EDD37D83CDFFE200D2642FE0F","D83EDD37D83CDFFF200D2642FE0F","D83EDD26200D2642FE0F","D83EDD26D83CDFFC200D2642FE0F","D83EDD26D83CDFFD200D2642FE0F","D83EDD26D83CDFFE200D2642FE0F","D83EDD26D83CDFFF200D2642FE0F","D83EDD37200D2640FE0F","D83EDD37D83CDFFC200D2640FE0F","D83EDD37D83CDFFD200D2640FE0F","D83EDD37D83CDFFE200D2640FE0F","D83EDD37D83CDFFF200D2640FE0F","D83EDD3D200D2642FE0F","D83EDD3DD83CDFFC200D2642FE0F","D83EDD3DD83CDFFD200D2642FE0F","D83EDD3DD83CDFFE200D2642FE0F","D83EDD3DD83CDFFF200D2642FE0F","D83EDD3D200D2640FE0F","D83EDD3DD83CDFFC200D2640FE0F","D83EDD3DD83CDFFD200D2640FE0F","D83EDD3DD83CDFFE200D2640FE0F","D83EDD3DD83CDFFF200D2640FE0F","D83EDD3E200D2642FE0F","D83EDD3ED83CDFFC200D2642FE0F","D83EDD3ED83CDFFD200D2642FE0F","D83EDD3ED83CDFFE200D2642FE0F","D83EDD3ED83CDFFF200D2642FE0F","D83EDD38200D2642FE0F","D83EDD38D83CDFFC200D2642FE0F","D83EDD38D83CDFFD200D2642FE0F","D83EDD38D83CDFFE200D2642FE0F","D83EDD38D83CDFFF200D2642FE0F","D83EDD19D83CDFFB","D83EDD19D83CDFFC","D83EDD19D83CDFFD","D83EDD19D83CDFFE","D83EDD19D83CDFFF","D83EDD1BD83CDFFB","D83EDD1BD83CDFFC","D83EDD1BD83CDFFD","D83EDD1BD83CDFFE","D83EDD1BD83CDFFF","D83EDD1CD83CDFFB","D83EDD1CD83CDFFC","D83EDD1CD83CDFFD","D83EDD1CD83CDFFE","D83EDD1CD83CDFFF","D83EDD26200D2640FE0F","D83EDD39200D2642FE0F","D83EDD39200D2640FE0F","D83DDC68200DD83DDE92FE0F","D83DDC69200DD83DDE92FE0F","D83DDC68200DD83CDFA4FE0F","D83DDC69200DD83CDFA4FE0F","D83DDC68200D2695FE0F","D83DDC69200D2695FE0F","D83DDC68200DD83CDF93FE0F","D83DDC69200DD83CDF93FE0F","D83DDC68200DD83CDFEBFE0F","D83DDC69200DD83CDFEBFE0F","D83DDC68200D2696FE0F","D83DDC69200D2696FE0F","D83DDC68200DD83CDF3EFE0F","D83DDC69200DD83CDF3EFE0F","D83DDC68200DD83CDF73FE0F","D83DDC69200DD83CDF73FE0F","D83DDC68200DD83DDD27FE0F","D83DDC69200DD83DDD27FE0F","D83DDC68200DD83CDFEDFE0F","D83DDC69200DD83CDFEDFE0F","D83DDC68200DD83DDCBCFE0F","D83DDC69200DD83DDCBCFE0F","D83DDC68200DD83DDD2CFE0F","D83DDC69200DD83DDD2CFE0F","D83DDC68200DD83DDCBBFE0F","D83DDC69200DD83DDCBBFE0F","D83DDC68200DD83CDFA8FE0F","D83DDC69200DD83CDFA8FE0F","D83DDC68200D2708FE0F","D83DDC69200D2708FE0F","D83DDC68200DD83DDE80FE0F","D83DDC69200DD83DDE80FE0F"];function l(e){return i.emojiMap(e,c,{replaceSymbols:!0})}function c(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;if(e.match(a)){if(e=e.replace("FE0F","")+"FE0F",-1===s.indexOf(e)){for(var l=e.replace("FE0F","").split(a),d="",A=0;A<l.length;A++)l[A]&&(d+=c(l[A],u(l[A]),n));return d}t&&(t=t.replace(/\uFE0F/g,""),t+=u("FE0F"))}var m=window.devicePixelRatio>=2?"_2x":"";if(i&&void 0!=o[e]){var f=17*-o[e][0];return'<img src="/images/blank.gif" emoji="'+e+'" '+(t?'alt="'+t+'"':t)+' class="emoji_css" style="background-position: 0px '+f+'px;" />'}return r[e]||!t||n?'<img class="emoji" '+(t?'alt="'+t+'"':"")+' src="/images/emoji/'+e+m+'.png" />':t}function u(e){for(var t=Math.round(e.length/4),n="",i=0;t--;)n+=String.fromCharCode(parseInt(e.substr(i,4),16)),i+=4;return n}},"./static/js/mobile/modules/entities/Friends.js":function(){var e=window,t=e.ajax,n=e.obj2qs,i=e.parseJSON,o=e.autoScroll,r=e.ImportedFriends;window.Friends={onImportSuccess:befall("serviceId","friendsHtml","total"),onImportFailed:befall("serviceId"),accept:h,decline:v,makeImportRequest:g};var a="/friends",s="accept",l="decline",c=null,u="/friends.php?act=save_contacts&type=",d="friendsImport__loading",A=d+"_hidden",m="friendsImport__result",f=m+"_shown",p="friendsList__footerBtn_showMore";function _(e,i,o,r,s,l,c){var u={act:e,hash:o,id:i};r&&(u.from=r),s&&(u.block_id=s);var d=a+n(u);t.post(d,{_ajax:1},{onDone:l,onFail:c})}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c;_(s,e,t,n,i,o,r)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c;_(l,e,t,n,i,o,r)}function g(e,n,i){if(!window.XMLHttpRequest)return void(window.location=e);var o=function(e){return w(e,n,i)},r=function(){return b(i)};t.plainpost(e,{_ajax:1},o,r,!0)}function w(e,n,o){var r=i(e),a=r.user,s=r.userhash,l=r.contacts,c=u+o,d=r.error;return d?void b(o):void t.post(c,{_ajax:1,user:a,userhash:s,hash:n,contacts:l},{onDone:function(e,t){return y(o,e,t)},onFail:function(){return b(o)}})}function y(e,t,n){var i=geByClass1(d),a=geByClass1(m);addClass(A,i),a&&(a.innerHTML=t,addClass(f,a)),o(function(){return geByClass1(p)},r,{no_cache:!0}),Friends.onImportSuccess(e,t,n),window.opener&&window.opener.Friends.onImportSuccess(e,t,n)}function b(e){Friends.onImportFailed(e),window.opener&&(window.opener.Friends.onImportFailed(e),window.close())}},"./static/js/mobile/modules/entities/Groups.js":function(){var e=window,t=e.ajax,n=e.obj2qs,i=function(){var e="/club",i="enter",o="leave",r=null;function a(i,o,r,a,s,l){var c=e+o+n({act:i,hash:r,id:o,from:a});t.post(c,{_ajax:1},{onDone:s,onFail:l})}function s(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r;a(i,e,t,n,o,s)}function l(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r;a(o,e,t,n,i,s)}return{enter:s,leave:l}}();window.Groups=i},"./static/js/mobile/modules/entries/common.js":function(e,t,n){n("./static/js/mobile/modules/polyfills/Array.from.js"),n("./static/js/mobile/modules/polyfills/Array.isArray.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.filter.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.find.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.findIndex.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.forEach.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.includes.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.map.js"),n("./static/js/mobile/modules/polyfills/Array.prototype.some.js"),n("./static/js/mobile/modules/polyfills/ChildNode.remove.js"),n("./static/js/mobile/modules/polyfills/Console.js"),n("./static/js/mobile/modules/polyfills/Element.prototype.classList.js"),n("./static/js/mobile/modules/polyfills/Element.prototype.closest.js"),n("./static/js/mobile/modules/polyfills/Function.prototype.bind.js"),n("./static/js/mobile/modules/polyfills/NodeList.prototype.forEach.js"),n("./static/js/mobile/modules/polyfills/Object.assign.js"),n("./static/js/mobile/modules/polyfills/Object.freeze.js"),n("./static/js/mobile/modules/polyfills/Object.keys.js"),n("./static/js/mobile/modules/polyfills/String.prototype.includes.js"),n("./static/js/mobile/modules/polyfills/String.prototype.trim.js"),n("./static/js/mobile/modules/polyfills/requestAnimationFrame.js"),n("./static/js/mobile/modules/polyfills/Promise.js"),n("./static/js/mobile/modules/lib/utils.js"),n("./static/js/mobile/modules/lib/dollarselector.js"),n("./static/js/mobile/modules/lib/befall.js"),n("./static/js/mobile/modules/lib/bem.js"),n("./static/js/mobile/modules/lib/withdom.js"),n("./static/js/mobile/modules/lib/Url.js"),n("./static/js/mobile/modules/lib/Peppermint/Peppermint.js"),n("./static/js/mobile/modules/cookies.js"),n("./static/js/mobile/modules/browser.js"),n("./static/js/mobile/modules/geo.js"),n("./static/js/mobile/modules/ajax.js"),n("./static/js/mobile/modules/mediaUpload.js"),n("./static/js/mobile/modules/ownerPhotoUpload.js"),n("./static/js/mobile/modules/thover.js"),n("./static/js/mobile/modules/page.js"),n("./static/js/mobile/modules/nav.js"),n("./static/js/mobile/modules/ajax_objects.js"),n("./static/js/mobile/modules/pStats.js"),n("./static/js/mobile/modules/post.js"),n("./static/js/mobile/modules/tooltip.js"),n("./static/js/mobile/modules/menu.js"),n("./static/js/mobile/modules/mail.js"),n("./static/js/mobile/modules/Scroller.js"),n("./static/js/mobile/modules/im.js"),n("./static/js/mobile/modules/geoloc.js"),n("./static/js/mobile/modules/checkin.js"),n("./static/js/mobile/modules/QuickSearch.js"),n("./static/js/mobile/modules/zlayer.js"),n("./static/js/mobile/modules/photo.js"),n("./static/js/mobile/modules/components/audio/AudioSubscribe.js"),n("./static/js/mobile/modules/audio.js"),n("./static/js/mobile/modules/audioplayer.js"),n("./static/js/mobile/modules/photoview.js"),n("./static/js/mobile/modules/Informer.js"),n("./static/js/mobile/modules/FeedNotifications.js"),n("./static/js/mobile/modules/Tabs.js"),n("./static/js/mobile/modules/fave.js"),n("./static/js/mobile/modules/stickers/stickers.js"),n("./static/js/mobile/modules/dialogs_filtering.js"),n("./static/js/mobile/modules/core/store/store.js"),n("./static/js/mobile/modules/lib/q/q.js"),n("./static/js/mobile/modules/lib/q/q.html.js"),n("./static/js/mobile/modules/lib/q/q.attr.js"),n("./static/js/mobile/modules/lib/q/q.list.js"),n("./static/js/mobile/modules/lib/q/q.class.js"),n("./static/js/mobile/modules/lib/helpers/ajax.js"),n("./static/js/mobile/modules/lib/helpers/array.js"),n("./static/js/mobile/modules/lib/helpers/base.js"),n("./static/js/mobile/modules/lib/helpers/dom.js"),n("./static/js/mobile/modules/skins/base/Brick/Brick.js"),n("./static/js/mobile/modules/skins/base/Loading/Loading.js"),n("./static/js/mobile/modules/skins/base/Spinner/Spinner.js"),n("./static/js/mobile/modules/skins/base/Icon/Icon.js"),n("./static/js/mobile/modules/skins/base/Icon/Icon_0.js"),n("./static/js/mobile/modules/skins/base/Oval/Oval.js"),n("./static/js/mobile/modules/skins/base/Oval/Oval_0.js"),n("./static/js/mobile/modules/skins/base/Unfold/Unfold.js"),n("./static/js/mobile/modules/skins/base/Unfold/Unfold_0.js"),n("./static/js/mobile/modules/skins/base/Avatar/Avatar.js"),n("./static/js/mobile/modules/skins/base/Popup/Popup_0.js"),n("./static/js/mobile/modules/skins/base/ScrollView/ScrollView.js"),n("./static/js/mobile/modules/skins/base/ScrollView/ScrollView_healScrollForIOS.js"),n("./static/js/mobile/modules/skins/base/Pad/Pad_0.js"),n("./static/js/mobile/modules/skins/base/Btn/Btn_0.js"),n("./static/js/mobile/modules/skins/base/Input/Input.js"),n("./static/js/mobile/modules/skins/base/Input/Input_0.js"),n("./static/js/mobile/modules/skins/base/Anchor/Anchor_0.js"),n("./static/js/mobile/modules/skins/base/Select/Select_0.js"),n("./static/js/mobile/modules/skins/base/Control/Control_0.js"),n("./static/js/mobile/modules/skins/base/LoadMore/LoadMore_0.js"),n("./static/js/mobile/modules/skins/base/Slider/Slider_0.js"),n("./static/js/mobile/modules/skins/base/SearchPanel/SearchPanel_0.js"),n("./static/js/mobile/modules/skins/base/TabRow/TabRow_0.js"),n("./static/js/mobile/modules/skins/common/Bell/Bell.js"),n("./static/js/mobile/modules/skins/common/Bell/Bell_0.js"),n("./static/js/mobile/modules/skins/common/Typing/Typing.js"),n("./static/js/mobile/modules/skins/common/Typing/Typing_0.js"),n("./static/js/mobile/modules/skins/common/CookiePolicy/CookiePolicy_0.js"),n("./static/js/mobile/modules/skins/common/PrivacyPolicy/PrivacyPolicy_0.js"),n("./static/js/mobile/modules/skins/voting/Voting/Voting_0.js"),n("./static/js/mobile/modules/skins/voting/VotingBcg/VotingBcg.js"),n("./static/js/mobile/modules/skins/voting/VotingForm/VotingForm.renderOption.js"),n("./static/js/mobile/modules/skins/voting/VotingForm/VotingForm.renderBcg.js"),n("./static/js/mobile/modules/skins/voting/VotingForm/VotingForm_0.js"),n("./static/js/mobile/modules/skins/voting/VotingStatsFilters/VotingStatsFilters_0.js"),n("./static/js/mobile/modules/skins/settings/ActivitySettings/ActivitySettings_0.js"),n("./static/js/mobile/modules/skins/settings/AuthCheck/AuthCheck_0.js"),n("./static/js/mobile/modules/skins/settings/AuthCheckIntro/AuthCheckIntro_0.js"),n("./static/js/mobile/modules/skins/settings/CodeGenerator/CodeGenerator_0.js"),n("./static/js/mobile/modules/skins/settings/ReservedCodes/ReservedCodes_0.js"),n("./static/js/mobile/modules/skins/settings/Settings/Settings_privacy.js"),n("./static/js/mobile/modules/skins/audio/AudioSerp/AudioSerp_0.js"),n("./static/js/mobile/modules/skins/audio/AudioSpecialForYou/AudioSpecialForYou_0.js"),n("./static/js/mobile/modules/skins/stories/Stories/Stories_0.js"),n("./static/js/mobile/modules/entities/Friends.js"),n("./static/js/mobile/modules/entities/Groups.js"),n("./static/js/mobile/modules/stats/FeedAssistanceStats.js"),n("./static/js/mobile/modules/components/common/ChromeTabColor.js"),n("./static/js/mobile/modules/components/common/Dropdown.js"),n("./static/js/mobile/modules/components/common/GroupCover.js"),n("./static/js/mobile/modules/components/common/GiftsSendFormCounter.js"),n("./static/js/mobile/modules/components/common/ReplyOwnerPicker.js"),n("./static/js/mobile/modules/components/common/TopMenu.js"),n("./static/js/mobile/modules/components/common/ActionMenu.js"),n("./static/js/mobile/modules/components/common/AdultConfirm.js"),n("./static/js/mobile/modules/components/audio/AudioPlaylist.js"),n("./static/js/mobile/modules/components/common/Mention.js"),n("./static/js/mobile/modules/components/common/SubscribeBtn.js"),n("./static/js/mobile/modules/components/common/ReCaptcha.js"),n("./static/js/mobile/modules/components/basis/BasisMoneyTransfer/index.js"),n("./static/js/mobile/modules/components/basis/BasisStory.js"),n("./static/js/mobile/modules/components/money_transfer/MoneyTransferButton/index.js"),n("./static/js/mobile/modules/components/money_transfer/SendMoneyForm.js"),n("./static/js/mobile/modules/components/mail/MessagesActions.js"),n("./static/js/mobile/modules/components/mail/StickersHints.js"),n("./static/js/mobile/modules/components/mail/PinnedMsg.js"),n("./static/js/mobile/modules/components/feed/FeedBlocks.js"),n("./static/js/mobile/modules/components/settings/LoginHistory.js"),n("./static/js/mobile/modules/components/settings/SettingsRow.js"),n("./static/js/mobile/modules/components/settings/SettingsSms.js"),n("./static/js/mobile/modules/components/settings/SettingsEmail.js"),n("./static/js/mobile/modules/components/settings/SettingsNotifyGroup.js"),n("./static/js/mobile/modules/components/settings/SettingsNotifyPush.js"),n("./static/js/mobile/modules/components/landings/index.js"),n("./static/js/mobile/modules/components/article/Article.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistance.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistanceRecommendedFriendsSlider.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistanceExploreBait.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistanceProfilePhoto.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistancePromoButton.js"),n("./static/js/mobile/modules/components/notifications/Notification.js"),n("./static/js/mobile/modules/components/mail/ChatPreview.js"),n("./static/js/mobile/modules/components/wall/CreatePost.js"),n("./static/js/mobile/modules/components/join/Join.js"),n("./static/js/mobile/modules/iphone_x_stats.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistanceImportContacts.js"),n("./static/js/mobile/modules/components/assistance/FeedAssistancePushNotificationsSwitch.js"),n("./static/js/mobile/modules/components/audio/hmAudioSerp.js"),n("./static/js/mobile/modules/components/audio/hmAudioBlock.js"),n("./static/js/mobile/modules/components/wall/PostSuggest.js"),n("./static/js/mobile/modules/units/voting/uVoting/uVoting_0.js");var i=window,o=i.addClass,r=i.addEvent,a=i.append,s=i.attr,l=i.cancelEvent,c=i.ce,u=i.checkNav,d=i.checkTouchHover,A=i.clog,m=i.ge,f=i.geByClass1,p=i.getCh,_=i.gpeByClass,h=i.hasClass,v=i.lsCheck,g=i.lsGet,w=i.lsSet,y=i.onBodyScroll,b=i.onDOMReady,S=i.remove,C=i.scrollTop,k=i.sgFix;r(window,"scroll touchmove",function(){y(!0)}),r(window,"error",function(e){A(e.lineno+": "+e.message)}),window.cur={destroy:[]},window.lang={};var E=window,M=E.thover,T=E.browser,j=E.ajax,D=E.isTouch;r(document,"touchmove touchcancel",M.cancel),r(document,"touchend",M.end);function x(){if((T.safari_mobile||T.android||T.opera_mobile&&!T.opera_mini)&&!h("body_fullscreen",window.bodyNode)){var e=C();window.bodyNode.style.overflow="hidden",window.bodyNode.style.minHeight="5000px",C(10);var t=p()+(T.android?1:0);C(e),window.bodyNode.style.minHeight=t+"px",window.bodyNode.style.overflow="",window.realClientHeight=t}}function I(){if(g("custom_opts"))return o("_copts","vk_wrap");var e=c("div",{innerHTML:'<input id="copts_test_radio" type="radio" checked="checked"><div id="copts_test_label"></div>'});a(e,"vk_utils");var t=m("copts_test_label");t&&Math.abs(t.offsetWidth-5)<1&&(o("_copts","vk_wrap"),w("custom_opts",1)),S(e)}var P=window,B=P.page;j._init(),j.enabled=j._req?!0:!1,j.enabled&&(b(function(){S("app_go_frame"),j.prepare_nav(),j.prepare_click(),O&&O.init(),N&&N.initAudio(),o("_js","vk_wrap")}),B.clear()),r(window,"orientationchange",x),r(document,"touchstart",function(e){var t=d(e.target);t&&M.start.call(t,e)}),r(document,"click",function(e){var t=window,n=t.al;if(window.al&&n.ver){var i=_("al_after",e.target);if(i){var o=s(i,"data-target"),r=o?f(o,i):!1;if(r&&!L.go_after(r,e)||!L.go_after(i,e))return}var a=u(e.target,{allow_post_away:!0,skip_onclick:!!s(e.target,"data-skiponclick")});a&&(L.go(a,e)||l(e))}}),r(document,"submit",function(e){var t=e.target;h("vk_js_yes",geByTag1("html"))&&!h("opera_mini_yes",geByTag1("body"))&&h("qsearch",t)&&_("audioPage",t)&&(geBySel1('[type="submit"]',t).click(),l(e))}),r(document,D?"touchstart":"mousedown",function(e){H.closeByTap(e)}),b(x),b(I),k();var F=window,L=F.nav,O=F.menu,N=F.audioplayer,H=F.tooltip,R=F.zlayer;b(function(){var e=window,t=e.vk;!t.id&&v()&&localStorage.clear()}),window.fixHeight=x,window.optionsTest=I,R.isReady=!0;try{n("./static/js/al/modules/entries/voice_message_player.js")}catch(V){console.error("Catched error: ",V)}window.isNewMail&&(n("./static/js/mobile/modules/skins/mail/convo/convo.js"),n("./static/js/mobile/modules/skins/mail/convo/convo_0.js"),n("./static/js/mobile/modules/skins/mail/msg/msg.js"),n("./static/js/mobile/modules/skins/mail/msg/msg_0.js"),n("./static/js/mobile/modules/skins/mail/mailHat/mailHat.js"),n("./static/js/mobile/modules/skins/mail/mailHat/mailHat_0.js"),n("./static/js/mobile/modules/skins/mail/mailActs/mailActs.js"),n("./static/js/mobile/modules/skins/mail/mailActs/mailActs_0.js"),n("./static/js/mobile/modules/skins/mail/mailDialog/mailDialog.js"),n("./static/js/mobile/modules/skins/mail/mailDialog/mailDialog_0.js"),n("./static/js/mobile/modules/skins/mail/mailFilter/mailFilter.js"),n("./static/js/mobile/modules/skins/mail/mailFilter/mailFilter_0.js"),n("./static/js/mobile/modules/units/base/uVK_0.js"),n("./static/js/mobile/modules/units/common/uBell.js"),n("./static/js/mobile/modules/units/mail/uMsg.js"),n("./static/js/mobile/modules/units/mail/uConvo.js"),n("./static/js/mobile/modules/units/mail/uConvo_0.js"),n("./static/js/mobile/modules/units/mail/uMailHat.js"),n("./static/js/mobile/modules/units/mail/uMailHat_0.js"),n("./static/js/mobile/modules/units/mail/uCurConvoTyping.js"),n("./static/js/mobile/modules/units/mail/uCurConvoTyping_0.js"),n("./static/js/mobile/modules/_ui/mail/MailScrap/MailScrap.js"),n("./static/js/mobile/modules/_ui/mail/MailScrap/MailScrap_0.js"),n("./static/js/mobile/modules/_ui/mail/uMailWrite/uMailWrite.js"),n("./static/js/mobile/modules/_ui/mail/uMailWrite/uMailWrite_0.js"),n("./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger.js"),n("./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger_0.js"),n("./static/js/mobile/modules/_ui/mail/uMessenger/uMessenger_logic.js"));try{n("./static/js/al/modules/notifier/push_notifier.js")}catch(V){console.error("Catched error: ",V)}},"./static/js/mobile/modules/fave.js":function(){var e=window,t=e.gpeByClass,n=e.hasClass,i=e.addClass,o=e.removeClass,r=e.geByClass1,a=e.setStyle,s=e.tooltip,l=e.ajax;window.Fave={showActionsTT:function(e,o){cancelEvent(o);var l=t("FaveArticles__row",e);if(n(l,"wi_actions_opened"))Fave.hideActionsTT();else{var c=r("wi_actions_wrap",l),u=r("FaveArticles__row_actions",l);a(c,"top",e.offsetTop+e.offsetHeight+"px"),i(l,"wi_actions_opened"),s.addHandler(Fave.hideActionsTT),s.show(c,u)}},hideActionsTT:function(){o("wi_actions_opened",r("wi_actions_opened")),s.hide()},removeArticle:function(e,n,r){Fave.hideActionsTT();var a=t("FaveArticles__row",e);i(a,"removed"),l.post("fave.php",{act:"defave_article",link:n,hash:r},{onFail:function(){return o(a,"removed")}})},restoreArticle:function(e,n,r){var a=t("FaveArticles__row",e);o(a,"removed"),l.post("fave.php",{act:"enfave_article",link:n,hash:r},{onFail:function(){return i(a,"removed")}})}}},"./static/js/mobile/modules/geo.js":function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=window,n=t.extend,i={_def_opts:{enableHighAccuracy:!0,maximumAge:3e5,timeout:6e4},_provider:null,initW3C:function(){i._provider=navigator.geolocation,i.getCurrentPosition=function(e,t,o){i._provider.getCurrentPosition(function(t){e("undefined"!=typeof t.latitude?n(t,{coords:n(t.coords||{},{latitude:t.latitude,longitude:t.longitude})}):t)},t,o)}},initGears:function(){var e=window,t=e.google;i._provider=t.gears.factory.create("beta.geolocation")},initSymbian:function(){var e=window,t=e.device;i._provider=t.getServiceObject("Service.Location","ILocation"),i.getCurrentPosition=function(e,t){i._provider.ILocation.GetLocation({LocationInformationClass:"BasicLocationInformation"},function(n,i,o){4==i?t({code:2,message:"Position unavailable"}):e({timestamp:null,coords:{latitude:o.ReturnValue.Latitude,longitude:o.ReturnValue.Longitude,altitude:o.ReturnValue.Altitude,heading:o.ReturnValue.Heading}})})}},initPalm:function(){i.getCurrentPosition=function(e,t,n){var i={};n&&(n.enableHighAccuracy&&1==n.enableHighAccuracy&&(i.accuracy=1),n.maximumAge&&(i.maximumAge=n.maximumAge),n.responseTime&&(n.responseTime<5?i.responseTime=1:n.responseTime<20?i.responseTime=2:i.timeout=3));var o=window,r=o.Mojo;new r.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:i,onSuccess:function(t){e({timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,heading:t.heading}})},onFailure:function(e){t(1==e.errorCode?{code:3,message:"Timeout"}:2==e.errorCode?{code:2,message:"Position unavailable"}:{code:0,message:"Unknown Error: webOS-code"+e.errorCode})}})}},getCurrentPosition:function(e,t,o){i._provider.getCurrentPosition(e,t,n(i._def_opts,o||{}))},init:function(){var t=window,n=t.google,o=t.device,r=t.Mojo;try{var a="undefined";if(e(navigator.geolocation)!==a)i.initW3C();else if(e(window.google)!==a&&e(n.gears)!==a)i.initGears();else if(("undefined"==typeof o?"undefined":e(o))!==a&&e(o.getServiceObject)!==a)i.initSymbian();else{if(("undefined"==typeof r?"undefined":e(r))===a||"Mojo.Service.Request"==typeof r.Service.Request)return!1;i.initPalm()}}catch(s){return!1}return!0}};window.geo=i},"./static/js/mobile/modules/geoloc.js":function(){var e=window,t=e.hide,n=e.ge,i=e.ce,o=e.geByClass1,r=e.val,a=e.show,s=e.remove,l=e.addClass,c=e.removeClass,u=window,d=u.geo,A=window,m=A.ajax,f=function(){var e=null,u=!1;function A(e){m.post("/places.php",{_ajax:1,act:"map_label",lat:e.latitude,lng:e.longitude},{onDone:function(n){t("geo_waiting"),p(e,n)},onFail:v})}function p(e,t){var s=n("medias_map"),l=n("attached_wrap");s||(s=i("div",{id:"medias_map",className:"pi_medias"}),l.appendChild(s));var c=e.latitude,u=e.longitude,d=(window.devicePixelRatio>=1.5?2:1,o("medias_map",s)),A=t?'<div class="medias_map_close"><i class="i_close">&nbsp;</i></div><div class="medias_map_label">'+t+"</div>":"",m="",f=c+"_"+u+"_0",p='<input type="hidden" name="map" value="'+f+'">';if(d)r(d,A+m+p);else{var _='<div class="meias_row medias_map" onclick="geoloc.remove();">'+A+m+p+"</div>";r(s,_)}a(s)}function _(){e=null,s("medias_map")}function h(t){t&&t.coords&&(e={latitude:+t.coords.latitude||0,longitude:+t.coords.longitude||0},A(e))}function v(){f.remove(),t("geo_waiting")}return{toggle:function(){u?f.remove():f.add()},add:function(t){(t||!u)&&(u=!0,l("cp_geo_btn_sel","geo_btn"),t&&(t.latitude||t.longitude)?(e={latitude:+t.latitude||0,longitude:+t.longitude||0},p(e,t.label)):(d.getCurrentPosition(h,v),a("geo_waiting")))},remove:function(){u&&(u=!1,c("cp_geo_btn_sel","geo_btn"),_())},init:function(e){return e&&f.add(e),d.init()}}}();window.geoloc=f},"./static/js/mobile/modules/im.js":function(){var e=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=window,n=t.getNotify,i=t.setNotify,o=t.setDocumentDomain,r=t.ce,a=t.onDOMReady,s=t.append,l=t.clog,c=t.extend,u=t.parseJSON,d=t.intval,A=t.each,m=window,f=m.ajax,p=window,_=p.nav,h=window,v=h.menu,g=window,w=g.mail,y=function(){var t=null,m=!1,p={},h=1,g=null,S=!1,C=!1;function k(){64>h&&(h*=2)}function E(e,t){var o=window,r=o.al;if(e===!1&&(e=n()+(t||1)),i(e),window.al&&window.al.menu){var a=new Array(r.menu.length);a[2]=e,v.refreshCounters(a)}}function M(e){return Object.keys(e).some(function(e){return-1!==e.indexOf("attach")})||e.fwd||e.emoji||e.geo}function T(e,t,n){var i=toInt(e.from_admin)||null,o=toInt(_.getQuery("community"));return i&&o?o:2&t?window.vk.id:toInt(e.from)||n}function j(e){var t=new Date(1e3*e),n=t.getHours(),i=t.getMinutes();return n+":"+(10>i?"0":"")+i}function D(){return Number(_.getQuery("offset"))>0}return{onNewMsg:befall("{ peerId, msgId, authorId, peerName, text, date, hasAttachments, flags, isService }"),onEditMsg:befall("{ peerId, msgId, authorId, peerName, text, date, hasAttachments, flags }"),onMsgReadByMe:befall("msgId","dialogId"),onMsgReadByOther:befall("msgId","dialogId"),onOnlineChange:befall("{ userId, isOnline, onlinePlatform, lastActionTime }"),onTyping:befall("dialogId","authorId"),onMsgImportantRemove:befall("msgId"),onMsgImportantAdd:befall("msgId"),onMsgRemove:befall("msgId"),onPeerKeyboard:befall("peerId"),nu:!0,isLongPollingEnabled:function(){return!!S},init:function(e,n){t||(o(),t=r("iframe",{src:e},{display:"none"}),a(function(){s(t,window.bodyNode),m=!0})),y.refreshParams(n),setTimeout(y.check,1e3)},on:function(){l("[longpoll] start"),S=!0,setTimeout(y.check,1e3)},off:function(){l("[longpoll] pause"),S=!1},refreshParams:function(e){c(p,e||{}),c(y,p)},getKey:function(){if(g)try{g.abort()}catch(e){}g=f.post("/mail",{_ajax:1,act:"im_get_key",community:_.getQuery("community")},{onDone:function(e){/[0-9a-f]{40}/i.test(e)?(y.refreshParams({key:e}),y.check()):l("[longpoll] invalid key")},onFail:function(){setTimeout(y.getKey,1e3*h),l("[longpoll] from getKey delaying getKey for "+h+"secs"),k()}})},check:function(){if(S&&!C){if(!y.makeRequest)return void setTimeout(y.check,1e3);try{y.makeRequest(function(e,t){if(C=!1,S){var n=window,i=n.vk;if(i.__debug){var o=y.checked(u(t));o&&(y.check(),h=1)}else try{var o=y.checked(u(t));o&&(y.check(),h=1)}catch(r){try{l("[longpoll] error",r.message||"no message",r.type||"no type",r.stack||"no stack")}catch(r){}setTimeout(y.check,1e3*h),k()}}},function(){C=!1,setTimeout(y.check,1e3*h),k()}),C=!0}catch(e){l("[longpoll] makeRequest failed")}}},checked:function(t){var n=t.failed;if(1==n||p.ts>=t.ts+256){if(y.refreshParams({ts:t.ts}),n)return!0}else{if(2==n)return l("[longpoll] delaying getKey for "+h+"secs"),setTimeout(y.getKey,1e3*h),k(),!1;if(n)return void l("[longpoll]",t)}if(y.refreshParams({ts:t.ts}),t.updates){var i=[],o=!1;for(var r in t.updates){if(116==t.updates[r][0])var a=t.updates[r][1],s=[t.updates[r][0],a.id,a.flags,a.peer_id,a.date,a.title||"",a.message,a.kludges,a.random_id];else var s=t.updates[r];var u=d(s[0]),m=d(s[1]),v=d(s[2]),g=d(s[3]);if(1===v){if(10===u){w.updateImportantDialog(m,!1);continue}if(12===u){w.updateImportantDialog(m,!0);continue}}if(8&v){if(2===u){if(window.isNewMail){y.onMsgImportantAdd(m);continue}w.updateImportantMessages(g,m,1);continue}if(3===u){if(window.isNewMail){y.onMsgImportantRemove(m);continue}w.updateImportantMessages(g,m,-1);continue}}if(51!=u)if(61!=u)if(62!=u)if(8!=u)if(9!=u)if(6!=u&&7!=u||!y.nu)if(80!=u||!m||_.getQuery("community"))if(52!=u){if(g)if(4!=u&&5!=u&&116!=u)if(0!=u)if(2!=u)3!=u||1&v&&!y.nu&&w.markAsRead(g,m);else{if(128&v){if(window.isNewMail){y.onMsgRemove(m);continue}w.markAsDeleted(g,m)}window.isNewMail&&64&v&&y.onMsgRemove(m)}else{if(window.isNewMail){y.onMsgRemove(m);continue}w.markAsDeleted(m)}else{var S=5==u||116==u;if(window.isNewMail){var C=e(s,9),x=C[1],I=C[3],P=C[4],B=C[5],F=C[6],L=C[7],O=void 0===L?{}:L,N=C[8],H=M(O),R=j(P),V=toInt(O.from_admin)||null,q=(toInt(_.getQuery("community")),T(O,v,I)),U=!!O.source_act,z=O.keyboard?b(O.keyboard):null;if(S){var $={peerId:I,msgId:x,authorId:q,peerName:B,text:F,date:R,hasAttachments:H,flags:v,adminId:V,randomId:N};116==u?$.refreshed=1:$.edited=Math.floor(Date.now()/1e3),y.onEditMsg($)}else y.onNewMsg({peerId:I,msgId:x,authorId:q,peerName:B,text:F,date:R,hasAttachments:H,flags:v,adminId:V,randomId:N,isService:U,keyboard:z});continue}var W=window,Y=W.vk,X=2&v?Y.id:s[7]&&s[7].from||g,G=s[7]&&s[7].source_act;if(!o){var Q=need("PinnedMsg");o=!!Q.getByMsgId(m)}var K=s[7].from_admin||G||o?null:w.getMsgHTML(m,v,g,s[4],s[5],s[6],s[7],116!=u?S:"");if(K&&(S?w.replaceMessage(g,m,X,K):D()||w.addMessage(g,m,X,K),2&v||_.getQuery("community")||E(!1,1)),"chat_kick_user"===G&&s[7].source_mid==Y.id){var J=s[3];w.unpinMessage(J)}K&&"chat_pin_message"!==G&&"chat_unpin_message"!==G||i.push({peer:g,msg_id:m,from_id:X,source_act:G,edited:S})}}else{var Z=e(s,3),et=Z[1],tt=Z[2];if(11!=et)continue;window.isNewMail&&y.onPeerKeyboard(tt)}else E(m);else{if(window.isNewMail){var nt=s[1],it=s[2];6===u?y.onMsgReadByMe(it,nt):y.onMsgReadByOther(it,nt);continue}w.markPeerAsRead(m,v,7==u)}else{if(window.isNewMail){y.onOnlineChange({userId:-m,isOnline:!1,lastActionTime:g});continue}w.updateOnline(-m,0)}else{if(window.isNewMail){y.onOnlineChange({userId:-m,isOnline:!0,onlinePlatform:8===v?"vkmobile":7===(v||7)?"desktop":"mobile"});continue}w.updateOnline(-m,v||7)}else{if(window.isNewMail){var ot=2e9+v,rt=m;y.onTyping(ot,rt);continue}w.typing(2e9+v,m)}else{if(window.isNewMail){var at=m,st=m;y.onTyping(at,st);continue}w.typing(m)}}if(i.length){var lt=[];A(i,function(e,t){lt.push(t.msg_id)});var ct={_ajax:1,act:"get_messages",msgs:lt.join(","),community:_.getQuery("community")};o&&(ct.force_pinned=1),f.post("/mail",ct,{onDone:function(e,t){var n=window,o=n.cur,r=D();A(i,function(t,n){var i=e[n.msg_id],o=n.peer;i.text&&!r&&(n.edited?w.replaceMessage(n.peer,n.msg_id,n.from_id,i.text):w.addMessage(n.peer,n.msg_id,n.from_id,i.text)),i.unpin&&w.unpinMessage(o),i.pinned&&w.pinMessage(o,i.pinned)}),t&&(t.play_animation_msg_id&&StickersAnimation?StickersAnimation.loadStickerInMvkIMAndPlay(t.play_animation_msg_id):(c(o,t),w.updateStickers()))}})}}return!0}}}();function b(e){try{return JSON.parse(e)}catch(t){return null}}window.im=y},"./static/js/mobile/modules/iphone_x_stats.js":function(){var e=window,t=e.browser,n=window,i=n.setCookie;t.ios&&i("remixmvk_iphone_x",o()?1:0);function o(){return t.ios&&3===window.devicePixelRatio&&375===window.screen.width&&812===window.screen.height}},"./static/js/mobile/modules/lib/Peppermint/Peppermint.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function o(e){var t=["Webkit","Moz","O","ms"],n=document.createElement("div");if(void 0!==n.style[e])return!0;e=e.charAt(0).toUpperCase()+e.slice(1);for(var i in t)if(void 0!==n.style[t[i]+e])return!0;return!1}function r(e,t){new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)}function a(e,t){e.className=e.className.replace(new RegExp("(\\s+|^)"+t+"(\\s+|$)","g")," ").replace(/^\s+|\s+$/g,"")}function s(e,t){0>e?e=0:e>b-1&&(e=b-1);for(var n=j.dots.length-1;n>=0;n--)a(j.dots[n],P.activeDot);return r(j.dots[e],P.activeDot),x=e,l(-e*j.width,void 0===t?I.speed:t),p(),I.onSlideChange&&I.onSlideChange(e),e}function l(e,t){var n=t?t+"ms":"";k.style.webkitTransitionDuration=k.style.MozTransitionDuration=k.style.msTransitionDuration=k.style.OTransitionDuration=k.style.transitionDuration=n,u(e)}function c(e,t){if(T&&clearInterval(T),!t)return void u(e);var n=+new Date,i=j.left;T=setInterval(function(){function o(e,t){return(t-e)*l+e}var r,a,s=+new Date-n,l=s/t,c=[0,.7,1,1];return l>=1?(u(e),void clearInterval(T)):(r=e-i,a=o(o(o(c[0],c[1]),o(c[1],c[2])),o(o(c[1],c[2]),o(c[2],c[3]))),void u(Math.floor(a*r+i)))},15)}function u(e){k.style.webkitTransform="translate("+e+"px,0) translateZ(0)",k.style.msTransform=k.style.MozTransform=k.style.OTransform=k.style.transform="translateX("+e+"px)",j.left=e}function d(e){k.style.left=e+"px",j.left=e}function A(){var e=x+1;return e>b-1&&(e=0),s(e)}function m(){var e=x-1;return 0>e&&(e=b-1),s(e)}function f(){M=!0,p()}function p(){M&&(E&&clearTimeout(E),E=setTimeout(function(){A()},I.slideshowInterval))}function _(){E&&clearTimeout(E)}function h(){M=!1,E&&clearTimeout(E)}function v(){j.width=e.offsetWidth,k.style.width=j.width*b+"px";for(var t=0;b>t;t++)j.slides[t].style.width=j.width+"px";l(-x*j.width)}function g(e,t,n,i){t&&(e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n))}function w(){i(k,{mouse:I.mouseDrag,start:function(){r(e,P.drag)},move:function(e,t,n){_(),n.x=n.x/(!x&&n.x>0||x==b-1&&n.x<0?Math.abs(n.x)/j.width*2+1:1),l(n.x-j.width*x)},end:function(t,n,i){if(i.x){var o=Math.abs(i.x)/j.width,r=Math.floor(o)+(o-Math.floor(o)>.25?1:0),l=i.time<D+D*r/1.8&&Math.abs(i.x)-r*j.width>(r?-j.width/9:20);r+=l?1:0,i.x<0?s(x+r,I.touchSpeed):s(x-r,I.touchSpeed),I.stopSlideshowAfterInteraction&&h()}a(e,P.drag)}})}function y(){var t=I.slidesContainer||e,n=I.dotsContainer||e;if(!(I.disableIfOneSlide&&t.children.length<=1)){(!B.transforms||window.opera)&&(u=d),(!B.transitions||window.opera)&&(l=c),k=I.slidesContainer||document.createElement("div"),r(k,P.slides);for(var i=0,o=t.children.length;o>i;i++){var A=t.children[i],m=document.createElement("li");j.slides.push(A),m.setAttribute("tabindex","0"),m.setAttribute("role","button"),m.innerHTML="<span></span>",function(t,n){g(n,"click",function(){s(t),I.stopSlideshowAfterInteraction&&h()}),g(n,"keyup",function(e){13==e.keyCode&&(s(t),I.stopSlideshowAfterInteraction&&h())}),g(n,"mouseup",function(){r(n,P.mouseClicked)}),g(n,"blur",function(){a(n,P.mouseClicked)},!0),g(A,"focus",A.onfocusin=function(){e.scrollLeft=0,setTimeout(function(){e.scrollLeft=0},0),s(t)},!0)}(i,m),j.dots.push(m)}b=j.slides.length,S=100/b,r(e,P.active),a(e,P.inactive),I.mouseDrag&&r(e,P.mouse),j.width=e.offsetWidth,k.style.width=j.width*b+"px";for(var i=0;b>i;i++)j.slides[i].style.width=j.width+"px",k.appendChild(j.slides[i]);if(I.slidesContainer||e.appendChild(k),I.dots&&b>1){C=document.createElement("ul"),r(C,P.dots);for(var i=0,o=j.dots.length;o>i;i++)C.appendChild(j.dots[i]);I.dotsPrepend?n.insertBefore(C,n.firstChild):n.appendChild(C)}g(window,"resize",v),g(window,"orientationchange",v),setTimeout(function(){s(I.startSlide,0)},0),I.slideshow&&f(),w(),setTimeout(function(){I.onSetup&&I.onSetup(b)},0)}}var b,S,C,k,E,M,T,j={slides:[],dots:[],left:0},D=200,x=0,I={speed:300,touchSpeed:300,slideshow:!1,slideshowInterval:4e3,stopSlideshowAfterInteraction:!1,startSlide:0,mouseDrag:!0,disableIfOneSlide:!0,cssPrefix:"peppermint-",dots:!1,dotsPrepend:!1,dotsContainer:void 0,slidesContainer:void 0,onSlideChange:void 0,onSetup:void 0};t&&n(I,t);var P={inactive:I.cssPrefix+"inactive",active:I.cssPrefix+"active",mouse:I.cssPrefix+"mouse",drag:I.cssPrefix+"drag",slides:I.cssPrefix+"slides",dots:I.cssPrefix+"dots",activeDot:I.cssPrefix+"active-dot",mouseClicked:I.cssPrefix+"mouse-clicked"},B={transforms:o("transform"),transitions:o("transition")};return y(),{slideTo:function(e,t){return s(parseInt(e,10),t)},next:A,prev:m,start:f,stop:h,pause:_,getCurrentPos:function(){return x},getSlidesNumber:function(){return b},recalcWidth:v}}window.jQuery&&!function(e){e.fn.Peppermint=function(t){return this.each(function(){e(this).data("Peppermint",n(this,t))}),this}}(window.jQuery);function i(e,t){function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e,t,n,i){return t?(e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n),{remove:function(){o(e,t,n,i)}}):void 0}function o(e,t,n,i){t&&(e.removeEventListener?e.removeEventListener(t,n,!!i):e.detachEvent("on"+t,n))}function r(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function a(e){if(h={x:(f?e.clientX:e.touches[0].clientX)-_.x,y:(f?e.clientY:e.touches[0].clientY)-_.y,time:Number(new Date)-_.time},h.time-g[g.length-1].time){for(var t=0;t<g.length-1&&h.time-g[t].time>80;t++);v={x:(h.x-g[t].x)/(h.time-g[t].time),y:(h.y-g[t].y)/(h.time-g[t].time)},g.length>=5&&g.shift(),g.push({x:h.x,y:h.y,time:h.time})}}function s(e,t){y=!0,f=t,C[f](e)||(i(document,S[f][1],l),i(document,S[f][2],c),i(document,S[f][3],c),A.preventDefault&&f&&r(e),_={x:f?e.clientX:e.touches[0].clientX,y:f?e.clientY:e.touches[0].clientY,time:Number(new Date)},m=void 0,h={x:0,y:0,time:0},v={x:0,y:0},g=[{x:0,y:0,time:0}],A.start(e,_))}function l(e){!A.preventScroll&&m||C[f](e)||(a(e),(Math.abs(h.x)>A.clickTolerance||Math.abs(h.y)>A.clickTolerance)&&(y=!1),void 0===m&&3!==f&&(m=Math.abs(h.x)<Math.abs(h.y)&&!A.preventScroll)||(A.preventDefault&&r(e),A.move(e,_,h,v)))}function c(e){f&&a(e),!y&&e.target&&e.target.blur&&e.target.blur(),o(document,S[f][1],l),o(document,S[f][2],c),o(document,S[f][3],c),A.end(e,_,h,v)}function u(){w.push(i(e,S[b][0],function(e){s(e,b)})),w.push(i(e,"dragstart",r)),A.mouse&&!b&&w.push(i(e,S[3][0],function(e){s(e,3)})),w.push(i(e,"click",function(e){y?A.click(e):r(e)}))}var d=function(){},A={preventDefault:!0,clickTolerance:0,preventScroll:!1,mouse:!0,start:d,move:d,end:d,click:d};t&&n(A,t);var m,f,p={pointerEvents:!!window.navigator.pointerEnabled,msPointerEvents:!!window.navigator.msPointerEnabled},_={},h={},v={},g=[],w=[],y=!0,b=p.pointerEvents?1:p.msPointerEvents?2:0,S=[["touchstart","touchmove","touchend","touchcancel"],["pointerdown","pointermove","pointerup","pointercancel"],["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],["mousedown","mousemove","mouseup",!1]],C=[function(e){return e.touches&&e.touches.length>1||e.scale&&1!==e.scale},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!A.mouse&&"touch"!==e.pointerType&&"pen"!==e.pointerType},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!A.mouse&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&e.pointerType!==e.MSPOINTER_TYPE_PEN},function(e){return e.buttons&&1!==e.buttons}];return u(),{getClicksAllowed:function(){return y},kill:function(){for(var e=w.length-1;e>=0;e--)w[e].remove()}}}window.Peppermint=n,window.EventBurrito=i,t["default"]=n},"./static/js/mobile/modules/lib/Url.js":function(){var e=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();window.Url={make:t};function t(t,o){var r=need("nav");if(!o)return t;var a=t.split("?"),s=e(a,2),l=s[0],c=s[1],u={},d=[];return c&&c.split("&").map(function(t){var n=t.split("="),i=e(n,2),r=i[0],a=i[1];r in o||(o[r]=a)}),Object.keys(o).forEach(function(e){var t=o[e];t===!0&&(t=r.getQuery(e)),(n(t)||i(t))&&(u[e]=t)}),Object.keys(u).forEach(function(e){d.push(e+"="+encodeURIComponent(u[e]))}),0===d.length?l:l+"?"+d.join("&")}function n(e){return"string"==typeof e&&e}function i(e){return"number"==typeof e&&!isNaN(e)}},"./static/js/mobile/modules/lib/befall.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(){var e=[],t=o.bind(e);return t.off=r.bind(e),t._fns=e,t}function i(){var e={};return function(t){return e[t]||(e[t]=n())}}function o(){var e=this,t=arguments,n=t[0];if("function"!=typeof n){for(var i=e.length,o=!1,r=0;i>r;r++)e[r].apply(null,t)===!0&&(o=!0);return o}Array.prototype.slice.call(t).forEach(function(t){return e.push(t)})}function r(e){var t=this;e?a(t,e):t.length=0}function a(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}}n.kind=i,window.befall=n,t["default"]=n},"./static/js/mobile/modules/lib/bem.js":function(){need("isObject");window.bem={"class":e,setMod:t};function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[e];return Object.keys(t).forEach(function(o){if(n(o)){var r=t[o];r===!0?i.push(e+"_"+o):n(r)&&i.push(e+"_"+o+"_"+r)}}),i.join(" ")}function t(e,t,i){var o=new RegExp("\\s*"+t+"(_[-a-zA-Z]+)?"),r=void 0;r=i===!0?" "+t:n(i)?" "+t+"_"+i:"",o.test(e.className)?e.className=e.className.replace(o,r):e.className+=r}function n(e){return"number"==typeof e||"string"==typeof e&&e}},"./static/js/mobile/modules/lib/device_keyboard.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=p,t.onClose=_,n("./static/js/mobile/modules/browser.js");var i=45,o=85,r=200,a=60,s=0,l=!1,c=void 0,u=void 0,d=void 0,A=void 0,m=void 0,f=void 0;function p(){l||(l=!0,c=!1,d=0,A=0,requestAnimationFrame(function(){requestAnimationFrame(function(){var e=document.body;if(m=e.offsetHeight,f=e.offsetWidth,(browser.iphone||browser.ipod)&&browser.ios>7){if(f>m)return;window.addEventListener("scroll",h),g(),v()}else browser.ipad&&scrollTo(0,m)})}))}function _(){l&&(l=!1,c=!1,m=0,f=0,window.removeEventListener("scroll",h))}function h(){var e=pageYOffset;if(g(),c){c=!1;var t=void 0;if(t=s?w(s):m,e===t)return}e>r?e>s?(s=e,browser.safari&&!browser.wkwebview&&requestAnimationFrame(v)):s>e&&requestAnimationFrame(v):s||(a>e&&(d===e?A++:(d=e,A=1),A>=3&&(window.removeEventListener("scroll",h),s=d)),requestAnimationFrame(v))}function v(){c=!0;var e=void 0;e=s?w(s):m,document.body.scrollTop=e}function g(){u&&clearTimeout(u),u=setTimeout(function(){u=null,window.removeEventListener("scroll",h)},500)}function w(e){return browser.ios&&browser.safari&&!browser.wkwebview&&(e-=375===screen.width&&812===screen.height&&3===window.devicePixelRatio?o:i),e}},"./static/js/mobile/modules/lib/dollarselector.js":function(){window.$=document.querySelector.bind(document),window.$$=document.querySelectorAll.bind(document),HTMLElement.prototype.$=HTMLElement.prototype.querySelector,HTMLElement.prototype.$$=HTMLElement.prototype.querySelectorAll},"./static/js/mobile/modules/lib/helpers/ajax.js":function(){function e(e,t,n,i){n||(n=function(){}),t._ajax=1;var o=nav.getQuery("community");return o&&!t.community&&(t.community=o),ajax.post(e,t,{onDone:n,onFail:i})}window.ajaxRequest=e},"./static/js/mobile/modules/lib/helpers/array.js":function(){Object.assign(window,{arrayRemove:e,arrayIntersects:t});function e(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}}function t(e,t){return e.some(function(e){return-1!==t.indexOf(e)})}},"./static/js/mobile/modules/lib/helpers/base.js":function(){Object.assign(window,{asc:e,desc:t,unique:n,first:i,last:o,toInt:r,toArray:a,groupBy:s});function e(e,t){return e-t}function t(e,t){return t-e}function n(e,t,n){return n.indexOf(e)===t}function i(e,t){return 1===arguments.length?e[0]:t.slice(0,e)}function o(e,t){return 1===arguments.length?e[e.length-1]:t.slice(-e)}function r(e){return parseInt(e,10)}function a(e){return"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(t){return e[t]}):Array.isArray(e)?e:[e]}function s(e,t){var n={};return e.forEach(function(e){var i=t(e);(n[i]||(n[i]=[])).push(e)}),n}},"./static/js/mobile/modules/lib/helpers/dom.js":function(){Object.assign(window,{domInsert:e});function e(e,n,i){var o="string"==typeof n?t(n):n;i>=0&&e.children[i]?e.insertBefore(o,e.children[i]):e.appendChild(o)}function t(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]}},"./static/js/mobile/modules/lib/q/q.attr.js":function(){Object.assign(q,{attr:e,onBlur:t("onblur"),onClick:t("onclick"),onFocus:t("onfocus"),onInput:t("oninput"),onKeyDown:t("onkeydown"),onKeyPress:t("onkeypress"),onKeyUp:t("onkeyup"),onMouseDown:t("onmousedown"),onMouseUp:t("onmouseup"),onScroll:t("onscroll"),onSubmit:t("onsubmit"),onTouchEnd:t("ontouchend"),onTouchMove:t("ontouchmove"),onTouchStart:t("ontouchstart"),onWheel:t("onwheel"),onChange:t("onchange")});function e(e,t){return e+'="'+t+'"'}function t(t){return function(){for(var i=arguments.length,o=Array(i),r=0;i>r;r++)o[r]=arguments[r];return e(t,n(o))}}function n(e){var t=e[0],n=e.slice(1).map(i).join(", ");return t+"("+n+")"}function i(e){return"number"==typeof e||"event"===e||"this"===e?e:o(JSON.stringify(e))}function o(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},"./static/js/mobile/modules/lib/q/q.class.js":function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.assign(q,{"class":t,parseClass:i});function t(){for(var e=[],t=null,i=arguments.length,o=Array(i),r=0;i>r;r++)o[r]=arguments[r];return o.forEach(function(i){"string"==typeof i?(e.push(i),t=i):i&&(e=e.concat(n(t,i)))}),e.join(" ")}function n(t,n){var i=[];return"string"==typeof n&&(n=e({},n,!0)),Object.keys(n).forEach(function(e){var o=n[e];o===!0?i.push(t+"_"+e):o&&i.push(t+"_"+e+"_"+o)}),i}function i(e,t){var n={};return t.trim().split(/\s+/).forEach(function(t){if(t!==e){var i=t.replace(e+"_","").split("_");n[i[0]]=i.length>1?i[1]:!0}}),n}},"./static/js/mobile/modules/lib/q/q.html.js":function(){Object.assign(q,{html:e});function e(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];var o="";return e.forEach(function(e,t){var i=n[t];o+=e+(i||0===i?i:"")}),o}},"./static/js/mobile/modules/lib/q/q.js":function(){window.q={}},"./static/js/mobile/modules/lib/q/q.list.js":function(){Object.assign(q,{list:e});function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(e)||(e=[e]),t?e.map(t).join(""):e.join("")}},"./static/js/mobile/modules/lib/utils.js":function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.urlBase64ToUint8Array=urlBase64ToUint8Array;var _select=__webpack_require__("./node_modules/select/src/select.js"),_select2=_interopRequireDefault(_select);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function need(e){var t=safeGet(window,e);if("undefined"==typeof t)throw"Unable to get `window."+e+"`";return t}function setDocumentDomain(){var e=(document.domain||"").match(/(m\.)?([a-zA-Z]+\.[a-zA-Z]+\.?)$/);window.locDomain="https:"==location.protocol?e[2]:e[0];var t=navigator.userAgent.toLowerCase();(/opera/i.test(t)||!/msie 6/i.test(t)||document.domain!=window.locDomain)&&(document.domain=window.locDomain)}function rand(e,t){return Math.random()*(t-e+1)+e}function isUndefined(e){return"undefined"==typeof e}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)}function isString(e){return"string"==typeof e}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isEmpty(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function escapeRE(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""}function htsc(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;")}function escapeAttr(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;")}function unescapeAttr(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}function replaceEntities(e){return ce("textarea",{innerHTML:(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}).value}function escapeStr(e){return e.replace(/\'/g,"\\'")}function stripTags(e){return e.replace(/<[^>]+>/g,"")}function srand(){return Math.random().toString(36).substr(2)}function utf2win(e){return unescape(encodeURIComponent(e))}function isHttpHref(e){var t=(e+"").split(":"),n=t[1]&&t[0]?t[0]+":":location.protocol;return"http:"==n||"https:"==n}function vkNow(){return+new Date}function bind(){var e=Array.prototype.slice.call(arguments),t=e.shift(),n=e.shift();return function(){var i=Array.prototype.slice.call(arguments);return t.apply(n,e.concat(i))}}function intval(e){return e===!0?1:parseInt(e)||0}function floatval(e){return e===!0?1:parseFloat(e)||0}function qs2obj(e){if(!e)return{};for(var t={},n=e.toString().split("&"),i=0,o=n.length;o>i;i++){var r=n[i].split("=");r[0]&&(t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||""))}return t}function obj2qs(e){if(!e)return"";var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n].toString()||""));return t.length?"?"+t.join("&"):""}function parseJSON(obj){try{return JSON.parse(obj)}catch(e){return eval("("+obj+")")}}function lsCheck(){return void 0!==window.localStorage&&null!==window.localStorage&&void 0!==window.JSON}function lsSet(e,t){if("undefined"!=typeof t)try{return localStorage.setItem(e,JSON.stringify(t))}catch(n){}else try{return localStorage.removeItem(e)}catch(n){}return!1}function lsGet(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){}return!1}function ssCheck(){return void 0!==window.sessionStorage&&void 0!==window.JSON}function ssSet(e,t){if("undefined"!=typeof t)try{return sessionStorage.setItem(e,JSON.stringify(t))}catch(n){}else try{return sessionStorage.removeItem(e)}catch(n){}return!1}function ssGet(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(t){}return!1}function getValues(e){if(!isArray(e))return e.call?e():e;for(var t=[],n=0,i=e.length;i>n;n++)t.push(getValues(e[n]));return t}function len(e){if(isArray(e))return e.length;if(isObject(e)){var t=0;for(var n in e)t++;return t}return 0}function realSubstr(e,t){return e=e||"",e.length>t&&(e=e.substr(0,t-3),e=e.replace(/&[^;]{0,6}$/,""),e=e.replace(/<[^>]*$/,""),e=e.replace(/(\s|<br\s*\/?>)+$/,""),e+=".."),e}function hashCode(e){var t=0;if(0===e.length)return t;for(var n=0,i=e.length;i>n;n++){var o=e.charCodeAt(n);t=(t<<5)-t+o,t|=0}return t}function formatNum(e){if(!window.langConfig)return e;for(var t=e.toString().split("."),n=[],i=t[0].length-3;i>-3;i-=3)n.unshift(t[0].slice(i>0?i:0,i+3));return t[0]=n.join(window.langConfig.numDel),e=t.join(window.langConfig.numDec)}!function(){var e=vkNow();window.clog=function(){var t=window,n=t.vk;if(n.__debug)try{if(window.console&&console.log){var i=Array.prototype.slice.call(arguments);i.unshift("["+(vkNow()-e)/1e3+"] ");var o=window,r=o.browser;r.msie||r.mobile&&!r.safari_mobile?console.log(i.join(" ")):console.log.apply(console,i)}}catch(a){}}}();function each(e,t){if(!e)return e;if(isObject(e)||"undefined"==typeof e.length){for(var n in e)if(e.hasOwnProperty(n)&&t.call(e[n],n,e[n])===!1)break}else for(var i=0,o=e.length;o>i&&t.call(e[i],i,e[i])!==!1;i++);return e}function copy(e){return isArray(e)?e.concat([]):isObject(e)?extend({},e):e}var rf=function(){return!1},registeredEvents=[];function addEvent(e,t,n){if(e=ge(e),n=n||rf,e&&3!=e.nodeType&&8!=e.nodeType){e.setInterval&&e!=window&&(e=window);for(var t=t.split(" "),i=0,o=t.length;o>i;i++){var r=t[i];e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent("on"+r,n),registeredEvents.push([e,r,n])}}}function removeEvent(e,t,n){if(e=ge(e),n=n||rf,e&&3!=e.nodeType&&8!=e.nodeType)for(var t=t.split(" "),i=0,o=t.length;o>i;i++){var r=t[i];e.removeEventListener?e.removeEventListener(r,n,!1):e.detachEvent&&e.detachEvent("on"+r,n)}}function preventEvent(e){return(e=e||window.event)?(e=e.originalEvent||e,e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1):!1}function stopEvent(e){return(e=e||window.event)?(e=e.originalEvent||e,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1):!1}function cancelEvent(e){return(e=e||window.event)?(e=e.originalEvent||e,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1):!1}function checkEvent(e){var t=window,n=t.PointerEvent;return!(!(e=e||window.event)||n&&e instanceof n||"click"!=e.type&&"mousedown"!=e.type&&"mouseup"!=e.type||!(e.which>1||e.button>1||e.ctrlKey||e.shiftKey||e.metaKey))}function onCtrlEnter(e,t,n){var i=window,o=i.browser;if(t=t||window.event,10==t.keyCode||13==t.keyCode&&(t.ctrlKey||t.metaKey&&o.mac)){if(isUndefined(n)){var r=submitBtn(e);r&&r.click()}else n.call(e);cancelEvent(t)}}function submitBtn(e){if(!e)return!1;var t="form"==tag(e)?e:e.form||gpeByTag("form",e);if(!t)return!1;for(var n in t){var i=t[n];if("input"==tag(i)&&"submit"==i.type&&/(^|\\s)(small_)?button(\\s|$)/i.test(i.className)&&!i.name)return i}return!1}function createIframe(e,t){e=extend(e||{},{border:"0"}),t=extend(t||{},{position:"absolute",width:1,height:1,left:10});var n=ce("iframe",e,t);return append(n,"vk_utils"),n}function winToUtf(e){return e.replace(/&#(\d\d+);/g,function(e,t){return t=intval(t),t>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function shortCurrency(){var e={};each(geByClass("_short_currency"),function(){var t=this.getAttribute("data-short")||"",n=winToUtf(t).length,i=getStyle(this,"fontFamily")||"tahoma,arial,sans-serif";if(!t)return!0;if(isUndefined(e[i])){for(var o="",r=n-1;r>=0;r--)o+="&#8399;";var a=ce("div",{innerHTML:"<b>"+t+"</b><b>"+o+"</b>"},{fontFamily:i,fontSize:"24px"});ge("vk_utils").appendChild(a),e[i]=Math.abs(a.firstChild.offsetWidth-a.lastChild.offsetWidth)>=2*n,remove(a)}e[i]&&val(this,t)})}function checkNav(e,t){if(e=ge(e),!e)return!1;do if(checkElementNav(e,t))return e;while(e=e.parentNode);return!1}function checkElementNav(e,t){var n=window,i=n.al;if(!i||!i.ver)return!1;if(!e)return!1;if(t=t||{},"a"==tag(e)){if((t.skip_onclick||!e.getAttribute("onclick"))&&(e.getAttribute("href")||e.getAttribute("data-href"))||hasClass("al_nav",e)){if(e.hostname)var o=e.hostname;else var r=e.href||attr(e,"data-href"),o=(/^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(r)||[])[2];if("_blank"===e.target&&t.skip_blank||t.skip_clicable)return!0;if("_blank"!==e.target&&isHttpHref(r)){if(!o||o==location.hostname)return!0;if(t.allow_post_away&&o&&e.getAttribute("data-post-id")&&e.getAttribute("data-post-click-type"))return e.setAttribute("data-change-location-with-post-away",1),!0}}}else if("input"==tag(e)||"button"===tag(e)&&e.form&&!e.form.getAttribute("onsubmit")){if(e.form&&("submit"==e.type||"image"==e.type)&&(t.skip_onclick||!e.getAttribute("onclick"))||hasClass("al_nav",e))return!0}else if("label"==tag(e)&&t.skip_clicable&&(e.htmlFor||geByTag1("input",e)&&(t.skip_onclick||!e.getAttribute("onclick"))||hasClass("al_nav",e)))return!0;return!1}function checkTouchHover(e){if(e=ge(e),!e)return!1;do{if("a"==tag(e)||hasClass("al_photo",e))return e;if("label"==tag(e)&&hasClass("option_row",e))return e;if(hasClass("_touched",e))return e}while(e=e.parentNode);return!1}function trim(e){return(e||"").trim()}function parseCyr(e,t){for(var n=e,i=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],o=["\u0451","\u0436","\u0445","\u0446","\u0447","\u0449","\u0449","\u0448","\u044d","\u044e","\u044f","\u0401","\u0416","\u0425","\u0426","\u0427","\u0429","\u0429","\u0428","\u042d","\u042e","\u042f","\u044c"],r=0,a=i.length;a>r;r++)n=t?n.split(i[r]).join(o[r]):n.split(o[r]).join(i[r]);for(var s="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY\u0451\u0401",l="\u0430\u0431\u0432\u0433\u0434\u0435\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u044b\u0410\u0411\u0412\u0413\u0414\u0415\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u042b\u0435\u0415",r=0,a=s.length;a>r;r++)n=t?n.split(s.charAt(r)).join(l.charAt(r)):n.split(l.charAt(r)).join(s.charAt(r));return n==e?null:n}function parseLat(e){return parseCyr(e,!0)}function parseRusKeys(e,t,n){if(!t)return null;for(var i=e,o="qwertyuiop[]asdfghjkl;'zxcvbnm,./`QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>?~",r="\u0439\u0446\u0443\u043a\u0435\u043d\u0433\u0448\u0449\u0437\u0445\u044a\u0444\u044b\u0432\u0430\u043f\u0440\u043e\u043b\u0434\u0436\u044d\u044f\u0447\u0441\u043c\u0438\u0442\u044c\u0431\u044e.\u0451\u0419\u0426\u0423\u041a\u0415\u041d\u0413\u0428\u0429\u0417\u0425\u042a\u0424\u042b\u0412\u0410\u041f\u0420\u041e\u041b\u0414\u0416\u042d\u042f\u0427\u0421\u041c\u0418\u0422\u042c\u0411\u042e,\u0401",a=0,s=o.length;s>a;a++)i=n?i.split(o.charAt(a)).join(r.charAt(a)):i.split(r.charAt(a)).join(o.charAt(a));return i==e?null:i}function parseLatKeys(e,t){return parseRusKeys(e,t,!0)}function scrollLeft(){var e=window,t=e.htmlNode,n=e.bodyNode;return t.scrollLeft||n.scrollLeft||window.scrollX||0}function scrollTop(e,t){var n=window,i=n.htmlNode,o=n.bodyNode;return"undefined"==typeof e?i.scrollTop||o.scrollTop||window.scrollY||0:void(t?setTimeout(function(){window.scrollTo(0,Math.max(0,e))},t):window.scrollTo(0,Math.max(0,e)))}function se(){var e=[],t=Array.prototype.slice.call(arguments);return function(n,i){if(n)if(n.apply)e.push(n);else if("__clear"===n)if(i){for(var o=0,r=e.length;r>o;o++)if(e[o]===i){e.splice(o,1);break}}else e=[];else{var a=Array.prototype.slice.call(arguments);a.shift();for(var s=0,r=e.length;r>s;s++)e[s].apply(window,getValues(t).concat(a))}}}function onBodyScrollForce(e){var t=window,n=t.onBodyScroll,i=t.onDOMReady;e?setTimeout(function(){n(!0)},e):i(function(){n(!0)})}function sgFix(){var e=window,t=e._ua,n=e.ajax,i=e.page,o=e.clog;if(/galaxy|gt\-/i.test(t)){window.vkSGi=0,window.vkAjax=n,window.vkPage=i;function r(){return++window.vkSGi>25?void delete window.vkSGi:n!==window.vkAjax||i!==window.vkPage?(n=window.vkAjax,i=window.vkPage,o("SG fixed"),void delete window.vkSGi):void setTimeout(r,200)}r()}}function hideUnvisibleItems(e){var t=window,n=t.cur;if(n.alHiddenObjects){var i=getValues(n.alHiddenObjects);if(i){e=e||{};var o=e.delta||3*getCh(),r=scrollTop(),a=r+getCh(),s=r-o,l=a+o,c=[],u=[],d=null,A=null;if(each(i,function(e,t){var n=gpeByClass("ali_wrap",t);if(!n)return!0;var i=n.offsetHeight,o=getY(n),r=o+i,a=isVisible(t);s>r||o>l?a&&c.push([n,t,i]):a?d||(d=n,A=o):u.push([n,t])}),each(u,function(e,t){var n=t[0],i=t[1];setStyle(n,"height","auto"),show(i)}),each(c,function(e,t){var n=t[0],i=t[1],o=t[2];setStyle(n,"height",o),hide(i)}),d&&A){var m=getY(d);m!=A&&scrollTop(r+(m-A))}}}}function initObjectsHideByScroll(e,t){var n=window,i=n.cur,o=n.onBodyScroll,r=n.onDOMReady;i&&e&&(i.alHiddenObjects=e,o(function(){hideUnvisibleItems(t)}),r(function(){hideUnvisibleItems(t)}))}function checkPostsSeen(){var e=window,t=e.cur,n=e.pStats;if(t&&t.alPostsStatsObjects){var i=getValues(t.alPostsStatsObjects);if(i){var o=scrollTop(),r=o+getCh(),a=[];each(i,function(e,t){if(attr(t,"data-ignore"))return!0;var i=getY(t),s=i+t.offsetHeight,l=(isVisible(t),attr(t,"data-clicked")),c=t.bits||0;return c>=3?!0:o>s||i>r?!0:(c|=i>=o&&r>i||l?1:0,c|=s>=o&&r>s||l?2:0,void(c&&(t.bits=c,3==c&&(a.push(n.postsGetRaws(t)),n.viewed(t)))))}),n.seen(a)}}}function initPostsStats(e){var t=window,n=t.cur,i=t.onBodyScroll,o=t.onDOMReady;n&&e&&(n.alPostsStatsObjects=e,i(function(){checkPostsSeen()}),o(function(){checkPostsSeen()}))}function initAutoScroll(e,t,n){var i=window,o=i.onBodyScroll;if(e&&t){n=n||{};var r=n.delta||!1;o(function(n){var i=getValues(e);if(i){var o=getY(i),a=getCh(),s=o-n-a;o>0&&(r||2*a)>s&&t.call(i)}})}}function autoScroll(e,t,n){var i=window,o=i.ajax;n=n||{};var r=getValues(e),a=ge("show_more_loading"),s=n.no_cache||!1,l=function(){o.click(this,t,{use_cache:!s})};!r&&a&&l.call(a),initAutoScroll(e,l,n),n.hide_objects&&initObjectsHideByScroll(n.hide_objects)}function scrollToEl(e,t,n){e=ge(e)||window,t=t||0;var i=(e===window?1:getY(e))-t;scrollTop(i,n)}function scrollToHash(e){var t=window,n=t.nav;if(e=e||n.hash||location.hash,"#"===e[0]&&(e=e.substr(1)),e){var i=geBySel("a[name]");i===!1&&(i=geByTag("a")),each(i,function(t,n){return n.name==e?(scrollToEl(n),!1):void 0})}}function lockButton(e){var t=ge(e);if(/(^|\s)(small_)?button(\s|$)/i.test(t.className)){var n=ce("button",{id:t.id,className:t.className,innerHTML:'<span class="button_locked"><b class="button_locked_label">'+htsc(val(t))+"</b></span>",onclick:function(e){return cancelEvent(e)},real_btn:t});t.fake_btn=n,before(n,t),remove(t)}}function unlockButton(e){var t=ge(e);t.real_btn?(before(t.real_btn,t),remove(t),t.real_btn.fake_btn=null,t.real_btn=null):t.fake_btn&&(before(t,t.fake_btn),remove(t.fake_btn),t.fake_btn.real_btn=null,t.fake_btn=null)}function extend(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(!e.length)return t;for(var n=0,i=e.length;i>n;n++)for(var o in e[n])"layerX"!=o&&"layerY"!=o&&(t[o]=e[n][o]);return t}function ge(e){return"string"==typeof e?document.getElementById(e):e}function geByClass(e,t,n){if(t=ge(t)||document,n=n||"*",t.getElementsByClassName){var i=t.getElementsByClassName(e);if("*"==n)return Array.prototype.slice.call(i);var o=[];n=n.toUpperCase();for(var r=0,a=i.length;a>r;r++)i[r].tagName.toUpperCase()==n&&o.push(i[r]);return o}for(var i=geByTag(n,t),o=[],s=new RegExp("(^|\\s)"+escapeRE(e)+"(\\s|$)"),r=0,a=i.length;a>r;r++)s.test(i[r].className)&&o.push(i[r]);return o}function geByClass1(e,t,n){return geByClass(e,t,n)[0]}function gpeByClass(e,t){if(t=ge(t),!t)return null;for(;t=t.parentNode;)if(hasClass(e,t))return t;return null}function geByTag(e,t){return(ge(t)||document).getElementsByTagName(e)}function geByTag1(e,t){return geByTag(e,t)[0]}function gpeByTag(e,t){if(t=ge(t),!t)return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()==e)return t;return null}function geBySel(e,t){return t=ge(t)||document,t.querySelectorAll?t.querySelectorAll(e):!1}function geBySel1(e,t){return t=ge(t)||document,t.querySelector?t.querySelector(e):!1}function append(e,t){return e=ge(e),t=ge(t),e&&t&&t.appendChild(e)||!1}function before(e,t){return t=ge(t),t&&t.parentNode&&t.parentNode.insertBefore(ge(e),t)||!1}function after(e,t){return t=ge(t),t&&t.parentNode&&t.parentNode.insertBefore(ge(e),t.nextSibling)||!1}function replace(e,t){before(e,t)&&remove(t)}function remove(e){return e=ge(e),e&&e.parentNode?e.parentNode.removeChild(e):!1}function clone(e){return e=ge(e),e?e.cloneNode(!0):!1}function reflow(e){e=ge(e);try{{e.offsetWidth+e.offsetHeight}}catch(t){}}function tag(e){return e=ge(e),(e&&e.tagName||"").toLowerCase()}function outer(e){return e=ge(e),e?val(ce("div").appendChild(clone(e)).parentNode):""}function show(e){var t=ge(e);t&&(t.style.display=t.oldstyle||(hasClass("_ib",t)?"inline-block":hasClass("_i",t)||"span"==tag(t)?"inline":"block"))}function hide(e){var t=ge(e);t&&("none"!=t.style.display&&(t.oldstyle=t.style.display),t.style.display="none")}function isVisible(e){var t=ge(e);return t&&t.style?"none"!=t.style.display:!1}function toggle(e,t){"undefined"==typeof t&&(t=!isVisible(e)),t&&isVisible(e)||(t||isVisible(e))&&(t?show:hide)(e)}function ce(e,t,n){var i=document.createElement(e);return t&&extend(i,t),n&&setStyle(i,n),i}function elfocus(e,t,n){e=ge(e);try{if(e.focus(),("undefined"==typeof t||t===!1)&&(t=e.value.length),("undefined"==typeof n||n===!1)&&(n=t),e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",n),i.select()}else e.setSelectionRange&&e.setSelectionRange(t,n)}catch(o){}}function elblur(e){e=ge(e),e&&e.blur&&e.blur()}function val(e,t){if(e=ge(e),!e)return"";var n=e.tagName.toLowerCase(),i="input"==n||"textarea"==n||"select"==n,o=i&&("radio"==e.type||"checkbox"==e.type);if("undefined"==typeof t)return i?o?e.checked:e.value:e.innerHTML;if(i)o?e.checked=t:e.value=t;else{e.innerHTML=t;var r=window,a=r.ajax;"a"!=n&&(a.prepare_nav(e),a.prepare_click(e),a.onPrepared(!0,e))}}function attr(e,t,n){return(e=ge(e))?"undefined"==typeof n?"data-"==t.substr(0,5)&&e.dataset?e.dataset[t.substr(5).replace(/-([a-z0-9])/,function(e,t){return t.toUpperCase()})]||!1:e.getAttribute&&e.getAttribute(t)||!1:n===!1?e.removeAttribute&&e.removeAttribute(t)||!1:void(e.setAttribute&&e.setAttribute(t,n)):void 0}function cssToJs(e,t){return t?t+(e||"").replace(/(?:^|-)([a-z])/g,function(e,t){return(t||"").toUpperCase()}):(e||"").replace(/-([a-z])/g,function(e,t){return(t||"").toUpperCase()})}function getCssPropertyName(e,t,n){e=ge(e)||ce("div");for(var i=["webkit","Moz","ms","O",""],o=["-webkit-","-moz-","-ms-","-o-",""],r=0,a=i.length;a>r;r++){var s=i[r],l=cssToJs(t,s);if("undefined"!=typeof e.style[l])return n?o[r]+t:l}return!1}function cssValue(e,t){if("number"==typeof e){var n=1e7;e=Math.round(e*n)/n+(t||"")}return e}function getStyle(e,t,n){if(e=ge(e),!e)return!1;if(isArray(t)){var i={};return each(t,function(t,n){i[n]=getStyle(e,n)}),i}if(isUndefined(n)&&(n=!0),/transform(-origin)?|transition(-duration)?/i.test(t)&&(t=getCssPropertyName(e,t),!t))return!1;var o=window,r=o.browser;if(!n&&"opacity"==t&&r.msie){var a=e.style.filter;return a?a.indexOf("opacity=")>=0?parseFloat(a.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!n&&e.style&&(e.style[t]||"height"==t))return e.style[t];var s,l=document.defaultView||window;if(l.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var c=l.getComputedStyle(e,null);c&&(s=c.getPropertyValue(t))}else if(e.currentStyle){if("opacity"==t&&r.msie){var a=e.currentStyle.filter;return a&&a.indexOf("opacity=")>=0?parseFloat(a.match(/opacity=([^)]*)/)[1])/100+"":"1"}var u=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});s=e.currentStyle[t]||e.currentStyle[u],"auto"==s&&(s=0),s=(s+"").split(" "),each(s,function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var i=e.style,o=i.left,r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left=n||0,s[t]=i.pixelLeft+"px",i.left=o,e.runtimeStyle.left=r}}),s=s.join(" ")}if(n&&("width"==t||"height"==t)){var d="width"==t?getW(e):getH(e);s=(intval(s)?Math.max(floatval(s),d):d)+"px"}return s}extend(getStyle,{transform:function(e){var t,n=getStyle(e,"transform");return n?{scale:(t=n.match(/(^|\s+)scale\(([0-9.]+)\)(\s+|$)/))&&t[2]||1,scale3d:(t=n.match(/(^|\s+)scale3d\(([0-9.]+,\s+([0-9.]+),\s+([0-9.]+))\)(\s+|$)/))&&t[2]||1,rotate:(t=n.match(/(^|\s+)rotate\(([0-9.-]+)(deg)?\)(\s+|$)/))&&+t[2]||0,translate:(t=n.match(/(^|\s+)translate\(([0-9.-]+)(px)?(?:,\s+([0-9.-]+)(px)?)\)(\s+|$)/))&&[+t[2],+t[4]]||[0,0],translate3d:(t=n.match(/(^|\s+)translate3d\(([0-9.-]+)(px)?(?:,\s+([0-9.-]+)(px)?)(?:,\s+([0-9.-]+)(px)?)\)(\s+|$)/))&&[+t[2],+t[4],+t[6]]||[0,0,0]}:{scale:1,rotate:0,translate:[0,0]}}});function setStyle(e,t,n){if(e=ge(e),e&&e.style){if(isObject(t))return each(t,function(t,n){setStyle(e,t,n)});var i="number"==typeof n;i&&/height|width/i.test(t)&&(n=Math.abs(n)),(!/transform(-origin)?|transition(-duration)?/i.test(t)||(t=getCssPropertyName(e,t)))&&(e.style[t]=i&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n)}}extend(setStyle,{animate:function(e,t,n,i){var o=getCssPropertyName(e,"transition");if(o){if(!t)return e.onAnimationEnd?e.onAnimationEnd():setStyle.transition(e),setStyle;var r=isObject(n),a=(r?n.duration:n)||200,s=n.func||"ease";setStyle.transition(e,t,a,s);var l=window,c=l.browser;e.onAnimationEnd&&(c.opera?e.removeEventListener("oTransitionEnd",e.onAnimationEnd):removeEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd)),e.onAnimationEnd=function(){return c.opera?e.removeEventListener("oTransitionEnd",e.onAnimationEnd):removeEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd),e.onAnimationEnd=null,setStyle.transition(e),i&&i(e),!1},c.opera?e.addEventListener("oTransitionEnd",e.onAnimationEnd):addEvent(e,"transitionend webkitTransitionEnd oTransitionEnd otransitionend msTransitionEnd",e.onAnimationEnd)}return setStyle},transform:function(e,t,n,i){var o=window,r=o.has3d,a=[];if(isObject(t)){r&&(t.scale3d=t.scale,t.translate3d=t.translate);var s=extend(getStyle.transform(e),t);t=r?s.scale3d:s.scale,i=s.rotate,n=r?s.translate3d:s.translate}return isArray(t)?a.push(r?"scale3d("+cssValue(t[0])+", "+cssValue(t[1])+", 1)":"scale("+cssValue(t[0])+", "+cssValue(t[1])+")"):"undefined"!=typeof t&&a.push(r?"scale3d("+cssValue(t)+", "+cssValue(t)+", 1)":"scale("+cssValue(t)+")"),"undefined"!=typeof i&&a.push("rotate("+cssValue(i,"deg")+")"),"undefined"!=typeof n&&a.push(r?"translate3d("+cssValue(n[0],"px")+", "+cssValue(n[1],"px")+", 0)":"translate("+cssValue(n[0],"px")+", "+cssValue(n[1],"px")+")"),a.length?void setStyle(e,"transform",a.join(" ")):setStyle(e,"transform","none")},transformOrigin:function(e,t,n){isArray(t)&&(n=t[1],t=t[0]),setStyle(e,"transform-origin",cssValue(t,"px")+" "+cssValue(n,"px"))},transition:function(e,t,n,i){var o=[];return t?(isArray(t)||(t=t.split(/\s*,\s*/)),n=cssValue(n,"ms"),each(t,function(){var t=getCssPropertyName(e,this,!0),r=[];t&&(r.push(t),r.push(n),i&&r.push(i),o.push(r.join(" ")))}),void setStyle(e,"transition",o.join(","))):setStyle(e,"transition","none")}});function hasClass(e,t,n){if("string"==typeof t&&"string"!=typeof e){var i=[t,e];e=i[0],t=i[1]}return(t=ge(t))?new RegExp("(^|\\s)"+(n?e:escapeRE(e))+"(\\s|$)").test(t.className):void 0}function addClass(e,t){if("string"==typeof t&&"string"!=typeof e){var n=[t,e];e=n[0],t=n[1]}(t=ge(t))&&!hasClass(e,t)&&(t.className=(t.className?t.className+" ":"")+e)}function removeClass(e,t,n){if("string"==typeof t&&"string"!=typeof e){var i=[t,e];e=i[0],t=i[1]}(t=ge(t))&&hasClass(e,t,n)&&(t.className=(t.className||"").replace(new RegExp("(^|\\s)"+(n?e:escapeRE(e))+"(\\s|$)"),function(e,t,n){return t&&n?" ":""}))}function toggleClass(e,t,n){var i="undefined"==typeof n?hasClass(e,t):!n;i?removeClass(e,t):addClass(e,t)}function replaceClass(e,t,n,i){removeClass(e,n,i),addClass(t,n)}function switchClass(e,t,n){hasClass(e,n)?replaceClass(e,t,n):replaceClass(t,e,n)}function getXY(e){if(e=ge(e),!e)return[0,0];var t=0,n=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return[t,n]}function getX(e){return getXY(e)[0]}function getY(e){var t=getXY(e)[1];return t}function getW(e){return e=ge(e),e&&e.offsetWidth||0}function getH(e){return e=ge(e),e&&e.offsetHeight||0}function getSize(e){return e=ge(e),[getW(e),getH(e)]}function getCw(){return Math.max(window.innerWidth||0,(window.htmlNode||{}).clientWidth||0)}function getCh(){return Math.max(window.innerHeight||0,(window.htmlNode||{}).clientHeight||0)}function evalJs(e){window.execScript?window.execScript(e):eval.call(window,e)}function domData(e,t,n){return e?"undefined"!=typeof n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function alLoadingFix(e,t){t=t||"al_loading";var n=ge(t);if(n){if(!e){var i=ge("m").offsetHeight||0,o=ge("mfoot")&&ge("mfoot").offsetHeight||0;e=getCh()-i+o}n.style.height=e+"px",addClass(t,n)}}function getHref(e){if(!e)return!1;var t=!1;return e.getAttribute&&(t=e.getAttribute("data-href")||e.getAttribute("href")),t||(e.pathname?t=e.pathname+e.search+e.hash:tag(e)||(t=e)),t||!1}function ajx2q(e){var t=[],n=function(e){try{return encodeURIComponent(e)}catch(t){return""}};for(var i in e)if(null!=e[i]&&!isFunction(e[i]))if(isArray(e[i]))for(var o=0,r=0,a=e[i].length;a>o;++o)null==e[i][o]||isFunction(e[i][o])||(t.push(n(i)+"["+r+"]="+n(e[i][o])),++r);else t.push(n(i)+"="+n(e[i]));return t.join("&")}function indexOf(e,t,n){for(var i=n||0,o=(e||[]).length;o>i;i++)if(e[i]==t)return i;return-1}function isToday(e){var t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function isYesterday(e){var t=new Date(e.getTime()+864e5);return isToday(t)}function isTomorrow(e){var t=new Date(e.getTime()-864e5);return isToday(t)}function isSameDate(e,t){var n=new Date(e),i=new Date(t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()&&n.getDate()===i.getDate()}function leadingZero(e){return e>=10?e:"0"+e}function langSex(e,t){if(!isArray(t))return t;var n=t[1];return window.langConfig?(each(langConfig.sexRules,function(i,o){return"*"==o[0]?(n=t[o[1]],!1):e==o[0]&&t[o[1]]?(n=t[o[1]],!1):void 0}),n):n}function langNumeric(e,t,n){var i=window,o=i.langConfig;if(!t||!o)return e;var r;if(isArray(t)?(r=t[1],e!=Math.floor(e)?r=t[o.numRules["float"]]:each(o.numRules["int"],function(n,i){if("*"==i[0])return r=t[i[2]],!1;var o=i[0]?e%i[0]:e;return-1!=indexOf(i[1],o)?(r=t[i[2]],!1):void 0})):r=t,n){for(var a=e.toString().split("."),s=[],l=a[0].length-3;l>-3;l-=3)s.unshift(a[0].slice(l>0?l:0,l+3));a[0]=s.join(o.numDel),e=a.join(o.numDec)}return r=(r||"%s").replace("%s",e)}function langWordNumeric(e,t,n){return isArray(t)&&e<t.length?t[e]:langNumeric(e,n)}function langDate(e,t,n,i,o,r){var a=window,s=a.langConfig,l=void 0;if(r||(r=""),isArray(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=n,l=new Date(e)):l=e,o)t=t[1];else{var c="";c=isToday(l)?t[3]:isYesterday(l)?t[2]:isTomorrow(l)?t[4]:t[1],!c&&t[1]&&(c=t[1]),t=c}var u="",d={hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds(),day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()};switch(3===s.id&&(u=l.getHours()>11?"pm":"am",d.hours=l.getHours()%12==0?12:l.getHours()%12),s.id){case 1:switch(l.getHours()){case 11:t=t.replace(" \u043e "," \u043e\u0431 ");break;case 0:t=t.replace(" \u043e "," \u0432 ")}break;case 3:!isToday(l)||isYesterday(l)||isTomorrow(l)||(t=r+t);break;case 12:case 73:1==l.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===s.id&&(d.year=d.year+543),t.replace("{hour}",d.hours).replace("{num_hour}",leadingZero(d.hours)).replace("{minute}",leadingZero(d.minutes)).replace("{day}",d.day).replace("{num_day}",leadingZero(d.day)).replace("{month}",i[d.month]).replace("{year}",d.year).replace("{short_year}",d.year%100).replace("{second}",leadingZero(d.seconds)).replace("{am_pm}",u)}function setNotify(e){var t=intval(e),n=ge("header_msgs"),i=geByClass1("pcont","l");if(n&&(window.isNewMail?val(n,'<div class="hb_btn mhi_notify">'+(t>0?'<em class="mh_notify_counter">'+t+"</em>":"")+"</div>"):val(n,'<div class="hb_btn mhi_notify">'+(t>0?'<em class="mh_notify_counter">'+t+"</em>":"&nbsp;")+"</div>"),t>0?removeClass("mhb_no_notify",n):addClass("mhb_no_notify",n),i)){var o=geByClass1("mmi_mail",i),r=geByClass1("mmi_wrap",o),a=geByClass1("mm_counter",r);if(!o)return;t>0?a?val(a,t):append(ce("em",{className:"mm_counter",innerHTML:t}),r):remove(a)}}function getNotify(){var e=ge("header_msgs");return e?intval(val(geByTag1("em",e))):0}function canUploadFile(){return(window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder)))}function uploadFile(e,t,n){var i=window.XDomainRequest||window.XMLHttpRequest,o=new i;o.open("POST",e,!0),o.upload.addEventListener("progress",n.onProgress||rf,!1),o.onload=n.onComplete||rf,o.onerror=n.onError||rf;var r=n.onStart||rf;if(window.FormData){var a=new FormData;for(var s in t)a.append(s,t[s]);return o.send(a),r(o),o}try{if(i&&!i.prototype.sendAsBinary&&window.ArrayBuffer&&window.Uint8Array){var l=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;l&&(i.prototype.sendAsBinary=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t,0),i=0;i<e.length;i++)n[i]=255&e.charCodeAt(i);var o=new l;o.append(t);var r=o.getBlob();this.send(r)})}var c="----VkComFormBoundary-"+srand(),u="",d=0,A=function(e,t,n){n+="--"+t+"--",e.setRequestHeader("Content-type",'multipart/form-data; boundary="'+t+'"'),e.sendAsBinary(n),r(e)};for(var s in t)if("function"==typeof t[s].getAsBinary){d++;var m=new FileReader,f=t[s],p=f.fileName||f.name||"";m.onload=function(){u+="--"+c+'\r\nContent-Disposition: form-data; name="'+utf2win(s)+'"; filename="'+utf2win(p)+'"\r\nContent-Type: application/octet-stream\r\n',0+m.result+"\r\n",d--,d||A(o,c,u)},m.readAsBinaryString(f)}else u+="--"+c+'\r\nContent-Disposition: form-data; name="'+utf2win(s)+'"\r\n\r\n'+utf2win(t[s])+"\r\n";return d||A(o,c,u),o}catch(_){return!1}return!1}function readFile(e,t){if(window.FileReader&&window.vk.iu_ex){var n=new FileReader;n.onload=function(){t&&t(n.result),n=null},n.readAsDataURL(e)}}function formatTime(e){var t,n,i,o=0>e;return e=Math.round(o?-e:e),n=e%60,t=10>n?"0"+n:n,e=Math.floor(e/60),i=e%60,t=i+":"+t,e=Math.floor(e/60),e>0&&(10>i&&(t="0"+t),t=e+":"+t),o&&(t="-"+t),t}!function(){var e=!1,t=[],n=function(){if(!e&&(e=!0,window.htmlNode=geByTag1("html"),window.bodyNode=geByTag1("body"),t)){for(var n=null;n=t.shift();)n.call(document);t=null}};function i(){document.removeEventListener("DOMContentLoaded",i,!1),n()}function o(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),n())}document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):document.attachEvent&&document.attachEvent("onreadystatechange",o),window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent?window.attachEvent("onload",n):window.onload=n;function r(n){e?n.call(document):t.push(n)}window.onDOMReady=r}(),window.cdf=function(e){var t=e.createDocumentFragment(),n=e.createElement("div"),i=e.createRange&&e.createRange();return t&&t.appendChild(n),i&&i.selectNodeContents&&i.selectNodeContents(n),t?i&&i.createContextualFragment?function(t){return t?i.createContextualFragment(t):e.createDocumentFragment()}:function(t){if(!t)return e.createDocumentFragment();n.innerHTML=t;for(var i=e.createDocumentFragment();n.firstChild;)i.appendChild(n.firstChild);return i}:function(e){return ce("div",{innerHTML:e})}}(document);function domClosestOverflowHidden(e){e=ge(e);for(var t,n,i,o,r=e;r&&r.tagName&&r!==bodyNode&&(t=getStyle(r,"position"),n=getStyle(r,"overflow"),i=getStyle(r,"transform"),r===e||"visible"===n||("static"===t?o&&"relative"!==o:"fixed"===o));)"none"!==i?o=void 0:"static"!==t&&"fixed"!==o&&(o=t),r=(r||{}).parentNode;return r}function urlBase64ToUint8Array(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(n),o=new Uint8Array(i.length),r=0;r<i.length;++r)o[r]=i.charCodeAt(r);return o}function copyToClipboard(e){_select2["default"](e);var t=void 0;try{t=document.execCommand("copy")}catch(n){t=!1}return t}function blinkItem(e,t){setStyle(e,{opacity:1}),setTimeout(function(){return setStyle(e,{opacity:0})},t)}function domPN(e){return(e||{}).parentNode}function matchesSelector(e,t){if(e=ge(e),!e||e==document)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){for(var t=(this.parentNode||this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1};return n.call(e,t)}function domCA(e,t){do e=domPN(e);while(e&&!matchesSelector(e,t));return e}function getLang(){try{var e=Array.prototype.slice.call(arguments),t=e.shift();if(!t)return"...";var n=window.cur&&window.cur.lang&&window.cur.lang[t]||window.lang&&window.lang[t]||window.langpack&&window.langpack[t]||window[t];if(!n){var i=t.split("_");return i.shift(),i.join(" ")}return isFunction(n)?n.apply(null,e):void 0===e[0]&&!isArray(n)||"raw"===e[0]?n:langNumeric(e[0],n,e[1])}catch(o){console.log("lang error:"+o.message+"("+Array.prototype.slice.call(arguments).join(", ")+")")}}function domData(e,t,n){return e?"undefined"!=typeof n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function throttle(e,t){var n;return function(){n||(e.apply(this,arguments),n=setTimeout(function(){n=!1},t))}}function debounce(e){var t;return function(){t&&clearTimeout(t);var n=this,i=arguments;t=setTimeout(function(){e.apply(n,i)})}}function scrollGetX(){return window.pageXOffset||scrollNode.scrollLeft||document.documentElement.scrollLeft}function scrollGetY(){return window.pageYOffset?window.pageYOffset:window.scrollNode?window.scrollNode.scrollTop:document.documentElement?document.documentElement.scrollTop:0}function domEL(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}function domPS(e){return domEL((e||{}).previousSibling,1)}function domNS(e){return domEL((e||{}).nextSibling)}function domFC(e){return domEL((e||{}).firstChild)}function domInsertAfter(e,t){var n=domPN(t);return n&&n.insertBefore(e,domNS(t))}function domInsertBefore(e,t){var n=domPN(t);return n&&n.insertBefore(e,t)}function domChildIndex(e){for(var t=0;null!=(e=domPS(e));)t++;return t}onDOMReady(function(){window.scrollNode=browser.chrome||browser.msie_edge?document.scrollingElement||bodyNode:browser.safari?bodyNode:htmlNode});function domChildren(e){for(var t=[],n=e.childNodes,i=0;i<n.length;i++)n[i].tagName&&t.push(n[i]);return t}function safeGet(e,t){for(var n=t.split("."),i=n.length,o=e,r=0;i>r;r++)if(o=o[n[r]],!o)return void 0;return o}function alwaysArray(e){return Array.isArray(e)?e:[e]}function disableFlex(){var e=$(".vk"),t=Array.from($$("*")),n=["A","IMG","SPAN"];e.classList.remove("vk_flex_yes"),e.classList.add("vk_flex_no"),t.filter(function(e){return e instanceof Element&&"flex"===getComputedStyle(e).display}).forEach(function(e){e.style.display=n.includes(e.tagName)?"inline":"block"})}function flatArray(e){return Array.isArray(e)?flatten(e):[e]}function domQuery1(e,t){return(t||document).querySelector(e)}function flatten(e){var t=[];return e.forEach(function(e){isArray(e)?t=t.concat(flatten(e)):t.push(e)}),t}function ariaMode(){$("html").classList.add("vk_ariaMode"),$$("*").forEach(function(e){if(e.style.fontSize="9px",e.style.backgroundImage="none","true"===e.getAttribute("aria-hidden")&&(e.style.display="none"),"IMG"===e.tagName){var t=e.getAttribute("alt")||"[?]";e.insertAdjacentHTML("afterend","<div>"+t+"</div>"),e.style.display="none"}else(!e.innerHTML.trim()||e.getAttribute("aria-label"))&&(e.innerHTML=e.getAttribute("aria-label")||e.getAttribute("alt")||e.getAttribute("href")||"[?]")})}function ceFromString(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function isIosWebView(){return window.webkit&&window.webkit.messageHandlers}function isAndroidWebView(){return window.AndroidBridge}function isVkWebView(){return isIosWebView()?"function"==typeof window.webkit.messageHandlers.VKWebAppInit:isAndroidWebView()?"function"==typeof window.AndroidBridge.VKWebAppInit:!1}function acquireLock(e,t,n){var i="lock_"+e;if(lsCheck()){if(lsGet(i)!==!0){lsSet(i,!0);try{t()}catch(o){}return void lsSet(i,!1)}n||setTimeout(acquireLock.bind(window,e,t,!0),100)}else t()}function statlogsValueEvent(e,t,n,i,o){if("undefined"!=typeof e&&"undefined"!=typeof t){var r="remixmsts",a=void 0,s=[n,i,o];acquireLock("m_stats_cookie_lock",function(){try{a=JSON.parse(getCookie(r)),a=a.data}catch(n){a=[]}a.push([Math.round(Date.now()/1e3),e,t].concat(s)),a=a.slice(a.length-100);var i=Math.round(rand(0,1e9));setCookie(r,JSON.stringify({data:a,uniqueId:i}),.01)})}}window.onBodyScroll=se(scrollTop),window.onBodyResize=se(),window.ariaMode=ariaMode,window.flatten=flatten,window.flatArray=flatArray,window.formatTime=formatTime,window.setDocumentDomain=setDocumentDomain,window.isUndefined=isUndefined,window.isFunction=isFunction,window.isArray=isArray,window.isObject=isObject,window.isEmpty=isEmpty,window.escapeRE=escapeRE,window.htsc=htsc,window.escapeAttr=escapeAttr,window.unescapeAttr=unescapeAttr,window.replaceEntities=replaceEntities,window.escapeStr=escapeStr,window.stripTags=stripTags,window.rand=rand,window.srand=srand,window.utf2win=utf2win,window.isHttpHref=isHttpHref,window.vkNow=vkNow,window.bind=bind,window.intval=intval,window.floatval=floatval,window.qs2obj=qs2obj,window.obj2qs=obj2qs,window.parseJSON=parseJSON,window.lsCheck=lsCheck,window.lsSet=lsSet,window.lsGet=lsGet,window.ssCheck=ssCheck,window.ssSet=ssSet,window.ssGet=ssGet,window.getValues=getValues,window.len=len,window.realSubstr=realSubstr,window.hashCode=hashCode,window.formatNum=formatNum,window.each=each,window.copy=copy,window.addEvent=addEvent,window.removeEvent=removeEvent,window.preventEvent=preventEvent,window.stopEvent=stopEvent,window.cancelEvent=cancelEvent,window.checkEvent=checkEvent,window.onCtrlEnter=onCtrlEnter,window.submitBtn=submitBtn,window.createIframe=createIframe,window.winToUtf=winToUtf,window.shortCurrency=shortCurrency,window.checkNav=checkNav,window.checkElementNav=checkElementNav,window.checkTouchHover=checkTouchHover,window.parseCyr=parseCyr,window.parseLat=parseLat,window.parseRusKeys=parseRusKeys,window.parseLatKeys=parseLatKeys,window.scrollLeft=scrollLeft,window.scrollTop=scrollTop,window.se=se,window.onBodyScrollForce=onBodyScrollForce,window.sgFix=sgFix,window.hideUnvisibleItems=hideUnvisibleItems,window.initObjectsHideByScroll=initObjectsHideByScroll,window.checkPostsSeen=checkPostsSeen,window.initPostsStats=initPostsStats,window.initAutoScroll=initAutoScroll,window.autoScroll=autoScroll,window.scrollToEl=scrollToEl,window.scrollToHash=scrollToHash,window.lockButton=lockButton,window.unlockButton=unlockButton,window.extend=extend,window.ge=ge,window.geByClass=geByClass,window.geByClass1=geByClass1,window.gpeByClass=gpeByClass,window.geByTag=geByTag,window.geByTag1=geByTag1,window.gpeByTag=gpeByTag,window.geBySel=geBySel,window.geBySel1=geBySel1,window.domNS=domNS,window.domPS=domPS,window.append=append,window.before=before,window.after=after,window.replace=replace,window.remove=remove,window.re=remove,window.clone=clone,window.reflow=reflow,window.tag=tag,window.outer=outer,window.show=show,window.hide=hide,window.isVisible=isVisible,window.toggle=toggle,window.ce=ce,window.elfocus=elfocus,window.elblur=elblur,window.val=val,window.attr=attr,window.cssToJs=cssToJs,window.getCssPropertyName=getCssPropertyName,window.cssValue=cssValue,window.getStyle=getStyle,window.setStyle=setStyle,window.hasClass=hasClass,window.addClass=addClass,window.removeClass=removeClass,window.toggleClass=toggleClass,window.replaceClass=replaceClass,window.switchClass=switchClass,window.getXY=getXY,window.getX=getX,window.getY=getY,window.getW=getW,window.getH=getH,window.getSize=getSize,window.getCw=getCw,window.getCh=getCh,window.evalJs=evalJs,window.alLoadingFix=alLoadingFix,window.getHref=getHref,window.ajx2q=ajx2q,window.indexOf=indexOf,window.langSex=langSex,window.langNumeric=langNumeric,window.langWordNumeric=langWordNumeric,window.langDate=langDate,window.setNotify=setNotify,window.getNotify=getNotify,window.canUploadFile=canUploadFile,window.uploadFile=uploadFile,window.readFile=readFile,window.registeredEvents=registeredEvents,window.trim=trim,window.domClosestOverflowHidden=domClosestOverflowHidden,window.copyToClipboard=copyToClipboard,window.blinkItem=blinkItem,window.domPN=domPN,window.domCA=domCA,window.getLang=getLang,window.domData=domData,window.throttle=throttle,window.debounce=debounce,window.scrollGetX=scrollGetX,window.scrollGetY=scrollGetY,window.domChildIndex=domChildIndex,window.domChildren=domChildren,window.safeGet=safeGet,window.disableFlex=disableFlex,window.domQuery1=domQuery1,window.domFC=domFC,window.domInsertAfter=domInsertAfter,window.domInsertBefore=domInsertBefore,window.alwaysArray=alwaysArray,window.need=need,window.isString=isString,window.ceFromString=ceFromString,window.isIosWebView=isIosWebView,window.isAndroidWebView=isAndroidWebView,window.isVkWebView=isVkWebView,window.statlogsValueEvent=statlogsValueEvent},"./static/js/mobile/modules/lib/withdom.js":function(){!function(){window.wd={html:o,wrap:i,handle:r,"class":u};var e=["tag","inner","attrs","innerHTML","outerHTML"],t=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],n=["abort","auxclick","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","stalled","submit","suspend","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","volumechange","waiting","wheel"].map(function(e){return"on"+e});function i(e){return e?{__raw__:e}:null}function o(e){if(v(e))return e?{__raw__:e}:null;if(g(e))return e.map(o).join("");if(!w(e))throw"Invalid input, object is expected";if("outerHTML"in e){var t=e.outerHTML;if(v(t))return t;if(h(t))return t.toString();if(t)throw"Invalid outerHTML";return""}var n=a(e),i=s(e),r=l(e);return f(n)?"<"+n+r+" />":"<"+n+r+">"+i+"</"+n+">"}function r(){var e=S(arguments[0]),t=Array.prototype.slice.call(arguments,1),n=e[0];if(n){v(n)||console.warn('Invalid handler "'+n+'"');var i=M(window,n);return y(i)?void i.apply(null,e.slice(1).concat(t)):void console.warn("`"+n+"` is not a function")}}function a(e){if("tag"in e){var t=e.tag;if(v(t)&&/^[\w-]+$/.test(t))return t;throw"Invalid tag name"}return b(e.href)?"a":"div"}function s(e){if("innerHTML"in e){var t=e.innerHTML;if(v(t))return t;if(h(t))return t.toString();if(t)throw"Invalid innerHTML";return""}return"inner"in e?k(e.inner).map(c).join(""):""}function l(e){var t="";e.attrs&&Object.assign(e,e.attrs);for(var n in e)if(!m(n)){var i=e[n];"class"===n?i=u(i):p(n)&&(g(i)||_(i))&&(i=d(i));var o=C(n);i===!0?t+=" "+o:h(i)?t+=" "+o+'="'+i+'"':v(i)?t+=" "+o+'="'+C(i)+'"':i&&(i=i.__raw__?i.__raw__:C(JSON.stringify(i)),t+=" "+o+'="'+i+'"')}return t}function c(e){return h(e)?e.toString():v(e)?C(e):w(e)?e.__raw__?e.__raw__:o(e):""}function u(e){return k(e).filter(b).join(" ").trim().replace(/\s+/g," ")}function d(e){if(e=S(e),!e.length)return null;var t=e[0];if(!v(t))throw"Invalid handler";var n=e.slice(1).map(A).join(", ");return t+"("+n+")"}function A(e){return h(e)||"this"===e||"event"===e?e:JSON.stringify(e)}function m(t){return e.includes(t)}function f(e){return t.includes(e.toLowerCase())}function p(e){return n.includes(e.toLowerCase())}function _(e){return v(e)&&/^[\w.]+$/.test(e)}function h(e){return"number"==typeof e&&!isNaN(e)}function v(e){return"string"==typeof e}function g(e){return Array.isArray(e)}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return"[object Function]"===Object.prototype.toString.call(e)}function b(e){return v(e)&&e}function S(e){return g(e)?e:[e]}function C(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(e){return g(e)?E(e):[e]}function E(e){var t=[];return e.forEach(function(e){g(e)?t=t.concat(E(e)):t.push(e)}),t}function M(e,t){for(var n=t.split("."),i=n.length,o=e,r=0;i>r;r++)try{o=o[n[r]]}catch(a){return void 0}return o}}()},"./static/js/mobile/modules/mail.js":function(){var e=window,t=e.each,n=e.geByClass,i=e.attr,o=e.replaceClass,r=e.ge,a=e.val,s=e.addClass,l=e.toggleClass,c=e.removeClass,u=e.ce,d=e.se,A=e.addEvent,m=e.removeEvent,f=e.extend,p=(e.qs2obj,e.vkNow),_=e.geByClass1,h=e.setStyle,v=e.remove,g=e.intval,w=e.isArray,y=e.hasClass,b=e.after,S=e.cdf,C=e.stripTags,k=e.getHref,E=e.indexOf,M=e.htsc,T=e.replaceEntities,j=e.escapeAttr,D=e.replace,x=e.scrollTop,I=e.before,P=e.alLoadingFix,B=window,F=B.mobPlatforms,L=B.isTouch,O=window,N=O.ajax,H=window,R=H.mediaUpload,V=window,q=V.nav,U=window,z=U.Dialog,$=U.Dialogs,W=function(){var e={},E={},M=null,T=null,B=!1,O={},H={},V={},U=null;q.onBeforeGo(function(e,t,n){if(q.getQuery("community")&&(!n||!n.ignore_cur_process)){var o="string"==typeof e?e:i(e,"href")||i(e,"data-href");if("/mail"===o)return q.go(e,t,{ignore_cur_process:!0}),!0}}),q.onBeforeGo(function(){if(q.getQuery("community"))var e=N.post("/",{_ajax:1,act:"ping"},{onDone:function(){try{var t=JSON.parse(e.response),n=t&&t[1]&&t[1][2];W.actualizeMessagesCornerCounter(n)}catch(i){}}})});function Q(){if(M){var s=[],l=!1;if(t(n("_unread"),function(){var e=+i(this,"data-id");e&&s.push(e),l=W.getPeerByMsg(e),o("_unread","_read",this)}),l){var c=r("messages"+l);c&&e[l]&&(e[l].messages=a(c))}s.length&&W.sendMarkAsRead(M,s)}}function K(e,t){t?(s("lvi",e),l("mlvi",e,!!F[t]),l("vkmobilelvi",e,8==t)):(c("lvi",e),c("mlvi",e),c("vkmobilelvi",e))}function J(e,t){var n,i=t.split("."),o=i.length,r=e;for(n=0;o>n;n++)if(r=r[i[n]],!r)return null;return r}function Z(e,t,n){var i,o,r=t.split("."),a=r.length-1,s=e;for(o=0;a>o;o++)i=r[o],s=s[i]||(s[i]={});s[r[a]]=n}function et(e){var n=e.updater;n(document.body),t(e.caches,function(t,n){var i=n.storage,o=n.getter,r=J(i,o);if(r){var a="string"==typeof r;a&&(r=u("div",{innerHTML:r})),e.updater(r),Z(i,o,a?r.innerHTML:r)}})}return{wrapLinks:G,wrapMention:X,onShowDialogFromCache:d(),onShowWritePageFromCache:d(),onShowDialogsPageFromCache:d(),onMessagesRepainted:d(),init:function(t,n){var i=window,o=i.im;window.cur.destroy.push(function(){AudioMessagePlayer.detachPlayer()}),n&&(cur.ref=n.ref,cur.refSource=n.ref_source),t&&(M=t,n&&(W.saveDialog(n,t),T=e[t])),B||(B=!0,A(document,L?"touchstart":"mousedown",Q)),o.on()},unpinMessage:function(t){et({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(hide),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.remove("head_actions_has_pinned")}),e.$$(".pinnedMsg_peer_"+t).forEach(function(e){return e.classList.add("pinnedMsg_hidden")})}})},pinMessage:function(t,n){et({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(show),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.add("head_actions_has_pinned")}),$$(".pinnedMsg_peer_"+t).forEach(function(e){return e.outerHTML=n})}})},clear:function(){q.clear();var t=window,n=t.im;e={},E={},O={},M=T=null,m(document,L?"touchstart":"mousedown",Q),B=!1,n.off()},send:function(e){if(R&&!R.checkUploading())return!1;var t=N.click(e,f({clear:!0,save:!0},z),{lock:!0,url_params:{ref_source:cur.refSource,ref:cur.ref}});return cur.ref=void 0,cur.refSource=void 0,t},save:function(n){t(n,function(t,n){e[t]&&n.last_msg==e[t].last_msg&&delete n.messages,W.saveDialog(n,t)})},saveDialog:function(n,i){e[i]||(e[i]={});var o=e[i];f(o,n),o.msgs&&t(o.msgs,function(e,t){O[t]=i})},getPeerByMsg:function(e){return O[e]||!1},cacheDialogsPage:function(){if(!q.getQuery("community")||!q.getQuery("tab")){E.page=a("m");var e=q.getQuery();E.link=e.act?Y("/mail"):q.cur}},keyup:function(e,t,n){var i=U||"",o=e.value||"";(i.length!=o.length||i!=o)&&(W.myTyping(t,n),U=o)},myTyping:function(e,t){if(!(-2e9>=e)){var n=p();V[e]&&n-V[e]<5e3||(V[e]=n,N.post("/mail",{_ajax:1,act:"typing",peer:e,hash:t,community:q.getQuery("community")}))}},typing:function(e,t){t=t||e;e>2e9?(H[e]||(H[e]={}),H[e][t]=p()):H[e]=p(),W.updateTyping(e)},updateTyping:function(e){var n=function(e,t){return e.getAttribute&&e.getAttribute(t)},i=window,o=i.lang,l=r("dialog_near"+e),u=_("di_current_peer",l),d=_("di_typing",l);if(l){var A=[],m=p();if(e>2e9)t(H[e]||{},function(e,t){n(d,"data-u"+e)&&t&&6e3>m-t&&A.push(e)});else{var f=H[e];n(d,"data-u"+e)&&f&&6e3>m-f&&A.push(e)}if(A.length){if(1==A.length){var v=A[0],g=n(d,"data-u"+v),w=n(d,"data-s"+v);a(d,'<i class="i_typing"></i>'+(o.mobile_mail_typing[w]||"").replace("{user}",g))}else{t(A,function(e,t){A[e]=n(d,"data-u"+t)});var y=A.pop();a(d,'<i class="i_typing"></i>'+(o.mobile_mail_multi_typing||"").replace("{users}",A.join(", ")).replace("{last_user}",y))}u.offsetWidth&&h(d,"minWidth",u.offsetWidth),s("di_typing_now",l),setTimeout(function(){s("di_typing_animated",l)},10),setTimeout(function(){W.updateTyping(e)},2e3)}else a(d,""),h(d,"minWidth",0),c("di_typing_animated",l),c("di_typing_now",l)}},updateOnline:function(i,o){var s=r("messages"+i);if(s&&v(_("di_activity",s)),t(n("_lv"+i,"mcont"),function(e,t){K(t,o)}),e[i]){if(e[i].write_form){var l=u("div",{innerHTML:e[i].write_form});t(n("_lv"+i,l),function(e,t){K(t,o)}),e[i].write_form=a(l)}if(e[i].messages){var l=u("div",{innerHTML:e[i].messages});v(_("di_activity",l)),e[i].messages=a(l)}}},updateImportantMessages:function(t,n,i){et({caches:[{storage:E,getter:"page"},{storage:q.page_get(Y("/mail")),getter:"html"}],updater:function(e){var t=_("dialogs_filter_button_important",e);if(t){var n=g(a(t))+i;a(t,n),l("dialogs_filter_without_important",_("dialogs_filter",e),0===n)}}}),et({caches:[{storage:e,getter:t+".messages"}],updater:function(e){var t=_("_msg"+n,e);t&&l("msg_item_important",t,1===i)}})},updateImportantDialog:function(e,t){q.getQuery("community")&&et({caches:[{storage:E,getter:"page"},{storage:q.page_get(Y("/mail")),getter:"html"}],updater:function(n){var i=_("_peer"+e,n);i&&l("dialog_item_important",i,t)}})},sendMarkAsRead:function(n,i){w(i)||(i=[i]);var o=e[n];return o&&o.hash?void N.post("/mail",{_ajax:1,act:"mark_read",peer:n,msgs:i.join(","),hash:o.hash,community:q.getQuery("community")},{onDone:function(e){e&&t(i,function(e,t){W.markAsRead(n,t)})}}):void 0},markAsRead:function(t,n){var i=window,o=i.im,s=r("messages"+t);if(s){var l=_("_msg"+n,s);o.nu&&y("_read",l)||c("mi_unread",l);var d=e[t];if(d&&d.messages){var A=u("div",{innerHTML:d.messages}),l=_("_msg"+n,A);o.nu&&y("_read",l)||c("mi_unread",l),d.messages=a(A)}}},markPeerAsRead:function(o,s,l){var d=r("messages"+o);if(d){t(n("msg_item",d),function(){if(!l==!y("_unread",this))return!0;var e=+i(this,"data-id");s>=e&&!y("_read",this)&&c("mi_unread",this)});var A=e[o];if(A&&A.messages){var m=u("div",{innerHTML:A.messages});t(n("msg_item",m),function(){if(!l==!y("_unread",this))return!0;var e=+i(this,"data-id");s>=e&&!y("_read",this)&&c("mi_unread",this)}),A.messages=a(m)}}var f=r("dialogs"),p=l?"di_unread_outbox":"di_unread_inbox";if(f){var A=_("_peer"+o,f);A&&y(p,A)&&(c(p,A),v(_("di_unread_cnt",A)))}else if(E.page){var m=u("div",{innerHTML:E.page}),A=_("_peer"+o,m);A&&y(p,A)&&(c(p,A),v(_("di_unread_cnt",A))),E.page=a(m)}et({caches:[{storage:q.page_get(Y("/mail")),getter:"html"}],updater:function(e){var t=_("_peer"+o,e);t&&y(p,t)&&(c(p,t),v(_("di_unread_cnt",t)))}})},markAsDeleted:function(t,n){var i=r("messages"+t);if(i){v(_("_msg"+n,i));var o=e[t];if(o&&o.messages){var s=u("div",{innerHTML:o.messages});v(_("_msg"+n,s)),o.messages=a(s)}}N.click(Y(q.path),f({no_scroll:!0},$))},addMessage:function(t,n,i,o){if(q.clear(),2e9>t?delete H[t]:H[t]&&delete H[t][i],W.updateTyping(t),o!==!0){if(t&&n&&(O[n]=t),!_("_msg"+n)){var s=e[t];if(s&&s.messages){s.msgs&&s.msgs.push(n);var l=u("div",{innerHTML:s.messages}),c=_("di_activity",l);c?(b(S(o),c),s.messages=a(l)):s.messages=o+s.messages;var d=r("messages"+t);d&&(a(d,s.messages),W.onMessagesRepainted(!0))}else{var d=r("messages"+t);if(d){var c=_("di_activity",d);c?b(S(o),c):a(d,o+a(d))}}}}else if(r("dialogs")&&"/mail"==q.path){var A=q.getQuery();A.act||A.offset||A.q||N.click(Y(q.path),f({no_scroll:!0},$))}},replaceMessage:function(t,n,i,o){var s=r("messages"+t),l=e[t];if(l&&l.messages){var c=u("div",{innerHTML:l.messages}),d=_("_msg"+n,c);d&&(d.outerHTML=o),l.messages=a(c),a(s,l.messages)}else _("_msg"+n).outerHTML=o},getMsgHTML:function(t,n,o,s,l,c,u,d){var A=window,m=A.vk,f=A.lang,p=2&n?m.id:u&&u.from||o;if(!p)return!1;if(!r("messages"+o))return!0;if(u.attach1||u.fwd||u.geo||u.emoji)return!1;if(u.source_act)return!1;if(!e[o]||!e[o].hash)return!1;var h="_u"+p,v=_(h,"mcont","a"),w=C(i(v,"data-name")||a(v)||""),y=k(v),b=_(h,"mcont","img"),S=b&&b.src||"";if(!w||!y||!S)return!1;function E(){var e=new Date(1e3*s),t=e.getHours(),n=e.getMinutes();return t+":"+(10>n?"0":"")+n}o=g(o),t=g(t),l=l&&-1==l.toString().indexOf(" ... ")&&2e9>o?l:"";var M=1&n?" mi_unread":"";return!(2&n)&&1&n&&(M+=M?" _unread":""),c=W.wrapLinks(c,n),c=W.wrapMention(c),('<a name="msg{{msgId}}"></a><div  class="msg_item _msg{{msgId}}{{msgClass}}"  data-id="{{msgId}}"  onclick="return MessagesActions.onMessageClick(event);">  <div class="mi_iwrap">    <a class="al{{cl}}" href="{{href}}">      <img src="{{photo}}" class="mi_img {{cl}}" />    </a>  </div>  <div class="mi_cont">    <div class="mi_head">      <a class="mi_date" href="'+Y("/mail?act=msg&id={{msgId}}").replace(/\&/g,"&amp;")+'">        {{time}}      </a>      {{edited}}\n      <a class="mi_author al{{cl}} {{cl}}" href="{{href}}" data-name="{{dataName}}">        {{name}}      </a>    </div>    <div class="mi_body">      {{mi_title}}      <div class="mi_text">{{text}}</div>    </div>  </div></div>').replace(/{{msgId}}/g,t).replace(/{{cl}}/g,h).replace(/{{href}}/g,y).replace("{{msgClass}}",M).replace("{{edited}}",d?'<span class="mi_edited">'+f.mobile_mail_edited+"</span>":"").replace("{{photo}}",S).replace("{{time}}",E(s)).replace("{{dataName}}",j(w)).replace("{{name}}",w.split(" ").shift()).replace("{{mi_title}}",l?'<div class="mi_title">'+l+"</div>":"").split("{{text}}").join(c)},updateStickers:function(){var t=window,n=t.cur,i=window,o=i.post,a=e[M];if(a){var s=a.write_form?(n.sticker_panel||"").split("mail-0").join("mail"+M):"",l=r("stickers_panel");l&&(D(S(s),l),l=null,o.stickersInit())}},showDialog:function(t,n,o){var r=window,s=r.cur,l=window,d=l.MessagesActions,A=l.Mention,m=window,p=m.post;if(d.hasFwdMessages())return d.attachFwdMessages(n),!1;E.scroll_top=x();var h=e[n];if(h){var g=u("div",{innerHTML:a("m")}),w=_("mhb_back",g);if(w&&h.header){var y=u("div");a(y,h.header),I(y.firstElementChild,w),v(w)}var b=h.write_form?(s.sticker_panel||"").split("mail-0").join("mail"+n):"";a(_("pcont",_("mcont",g)),h.write_form+b+(n?'<div id="messages'+n+'" class="messages bl_cont">'+(h.messages||"")+'<div id="al_loading"></div></div>':"")),a("m",g.innerHTML),p.stickersInit(),N.refreshLinks(h.fv_link,h.app_link),P(),M=n,T=h;var S=k(t);q.go(S,null,{push_only:!0,no_push:o}),n?(U=null,W.updateTyping(n),N.click(S,f({save:n},z),{scroll:!0})):W.onShowWritePageFromCache(!0),W.onShowDialogFromCache(!0),x(0,10)}else q.al_go(h&&h.cur_link||k(t)||q.cur);q.getQuery("community")&&"unread"===q.getQuery("ctab")&&c("al_back",_("mhb_back"));var C=_("MentionContainer"),j=parseJSON(i(C,"data-mentions"))||[];return j.length&&A.init({url:!1,appendTo:C,defaultItems:j,items:j}),!1},backToDialogs:function(e){if(E.page)q.go(E.link,null,{push_only:!0,no_push:e}),N.click(E.link,f({no_scroll:!0},$)),a("m",E.page),N.refreshLinks(i("fv_link","href")||i("fv_link","data-href"),"vkontakte://vk.com/mail"),M=T=null,x(E.scroll_top||0),W.onShowDialogsPageFromCache(!0);else{var t=Y(E.link||"/mail");q.go(t,null,{push_only:!0,no_push:e}),q.al_go(t)}},actualizeMessagesCornerCounter:function(e){et({caches:[{storage:E,getter:"page"},{storage:q.page_get(Y("/mail")),getter:"html"}],updater:function(t){var n=_("mhi_notify",t),i=_("mh_notify_counter",n);i||(i=u("em",{className:"mh_notify_counter"}),append(i,n)),e?i.innerText=e:n.innerHTML="&nbsp;"}})}}}();function Y(e){var t=window.nav.getQuery(),n=t.community,i=t.ctab,o=n&&-1===e.indexOf("community=")?"community="+n:"",r=n&&i&&-1===e.indexOf("ctab=")?"&ctab="+i:"";return o?e+(e.indexOf("?")>=0?"&":"?")+o+r:e}function X(e){var t=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g;return e.replace(t,function(e,t,n,i,o){return'<a href="/'+(t+n)+'" class="mem_link">'+o+"</a>"})}function G(e,t){var n=32768&t;return e=e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g,function(e){return'<a href="mailto:'+e+'">'+e+"</a>"}),e=e.replace(/(https?:\/\/)?(([A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u04510-9@][A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u04510-9@\-\_\.]*[A-Za-z\u0410-\u042f\u0430-\u044f\u0401\u04510-9@])(\/([A-Za-z\u0410-\u042f\u0430-\u044f0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi,function(){var e=arguments[3],t=arguments[2],i=arguments[0],o=arguments[1]||"http://";if(-1==e.indexOf(".")||-1!=e.indexOf(".."))return i;var r=e.split(".").pop();if(r.length>7||-1==E("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,\u0440\u0444,\u0443\u043a\u0440,\u0441\u0430\u0439\u0442,\u043e\u043d\u043b\u0430\u0439\u043d,\u0441\u0440\u0431,cat,pro,local".split(","),r))return i;if(-1!=i.indexOf("@"))return i;try{i=decodeURIComponent(i)}catch(a){}return i.length>55&&(i=i.substr(0,53)+".."),i=M(i),!n&&e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/)?(t=T(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent),'<a href="'+(o+t).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+i+"</a>"):'<a href="/away?to='+encodeURIComponent(o+T(t))+'" target="_blank">'+i+"</a>"})}window.mail=W,window.makeUrl=Y},"./static/js/mobile/modules/mediaUpload.js":function(){var e=window,t=e.ge,n=e.each,i=e.geByTag,o=e.intval,r=e.gpeByClass,a=e.geByTag1,s=e.attr,l=e.val,c=e.geByClass,u=e.isUndefined,d=e.geByClass1,A=e.toggle,m=e.isVisible,f=e.toggleClass,p=e.show,_=e.cancelEvent,h=e.ce,v=e.setStyle,g=e.parseJSON,w=e.replace,y=e.reflow,b=e.after,S=e.addClass,C=e.clog,k=e.uploadFile,E=e.bind,M=e.readFile,T=e.append,j=e.before,D=e.srand,x=e.extend,I=e.canUploadFile,P=e.gpeByTag,B=e.submitBtn,F=e.removeEvent,L=e.addEvent,O=e.clone,N=e.remove,H=window,R=H.ajax,V={isUploading:!1,onBeforeRemove:befall(),onRemove:befall("removeElem"),onStart:befall(),onError:befall("response"),onComplete:befall("response"),_uploadData:{},_uploadQueue:[],_readerQueue:[],_processUploadQueue:!1,_processReaderQueue:!1,fallback:function(e,t){var n=window,i=n.post;return e&&i.add_attach(e,t),!1},getLastAttachId:function(){var e=t("attached_wrap");if(!e)return 0;var r,a=0;return n(i("input"),function(){if(r=this.name.match(/^attach(\d+)_type$/i)){var e=o(r[1]);e>a&&(a=e)}}),a},refreshAttachIds:function(e){var c=t("attached_wrap");if(c){var u,d=r("mr_x_wrap",e),A=a("input",d),m=o((A&&A.name.match(/^attach(\d+)(_type)?$/i)||[])[1]);if(r("mr_timer",e)){var f=s("add_post_btn","data-value");return void(f&&l("add_post_btn",f))}m&&n(i("input",c),function(){if(u=this.name.match(/^attach(\d+)(_type)?$/i)){var e=o(u[1]);e==m?this.disabled=!0:e>m&&(this.name="attach"+(e-1)+(u[2]||""))}})}},getAttachesCount:function(){return(c("mr_x_wrap","attached_wrap")||[]).length},refreshUploadState:function(e){u(e)&&(e=V.getAttachesCount());var n=d("mr_timer","attached_wrap"),i=t("attach_photo_btn"),o=d("pi_medias","attached_wrap"),r=d("inline_upload",i),a=s(r,"data-max-attaches")||10;A(o,e>0||m(n)),f("cp_attach_btn_sel",i,e>0),r&&(r.disabled=e>=a),p("attached_options"),p("attached_flush")},checkUploading:function(e){return V._processUploadQueue?_(e):!0},attachedPhotoTpl:function(e){return h("div",{id:"upload_item_"+e,className:"medias_thumb thumb_item mr_x_wrap thumb_upload",innerHTML:'<div id="upload_image_'+e+'" class="tu_img"></div><div id="item_progress_wrap_'+e+'" class="tu_progress_wrap"><div id="item_progress_'+e+'" class="tu_progress"></div></div><div id="item_cancel_wrap_'+e+'" class="tu_cancel_wrap" onclick="return mediaUpload.reset(this, event, \''+e+'\');"><div id="item_cancel_'+e+'" class="tu_cancel"></div></div>'})},onUploadProgress:function(e){var n=this,i=t("item_progress_"+n.id);v(i,{width:e.loaded/e.total*100+"%",visibility:"visible"})},onUploadComplete:function(e){var n=this,i=e.target.responseText,o=!1;try{o=g(i)}catch(r){o={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}o.error?V.onUploadError.call(n,e):(n.xhr=R.post(n.done_url,{_ajax:1,_query:i},{onDone:function(e){var i=t("item_progress_wrap_"+n.id),o=t("upload_image_"+n.id),r=V.getLastAttachId()+1;if(o)var a=h("img",{id:"upload_image_"+n.id,className:"ph_img",onload:function(){if(w(a,o),n.iw&&n.ih){if(n.iw>n.ih==a.width>a.height)var e=Math.min(130,Math.floor(75/n.ih*n.iw));else var e=Math.min(130,Math.floor(75/n.iw*n.ih));v(a,"width",e)}y(a),v(a,"opacity",1)},src:e.src});b(h("input",{type:"hidden",name:"attach"+r,value:e.photo_raw}),o),b(h("input",{type:"hidden",name:"attach"+r+"_type",value:"photo"}),o),v(i,"opacity",0),n.attached=!0,n.delete_url=e.delete_url,V._processUploadQueue||(V.isUploading=!1,V.onComplete(e))}}),S("tu_progress_request","item_progress_wrap_"+n.id),n.uploaded=!0,V.uploadQueueNext())},onUploadError:function(e){C("upload error.",e.target.responseText),V.uploadQueueNext(),V.onError(e.target.responseText)},uploadFile:function(e){e.xhr=k(e.upload_url,{photo:e.file},{onProgress:E(V.onUploadProgress,e),onComplete:E(V.onUploadComplete,e),onError:E(V.onUploadError,e)})},readFile:function(e){M(e.file,function(n){var i=t("upload_image_"+e.id);if(i)var o=h("img",{id:"upload_image_"+e.id,className:"ph_img",onload:function(){w(o,i),e.iw=o.width,e.ih=o.height},src:n});V.readerQueueNext()})},addFile:function(e){var n=(window.isNewMail?d("uMailWrite__attachments"):"")||t("attached_wrap"),i=d("pi_medias",n),o=i?c("medias_thumb",i):[],r=i?d("medias_row",i):null,a=o[o.length-1],s=V.attachedPhotoTpl(e.id);n&&(i||(i=h("div",{className:"pi_medias"}),T(i,n)),a?b(s,a):r?j(s,r):T(s,i),V._processReaderQueue||V.readerQueueNext())},uploadQueueNext:function(){C("next upload"),V._processUploadQueue=!0;var e=V.uploadQueueRemove();return e?void V.uploadFile(e):(C("empty upload"),void(V._processUploadQueue=!1))},readerQueueNext:function(){C("next reader"),V._processReaderQueue=!0;var e=V.readerQueueRemove();return e?void V.readFile(e):(C("empty reader"),void(V._processReaderQueue=!1))},queueInsert:function(e){var t=D();return V.getUploadDataById(t)?V.queueInsert(e):(V._uploadData[t]=x(e,{id:t}),V._uploadQueue.push(t),V._readerQueue.push(t),V._uploadData[t])},uploadQueueRemove:function(){var e=V._uploadQueue.shift();return e?V.getUploadDataById(e):!1},readerQueueRemove:function(){var e=V._readerQueue.shift();return e?V.getUploadDataById(e):!1},getUploadDataById:function(e){return V._uploadData[e]||!1},delUploadDataById:function(e){delete V._uploadData[e]},start:function(e,i){if(!e||!I())return V.fallback(e,i);var o=e.files,r=e.form||P("form",e),a=B(r),l=t("attach_photo_btn"),c=s(e,"data-upload-url"),u=s(e,"data-done-url"),d=s(e,"data-max-attaches")||10,A=V.getAttachesCount();return c&&u?(n(o,function(){var e={upload_url:c,done_url:u,file:this,uploaded:!1,attached:!1};return A>=d?!1:(V.queueInsert(e),V.addFile(e),void A++)}),F(r,"submit",V.checkUploading),L(r,"submit",V.checkUploading),F(a,"click",V.checkUploading),L(a,"click",V.checkUploading),F(l,"click",V.checkUploading),L(l,"click",V.checkUploading),V.refreshUploadState(A),w(O(e),e),V._processUploadQueue||V.uploadQueueNext(),window.isNewMail&&V.onStart(),V.isUploading=!0,!1):V.fallback(e,i)},reset:function(e,t,n){if(_(t),window.isNewMail&&V.onBeforeRemove(e),"/"==n[0]){R.post(n,{_ajax:1}),V.refreshAttachIds(e);var i=r("mr_x_wrap",e)||r("mr_timer",e);N(i)}else{var o=n,a=V.getUploadDataById(o);if(!a)return!1;a.attached?a.delete_url&&(R.post(a.delete_url,{_ajax:1}),V.refreshAttachIds(e)):(a.xhr&&a.xhr.abort&&a.xhr.abort(),a.loaded||V.uploadQueueNext()),N("upload_item_"+o),V.delUploadDataById(o)}return V.refreshUploadState(),window.isNewMail&&V.onRemove(e),!1}};window.mediaUpload=V},"./static/js/mobile/modules/menu.js":function(){var e=window,t=e.removeClass,n=e.replaceClass,i=e.hasClass,o=e.checkEvent,r=e.ce,a=e.scrollTop,s=e.ge,l=e.geByClass1,c=e.append,u=e.addClass,d=e.addEvent,A=e.getCh,m=e.remove,f=e.removeEvent,p=e.getW,_=e.preventEvent,h=e.getCw,v=e.each,g=e.attr,w=e.val,y=e.onBodyResize,b=e.cancelEvent,S=e.scrollLeft,C=window,k=C.ajax,E=window,M=E.thover,T=window,j=T.nav,D=window,x=D.isTouch,I={enabled:function(e){return window.al&&window.al.menu?("undefined"!=typeof e&&(e?n("_lms","_lm",window.bodyNode):(n("_lm","_lms",window.bodyNode),I.qsClose())),i("_lm",window.bodyNode)):(t("_lm",window.bodyNode),t("_lms",window.bodyNode),!1)},opened:function(){return i("lm_opened",window.bodyNode)},toggle:function(e,t){return o(e)?!0:window.al&&window.al.menu?(I.opened()?I.close(e,t):I.open(e,t),!1):!0},open:function(e){var i=window,m=i.zlayer;if(o(e))return!0;if(!window.al||!window.al.menu)return!0;if(I.opened())return!1;if(m&&m.opened())return!1;if(!I.enabled())return j.go("/"),!1;I.clear_hover();var f=r("div",{id:"m_helper",onclick:I.close}),p=I._st||0,_=a(),h=s("l"),v=s("m"),g=s("vk_wrap"),w=l("head_search",h),y=g.offsetWidth,b=v.offsetWidth,S=v.offsetHeight;if(!(y>=882)){c(f,"m"),I.fixed?(u("lm_opened",window.bodyNode),u("lm_anim_start",g),setTimeout(function(){n("lm_anim_start","lm_anim lm_anim_end",g)},5),setTimeout(function(){t("lm_anim_end",g),t("lm_anim",g)},200),d(v,"scroll touchmove",I.blockScroll),d(window.l,"touchstart touchmove",I.blockMenuScroll),d(w,"touchstart touchmove",I.blockMenuScroll)):u("lm_opened",window.bodyNode);var C=h.offsetHeight,E=y>=480;return E?p=_<=C-A()?Math.min(_,C-A()):0:p>_?p=_:_-p>S-C&&S>C&&(p=_-S+C),I._st=Math.max(0,_-p),I._mw=b,I.fix_size(!1),I.fixed||a(p),k.post("/",{_ajax:1,act:"ping"}),window.lm_qsearch_counter?window.lm_qsearch_counter--:window.lm_qsearch_counter=-1,window.lm_qsearch_counter&&I.cancelSearch(),!1}},close:function(e){if(o(e))return!0;if(!window.al||!window.al.menu)return!0;if(!I.opened())return!1;m("m_helper"),I.clear_hover();var i=a(),r=I._st+i,c=s("l"),d=s("m"),A=s("vk_wrap"),p=l("head_search",c),_=s("vk_wrap").offsetWidth,h=_>=480;return I.fixed?(u("lm_anim_end",A),setTimeout(function(){n("lm_anim_end","lm_anim lm_anim_start",A)},5),setTimeout(function(){t("lm_anim_start",A),t("lm_anim",A),t("lm_opened",window.bodyNode)},200),f(d,"scroll touchstart",I.blockScroll),f(window.l,"touchstart touchmove",I.blockMenuScroll),f(p,"touchstart touchmove",I.blockMenuScroll)):t("lm_opened",window.bodyNode),I._st=h?0:i,I.fix_size(!0),I.fixed||a(r),window.lm_qsearch_focused&&I.cancelSearch(),!1},blockScroll:function(e){var t=s("vk_wrap");I.opened()&&p(t)<882&&_(e)},blockMenuScroll:function(e){var t=s("vk_wrap");if(I.opened()&&p(t)<882){var n=e.touches,o=(n&&n[0]?n[0].pageY:e.pageY)||0;if("touchstart"==e.type)I.lmStartY=o;else if("touchmove"==e.type&&I.lmStartY!==!1){if(i("head_search",e.currentTarget))_(e);else if(o-I.lmStartY>0&&A()>=440){var r=s("lm_cont");r&&r.scrollTop<=0&&_(e)}else if(A()>=440){var r=s("lm_cont");r&&r.scrollTop>=r.scrollHeight-r.offsetHeight&&_(e)}I.lmStartY=!1}}},fix_size:function(e){var t=s("l"),n=s("m"),i=s("mhead"),o=i&&i.offsetHeight||0,r=I._st||0;t&&(e?n.style.minHeight="0":(r=r>o?r:0,n.style.minHeight=t.offsetHeight+r+"px"),!I.fixed||h()<320?e?n.style.marginTop="0":(t.style.minHeight=A()+"px",n.style.marginTop=-r+"px"):t.style.minHeight="0")},clear_hover:function(){M.clear()},refreshCounters:function(e){if(!e||!e.length)return!0;if(!window.al||!window.al.menu)return!0;if(e.length!=window.al.menu.length)return!1;var t=window,n=t.al,i=l("main_menu","l"),o=e[1];return Bell.setCount(o),window.store&&(store.notificationsCount=o),v(e,function(e,t){if("undefined"==typeof t)return!0;var o=n.menu[e],a=l("mmi_"+o[0],i),s=l("mm_item",a),u=l("mmi_wrap",a),d=l("mm_counter",u);g(s,"data-href",!1),t?(o[2]&&g(s,"href",o[2]),d?w(d,t):c(r("em",{className:"mm_counter",innerHTML:t}),u)):(o[1]&&g(s,"href",o[1]),m(d)),k.prepare_click(s)}),!0},refresh:function(e){e=e||{},k.refreshLinks(e.fv_link,e.app_link),"undefined"!=typeof e.pp&&e.pp!==!1&&w("lm_prof_panel",e.pp),"undefined"!=typeof e.tn&&e.tn!==!1&&w("lm_top_notify",e.tn),"undefined"!=typeof e.bn&&e.bn!==!1&&w("lm_bottom_notify",e.bn),e.lm&&w("l",e.lm),e.topbar||m("vk_topbar")},initEvents:function(){y(function(){var e=s("vk_wrap").offsetWidth,t=i("_hfixed",window.bodyNode),n=I._st||0;e>=882&&n>44&&I.close(),I.fix_size(!I.opened(),t)})},init:function(){I.fixed=i("_hfixed",window.bodyNode),I.initEvents(),d(window,"orientationchange",function(){var e=s("vk_wrap").offsetWidth,t=I._st||0;e>=882&&t>44&&I.close()}),I.initTouch()},initTouch:function(){if(d(document,"keydown",function(e){var t=window,n=t.vk;e&&e.shiftKey&&(e.ctrlKey||e.metaKey)&&n.__debug&&77==e.keyCode&&(b(e),I.toggle())}),x){var e=!1,t=!1,n=10,i=Math.min(604,h())/3,o=30;function r(e){var t=e.touches,n=a(),i=(t&&t[0]?t[0].pageX:e.pageX)||0,o=(t&&t[0]?t[0].pageY:e.pageY)||0;return{x:i,y:o-n}}function s(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function c(e,t){var n=t.x-e.x,i=e.y-t.y;return Math.abs(180*Math.atan2(i,n)/Math.PI)}d(document,"touchstart",function(n){gpeByClass("_preventMenuOpen",n.target)||(l("mhb_home","mhead")||l("mailHat"))&&(S()>0||(e=t=r(n)))}),d(document,"touchmove touchend touchcancel",function(a){if(e){"touchmove"==a.type&&(t=r(a));var l=s(e,t),u=c(e,t);if(("touchend"!=a.type&&"touchcancel"!=a.type||(e=!1,"touchcancel"!=a.type))&&!(n>l)){if(I.opened()&&(u=180-u),u>o)return void(e=!1);_(a),l>i&&(e=!1,I.toggle())}}})}},qsOpened:!1,qsOpen:function(){I.qsOpened||(I.qs_st=a(),u("qs_opened","vk_wrap"),u("qs_opened",window.bodyNode),p("vk_wrap")<882&&a(0),I.qsOpened=!0)},qsClose:function(){I.qsOpened&&(t("qs_opened","vk_wrap"),t("qs_opened",window.bodyNode),p("vk_wrap")<882&&a(I.qs_st||0),I.qsOpened=!1)},closeSearch:function(){return window.al&&window.al.menu?(window.lm_qsearch&&window.lm_qsearch.blur(),I.qsClose(),!1):!0},cancelSearch:function(){return window.al&&window.al.menu?(window.lm_qsearch&&window.lm_qsearch.clear(),I.qsClose(),!1):!0},headerAction:function(e,t){return p("vk_wrap")>=882?j.go(e,t):I.toggle()}};window.menu=I},"./static/js/mobile/modules/nav.js":function(){var e=window,t=e.se,n=e.ce,i=e.attr,o=e.append,r=e.ge,a=e.each,s=e.addEvent,l=e.removeEvent,c=e.remove,u=e.unlockButton,d=e.setDocumentDomain,A=e.lockButton,m=e.checkNav,f=e.cancelEvent,p=e.checkEvent,_=e.getHref,h=e.extend,v=e.stopEvent,g=e.tag,w=e.gpeByTag,y=e.obj2qs,b=e.scrollToHash,S=e.addClass,C=e.hasClass,k=e.qs2obj,E=e.copy,M=e.isVkWebView,T=e.onDOMReady,j=e.statlogsValueEvent,D=e.browser,x=window,I=x.ajax,P=function(){var e=!(!window.history||!history.pushState),T=null,x=t(function(){return T}),B=[],F=7,L=!1,O=30;function N(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function H(e,t,n){for(var i=B.length-1;i>=0;--i)if(B[i].h==e||B[i].a==e)return void(B[i]={h:e,d:t,a:n});B.push({h:e,d:t,a:n}),B.length>F&&B.shift()}function R(e){for(var t=B.length-1;t>=0;--t)if(B[t].h==e||B[t].a==e)return B=B.slice(0,t+1),B[t].d;return!1}function V(e){var t;if(t=/^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(e)){if(t[1]!=location.protocol)return!1;if(t[2]&&t[2]!=location.hostname)return!1;if(t[3]&&t[3]!=location.port)return!1;e=t[4]}return e}function q(e){var t=n("iframe");i(t,"id","upload_iframe"),i(t,"name","upload_iframe"),i(t,"width","0"),i(t,"height","0"),i(t,"border","0"),i(t,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),o(t,e.parentNode),window.frames.upload_iframe.name="upload_iframe",t=r("upload_iframe");var m=!1;return a(e,function(e,t){return"submit"===t.type?(m=t,!1):void 0}),s(t,"load",function f(){l(t,"load",f),setTimeout(function(){c(t),u(m)},2e3)}),d(),i(e,"target","upload_iframe"),i(e,"method","post"),i(e,"enctype","multipart/form-data"),i(e,"encoding","multipart/form-data"),o(n("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),A(m),setTimeout(function(){c("__extra")},0),!1}function U(e,t){var n=window,i=n.al;if(!window.al||!i.ver)return!0;var o=m(t.target,{skip_onclick:!0,skip_clicable:!0});return o?!0:e===!1?!1:(P.go(e,t)||f(t),!1)}function z(e,t,i){if(!i)return!0;if(p(t))return!0;c("app_go_frame");var o=_(e),r=n("iframe",{id:"app_go_frame",src:i,onload:function(){c("app_go_frame"),o&&P.hard_go(o)}},{display:"none"});return window.bodyNode.appendChild(r),!1}function $(e,t,n){return p(t)?!0:n&&n.push_only?!0:(n&&n.replace?location.replace(e):e&&(location.href=_(e)),!0)}function W(e,t,n){var i=window,o=i.al;f(t);var r=_(e);if(window.al&&o.ver){if(n&&n.push_only)return!0;if(I.nav(r,n))return N(),!0}$(r,t,n)}function Y(t,n,o){var r,s;if(t&&t.href&&t.getAttribute&&t.getAttribute("data-change-location-with-post-away")){s=t.href,r=it(t);var l={};return r.post_id&&(l.post=r.post_id,r.ad_data&&(l.post_ad_data=r.ad_data),s="/away.php?to="+encodeURIComponent(s)+"&"+y(l).substr(1)),$(s,n,o),!1}if(P.onBeforeGo(t,n,o))return!1;if(o=h({no_push:!1,push_only:!1,replace:!1},o),p(n))return!v(n);if(!t)return!0;e&&(o.no_push||o.need_restore)&&(L=!1);var c=t,u="",d="",A="";!t.href&&t.getAttribute&&(c=t.getAttribute("data-href"));function m(e){return"a"===g(e)?e:w("a",e)}var _=n&&m(n.target)||t&&t.tagName&&m(t);if(("input"==g(t)||"button"==g(t))&&("submit"==t.type||"image"==t.type)&&t.form){if(t.disabled)return!0;var E=t.form,M={},T=E.action||"",j=!1;if(a(E,function(e,n){return!n.name||n.disabled?!0:("radio"!==n.type||n.checked)&&("checkbox"!==n.type||n.checked)?"button"===n.type?!0:"submit"===n.type&&n!==t?!0:"image"===n.type&&n!==t?!0:"file"===n.type?(j=!0,!1):void(M[n.name]=n.value):!0}),"image"==t.type&&(M[t.name]=t.value,M[t.name+".x"]=1,M[t.name+".y"]=1),j||"multipart/form-data"==i(E,"enctype"))return q(E);if(!(c=V(T)))return!0;E.method&&"get"!=E.method?o.params=M:c=c.split("?",1).shift()+y(M)}if("string"!=typeof c){if(!c)return!0;u=c.pathname,"/"!==u.substr(0,1)&&(u="/"+u),d=c.search.substr(1),A=c.hash,c=u+c.search+A}else{var D=c.split("#"),x=D.shift();A=D.length?"#"+D.join("#"):"",x=x.split("?"),u=x.shift(),d=x.join("?"),!A&&!d||u||(u=P.path,x||(d=P.params),c=u+(d?"?"+d:"")+A)}var I=k(d);r=it(_,!!I._post_click_type);function B(e,t,n){var i=n&&I[t];return!e||i?!1:(I[t]=e,!0)}if(B(r.post_id,"_post",!0),B(r.post_click_type,"_post_click_type",!0),I._post_click_type&&(B(r.post_click_mention_id,"_post_click_mention_id",!0),B(r.post_click_url,"_post_click_url",!0),B(r.ad_data,"_post_ad_data",!0)&&B(r.ad_block_unique_id,"_post_ad_block_unique_id")),window.isNewMail&&P.onBeforeGo4(u,I))return!1;if(0!==location.pathname.indexOf("/app")&&0===u.indexOf("/app")&&I&&I.act&&"app_r"===I.act)return n?!0:($(t,n,o),!1);if(d=y(I).substr(1),n&&c.split("#").shift()==P.cur.split("#").shift()&&A&&!o.force&&(b(A),o.push_only=!0),o.no_push&&P.cur==c&&!o.force)return!1;if(o.push_only)return K(h(o,{nav:{push:c,path:u,params:d,hash:A}})),!1;if(S("active",o.link||t),C("al_back_history",t)&&P.tryBack())return!1;if(C("al_back",t)){var F=I.act;o.need_restore=window.isNewMail&&"/mail"===location.pathname&&!F||"show"===F&&!geByClass1("messenger")?!1:!0}var O=X(h(o,t.tagName?{target:t}:{},{nav:{push:c,path:u,params:d,hash:A}}));return O||f(n),O}function X(e){var t=window,n=t.cur,i=window,o=i.menu,r=k(e.nav.params),a=k(P.params);if((a.z||r.z)&&a.z!=r.z){if(P.path==e.nav.path){var s=E(r),l=E(a);if(delete s.z,delete l.z,s=y(s),l=y(l),s==l)return G(r.z,!1,e),K(e),o.close(null,!0),!1}e.zProcess=function(t,n){G(r.z,t,h({},e,{no_push:!0}),n)}}return e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&n.processNav&&n.processNav(e)?(K(e),o.close(null,!0),!1):(W(e.nav.push,null,e),!1)}function G(e,t,n,i){var o,r=window,a=r.photo,s=window,l=s.zlayer;if(e){if(o=/^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i.exec(e)){if(i===!0)return!1;var c=o[1]||"",u=o[2]||"";return a.zopen(!1,null,c,u,{no_push:(n||{}).no_push}),l&&t!==!1&&"undefined"!=typeof t&&(l._st=t),!0}if(o=/^story(-?\d+_\d+)(\/?([a-z0-9_-]+))?$/i.exec(e)){var d=window,A=d.Stories;if(i===!0)return!1;var m=o[1]+(o[2]?o[2]:"");return A.close({isPopState:!0,storyRaw:m}),!0}}return i===!1?!1:(l&&l.close(),Stories&&Stories.close({isPopState:!0}),!0)}function Q(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e)t="/"==t.substr(0,1)?t:"/"+t,window.isNewMail?n.replace?history.replaceState(i,null,t):history.pushState(i,null,t):n.replace?history.replaceState(null,null,t):history.pushState(null,null,t);else{var o="/"==t.substr(0,1)?t:"/"+t,a="#"+o,s=location.pathname+location.search+a;r("base").href=o,n.replace?location.replace(s):(T=a,location.href=s)}}function K(t){if(!t.no_push&&P.cur!=t.nav.push)try{window.isNewMail?Q(t.nav.push,t,t.historyState):Q(t.nav.push,t),e&&!t.no_push&&(t.nav_init||t.nav_incr)?(t.nav_init&&(L=0),t.nav_incr&&L!==!1&&L++,L>O&&(L=!1)):L=!1}catch(n){return $(t.nav.push,null,t)}P.cur=t.nav.push,P.path=t.nav.path,P.params=t.nav.params,P.hash=t.nav.hash,0!==P.path.indexOf("/")&&(P.path="/"+P.path)}function J(){var e=location.hash||"";T!==e&&(T=e,x(!0)),setTimeout(J,100)}function Z(){var e=L;return e&&history.go(-e),L=!1,e?!0:!1}if(e)s(window,"popstate",function(e){return window.isNewMail&&P.onPopState()?(preventEvent(e),void v(e)):void Y(location,null,{no_push:!0,need_restore:!0})});else{var et=location.hash||"";"#/"==et.substr(0,2)&&$(et.substr(1),null,{replace:!0});var tt=function(e){e=(e||"").substr(1),e&&"/"==e.substr(0,1)||(e=location),Y(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?s(window,"hashchange",function(){tt(location.hash||"")}):(J(),x(function(e){tt(e)}))}function nt(){var e=k(P.params);e.z&&G(e.z)}function it(e,t){var n=!(!e||!e.getAttribute),i={};if(!n)return i;var o=e.getAttribute("data-post-id");o&&(i.post_id=o);var r=e.getAttribute("data-post-click-type");r&&(i.post_click_type=r);var s=e.getAttribute("mention_id");s&&(i.post_click_mention_id=s);var l=[e.getAttribute("href"),e.getAttribute("data-href")];a(l,function(e,t){return t&&"#"!==t?(i.post_click_url=t,!1):void 0});var c=!!r||t;if(c){var u=gpeByClass("_ads_promoted_post_data_w",e),d=u&&u.getAttribute("data-ad"),A=u&&u.getAttribute("data-ad-block-uid");d&&(i.ad_data=d),A&&(i.ad_block_unique_id=A)}return i}var ot=(location.pathname||"").replace(/^\/+/,"/"),rt=location.search||"",at=location.hash||"";return{onBeforeGo:befall(),onBeforeGo2:befall("path","queryObject","fullUrl","opts"),onBeforeGo4:befall("path","queryObject"),onPopState:befall(),go:Y,al_go:W,app_go:z,hard_go:$,go_after:U,page_set:H,page_get:R,set:K,checkUrl:V,tryHistoryBack:Z,zInit:nt,getPostParams:it,cur:ot+rt+at,path:ot,params:rt.substr(1),hash:at,clear:function(){return B=[]},getQuery:function(e){var t=k(P.params);return e?t[e]||null:t},getNotifierScrollTop:function(){var e=B.find(function(e){return"/settings?act=notifier"===e.h});return e?e.d.st:null},reload:function(){return P.go(P.cur)},tryBack:function(){var e=B.slice(-2)[0];return e?(P.go(e.h,null,{need_restore:!0}),!0):!1},openInNativeApp:function(e,t,n){var i=this;if(this._openAppInProgress)return!1;f(t);var o={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},r="vk://vk.com"+P.cur,a=D.mi?1500:300;D.safari&&(a=D.ios>10?0:1100);var c=Date.now(),u=setTimeout(function(){i._openAppInProgress=!1,Date.now()-c>a+200||!document.hasFocus()||P.hard_go(n&&n.href?n.href:o[e])},a),d=function m(){clearTimeout(u),i._openAppInProgress=!1,l(window,"blur",m)};if(s(window,"blur",d),D.ios){var A=function p(){window.menu&&window.menu.close(),l(window,"focus",p)};s(window,"focus",A)}else window.menu&&window.menu.close();return this._openAppInProgress=!0,P.hard_go(r),j("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!M()){var e=geByClass1("mmi_open_in_app");e&&S("supported",e)}}}}();T(function(){P.initOpenInNativeAppBtn()}),window.nav=P},"./static/js/mobile/modules/ownerPhotoUpload.js":function(){var e=window,t=e.parseJSON,n=e.bind,i=e.clog,o=e.ajx2q,r=e.canUploadFile,a=e.attr,s=e.uploadFile,l=e.readFile,c=e.replace,u=e.clone,d=e.ce,A=e.befall,m=window,f=m.ajax,p={onUploadedDone:A("resp"),fallback:function(e){var t=window,n=t.nav,i=e.nextSibling;return i?!n.go(i):!1},onUploadProgress:function(e){var t=window,n=t.photoview;n.updateUpload({progress:e.loaded/e.total})},onUploadComplete:function(e){var i=window,o=i.photoview,r=this,a=e.target.responseText,s=!1;try{s=t(a)}catch(l){s={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}if(s.error)p.onUploadError.call(r,e);else{r.xhr=null,r.photo_res=a,r.photo_size=s.size;var c=r.static_url+s.x_src,u=s.size[0],d=s.size[1],A=Math.min(u,d);o.onClose=n(p.onClose,r),o.openCrop({src:c,max_scale:A/200,onSelect:n(p.onCropSelected,r)})}},onUploadError:function(e){var t=window,n=t.photoview;i("upload error.",e.target.responseText),n.close()},onClose:function(){this.xhr&&this.xhr.abort&&this.xhr.abort()},onCropSelected:function(e,t,n){var i=window,r=i.photoview,a=this,s=a.photo_res,l=a.photo_size,c=l[0],u=l[1],d=Math.min(c,u),A=Math.round(e*c),m=Math.round(t*u),_=Math.round(n*d);if(a.upload_edit_url)var h=a.upload_edit_url;else var h=a.base_url+"upload.php?"+o({act:"owner_photo_edit",_query:s,_origin:location.protocol+"//"+location.host});a.xhr=f.plainpost(h,{_crop:[A,m,_].join(",")},function(e){p.onCropSuccess.call(a,e)},function(){p.onCropCancel.call(a)},!0),r.updateCrop({saving:!0})},onCropSuccess:function(e){var t=window,n=t.photoview,i=this;i.xhr=f.post("/photos.php?act=done_photo",{_ajax:1,_query:e,_from:i.from},{onDone:function(e){p.onUploadedDone(e),n.close()},onFail:function(){p.onCropCancel.call(i)}})},onCropCancel:function(){var e=window,t=e.photoview;t.updateCrop({saving:!1})},prepareInput:function(e){e.files&&e.files.length&&(e.value="")},start:function(e,t){var i=window,o=i.photoview;if(!e||!r())return p.fallback(e,t);var d=e.files,A=d[0]||!1,m=a(e,"data-upload-url"),f=a(e,"data-base-url"),_=a(e,"data-static-url"),h=a(e,"data-from");if(!A)return!1;if(!m)return p.fallback(e,t);var v={upload_url:m,base_url:f,static_url:_,file:A,from:h};return v.xhr=s(m,{photo:A},{onProgress:n(p.onUploadProgress,v),onComplete:n(p.onUploadComplete,v),onError:n(p.onUploadError,v)}),l(A,function(e){o.updateUpload({thumb:e})}),c(u(e),e),o.onClose=n(p.onClose,v),o.openUpload({src:null}),!1},getCropFromTag:function(e,t,n){if(!e)return!1;if(3==e.length)var i=+e[0],o=+e[1],r=+e[2];else{var i=+e[0]*t/1e4,o=+e[1]*n/1e4,r=+e[2]*t/1e4,a=+e[3]*n/1e4;if(r>a&&(i+=(r-a)/2,r=a),200>r){var s=(200-r)/2;i-=s,o-=s,r=200}r=Math.min(Math.max(r,200),Math.min(t,n)),i=Math.min(Math.max(i,0),t-r),o=Math.min(Math.max(o,0),n-r)}return[i/t,o/n,r/Math.min(t,n)]},crop:function(e){if(!e||!e.size&&!e.url)return!1;var t=window,i=t.photoview,o={upload_edit_url:e.upload_url};if(e.size){o.photo_size=e.size;var r=Math.min(e.size[0],e.size[1]);i.onClose=n(p.onClose,o),i.openCrop({src:e.thumb,max_scale:r/200,rect:p.getCropFromTag(e.rect,e.size[0],e.size[1]),onSelect:n(p.onCropSelected,o)})}else{var a=d("img",{src:e.url,onload:function(){o.photo_size=[a.width,a.height];var t=Math.min(a.width,a.height);i.updateCrop({src:e.thumb,max_scale:t/200,rect:p.getCropFromTag(e.rect,a.width,a.height),onSelect:n(p.onCropSelected,o)})}});i.onClose=n(p.onClose,o),i.openCrop({src:!0})}return!0}};window.ownerPhotoUpload=p},"./static/js/mobile/modules/pStats.js":function(){var e=window,t=e.ge,n=e.attr,i=(e.clog,e.lsCheck),o=e.isEmpty,r=e.vkNow,a=e.lsGet,s=e.intval,l=e.lsSet,c=e.extend,u=e.hasClass,d=e.gpeByClass,A=e.each,m=e.geByClass,f=e.addClass,p=e.checkPostsSeen,_=e.hashCode,h=window,v=h.ajax,g=window,w=g.nav,y={_seen:{},_saved:{},_saveTimer:null,_sendTimer:null,_cleanTimer:null,LS_ADS_EVENTS:"ads.events",postsGetRaws:function(e){e=t(e);var i,o=e.id||"",r=n(e,"data-copy")||"",a={};if("block_"===o.substr(0,6)){a[o]=1,a.block=o.substr(6);var l=n(e,"data-contain");l&&(l=l.split(","),l.forEach(function(e){e=e.split(":"),a[e[0]]=s(e[1])||1}))}else(i=o.match(/^wall(-?\d+_\d+)$/))&&(a[i[1]]=1,(i=r.match(/^(-?\d+_\d+)$/))&&(a[i[1]]=-1));var c=n(e,"data-ad-view");return c&&(a["ad_"+c]=1),a.index=indexOf(domPN(e).children,e)-1,a},seen:function(e){var t,n,i,o,r,a,s,l,c=window,u=c.vk;if(u.id&&e.length){window._postsExtras||(window._postsExtras={});for(t in e){s=e[t].index,l=e[t].block;for(n in e[t])"index"!=n&&"block"!=n&&(o=e[t][n],r=y._seen[n],a=y._saved[n],-1==a||-1==r||1==o&&(a||r)||(i=y._seen[n]=o,_postsExtras[n]={index:s,block:l}))}i&&(clearTimeout(y._saveTimer),y._saveTimer=setTimeout(y.save,2500),clearTimeout(y._sendTimer),y._sendTimer=setTimeout(y.send,5e3))}},save:function(){if(!i()||o(y._seen))return y._seen;var e,t,n,c,u,d=window,A=d.vk,m=Math.floor((A.ts+Math.floor((r()-A.started)/1e3))/3600),f=a("posts_sent")||{},p=a("posts_seen")||{},_=a("posts_extras")||{};window._postsExtras||(window._postsExtras={});for(t in y._seen)u=y._seen[t],_postsExtras[t]&&(_[t]={index:_postsExtras[t].index,block:_postsExtras[t].block},delete window._postsExtras[t]),n=t.split("_"),"ad"!==n[0]&&"block"!==n[0]&&(n[0]=s(n[0]),n[1]=s(n[1])),c=(f[n[0]]||{})[n[1]],n[0]!=A.id&&(!c||-1==u&&c>0)&&(p[n[0]]||(p[n[0]]={}),(!p[n[0]][n[1]]||-1==u&&p[n[0]][n[1]]>0)&&(e=p[n[0]][n[1]]=m*u)),y._saved[t]=u;y._seen={},e&&(l("posts_seen",p),l("posts_extras",_))},getSeenData:function(){var e,o,r,l={},c={},u=[];if(i())l=a("posts_seen"),c=a("posts_extras")||{};else{r=y.save();for(e in r){var d=r[e],A=e.split("_");A[0]=s(A[0]),A[0]&&(A[1]=s(A[1])),l[A[0]]||(l[A[0]]={}),(!l[A[0]][A[1]]||-1==d&&l[A[0]][A[1]]>0)&&(l[A[0]][A[1]]=d)}}for(e in l){r=[];for(o in l[e]){var m=l[e][o]>0?o:-o,f=c[e+"_"+o],p=f?(":"+(f.index||"")+":"+(f.block||"")).replace(/:+$/,""):"";"block"!==e||cur._pstatbref||(cur._pstatbref=n(t(e+"_"+o),"data-ref")),r.push(m+p)}r.length&&u.push(e+"_"+r.join(","))}return u.length?{seen:l,data:u.join(";")}:""},onSend:function(e){var t,n;if(!i())return c(y._saved,y._seen);var t,n,r=a("posts_seen")||{},s=a("posts_sent")||{};for(t in e){for(n in e[t])s[t]||(s[t]={}),-1!=s[t][n]&&(s[t][n]=e[t][n]),(r[t]||{})[n]&&delete r[t][n];r[t]&&o(r[t])&&delete r[t]}l("posts_seen",r),l("posts_sent",s),clearTimeout(y._cleanTimer),y._cleanTimer=setTimeout(y.clean,1e4)},send:function(){var e=window,t=e.cur,n=window,i=n.vk,o=y.getSeenData();if(o.data){if(!i.id)return y.clear();var r="";t&&t.module?r=t.module:w&&"/feed"==w.cur&&(r="feed");var a={_ajax:1,act:"ping",_pstat:o.data,_pstatref:r};t._pstatbref&&(a._pstatbref=t._pstatbref),v.post("/",a,{onDone:function(){y.onSend(o.seen)}}),delete t._pstatbref}},clean:function(){var e,t,n,i=window,s=i.vk,c=Math.floor((s.ts+Math.floor((r()-s.started)/1e3))/3600),u=a("posts_sent")||{};for(e in u){for(t in u[e])n=u[e][t],c-(n>0?n:-n)>24&&delete u[e][t];o(u[e])&&delete u[e]}l("posts_sent",u),y.cleanAdsEvents()},clear:function(){l("posts_seen",{}),l("posts_sent",y._saved=y._seen={}),l(y.LS_ADS_EVENTS,y._lsAdsEvents={})},getStatsObj:function(e){return e=t(e),u("_stats_cont",e)?e:d("_stats_cont",e)},getAdsEvents:function(){var e=y._lsAdsEvents;return e||(e=y._lsAdsEvents=a(y.LS_ADS_EVENTS)||{}),e},cleanAdsEvents:function(){var e=y.getAdsEvents(),t=(new Date).getTime()/1e3|0,n=3600,i=!1;A(e,function(o,r){t-r>=n&&(delete e[o],i=!0)}),i&&l(y.LS_ADS_EVENTS,e)},checkPixelEvent:function(e,t){var n=e.getAttribute("data-ad-block-uid"),i=-1!==indexOf(["load","impression"],t);if(!n||!i)return!0;try{var o=_(""+t+n),r=y.getAdsEvents();if(r[o])return!1;var a=(new Date).getTime()/1e3|0;r[o]=a,l(y.LS_ADS_EVENTS,r)}catch(s){try{console.log(s.message)}catch(c){}}return!0},getPixelElements:function(e,t){var i=[];return A(m(t,e),function(){n(this,"data-src")&&i.push(this)}),i},sendPixels:function(e){A(e,function(){n(this,"src",n(this,"data-src")),n(this,"data-src",!1),f("_cntr",this)})},viewed:function(e){if(e=y.getStatsObj(e)){var t=y.getPixelElements(e,"_cntr_view");t.length&&y.checkPixelEvent(e,"impression")&&y.sendPixels(t)}},clicked:function(e){if(e=y.getStatsObj(e)){n(e,"data-clicked","1");var t=y.getPixelElements(e,"_cntr_click");t.length&&y.sendPixels(t),p()}}};y._sendTimer||(y._sendTimer=setTimeout(y.send,1e4)),window.pStats=y},"./static/js/mobile/modules/page.js":function(){var e=window,t=e.se,n=e.qs2obj,i=e.obj2qs,o=e.scrollTop,r=e.remove,a=e.each,s=e.geByClass,l=e.geByClass1,c=e.addClass,u=e.removeClass,d=e.after,A=e.ce,m=e.val,f=e.append,p=e.evalJs,_=e.extend,h=e.scrollToHash,v=e.onBodyResize,g=e.onBodyScroll,w=e.hasClass,y=e.escapeAttr,b=(e.before,window),S=b.thover,C={onChange:t(),onRestore:t(),fast_load:!1,need_hard_go:!1,getHash:function(e){if("#player"==e.hash)return!1;var t=n(e.params);return delete t.z,e.path+i(t)},getAlias:function(e){if(!e)return!1;var t=(e||"").split("?"),o=t[0],r=n(t[1]);return r.from&&delete r.offset,delete r.from,delete r.z,o+i(r)},set:function(e,t,n,i){window.isNewMail&&toggleClass("vk__page_mail",bodyNode,"/mail"===e);var g=window,w=g.zlayer,y=window,b=y.cur,k=window,E=k.nav,M=window,T=M.menu,j=window,D=j.audioplayer;n=n||{};var x=o(),I=null;if(w.opened()&&(x=w._st),n.force||(I=r("m"),a(s("_cntr",I),function(){r(this)}),r(l("_cntrs",I))),!n.after&&!C.fast_load){var P=C.getHash(E);C.save(P,{html:null,st:x,page:I,state:C.stash(),cur:window.cur},!0)}if(n.before||C.clear(),(n.before||!n.before&&!n.after)&&(window.lm_qsearch_counter?window.lm_qsearch_counter++:window.lm_qsearch_counter=1),n.before){C.fast_load=!0,i&&i.target&&c("__al_target",i.target);var B=I.cloneNode(!0);i&&i.target&&u("__al_target",i.target);var F=l("__al_target",B);u("__al_target",F),n.beforeAppend&&n.beforeAppend(B,F),d(B,"l"),b.toggleHeaderSearch&&b.toggleHeaderSearch(!1),n.afterAppend&&n.afterAppend(B),T&&T.clear_hover(),T&&T.closeSearch(),T&&T.enabled(!0)}else{if(i&&i.zProcess&&i.zProcess(0,!0)&&delete i.zProcess,i&&E.set(i),C.need_hard_go)return E.hard_go(E.cur,null,{replace:!0});if(!n.force){t.title&&(document.title=t.title);var L=t.page;if(L||(L=A("div",{id:"m"}),m(L,t.html)),T.opened()){var O=A("div",{id:"m_helper",onclick:T.close});f(O,L)}d(L,"l")}C.fast_load=!1,S.clear(),t.lm&&T.refresh(t.lm),t.bc&&(window.bodyNode.className=t.bc),w.opened(),i&&i.zProcess?i.zProcess(0,!1)&&delete i.zProcess:w.close(),n.force||(t.js&&p(t.js),t.state&&C.stash(t.state),t.cur&&_(window.cur,t.cur),C.save(e,t));var N=i?i.nav&&i.nav.hash:E.hash;t.st||!N?o(t.st||0,10):n.no_scroll&&!n.force?o(x,10):h(),D&&D.initAudio(),AudioMessagePlayer&&AudioMessagePlayer.redrawWaves()}var H=window,R=H.Tabs;v(R.actualizeShowMoreVisibility),R.actualizeShowMoreVisibility(),C.onChange(!0,i&&i.nav&&i.nav.push)},save:function(e,t,n){if(e){var i=window,o=i.nav,r=n?o.page_get(e):{};r&&o.page_set(e,_(r,t),C.getAlias(e))}},restore:function(e){var t=window,n=t.nav,i=n.page_get(e);return i||(i=n.page_get(C.getAlias(e))),i?(C.onRestore(!0),i):!1},stash:function(e){var t=window,n=t.cur;return window.cur&&n.stash&&n.stash(e)||!1},clear:function(){var e=window,t=e.cur,n=window,i=n.zlayer,o=window,r=o.menu,s=window,l=s.tooltip;g("__clear"),v("__clear"),r&&r.initEvents(),i.isReady&&i.initEvents(),l&&l.clear(),window.cur&&t.destroy&&a(t.destroy,function(){this()}),window.cur={destroy:[]}},setMhead:function(e,t,n,i){var o=l("mhead",e),r=l("mhb_logo",o),a=l("mh_header",e),s=!1,c=window,u=c.nav;if(!n)return void(t&&m(a,t));n===!0?s=u.path+(u.params?"?"+u.params:""):n&&(s=n),t||(t=m(a)||"&nbsp;");var d=l("mhb_back",e),A="",f=w("mh_nobr",d)?" mh_nobr":"",p=i?' onclick="'+i+'"':"";if(A="/"==s?'<div class="hb_wrap mhb_back'+f+'"'+p+'><h1 class="hb_btn mh_header">'+t+"</h1></div>":'\n        <div class="header__center hb_wrap mhb_back '+f+'">\n          <a class="header__back al_back" href="'+y(s)+'" accesskey="0" '+p+'></a>\n          <h1 class="header__title hb_btn mh_header mhi_back">'+t+"</h1>\n        </div>\n      ",o&&r){var _=l("mhb_notify",e);m(o,(window.al&&window.al.menu?'<a href="/" class="hb_wrap mhb_home" accesskey="*" onclick="return menu.toggle(event);"><div class="hb_btn mhi_home">&nbsp;</div></a>':'<a href="/" class="hb_wrap mhb_home mhb_vkhome" accesskey="*"><div class="hb_btn mhi_home mhi_vkhome">&nbsp;</div></a>')+'<div id="header_msgs" class="hb_wrap mhb_notify'+(!_||w("mhb_no_notify",_)?" mhb_no_notify":"")+'">'+m(_)+"</div>"+A)}else d&&(d.outerHTML=A)}};window.page=C},"./static/js/mobile/modules/photo.js":function(){var e=window,t=e.geByClass1,n=e.tag,i=e.geByTag1,o=e.ce,r=e.hasClass,a=e.attr,s=e.removeEvent,l=e.addEvent,c=e.qs2obj,u=e.each,d=e.len,A=e.extend,m=e.copy,f=e.onDOMReady,p=e.scrollTop,_=e.getY,h=e.scrollToEl,v=e.scrollToHash,g=e.obj2qs,w=e.escapeAttr,y=e.remove,b=e.val,S=e.toggleClass,C=e.show,k=e.hide,E=e.gpeByClass,M=e.geByTag,T=e.addClass,j=e.checkEvent,D=e.unescapeAttr,x=e.removeClass,I=e.ge,P=e.cancelEvent,B=e.isUndefined,F=window,L=F.ajax,O=window,N=O.nav,H=window,R=H.post,V=window,q=V.zlayer,U=function(){var e,F,O,H,V,z,$,W,Y,X,G,Q,K,J,Z,et=1,tt=!1,nt={},it={},ot={},rt=null,at=null,st=!1,lt=null,ct=null,ut=!0,dt=!1,At=0,mt=!1;function ft(){if(e=t("photo_view","m"),!e)return N.al_go(N.cur),!1;if(F=t("pv_summary",e),G=t("photo_msg",e),Q=t("pv_tag_wrap",e),V=t("pv_body",e),z=t("thumb_item",V),H=t("pv_nav",V),Y=t("pv_photo_wrap",z),$="a"==n(z)?z:!1,W=i("img",z),X=t("pv_footer",e),(O=t("summary_loading",F))||(O=o("div",{innerHTML:'<i class="i_loading"></i>',className:"summary_loading"},{display:"none"}),F.appendChild(O)),tt=r("pv_touch_full",V),H){var c=t("pv_nav_left",H),u=t("pv_nav_z",H),d=t("pv_nav_right",H);K=t("pv_nav_link",c),Z=t("pv_nav_link",u),J=t("pv_nav_link",d),a(K,"onclick","return photo.prev(event);"),a(J,"onclick","return photo.next(event);"),a($,"onclick",tt?!1:"return photo.next(event);"),L.prepare_click([K,J,$])}return s(window,"orientationchange",bt),l(window,"orientationchange",bt),!0}function pt(){var t=window,n=t.photoview;return n?mt?!0:(mt=!0,n.onPhotoChange=function(e,t){At=e,Ct(e,t)},n.onUpdate=function(){},n.onClose=function(t){if(!kt(t))return!0;var n=c(N.params);e&&n.list==at&&St(At,!0)},!0):!1}function _t(e){var t=window,n=t.photoview,i=[];return u(e,function(e,t){return t?void i.push(nt[t.id]=t):!0}),rt&&n&&n.saveSource(wt(rt)),i}function ht(e){return nt[e]||{}}function vt(e,t,n){if(null===t)return void delete it[e];it[e]||(it[e]=new Array(n?n:d(t))),_t(t);var i=it[e];st&&i.reverse(),A(i,t),st?(rt=m(i),i.reverse()):rt=i}function gt(e){if("string"!=typeof e)return e;var t=it[e]||[];return st?m(t).reverse():t}function wt(e){var t=gt(e),n=new Array(t.length),i=c(N.params);delete i.z;for(var o in t){var r=rt[o],a="photo"+r.id+"?list="+at+(st?"&rev=1":"")+(ct?"&from="+ct:"");n[o]={id:r.id,photo_url:"/"+a,like_url:"/like?act="+(r.likes_me?"del":"add")+"&object=photo"+r.id+"&from="+encodeURIComponent(a)+"&list="+at+"&hash="+r.like_hash,likes_me:r.likes_me,src:r.original_src,tags:r.tags,caption:r.caption,likes_cnt:r.likes_cnt,replies_cnt:r.replies_cnt}}return n}function yt(e,t){t||(t=rt);for(var n in t)if(rt[n].id==e)return+n;return-1}function bt(){N.hash||f(function(){if(t("photo_view")){var e=p();V&&_(V)<e&&h(V)}})}function St(t,n,o){var r=window,s=r.cur,l=window,d=l.lang,m=rt[t],f=1==rt.length;if(m){N.hash?v(N.hash):bt();var p={};lt&&(p.list=lt),st&&(p.rev=1),ct&&(p.from=ct);var _=g(p),h="photo"+m.id+_,C=m.photo,k=(Mt(t-1)||{}).id,E=(Mt(t+1)||{}).id;if(f||($.href="/photo"+E+_,K&&(K.href="/photo"+k+_),J&&(J.href="/photo"+E+_),L.prepare_click([K,J,$])),tt){var M="photo"+m.id+"/"+lt+(st?"/rev":""),T=A({},p,{z:M}),j="/photo"+m.id+g(T);if(q._lastNav){var D=q._lastNav;T=c(D.params),T.z=M,j=D.path+g(T)+D.hash}Z&&(Z.href=j),L.prepare_click(Z),a(Z,"onclick","return photo.fullscreen('"+w(j)+"', event);")}if(W&&W.src!=C){W.onload=null,y(W);var x="";u(m.tags,function(e,t){if(!e||0==e)return!0;var n=t[0][0],i=t[0][1],o=t[0][2],r=t[0][3];x+='<div class="pv_tag" style="left: '+n+"%; top: "+i+"%; width: "+o+"%; height: "+r+'%;" id="pv_tag'+e+'" onclick="return photo.selectTag('+e+', event, true);"><div class="fill"></div></div>'}),b(Y,'<img src="'+C+'" alt="" class="ph_img" />'+x),W=i("img",Y)}S("photo_deleted",e,!!m.deleted),S("pv_one_photo",V,1==rt.length),b(F,(d.mobile_photos_photo_header||"").replace("%s",At+1).replace(/%s|{count}/,rt.length)),b(Q,m.tag_info||"");var I="",P=(s.sticker_panel||"").split("photo-0_0").join("photo"+m.id),B=(m.comments_html||"").split("<!--stickers_panel-->").join(P);if(m.caption&&(I+='<div class="mv_description">'+m.caption+"</div>"),m.tags_list&&(I+='<dl class="pv_tags_list si_row"><dt>'+d.mobile_photos_on_this_photo+"</dt><dd>"+m.tags_list+"</dd></dl>"),m.was_edited&&(I+='<dl class="si_row"><dt>'+d.mobile_photos_photo_was_edited+"</dt></dl>"),m.album_link&&(I+='<dl class="si_row"><dt>'+d.mobile_photos_photo_album_label+"</dt><dd>"+m.album_link+"</dd></dl>"),m.author_link&&(I+='<dl class="si_row"><dt>'+d.mobile_photos_photo_author_label+"</dt><dd>"+m.author_link+"</dd></dl>"),(m.date||m.likes||m.publish)&&(I+='<div class="vi_values">'+(m.date||"")+(m.likes||"")+(m.publish||"")+"</div>"),b(X,'<div class="like_box bl_cont"><div class="photo_msg bl_none">'+(m.deleted||"")+'</div><div class="mv_details">'+I+'</div><ul class="mv_actions">'+(m.actions||"")+'</ul></div><div class="comments_wrap bl_cont">'+B+"</div>"),R.stickersInit(),s.replyTo=0,L.refreshLinks(m.fv_link,m.app_link),U.closeTags(),!n){var O="/"+h;N.go(O,null,{no_push:n,push_only:!0,replace:o})}}ut||(Tt(),jt())}function Ct(e,t){{var n=window,i=n.photoview,o=rt[e];1==rt.length}if(t=t||{},o){var r=c(N.params);if(r.z="photo"+o.id+"/"+lt+(st?"/rev":""),t.no_open||i.open(e,wt(rt),{local:t.local}),!t.local&&!t.crop){var a=N.path+g(r)+N.hash;N.go(a,null,{no_push:t.no_push,push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0})}}t.local||t.crop||Tt(!0)}function kt(e){var t=c(N.params);if(delete t.z,!e.local&&!e.crop){if(N.tryHistoryBack())return!1;var n=N.path+g(t)+N.hash;N.go(n,null,{push_only:!0})}return!0}var Et=!1;function Mt(e){return e>0?e%=rt.length:e=(100*rt.length+e)%rt.length,rt[e]}function Tt(e){if(!Et){for(var t=window,n=t.photoview,i=!1,o=1,r=0;5>r;r++){var a=r+At,s=Mt(a);if(!s||!s.owner_id){i=a,o=1;break}}if(i===!1)for(var r=-1;r>-3;r--){var a=r+At,s=Mt(a);if(!s||!s.owner_id){i=a,o=-1;break}}if(i!==!1){var l=Mt(At);if(l){Et=!0,C(O);var c=window,u=c.cur,d=l.owner_id||(l.id||"").split("_")[0],m=a==At&&l.id?"/photo"+l.id:"/photos.php",f={_ajax:1,oid:d,list:at,offset:i,direction:o,rev:st?1:0};u.stickers||(f.need_stickers=1),N.getQuery("community")&&(f.community=N.getQuery("community")),L.post(m,f,{onDone:function(t,i,o,r){k(O),Et=!1,o&&(u.replyNames||(u.replyNames={}),A(u.replyNames,o)),r&&A(u,r),vt(at,t,i||rt.length),e?n&&n.saveSource(wt(at),!1,!0):St(At,!0)}})}}}}function jt(){for(var e=0,t=At+1;et>e;e++){var n=e+t,i=Mt(n),o=i&&i.photo;if(o&&!ot[o]){var r=ot[o]=new Image;r.src=o,r.onload=function(){ot[o]=!0}}}}function Dt(e,t){if(rt=[],e){var n=E("thumbs_list",e)||E("wiki_body",e);n&&u(M("img",n),function(){var e=this,t=a(e,"data-id"),n=a(e,"data-src_big");if(!t||!n)return!0;n=n.split("|");var i=n[0],o=+n[1]||0,r=+n[2]||0;rt.push({id:t,original_src:i,width:o,height:r})})}rt.length||rt.push({id:t,original_src:!0})}function xt(){T("pv_icons_hide",V)}return{save:_t,get:ht,saveSource:vt,getSource:gt,clear:function(){s(window,"orientationchange",bt)},open:function(e,t,n,i,o){if(j(n))return!0;if(!ft())return!0;if(st=!1,"/rev"==t.substr(-4)&&(t=t.slice(0,-4),st=!0),ct=i||null,t)at=t;else{var r=ht(e);at=r.album?"album"+r.album:""}if(lt=at,rt=gt(at),At=yt(e,rt),-1===At){var r=ht(e);if(!r.id)return!1;rt=[r],At=0}ut=rt.length<2,dt=!1;var a=rt[At]&&e!=rt[At].id;return St(At,o&&!a,a),!1},prev:function(e){return j(e)?!0:Et&&!Mt(At-1)?!1:ft()?ut?U.close():(--At<0&&(At=rt.length-1),St(At),xt(),!1):!0},next:function(e){return j(e)?!0:Et&&!Mt(At+1)?!1:ft()?ut?!1:(++At>=rt.length&&(At=0),St(At),xt(),!1):!0},close:function(e){return j(e)?!0:!1},fullscreen:function(e,t){return r("pv_photo_tags_selected",V)?!0:N.go(D(e),t,{need_restore:!0})},showIcons:function(){var e=t("photo_view","m");if(!e)return!1;var n=t("pv_body",e);return n?void setTimeout(function(){x("pv_hidden_icons",n),setTimeout(function(){T("pv_icons_hide",n)},2e3)},10):!1},selectTag:function(e,n,i){if(i&&!r("pv_photo_tags_selected",V))return!0;var o=I("pv_tag"+e),a=t("pv_tag_selected","pv_photo_tags_wrap"),s=I("pv_tag_label"+e),l=t("pv_tag_label_selected","pv_tags_list");return r("pv_tag_selected",o)||(x("pv_tag_selected",a),T("pv_tag_selected",o)),r("pv_tag_label_selected",s)?N.go(s,n):(x("pv_tag_label_selected",l),T("pv_tag_label_selected",s),T("pv_photo_tags_selected",V),P(n),!1)},closeTags:function(e){if(!r("pv_photo_tags_selected",V))return!0;var n=t("pv_tag_selected","pv_photo_tags_wrap"),i=t("pv_tag_label_selected","pv_tags_list");return n&&x("pv_tag_selected",n),i&&x("pv_tag_label_selected",i),x("pv_photo_tags_selected",V),P(e),!1},init:function(e,t,n,i,o,r,a){et=B(a.preload)?1:a.preload,st=!!o,U.saveSource(e,t,n),f(function(){U.open(i,e+(o?"/rev":""),null,r,!0)})},zopen:function(e,t,n,i,o){if(j(t))return!0;o=o||{},pt(),st=!1,"/rev"==i.substr(-4)&&(i=i.slice(0,-4),st=!0);var r=c(N.params);if(delete r.z,ct=o.from||!1,i)at=i;else{var a=ht(n);at=a.album?"album"+a.album:""}if(lt=at,rt=gt(at),rt.length||Dt(e,n),At=yt(n,rt),-1===At&&(Dt(e,n),At=yt(n,rt)),-1===At){var a=ht(n);if(!a.id)return!0;rt=[a],At=0}ut=rt.length<2,dt=!1;var s=rt[At]&&n!=rt[At].id;return Ct(At,{no_push:o.no_push&&!s,replace:s,local:o.local}),P(t),!1},zclose:function(e){return j(e)?!0:!1}}}();window.photo=U},"./static/js/mobile/modules/photoview.js":function(){var e=window,t=e.hasClass,n=e.ge,i=e.geByClass1,o=e.getCw,r=e.getCh,a=e.attr,s=e.setStyle,l=e.extend,c=e.preventEvent,u=e.isUndefined,d=e.clog,A=e.val,m=e.vkNow,f=e.getW,p=e.getH,_=e.scrollTop,h=e.gpeByClass,v=e.toggleClass,g=e.cancelEvent,w=e.qs2obj,y=e.obj2qs,b=e.removeClass,S=e.addClass,C=e.addEvent,k=e.removeEvent,E=e.len,M=e.show,T=e.each,j=e.hide,D=e.escapeAttr,x=e.htsc,I=e.toggle,P=e.formatNum,B=e.remove,F=e.append,L=e.reflow,O=window,N=O.befall,H=window,R=H.ajax,V=window,q=V.thover,U=window,z=U.nav,$=window,W=$.page,Y=window,X=Y.PhotoLike,G=window,Q=G.zlayer,K=window,J=K.photo,Z=function(){var e=!1,O=!1,H=!1,V=!1,U=!1,$=!1,Y=!1,G=!1,K=!1,et=!1,tt=!1,nt=!1,it=!1,ot=!1,rt=!1,at=!1,st=!1,lt=!1,ct=!1,ut=!1,dt=!1,At=!1,mt=!1,ft={min_scale:1,max_scale:3,min_scale_limit:.5,max_scale_limit:5,anim_duration:300,inertia_duration:300,bounce_diff:1.5,crop_padding:20,crop_size:250,fps:0};function pt(){var o=window,r=o.lang,a='<div id="z_photoview"><div class="zpv_siblings"><div id="zpv_left" class="zpv_thumb_item"><img class="zpv_img" alt=""></div><div id="zpv_right" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_body"><div id="zpv_center" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_close_msg_wrap"><div class="zpv_close_msg">'+r.mobile_zphoto_move_to_close+'</div></div><div class="zpv_controls"><div class="mhead zpv_header"><a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a><div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div></div><div class="zpv_zoom_btns"><a class="zpv_zoom_btn zpv_zoomin"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a><a class="zpv_zoom_btn zpv_zoomout"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a></div><div class="zpv_bottom"><div class="zpv_photo_desc_wrap"></div><div class="zpv_bottom_body"><table class="zpv_values like_box row_table"></table></div></div></div><div class="zpv_tags"></div><div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div></div>',s=t("x2",window.bodyNode),l="/images/mobile/zpv_icons"+(s?"_2x":"")+".png?2";(new Image).src=l,Q.create(a,co),e=n("z_photoview"),O=i("zpv_body",e),H=i("zpv_siblings",e),V=i("zpv_controls",e),K=i("zpv_zoom_btns",e),$=i("zpv_close_msg_wrap",e),U=i("zpv_bottom",e),Y=i("zpv_photo_desc_wrap",e),G=i("zpv_values",U),et=i("zpv_zoomin",K),tt=i("zpv_zoomout",K),rt=i("zpv_tags",e),at=i("zpv_crop",e),nt=i("zpv_img","zpv_center"),it=i("zpv_img","zpv_left"),ot=i("zpv_img","zpv_right")}function _t(){e=O=H=V=$=!1,U=G=!1,K=et=tt=!1,nt=it=ot=rt=at=!1}function ht(e){var t=o(),n=r(),i=t/2,a=n/2;if(e.touches){for(var s=0,l=0,c=0,u=0,d=Math.min(2,e.touches.length);d>l;l++)c+=e.touches[l].pageX,u+=e.touches[l].pageY,s++;return d?{pageX:c/d-i,pageY:u/d-a}:{pageX:-i,pageY:-a}}return{pageX:e.pageX-i,pageY:e.pageY-a}}function vt(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)}function gt(e){if(!e)return e;var t=nt.width,n=nt.height,i=t/2,o=n/2;return[e[0]+i,e[1]+o]}function wt(e){if("undefined"!=typeof e.naturalWidth)return{width:e.naturalWidth,height:e.naturalHeight};var t=new Image;return t.src=e.src,{width:e.width,height:e.height}}function yt(e){var t=a(e,"data-id"),n=Ki(zi),i=n.tags||{},o=i[t]||[];return bt(o)}function bt(e){return e[0]?{coords:{x:e[0][0],y:e[0][1],w:e[0][2],h:e[0][3]},name:e[1],href:e[2],al:e[3]}:{}}function St(e){s(H,"overflow",e?"visible":"hidden")}var Ct=null,kt=null;function Et(e,t,n,i,o,r,a,l,c){if(!ft.fps||c){var u=!1,d=l?function(){u||(u=!0,l())}:!1;r?(s.animate(H,"transform",{duration:r,func:a},d),s.animate(nt,o===!1?"transform":"transform, opacity",{duration:r,func:a},d),s.animate(rt,o===!1?"transform":"transform, opacity",{duration:r,func:a},d),s.animate($,o===!1?"transform":"transform, opacity",{duration:r,func:a},d),jn=!0):jn&&(s.animate(H),s.animate(nt),s.animate(rt),s.animate($),jn=!1),s.transform(H,{translate:[t,0]}),s.transform(nt,e,[n,i]),bi(e,n,i),o!==!1&&(s(nt,"opacity",o),(mn||fn)&&(s(rt,"opacity",o),pn=!0),gi(i,o)),hi(e)}else Ct=[e,t,n,i,o,r,a,l,!0],kt||Mt()}function Mt(){Ct&&(Et.apply(window,Ct),Ct=null),clearTimeout(kt),kt=ft.fps?setTimeout(Mt,1e3/ft.fps):null}function Tt(e,t,n){ei(!0),Et(en,Xt,Jt,Zt,Dn,e,t,n),Dn=!1}function jt(e,t,n,i){Et(e.currentScale,e.curBodyX,e.currentX,e.currentY,!1,t,n,i)}function Dt(e){e=gt(e||[0,0]),s.transformOrigin(nt,e)}var xt=!1,It=!1,Pt=null;function Bt(e){var t=e[1].pageX-e[0].pageX,n=e[1].pageY-e[0].pageY,i=Math.sqrt(t*t+n*n),o=180*Math.atan2(n,t)/Math.PI;return{distance:i,angle:o}}function Ft(e){if(!xt)return{scale:1,rotation:0};if(e.length<2)return{scale:xt.scale,rotation:xt.rotation};var t=Bt(e),n=t.distance/xt.startDistance,i=t.angle-xt.startAngle;-90>i&&(i+=360),i>270&&(i-=360);var o={scale:n,rotation:i};return l(xt,o),o}function Lt(e){var t=Bt(e);if(xt){var n=t.distance/xt.scale,i=t.angle-xt.rotation;-180>i&&(i+=360),i>180&&(i-=360);var o={startDistance:n,startAngle:i};l(xt,o)}else xt={startDistance:t.distance,startAngle:t.angle,scale:1,rotation:0}}function Ot(e){return l({originalEvent:e},e,Ft(e.touches),ht(e))}function Nt(e){var t=e.touches;if(t){if(t.length>5||t.length<2)return void(xt&&(_i(Ot(e)),xt=!1));if(xt)return void Lt(t);fi(Ot(e)),Lt(t)}}function Ht(e){var t=e.touches;if(t)return t.length>5||t.length<2?void(xt&&(_i(Ot(e)),xt=!1)):void(xt&&pi(Ot(e)))}function Rt(e){var t=e.touches;if(t)return(t.length>5||t.length<2)&&xt&&(_i(Ot(e)),xt=!1),xt?void Lt(t):void 0}function Vt(e){c(e);var t=(e.detail?e.detail:e.wheelDelta)>0?1.05:.95,n=l({originalEvent:e},e);It||(It=1,di(e),fi(l(n,{scale:It}))),It*=t,pi(l(n,{scale:It})),clearTimeout(Pt),Pt=setTimeout(function(){_i(l(n,{scale:It})),mi(e),It=!1},200)}var qt,Ut,zt,$t,Wt,Yt,Xt,Gt,Qt,Kt,Jt,Zt,en,tn,nn,on,rn,an,sn,ln,cn,un,dn,An,mn,fn,pn,_n,hn,vn,gn,wn,yn,bn,Sn,Cn,kn,En,Mn,Tn,jn,Dn;function xn(){dn=!1,An=!1,mn=!0,fn=!1,yn=!1,bn=!0,Sn=!1,Cn=!1,jn=!1,Dn=!1,ct=!1,dt=!1,At=!1,mt=!1,In()}function In(){qt=0,Ut=0,zt=0,$t=0,Wt=1,Yt=!0,Xt=0,Gt=0,Qt=0,Kt=1,Jt=0,Zt=0,en=1,tn=!1,nn=!1,on=!1,rn=!1,an=!1,sn=!1,ln=!1,cn=!1,un=!1,pn=!1,_n=!1,hn=!1,vn=!1,gn=!1,wn=!1,kn=!1,En=!1,Mn=!1,Tn=!1}function Pn(){return{lastScale:Wt,deltaX:qt,deltaY:Ut,pointX:zt,pointY:$t,curScale:Kt,currentScale:en,curX:Gt,curY:Qt,currentX:Jt,currentY:Zt,curBodyX:Xt}}function Bn(e,t,n){n=n||Pn(),e=e||{};var i=l({},n,e);return u(e.deltaX)||u(e.deltaY)?u(e.pointX)||u(e.pointY)?u(e.lastScale)?u(e.currentScale)?u(e.curScale)||(i.currentScale=i.lastScale*i.curScale,i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.curScale=i.currentScale/i.lastScale,i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.curScale=1,i.currentScale=i.curScale*i.lastScale):(i.curX=i.pointX-i.deltaX*i.curScale,i.curY=i.pointY-i.deltaY*i.curScale,i.currentX=i.curX/i.currentScale,i.currentY=i.curY/i.currentScale):(i.pointX=i.curX+i.deltaX*i.curScale,i.pointY=i.curY+i.deltaY*i.curScale),u(e.curX)||(i.curX=e.curX,i.currentX=i.curX/i.currentScale),u(e.curY)||(i.curY=e.curY,i.currentY=i.curY/i.currentScale),t?i:(qt=i.deltaX,Ut=i.deltaY,zt=i.pointX,$t=i.pointY,Wt=i.lastScale,Kt=i.curScale,en=i.currentScale,Gt=i.curX,Qt=i.curY,Jt=i.currentX,Zt=i.currentY,Xt=i.curBodyX,void 0)}function Fn(){var e=Q.width||o(),t=Q.height||r();if(mt)var n=e,i=Math.min(ft.crop_size,n-2*ft.crop_padding),a=i,s=i;else var a=e,s=t;return{width:a,height:s}}function Ln(e){var t=Fn(),n=t.width,i=nt.width*e,o=(i-n)/2,r=-o;return 0>=o&&(r=o=0),{min:r,max:o}}function On(e){var t=Fn(),n=t.height,i=nt.height*e,o=(i-n)/2,r=-o;return 0>=o&&(r=o=0),{min:r,max:o}}function Nn(){if(mt)var e=qi?qi[0]:{max_scale:ft.max_scale},t=1,n=e.max_scale;else var i=wt(nt),t=ft.min_scale,n=Math.max(ft.max_scale,i.width/o(),i.height/r());return{min:t,max:n}}function Hn(e){d(Qt,e);var t=Q.height||r(),n=Math.abs($i)>=10,i=Math.abs(e)>1,o=t/3.5,a=Math.abs(Qt);return 0>Qt*e&&(n=!0),e=e||0,a>o||!n&&i?(Vn(e),!0):(ci()&&(Dn=1,Tt(300),rn=!1,fn&&(fn=!1,Ci(!0))),!1)}function Rn(){ut&&Z.close()}function Vn(e){var t=Q.height||r(),n=2*Math.abs(Zt)>t?.85:1.7;Bn({curY:(e>1?t:-1>e?-t:Qt>0?t:-t)/n}),Dn=0,Tt(150,"ease-in",Rn),s(V,"width",0),Sn=!0}function qn(e){var t=Q.width||o(),n=t/2,i=-n;return e=e||0,(i>Xt||-1>e)&&an?(zn(),!0):(Xt>n||e>1)&&sn?($n(),!0):(ci()&&Tt(300),!1)}function Un(){yn!==!1&&(St(!1),io(yn),s.transform(it),s.transform(ot),Et(1,0,0,0,1),Dt(),yn=!1)}function zn(){var e=Q.width||o(),t=1.05*e;Jt-=(t+Xt)/en,Xt=-t,yn=zi+1,$i--,Tt(300,"ease-out",Un),Fi(!1,!0),fn=!1,Z.onPhotoChange&&Z.onPhotoChange(zi+1,{no_open:!0,local:dt,crop:mt})}function $n(){var e=Q.width||o(),t=1.05*e;Jt+=(t-Xt)/en,Xt=t,yn=zi-1,$i++,Tt(300,"ease-out",Un),Fi(!1,!0),fn=!1,Z.onPhotoChange&&Z.onPhotoChange(zi-1,{no_open:!0,local:dt,crop:mt})}function Wn(){var e=window,t=e.lang,n=t.mobile_photos_photoview_header||"",i=yn!==!1?yn:zi;n=n.replace("%s",i+1),n=n.replace(/%s|{count}/,qi.length),A("zpv_summary",n)}function Yn(){if(!En)return!1;var e=Qn(),t=e[0],n=e[1],i=e[2];if(Gn(),!t)return!1;var o=on||rn?5.1:4.7,r=t/o,a=n*r-o*r*r/2,s=i*r-o*r*r/2;if(r*=530,a*=140,s*=140,.1>t||!a&&!s)return!1;if(!rn){var l={};on||(l.curX=Gt+a,l.curY=Qt+s),Bn(l);var c=Ln(en);l={},Gt<c.min?l.curBodyX=Yt?Gt-c.min:0:Gt>c.max&&(l.curBodyX=Yt?Gt-c.max:0),Bn(l)}return on?4.7*n:rn?4.7*i:r}function Xn(e){En||(En=[]),En.push([m(),e]),En=En.slice(-20)}function Gn(){En=!1}function Qn(){if(!En||En.length<2)return[0,0,0];for(var e=m(),t=!1,n=En.pop(),i=En.length-1;i>=0;i--){var o=e-En[i][0];if(o>150)break;t=En[i]}if(!t||!n)return[0,0,0];var r=n[1].pageX-t[1].pageX,a=n[1].pageY-t[1].pageY,s=Math.sqrt(r*r+a*a),o=n[0]-t[0];return o?[s/o,r/o,a/o]:[0,0,0]}function Kn(e,t,n,i){var o=e[0],r=e[1],a=n[0],s=n[1],l=i/t;return 1==l?!1:[o+(o-a)/(l-1),r+(r-s)/(l-1)]}function Jn(e,t){var n=Kn([e.curX,e.curY],e.currentScale,[t.curX,t.curY],t.currentScale);if(!n)return!1;var i=n[0],o=n[1];return e.deltaX=i-e.curX,e.deltaY=o-e.curY,e.currentX=e.curX/e.currentScale+i-i/e.currentScale,e.currentY=e.curY/e.currentScale+o-o/e.currentScale,t.deltaX=i-t.curX,t.deltaY=o-t.curY,t.currentX=t.curX/t.currentScale+i-i/t.currentScale,t.currentY=t.curY/t.currentScale+o-o/t.currentScale,n}function Zn(e,t,n){var a,s,l,c,u,d,A,m,_,h,v,g,w,y,b,S,C,k=Q.width||o(),E=Q.height||r(),M=!1,T=15,j=(Math.min(50,k/7),wt(nt)),D=k/j.width,x=E/j.height,I=Math.min(1,D,x),P=yt(e),B=P.coords,F=i("zpv_tl",e),L=f(F),O=p(F),N=(Math.min((k-2*T)/Math.max(B.w*j.width*I/100,L),(E-2*T)/(B.h*j.height*I/100+O+5)),function(){l=j.width*I*n.currentScale,c=j.height*I*n.currentScale,u=k/2-l/2+n.currentX*n.currentScale,d=E/2-c/2+n.currentY*n.currentScale,_=u+B.x*l/100,h=d+B.y*c/100,A=B.w*l/100,m=B.h*c/100,a=_+A/2-L/2,s=h+m+5,w=Math.min(_,a),v=Math.max(A,L),b=w+v,y=h,g=m+O+5,S=y+g,C={}});return n=Bn(C,t,n),n=n||Pn(),N(),T>w?(C.curX=n.curX+(T-w),M=!0):b>k-T&&(C.curX=n.curX-(b-k+T),M=!0),T>y&&(C.curY=n.curY+(T-y),M=!0),n=Bn(C,t,n),n=n||Pn(),N(),S>E-T&&(C.curY=n.curY-(S-E+T),M=!0),n=Bn(C,t,n),t?n:M}function ei(e){Tn&&(Tn=!1,Dt(),e||Tt(),yi(!0,!0))}function ti(e,t,n){var i={};return n=n||Pn(),i.lastScale=e,n=Bn(i,t,n),t?n:!1}function ni(e,t,n){var i={};if(n=n||Pn(),!ui())return t?n:!1;i.curScale=e,n=Bn(i,t,n),n=n||Pn();var o=Nn();return i={currentScale:n.currentScale},n.currentScale<o.min?i.currentScale=n.currentScale+(o.min-n.currentScale)/ft.bounce_diff:n.currentScale>o.max&&(i.currentScale=n.currentScale+(o.max-n.currentScale)/ft.bounce_diff),n=Bn(i,t,n),t?n:!1}function ii(e,t){if(!ui())return!1;var n=!1,i={};t=t||Pn();var o=Nn();return t.currentScale<o.min?(i.currentScale=o.min,n=!0):t.currentScale>o.max&&(i.currentScale=o.max,n=!0),t=Bn(i,e,t),e?t:n}function oi(e){if(!ui())return!1;var t=Nn(),n={pageX:zt,pageY:$t},i=(en>1?1:t.max)/Wt,o=Pn(),r=null;r=ni(i,!0),r=li(n,!0,r),r=ci(!0,r),e&&(r=Zn(e,!0,r),r=ci(!0,r));var a=Jn(o,r);a&&(Dt(a),jt(o),Tn=!0),Tn&&yi(!1,!0),ni(i),li(n),ci(),e&&(Zn(e),ci()),Tn?jt(r,300,!1,ei):Tt(300),ti(en),ki()}function ri(e){if(!ui())return!1;var t={pageX:0,pageY:0},n=Pn(),i=null;e=1==e?1/Wt:e,i=si(t,!0,n),i=ni(e,!0,i),i=ii(!0,i),i=li(t,!0,i),i=ci(!0,i);var o=Jn(n,i);o&&(Dt(o),jt(n),Tn=!0),Tn&&yi(!1,!0),si(t),ni(e),ii(),li(t),ci(),Tn?jt(i,300,!1,ei):Tt(300),ti(en)}function ai(e){if(!ui())return!1;var t=Pn(),n=null;n=Zn(e,!0,t),n=ii(!0,n),n=ci(!0,n);var i=Jn(t,n);i&&(Dt(i),jt(t),Tn=!0),Zn(e)&&(hn||(hn=t)),Tn&&yi(!1,!0),ii(),ci(),Tn?jt(n,300,!1,ei):Tt(300),ti(en)}function si(e,t,n){var i={};return n=n||Pn(),i.deltaX=(e.pageX-n.curX)/n.curScale,i.deltaY=(e.pageY-n.curY)/n.curScale,n=Bn(i,t,n),t?n:!1}function li(e,t,n){var i={};n=n||Pn(),i.pointX=e.pageX,i.pointY=e.pageY;var o=Ln(n.currentScale),r=On(n.currentScale),a=!((tn||r.max||r.min)&&!on&&ui()||rn),s=rn||mt&&!tn&&!o.max&&!o.min;s&&(i.curX=0),a&&(i.curY=n.curY),n=Bn(i,t,n),n=n||Pn(),i={};var l=!1;return n.curX<=o.min?an?(l=!0,i.curBodyX=n.curX-o.min):(i.curX=n.curX+(o.min-n.curX)/ft.bounce_diff,i.curBodyX=Yt?i.curX-o.min:0):n.curX>=o.max&&(sn?(l=!0,i.curBodyX=n.curX-o.max):(i.curX=n.curX+(o.max-n.curX)/ft.bounce_diff,i.curBodyX=Yt?i.curX-o.max:0)),n.curY<r.min?a?i.curY=r.min:rn||(i.curY=n.curY+(r.min-n.curY)/ft.bounce_diff):n.curY>r.max&&(a?i.curY=r.max:rn||(i.curY=n.curY+(r.max-n.curY)/ft.bounce_diff)),n=Bn(i,t,n),t?n:l}function ci(e,t){var n=!1,i={};t=t||Pn();var o=Ln(t.currentScale),r=On(t.currentScale),a=!tn&&!r.max&&!r.min||on||!ui()&&!rn,s=rn;return s&&(i.curX=0),a&&(i.curY=t.curY),t.curX<o.min?(i.curX=o.min,i.curBodyX=0,n=!0):t.curX>o.max&&(i.curX=o.max,i.curBodyX=0,n=!0),t.curY<r.min?(i.curY=r.min,n=!0):t.curY>r.max&&(i.curY=r.max,n=!0),t=Bn(i,e,t),e?t:n}function ui(){return ct?!1:mt?!0:Ui[Wi.src]}function di(e){if(_()||_(0),!Sn){if(e&&"mousedown"==e.type&&c(e),e.touches&&e.touches.length||!st){if(Un(),!nn&&!tn){kn=ht(e);var t=Ln(en);Gt<=t.min&&(an=Ki(zi+1)!==!1),Gt>=t.max&&(sn=Ki(zi-1)!==!1)}if(nn||ct)ln=cn=un=!1,dn=!1;else{clearTimeout(An);var n=ht(e);ln&&m()-ln<500&&cn&&vt(n,cn)<50?(un=m(),dn=!1):(ln=m(),cn=n,dn=m())}ct||(nn=!0)}tn||(Yt=!0,St(!0)),vn=ht(e),Gn(),Xn(vn),si(vn)}}function Ai(e){if(!Sn&&(c(e),nn)){if(ln=cn=un=!1,dn=!1,vn=ht(e),Xn(vn),Mn){if(!(Mn<m()))return void Gn();Mn=!1,si(vn),Tt()}if(kn&&!on&&!rn){var t=Math.abs(vn.pageX-kn.pageX),n=Math.abs(vn.pageY-kn.pageY),i=On(en);if(!(n>5||t>5))return;n>5&&5>=t&&(1!=en||tn||ct||mt?(i.max||i.min)&&(an=sn=!1):(rn=!0,mn&&(fn=!0),Ci(!1),vi(vn.pageY-kn.pageY>0))),kn=!1,si(vn)}var r=li(vn);!r||on||rn||ct||(on=!0,wn=vn.pageX),Ei(),Tt(),on&&Math.abs(Xt)>o()&&mi(l({originalEvent:e},e,{touches:[]}))}}function mi(e){if(!Sn){if(Cn)return void(Cn=!1);if(c(e),e.touches&&!e.touches.length||!st){var n=Yn();if(on)qn(n)&&(In(),St(!0));else if(rn)Hn(n);else if(un&&m()-un<1e3){var i=e&&pn&&(t("zpv_tag",e.target)?e.target:h("zpv_tag",e.target));oi(i),ln=cn=un=!1}else ci()?Tt(300):n&&(ci(),Tt(n,"cubic-bezier(0, 1, 1, 1)"));if(dn)if(m()-dn>700||e&&"touchcancel"==e.type)dn=!1;else{if(dn=!1,e)var o=t("zpv_header",e.target)?e.target:h("zpv_header",e.target),r=t("zpv_zoom_btns",e.target)?e.target:h("zpv_zoom_btns",e.target),a=t("zpv_bottom_body",e.target)?e.target:h("zpv_bottom_body",e.target),i=pn&&(t("zpv_tag",e.target)?e.target:h("zpv_tag",e.target));e&&(o||r||a||i)?i?Bi(i,e):r&&(ln=cn=un=!1,t("zpv_zoomin",e.target)||h("zpv_zoomin",e.target)?Ti(e):ji(e)):_n?Fi(e):mt||(An=setTimeout(function(){Ci(),yi(mn)},500))}nn=!1,on=an=sn=!1,Gn()}e.touches&&(e.touches.length>1||1==e.touches.length&&on)&&(vn=ht(e),si(vn)),(e.touches&&!e.touches.length||!st)&&(kn=!1)}}function fi(e){if(!Sn&&(c(e),ln=cn=un=!1,dn=!1,Gn(),!on&&!rn)){Kt=1,Wt=en,tn=!0,an=sn=!1;var t=Ln(en);(t.min>=-5||t.max<=5)&&(Yt=!1,St(!1));var n=ht(e);si(n),yi(!1,!0)}}function pi(e){Sn||(c(e),ln=cn=un=!1,dn=!1,Gn(),on||rn||(gn=ht(e),ni(e.scale),li(gn),Tt(),ki()))}function _i(e){Sn||(c(e),ln=cn=un=!1,dn=!1,Gn(),on||rn||(ii()&&((e.touches&&e.touches.length||!st)&&li(gn),ci(),Tt(100),Mn=m()+100),tn=!1,yi(!0,!0)))}function hi(e){var t=Nn(),n=e<t.max,i=e>t.min;v("zpv_zb_disabled",et,!n),v("zpv_zb_disabled",tt,!i)}function vi(e){e?s($,{top:-35,bottom:"auto"}):s($,{top:"auto",bottom:-35}),$.is_down=e}function gi(e,t){var n=window,i=n.lang;if(e){var o=Q.height,r=20,a=o/5,l=o/3.5,c=Math.abs(e),u=c>r?e+(e>0?r-e:-r-e)/ft.bounce_diff:e,d=0===t?0:Math.max(0,Math.min((c-20)/a,.75));t>0&&s.transform($,{translate:[0,u]}),s($,"opacity",d);var m=c>l,f=m?"":e>0?" zpv_close_move_down":" zpv_close_move_up",p=m?i.mobile_zphoto_release_to_close:i.mobile_zphoto_move_to_close;A($,'<div class="zpv_close_msg'+f+'">'+p+"</div>"),($.is_down&&0>e||!$.is_down&&e>0)&&vi(e>0)}else s.transform($,{translate:[0,0]}),s($,"opacity",0)}function wi(){var e=i("zpv_close_msg",$),t=f(e);s($,{width:t||250})}function yi(e,t){var n=pn;if(e){if(!ui())return;if(!mn&&!fn||tn)return}pn=e,e&&bi(en,Jt,Zt,t||n!==e),n!==e&&(e&&Si(_n),s.animate(rt,t?!1:"opacity",{duration:200,func:"linear"},function(){s(rt,"visibility",e?"visible":"hidden")}),s(rt,"visibility",e||!t?"visible":"hidden"),s(rt,"opacity",e?1:0))}function bi(e,t,n,i){if(!tn&&pn){var a=Q.width||o(),l=Q.height||r(),c=wt(nt),u=a/c.width,d=l/c.height,A=Math.min(1,u,d),m=c.width*A*e,f=c.height*A*e,p=a/2-m/2+t*e,_=l/2-f/2+n*e;i&&s.animate(rt),s(rt,{width:Math.round(m),height:Math.round(f)}),s.transform(rt,{translate:[Math.round(p),Math.round(_)]})}}function Si(e){if(e){var t=wt(nt),n=Q.width||o(),a=Q.height||r(),l=n/t.width,c=a/t.height,u=Math.min(1,l,c),d=t.width*u*en,A=t.height*u*en,m=yt(e),_=m.coords,h=i("zpv_tl",e),v=f(h),g=p(h),w=_.x*d/100,y=_.y*A/100,b=_.w*d/100,S=_.h*A/100,C=w+b/2-v/2,k=y+S+5,E=n>d?0-(n-d)/2:0,M=n>d?d+(n-d)/2:d,T=a>A?A+(a-A)/2:A,j=0,D=0,x=2,I=5;E+x>C?j=E+x-C:C+v>M-x&&(j=M-x-C-v),k+g>T-I&&(D=S>3*g?T-I-k-g:-S-g-10),s.transform(h,{translate:[Math.ceil(j),Math.ceil(D)]})}}function Ci(e){if("undefined"!=typeof e){if(mn===e)return;mn=!e}else fn=!1;s(V,"width","auto"),s.animate(V,"opacity",{duration:200,func:"linear"},function(){s.animate(V),s(V,"width",mn?"auto":0)}),mn?(s(V,"opacity",0),mn=!1):(s(V,"opacity",1),mn=!0)}function ki(){Q.height<604&&!_n&&!mt&&(en>1.25?(mn&&(fn=!0),Ci(!1)):fn&&(fn=!1,Ci(!0)))}function Ei(){if(rn){var e=Math.abs(Qt),t=Q.height/2;Dn=1-.5*e/t}}function Mi(e){bn&&(nn||tn||on||e&&e.touches&&e.touches.length>1||(g(e),Z.close()))}function Ti(e){return bn?(q.highlight=!1,q.end(e),tn||on?!1:Nn().max<=en?!1:(g(e),ri(mt?1.25:1.45),!1)):!1}function ji(e){return bn?(q.highlight=!1,q.end(e),tn||on?!1:Nn().min>=en?!1:(g(e),ri(mt?.8:1),!1)):!1}function Di(e){if(!(nn||tn||on||!e||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=Ln(en);37==e.keyCode?(g(e),Gt>=t.max&&Ki(zi-1)!==!1&&(St(!0),$n())):39==e.keyCode?(g(e),Gt<=t.min&&Ki(zi+1)!==!1&&(St(!0),zn())):27==e.keyCode&&Mi(e)}}function xi(){mt?ao():yi(pn,!0)}function Ii(e,t){return bn?(q.highlight=!1,q.end(),Wi.likes_me?(Wi.likes_me=!1,--Wi.likes_cnt):(Wi.likes_me=!0,++Wi.likes_cnt),no(),R.click(e,l({photo_id:t},X))):!1}function Pi(e,t){var n=window,o=n.cur;if(!bn)return!1;var r=o.replyNames,a=o.sticker_panel,s=o.stickers,c=z.go(e,t,{local:!0,fast:!0,beforeAppend:function(e){A(i("mcont",e),'<div class="pcont"><div class="media_view photo_view"><div class="pv_summary"><div class="summary_loading" style="display: none;"><i class="i_loading"></i></div></div><div class="pv_tag_wrap"></div><div class="pv_body pv_touch pv_touch_full pv_hidden_icons"><a class="thumb_item"><div class="pv_photo_wrap" id="pv_photo_tags" onclick="return photo.closeTags(event);"><img src="/images/mobile/blank.gif" class="ph_img" alt="" /></div></a><div class="pv_nav"><table class="row_table pv_nav_cont"><tr><td class="pv_nav_left"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_z"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_right"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td></tr></table></div></div><div class="pv_footer"></div></div></div>'),A("m",e.innerHTML)}});l(o,{replyNames:r,sticker_panel:a,stickers:s,processNav:function(e){var t;if(t=/^\/photo(-?\d+_\d+)$/i.exec(e.nav.path)){var n=w(e.nav.params),i=w(z.params);if(n.act)return!1;if(n.offset!=i.offset)return!1;if(n.list!=i.list&&!i.z)return!1;e.onPreNav&&e.onPreNav();var o=n.list||"",r=n.rev?"/rev":"";return!J.open(t[1],o+r,null,n.from,!0)}return!1}}),o.destroy.push(function(){J.clear()});var u=window,d=u.lang;if(!c&&(c=z.go(e,t,{force:!0}),!c)){var m=!0;if(Q._lastNav){var f=Q._lastNav,p=w(f.params);delete p.z,m=f.path+y(p)+f.hash}W.setMhead("m",d.mobile_photos_photo_head_title,m),J.showIcons()}return!0}function Bi(e,n){if(!bn)return!1;if(!pn)return!0;yt(e);return t("zpv_tag_selected",e)?t("zpv_tl_wrap",n.target)||h("zpv_tl_wrap",n.target)?z.go(e,n):(ai(e),g(n),!1):(_n&&(ln=cn=un=!1),b("zpv_tag_selected",_n),_n=e,Si(e),S("zpv_tag_selected",_n),mn&&(fn=!0),Ci(!1),ai(e),g(n),!1)}function Fi(e,t){return bn||t?_n?(b("zpv_tag_selected",_n),_n=!1,fn&&1.25>=en&&(fn=!1,Ci(!0)),g(e),!1):!0:!1}function Li(e){if(!bn)return!1;if(q.highlight=!1,q.end(),t("item_disabled",e))return!1;if(!mt||!qi)return!1;var n=qi[0],i=Fn(),o=nt.width*en,r=nt.height*en,a=(o-i.width)/2-Gt,s=(r-i.height)/2-Qt,l=1/en,c=a/o,u=s/r;return n.onSelect&&n.onSelect(c,u,l),!1}function Oi(e){return bn?(q.highlight=!1,q.end(),t("item_disabled",e)?!1:Mi()):!1}function Ni(e){"touchstart"==e.type?bn=!e.touches||1==e.touches.length:"touchmove"==e.type?(bn=!1,c(e)):"click"==e.type&&(bn||(g(e),bn=!0))}function Hi(e){"touchstart"==e.type?Sn=!0:"touchmove"==e.type?(Sn=!0,c(e)):(Sn=e.touches&&e.length,Cn=!Sn)}function Ri(){if(st="undefined"!=typeof document.ontouchmove,lt=!1,st){var t=i("zpv_header",e),n=i("zpv_bottom_body",e);C(t,"touchstart touchmove touchend touchcancel",Hi),C(n,"touchstart touchmove touchend touchcancel",Hi),C(e,"touchstart touchmove click",Ni),C(e,"touchstart",di),C(e,"touchmove",Ai),C(e,"touchend touchcancel",mi),lt?(C(e,"gesturestart",fi),C(e,"gesturechange",pi),C(e,"gestureend",_i)):(C(e,"touchstart",Nt),C(e,"touchmove",Ht),C(e,"touchend touchcancel",Rt),C(e,"gesturestart gesturechange gestureend",g))}else C(e,"mousedown",di),C(e,"mousemove",Ai),C(window,"mouseup",mi),C(window,"mousewheel",Vt),C(window,"keydown",Di)}function Vi(){if(st){var t=i("zpv_header",e),n=i("zpv_bottom_body",e);k(t,"touchstart touchmove touchend touchcancel",Hi),k(n,"touchstart touchmove touchend touchcancel",Hi),k(e,"touchstart touchmove click",Ni),k(e,"touchstart",di),k(e,"touchmove",Ai),k(e,"touchend touchcancel",mi),lt?(k(e,"gesturestart",fi),k(e,"gesturechange",pi),k(e,"gestureend",_i)):(k(e,"touchstart",Nt),k(e,"touchmove",Ht),k(e,"touchend touchcancel",Rt),k(e,"gesturestart gesturechange gestureend",g))}else k(e,"mousedown",di),k(e,"mousemove",Ai),k(window,"mouseup",mi),k(window,"mousewheel",Vt),k(window,"keydown",Di)}var qi=!1,Ui={},zi=!1,$i=!1,Wi=!1,Yi=!1,Xi=!1;function Gi(e,t,n,i){var o=t?t:E(e);if((!e||n)&&(qi=null),qi||(qi=new Array(o)),qi.length!=o){var r=qi;qi=new Array(o),l(qi,r)}l(qi,e);var a=Qi(Wi.id);-1==a&&(a=zi),i||io(a)}function Qi(e){for(var t in qi)if(qi[t].id==e)return+t;return-1}function Ki(e){return e>=qi.length?!1:0>e?!1:qi[e]||{src:!0}}function Ji(e,t){if(mt){var n=qi[0];if(n.loaded=t,t){var i=wt(e),o=Fn();i.width>i.height?s(e,{height:o.height}):s(e,{width:o.width}),s(e,{minWidth:0,maxWidth:"none"})}ao(!0)}M(e),nt===e&&yi(t,!t)}function Zi(e){if(Ui[e])eo(e);else{var t=new Image;t.src=e,t.onload=function(){d("loaded",e),Ui[e]=!0,eo(e),t=null}}}function eo(e){T([nt,it,ot],function(){var t=this,n=a(t,"data-src"),i=h("zpv_thumb_item",t);n==e&&(d("set",e),t.src=n,Ji(t,!0),b("zpv_ti_loading",i),a(t,"data-src",!1))})}function to(e,t,n){var i=h("zpv_thumb_item",e);t?t!==!0?e.src==t?Ji(e,!0):Ui[t]?(e.src=t,Ji(e,!0)):(n?(e.src=n,Ji(e,!1)):j(e),a(e,"data-src",t),Zi(t),S("zpv_ti_loading",i)):(n?(e.src=n,Ji(e,!1)):j(e),S("zpv_ti_loading",i)):j(e)}function no(){if(ut){Wn(),hi(en);var e=yn!==!1?yn:zi,t=Ki(e);if(t&&t.src!==!0){var n="";T(t.tags,function(e,t){if(!e||0==e)return!0;var i=bt(t),o=i.coords,r=i.href?' data-href="'+i.href+'" data-name="'+D(i.name)+'"':"",a=i.al?(i.href?" al"+i.al:"")+" "+i.al:"";n+='<div class="zpv_tag'+a+'" style="left: '+o.x+"%; top: "+o.y+"%; width: "+o.w+"%; height: "+o.h+'%;" data-id="'+e+'"'+r+'><div class="fill"></div><div class="zpv_tl_wrap" id="zpv_tl_wrap"><div class="zpv_tl'+(i.href?"":" zpv_tl_plain")+'">'+x(i.name)+"</div></div></div>"}),A(rt,n),A(Y,'<div class="zpv_photo_desc">'+(t.caption||"")+'</div><div class="zpv_bottom_bg"></div>'),I(Y,!!t.caption);var i="";if(dt||z.getQuery("community"))i="";else{var o="",r="",a="",s=t.tags&&t.tags[0]||0,o='<td class="row_table_column"><a href="'+t.like_url+'" class="item_button item_like'+(t.likes_me?" item_likes_me":"")+'" onclick="return photoview.likePhoto(this, \''+t.id+'\');"><i class="i_icon i_like"></i>'+(t.likes_cnt?'<b class="v_value v_like">'+P(t.likes_cnt)+"</b>":"")+"</a></td>",r='<td class="row_table_column"><a href="'+t.photo_url+'#comments" class="item_button item_replies al_photo" onclick="return photoview.openPhoto(this, event, true);"><i class="i_icon i_replies"></i>'+(t.replies_cnt?'<b class="v_value v_replies">'+t.replies_cnt+"</b>":"")+"</a></td>",a='<td class="row_table_last_column"><a href="'+t.photo_url+'" class="item_button item_tags al_photo" onclick="return photoview.openPhoto(this, event);"><i class="i_icon i_tags"></i>'+(s?'<b class="v_value v_tags">'+s+"</b>":"")+"</a></td>";i="<tr>"+o+r+a+"</tr>"}A(G,i),M(U)}else j(U)}}function io(e){ut&&(zi=Math.max(0,Math.min(e||0,qi.length)),Wi=Ki(zi),Xi=Ki(zi-1),Yi=Ki(zi+1),to(nt,Wi.src,"/images/mobile/blank.gif"),to(ot,Yi.src),to(it,Xi.src),no(),Z.onUpdate&&Z.onUpdate())}function oo(){if(ut&&At&&qi){var e=qi[0];if(!e.loaded&&e.progress){var t=i("zpvu_progress","zpv_center");s(t,{width:100*e.progress+"%",visibility:"visible"})}if(!e.read&&e.thumb){e.read=!0;var n=i("zpv_upload_box","zpv_center"),o=i("zpv_upload_img",n);s(o,{backgroundImage:"url("+e.thumb+")"}),b("zpv_thumb_uploading",n)}}}function ro(){if(ut&&At){var t=window,n=t.lang;A("zpv_summary",n.mobile_zphoto_upload_header),b("zpv_mode_[a-z]+",e,!0),S("zpv_mode_upload",e);var i='<div class="zpva zpv_upload_box zpv_thumb_uploading"><div class="zpv_upload_img"></div><div class="zpvu_progress_wrap"><div class="zpvu_progress"></div></div></div>';B(nt),A("zpv_center",i);var o='<tr><td class="row_table_column" width="50%"><a class="item_button item_disabled" onclick="return false;"><i class="i_icon i_save"></i><span class="v_value">'+n.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+n.mobile_zphoto_cancel_btn+"</span></a></td></tr>";A(G,o),M(U),oo()}}function ao(t){if(ut&&mt&&qi){var n=qi[0],i=!!n.saving;if(v("item_disabled","zpv_save_button",i||!n.loaded),v("item_disabled","zpv_cancel_button",i),v("zpv_crop_saving",e,i),ct=i,t||to(nt,n.src,"/images/mobile/blank.gif"),n.loaded&&n.rect&&!n.rect_inited){n.rect_inited=!0;var o=Fn(),r=n.rect[0],a=n.rect[1],s=n.rect[2],l={};l.currentScale=1/s,Bn(l),ii(),ci(),l={};var c=nt.width*en,u=nt.height*en,d=r*c,A=a*u;l.curX=(c-o.width)/2-d,l.curY=(u-o.height)/2-A,Bn(l),ci(),Tt(0)}}}function so(){if(ut&&mt){var t=window,n=t.lang;A("zpv_summary",n.mobile_zphoto_owner_crop_header),b("zpv_mode_[a-z]+",e,!0),S("zpv_mode_crop",e),hi(en),nt.parentNode||(A("zpv_center",""),F(nt,"zpv_center"));var i='<tr><td class="row_table_column"><a class="item_button" id="zpv_save_button" onclick="return photoview.savePhoto(this);"><i class="i_icon i_save"></i><span class="v_value">'+n.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" id="zpv_cancel_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+n.mobile_zphoto_cancel_btn+"</span></a></td></tr>";A(G,i),M(U),ao()}}function lo(){ut||(xn(),pt(),Ri(),ut=!0,L(e),_()||_(0))}function co(){ut&&(Vi(),_t(),ut=!1,qi=null)}return{onShow:N(),onHide:N(),likePhoto:Ii,openPhoto:Pi,closePhoto:Mi,savePhoto:Li,cancelPhoto:Oi,onClose:null,onUpdate:null,onPhotoChange:null,saveSource:Gi,opened:function(){return ut},openCrop:function(e,t){t=t||{};var n=!ut;At?At=!1:lo(),mt=!0,ct=!1,qi=[e],n&&(Q.open(),Q.onResize=xi),so()},updateCrop:function(e){return qi?(e=l(qi[0]||{},e),qi=[e],void ao()):!1},openUpload:function(e,t){t=t||{},lo(),At=!0,ct=!0,qi=[e],Q.open(),Q.onResize=xi,ro()},updateUpload:function(e){return qi?(e=l(qi[0]||{},e),qi=[e],void oo()):!1},open:function(e,t,n){Z.onShow(),n=n||{},lo(),dt=n.local||!1,t&&Gi(t,!1,!1,!0),io(e),$i=0,Q.open(),Q.onResize=xi,wi()},close:function(){Z.onHide(),Z.onClose&&Z.onClose({local:dt})||Q.close()}}}();window.photoview=Z},"./static/js/mobile/modules/polyfills/Array.from.js":function(){Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var s,l=o(i.length),c=t(n)?Object(new n(l)):new Array(l),u=0;l>u;)s=i[u],c[u]=a?"undefined"==typeof r?a(s,u):a.call(r,s,u):s,u+=1;return c.length=l,c}}())},"./static/js/mobile/modules/polyfills/Array.isArray.js":function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})},"./static/js/mobile/modules/polyfills/Array.prototype.filter.js":function(){Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],o=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t){var a=t[r];e.call(o,a,r,t)&&i.push(a)}return i})},"./static/js/mobile/modules/polyfills/Array.prototype.find.js":function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;n>o;){var r=t[o];if(e.call(i,r,o,t))return r;o++}return void 0}})},"./static/js/mobile/modules/polyfills/Array.prototype.findIndex.js":function(){Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;i>r;r++)if(t=n[r],e.call(o,t,r,n))return r;return-1})},"./static/js/mobile/modules/polyfills/Array.prototype.forEach.js":function(){Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;o>n;){var r;n in i&&(r=i[n],e.call(t,r,n,i)),n++}})},"./static/js/mobile/modules/polyfills/Array.prototype.includes.js":function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var o=0|t,r=Math.max(o>=0?o:i-Math.abs(o),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;i>r;){if(a(n[r],e))return!0;r++}return!1}})},"./static/js/mobile/modules/polyfills/Array.prototype.map.js":function(){Array.prototype.map||(Array.prototype.map=function(e){var t,n,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=new Array(r),i=0;r>i;){var a,s;i in o&&(a=o[i],s=e.call(t,a,i,o),n[i]=s),i++}return n})},"./static/js/mobile/modules/polyfills/Array.prototype.some.js":function(){Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in t&&e.call(i,t[o],o,t))return!0;return!1})},"./static/js/mobile/modules/polyfills/ChildNode.remove.js":function(){var e=[window.Element,window.CharacterData,window.DocumentType],t=[];e.forEach(function(e){e&&t.push(e.prototype)}),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}(t)},"./static/js/mobile/modules/polyfills/Console.js":function(){!function(e){e.console||(e.console={});for(var t,n,i=e.console,o=function(){},r=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=r.pop();)i[t]||(i[t]={});for(;n=a.pop();)i[n]||(i[n]=o)}("undefined"==typeof window?void 0:window)},"./static/js/mobile/modules/polyfills/Element.prototype.classList.js":function(){"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(e){if("Element"in e){var t="classList",n="prototype",i=e.Element[n],o=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},c=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;o>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[n]=[],d=function(){return new c(this)};if(s[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",-1!==l(this,e)},u.add=function(){var e,t=arguments,n=0,i=t.length,o=!1;do e=t[n]+"",-1===l(this,e)&&(this.push(e),o=!0);while(++n<i);o&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,i=0,o=n.length,r=!1;do for(e=n[i]+"",t=l(this,e);-1!==t;)this.splice(t,1),r=!0,t=l(this,e);while(++i<o);r&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},o.defineProperty){var A={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(i,t,A)}catch(m){(void 0===m.number||-2146823252===m.number)&&(A.enumerable=!1,o.defineProperty(i,t,A))}}else o[n].__defineGetter__&&i.__defineGetter__(t,d)}}(window.self),function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;i>n;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},"./static/js/mobile/modules/polyfills/Element.prototype.closest.js":function(){window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),i=this;do for(t=n.length;--t>=0&&n.item(t)!==i;);while(0>t&&(i=i.parentElement));return i})},"./static/js/mobile/modules/polyfills/Function.prototype.bind.js":function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o})},"./static/js/mobile/modules/polyfills/NodeList.prototype.forEach.js":function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},"./static/js/mobile/modules/polyfills/Object.assign.js":function(){"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t})},"./static/js/mobile/modules/polyfills/Object.freeze.js":function(){Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}},"./static/js/mobile/modules/polyfills/Object.keys.js":function(){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=i.length;return function(r){if("function"!=typeof r&&("object"!==("undefined"==typeof r?"undefined":e(r))||null===r))throw new TypeError("Object.keys called on non-object");var a,s,l=[];for(a in r)t.call(r,a)&&l.push(a);if(n)for(s=0;o>s;s++)t.call(r,i[s])&&l.push(i[s]);return l}}())},"./static/js/mobile/modules/polyfills/Promise.js":function(e,t,n){(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=setTimeout;function i(){}function o(e,t){return function(){e.apply(t,arguments)}}function r(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void d._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var i;try{i=n(e._value)}catch(o){return void s(t.promise,o)}a(t.promise,i)}))}function a(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===("undefined"==typeof n?"undefined":t(n))||"function"==typeof n)){var i=n.then;if(n instanceof d)return e._state=3,e._value=n,void l(e);if("function"==typeof i)return void u(o(i,n),e)}e._state=1,e._value=n,l(e)}catch(r){s(e,r)}}function s(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&d._immediateFn(function(){e._handled||d._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)r(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(i){if(n)return;n=!0,s(t,i)}}function d(e){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}var A=d.prototype;A["catch"]=function(e){return this.then(null,e)},A.then=function(e,t){var n=new this.constructor(i);return r(this,new c(e,t,n)),n},d.all=function(e){return new d(function(n,i){if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return n([]);var r=o.length;function a(e,s){try{if(s&&("object"===("undefined"==typeof s?"undefined":t(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(t){a(e,t)},i)}o[e]=s,0===--r&&n(o)}catch(c){i(c)}}for(var s=0;s<o.length;s++)a(s,o[s])})},d.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t(e))&&e.constructor===d?e:new d(function(t){t(e)})},d.reject=function(e){return new d(function(t,n){n(e)})},d.race=function(e){return new d(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},d._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){n(e,0)},d._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},window.Promise||(window.Promise=d)}).call(this,n("./node_modules/timers-browserify/main.js").setImmediate)},"./static/js/mobile/modules/polyfills/String.prototype.includes.js":function(){String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),t+e.length>this.length?!1:-1!==this.indexOf(e,t)})},"./static/js/mobile/modules/polyfills/String.prototype.trim.js":function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},"./static/js/mobile/modules/polyfills/requestAnimationFrame.js":function(){window.requestAnimationFrame||(window.requestAnimationFrame=function(e){setTimeout(e)})},"./static/js/mobile/modules/post.js":function(){var e=window,t=e.se,n=e.remove,i=e.gpeByTag,o=e.ce,r=e.each,a=e.append,s=e.gpeByClass,l=e.toggleClass,c=e.cancelEvent,u=e.hasClass,d=e.geByClass1,A=e.addClass,m=e.getY,f=e.getH,p=e.scrollTop,_=e.getCh,h=e.removeClass,v=e.checkEvent,g=e.geByClass,w=e.getW,y=e.replaceClass,b=e.escapeRE,S=e.ge,C=e.val,k=e.after,E=e.scrollToEl,M=e.replaceEntities,T=e.toggle,j=e.elfocus,D=e.isUndefined,x=e.isVisible,I=e.clone,P=e.attr,B=e.before,F=e.srand,L=e.extend,O=window,N=O.ajax,H=window,R=H.nav,V=window,q=V.Dialog,U={onStickersTabSelected:befall(),onStickerClick:befall(),onStickersInit:t(),onReplyClick:t(),add_attach:function(e,t){var s=window,l=s.al;n("feed_extra_field");var c=i("form",e),u=o("input",{id:"feed_extra_field",type:"hidden",name:"add_attach",value:2});if(c){var d=!1;if(r(c,function(e,t){return"submit"===t.type?(d=t,!1):void 0}),d)return a(u,c),window.al&&l.ver?R.go(d,t):c.submit()}return!0},toggleActions:function(e,t){var n=s("post_item",e);return l("pi_actions_opened",n),c(t),!1},wallActions:function(e,t){var n=window,i=n.tooltip,o=s("_audioPlaylist",e)||s("wall_item",e)||s("post",e);if(!o)return!0;if(u("wi_actions_opened",o))h("wi_actions_opened",o),i.hide();else{var r=d("wi_actions_wrap",o),a=d("wi_actions",r),v=d("wi_actions_btn",o);U.wallActionsHide(),A("wi_actions_opened",o);var g=m(o)+45+f(a)+7,w=p()+_();l("wi_actions_top",r,g>w),i.addHandler(U.wallActionsHide),i.show(r,v)}return c(t),!1},wallActionsHide:function(){var e=window,t=e.tooltip;h("wi_actions_opened",d("wi_actions_opened")),t.hide()},wallPostOpen:function(e,t){var n=s("wall_item",e),i=d("wi_date",n);return i?R.go_after(i,t):!0},toggleGif:function(e,t,n){return e?v(t)?!0:u("current_gif",e)?U.hideGif(e,t):U.showGif(e,t,n):!0},showGif:function(e,t,n){var i=window,s=i.cur;if(!e)return!0;if(v(t))return!0;if(n){if(s.loadedGifs||(s.loadedGifs={}),!s.loadedGifs[e.href]&&!confirm(n))return!1;s.loadedGifs[e.href]=!0}var l=m(e),d=p();r(g("current_gif","mcont"),function(e,t){U.hideGif(t)}),p(d-(l-m(e)));var _=o("img",{src:e.href,className:"gif_original"});A("current_gif gif_loading",e),a(_,e);var h=function(t){if(w(_)&&f(_)||t){if(clearInterval(b),!u("current_gif",e))return;y("gif_loading","gif_opened",e)}},b=setInterval(h,100);return _.onload=h,c(t)},hideGif:function(e,t){return e?v(t)?!0:(h("current_gif",e),h("gif_opened",e),h("gif_loading",e),n(d("gif_original",e)),c(t)):!0},replyNamesRE:function(){var e=window,t=e.cur;if(!t.replyNames)return!1;var n=[];return r(t.replyNames,function(){n.push(b(this[0]))}),new RegExp("^("+n.join("|")+")")},replyTo:function(e,t,n,i,o){var r=window,c=r.cur;if(v(e))return!0;n=n||0,h("nc_current_reply",d("nc_current_reply"));var u=S("nc_form"),_=S("nc_message"),g=d("nc_reply_name",u),w=s("near_btn",g),y=S("nc_reply_as"),b=C(_),D=U.replyNamesRE();if(n){var x=S(t+"_"+n),I=m(x)+f(x),P=p();k(u,x),A("nc_current_reply",d("pi_reply_wrap",x)),p(P+m(x)+f(x)-I);var B=c.replyNames[i]||{},F=B[0]||"",L=B[1]||"";b=b?D?b.replace(D,F):b:F,U.onReplyClick(!0,F)}else{a(u,d("wall_replies")),E(u);var L="";b=D?b.replace(D,""):b}return C(_,M(b)),C(g,L),T(w,n),y&&(C(y,+o),l("cp_post_as_group",u,+o)),C("nc_reply_to",n),c.replyTo=n,j(_),!1},stickersInit:function(){if(!window.isNewMail||!d("messenger")){var e=window,t=e.cur,n=window,i=n.Scroller,o=S("stickers_panel");if(o){var r=d("sp_body",o),a=d("sp_stickers_tabs",o);t.scroller&&t.scroller.destroy(),t.scroller=new i(r,{byPage:!0}),t.scroller.init(),t.destroy.push(function(){t.scroller.destroy()}),t.tabScroller&&t.tabScroller.destroy(),t.tabScroller=new i(a),t.tabScroller.init(),t.destroy.push(function(){t.tabScroller.destroy()}),U.onStickersInit(!0)}}},stickersToggle:function(e,t){var n=window,i=n.cur;if(!i.stickers)return!0;D(t)&&(t=!x("stickers_panel"));var o=S("write_form")||S("nc_form"),r=S("stickers_panel"),a=d("cp_sticker_btn",o);return r?(T(r,t),l("cp_sticker_btn_sel",a,t),t&&i.tabScroller&&i.tabScroller.onShow(),!1):!0},stickersClick:function(e,t){var n=window,i=n.cur;return i.stickers&&i.stickers[t]?(window.isNewMail&&(window.uMailWrite.drawStickers(),window.uMailWrite.openStickersPanel()),U.stickersToggle(null,!0),U.stickersSelectTab(null,t)):R.go(e)},stickersStoreOpen:function(e){var t=window,n=t.cur;return N.click(e,!1,{url_params:{reply_to:n.replyTo||0}})},stickersSelectTab:function(e,t){var n=window,i=n.cur;if(!window.isNewMail&&i.tabScroller&&!i.tabScroller.canClick())return!1;var o=S("stickers_panel"),r=d("sp_body",o),a=d("sp_tab_selected",o);if(i.stickers[t]){i.scroller&&i.scroller.destroy(),C(r,i.stickers[t]),i.scroller&&i.scroller.init(),e||(e=d("sp_tab"+t,o)),h("sp_tab_selected",a),A("sp_tab_selected",e);var s=m(o),l=s+w(o),c=p(),u=c+_();(c>s||l>u)&&E(o),i.tabScroller&&i.tabScroller.showElem(e),StickersAnimation&&StickersAnimation.loadAutoplayAnimationStickers()}return window.isNewMail&&U.onStickersTabSelected(),!1},addRecentSticker:function(e,t,i){var a=window,l=a.cur,c=s("sticker_item",e);if(l.stickers&&l.stickers[-1]&&c){var u=o("div",{innerHTML:l.stickers[-1]}),A=I(c),m=d("sticker_thumb",A),f=d("stickers_list",u);P(m,"onclick","return post.sendSticker(this, "+t+", true);"),r(g("sticker"+t,f),function(){n(this)}),B(A,f.firstChild);var p=0;r(g("sticker_item",f),function(){window.isNewMail?p++>=16&&n(this):p++>=8&&n(this)}),l.stickers[-1]=C(u),i&&U.stickersSelectTab(!1,-1)}},sendSticker:function(e,t,n,i){if(window.isNewMail&&U.onStickerClick(t))return U.addRecentSticker(e,t,n),!1;var o=window,r=o.cur;if(r.scroller&&!r.scroller.canClick())return!1;U.stickersToggle(e,!1);var a=S("write_submit"),s={lock:!0,url_params:{media:"sticker"+t,_af:F()}};if(n&&!i&&(s.url_params.media_from="recent"),r.ref&&(s.url_params.ref=r.ref,r.ref=void 0),r.refSource&&(s.url_params.ref_source=r.refSource,r.refSource=void 0),!i){var l=P(e,"href");l&&(i=l.split("sticker_referrer=")[1].split("&")[0])}if(i&&(s.url_params.sticker_referrer=i),U.addRecentSticker(e,t,n),a)return N.click(a,L({save:!0},q),s);var a=S("nc_submit");return a?N.click(a,{},s):void 0}};window.post=U},"./static/js/mobile/modules/skins/audio/AudioSerp/AudioSerp_0.js":function(){var e=need("$"),t=need("bem");window.AudioSerp={setView:function(e){return o("view",e)},setTab:function(e){return o("tab",e)},setFoundHtml:r,getFoundHtml:a};var n={serpMod:function(e){return"AudioSerp_"+e}},i={serp:".AudioSerp",found:".AudioSerp__found"};function o(o,r){var a=e(i.serp);t.setMod(a,n.serpMod(o),r)}function r(t){var n=e(i.found);n.outerHTML=t}function a(){var t=e(i.found);return t.outerHTML}},"./static/js/mobile/modules/skins/audio/AudioSpecialForYou/AudioSpecialForYou_0.js":function(){var e=need("$");window.AudioSpecialForYou={selector:".AudioSpecialForYou",setPlaying:i};var t={special:AudioSpecialForYou.selector},n={playing:"AudioSpecialForYou_playing"};function i(i){var o=e(t.special);o&&o.classList.toggle(n.playing,i)}},"./static/js/mobile/modules/skins/base/Anchor/Anchor_0.js":function(){var e=need("$"),t=need("scrollToEl"),n=need("page");!function(){n.onChange(o)}();var i={anchorByHash:function(e){return".Anchor#"+e}};function o(n){if(n){var o=n.split("#")[1],r=o&&e(i.anchorByHash(o));r&&t(r)}}},"./static/js/mobile/modules/skins/base/Avatar/Avatar.js":function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Avatar=t;function t(t){var o,r=t.photos||[t.photo];r=isArray(r)?r:[r];var a=r.length,s="";if(a>1)for(var l=0;a>l;l++)s+=n(r[l],l);var c=void 0;return c=40===t.size?"m":36===t.size?"s":t.size?t.size:"xl",Brick({mix:q["class"](t.mix,"Avatar",(o={},e(o,a,!0),e(o,"size",c),o)),url:t.url,attrs:1===a?i(r[0]):"",inner:s})}function n(t,n){return Brick({mix:q["class"]("Avatar__image",e({},n,!0)),attrs:i(t)})}function i(e){return q.attr("style","background-image : url('"+e+"')")}},"./static/js/mobile/modules/skins/base/Brick/Brick.js":function(){var e=t(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "],["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);function t(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.Brick=n;function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=q.list(t.inner),i=void 0,o=void 0;return t.url?(i="a",o=q.attr("href",t.url)):(i=t.tag||"div",o=""),q.html(e,i,t.mix,o,t.attrs,n,i)}},"./static/js/mobile/modules/skins/base/Btn/Btn_0.js":function(){var e=need("wd"),t=need("Loading");window.Btn={setLoading:a,toggleDisabled:r},function(){Btn._onClick=o}();var n={loading:"Btn_loading",secondary:"Btn_theme_secondary",loader:"Btn__loader"},i={loader:"."+n.loader};function o(t,n,i){t.preventDefault(),e.handle(i,{$btn:n})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;e.disabled=t}function a(e,o){if(e){var r=e.classList.contains(n.loading);if(o){if(r)return;var a=e.classList.contains(n.secondary),s=t({mix:n.loader,white:!a,large:!0});e.classList.add(n.loading),e.insertAdjacentHTML("afterbegin",s)}else{if(!r)return;var l=e.$(i.loader);e.classList.remove(n.loading),l.remove()}}}},"./static/js/mobile/modules/skins/base/Control/Control_0.js":function(){var e=need("wd");window.Control={setChecked:i,isChecked:o},function(){Control._onChange=n}();var t={control:".Control","native":".Control__native"};function n(n,i){e.handle(i,{$control:n.closest(t.control),name:n.name,checked:n.checked,value:n.value})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;r(e).checked=t}function o(e){return r(e).checked}function r(e){return e.$(t["native"])}},"./static/js/mobile/modules/skins/base/Icon/Icon.js":function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Icon=t;function t(t){var n,i=t.icon,o=t["class"]||t.mix;return Brick({mix:q["class"](o,"Icon",(n={},e(n,i,!0),e(n,"active",t.active),e(n,"blue",t.blue),e(n,"bluer",t.bluer),e(n,"dark",t.dark),e(n,"selected",t.selected),e(n,"small",t.small),e(n,"white",t.white),n)),url:t.url,attrs:t.attrs})}},"./static/js/mobile/modules/skins/base/Icon/Icon_0.js":function(){var e=need("Icon");Object.assign(e,{toggleActive:n});var t={active:"Icon_active"};function n(e){e.classList.toggle(t.active)}},"./static/js/mobile/modules/skins/base/Input/Input.js":function(){var e=need("bem");Object.assign(window,{Input:t});function t(t){var i=t.style||[],o=t["class"]||t.mix,r=t.prefix,a=n(t);return{"class":[e["class"]("Input",{style_stretch:i.stretch,prefixed:!!r,hidden:"hidden"===t.type,error:i.error}),o],tag:"label",inner:r?[{"class":e["class"]("Input__prefix",{rightPadding:r.with_right_padding,gray:r.gray}),inner:r.text},{"class":"Input__nativeWrap",inner:a}]:a}}function n(e){return{"class":"Input__native",tag:"input",type:e.type,name:e.name,value:e.value,placeholder:e.placeholder,autocapitalize:e.autocapitalize===!1?"off":null,autocomplete:e.autocomplete===!1?"off":null,oninput:e.on_change,onkeydown:[e.on_key_down,"event"]}}},"./static/js/mobile/modules/skins/base/Input/Input_0.js":function(){var e=need("Input");Object.assign(e,{setPrefix:i,getValue:n});var t={"native":".Input__native",prefix:".Input__prefix"};function n(e){var n=e.$(t["native"]);return n.value}function i(e,n){var i=e.$(t.prefix);i.innerText=n}},"./static/js/mobile/modules/skins/base/LoadMore/LoadMore_0.js":function(){var e=window,t=e.getY,n=e.getCh,i=e.onDOMReady,o=e.onBodyScroll,r=(window.block,window.page),a=window.ajax,s=window.Pad,l=window.Btn;window.LoadMore={setUrl:m,destroy:f},LoadMore._strategy={replace:C(),padsExtend:k()},function(){LoadMore._onButtonClick=p,i(_),r.onChange(_)}();var c={loadMore:".LoadMore",button:".LoadMore__button"},u="_loadMore_loading",d=null,A=null;function m(e){A.setAttribute("href",e)}function f(){d.remove(),d=null,A=null,g()}function p(){S()||w()}function _(){if(d=$(c.loadMore)){var e=window.cur;A=d.$(c.button),h(0),v(),e.destroy.push(g)}}function h(e){if(d&&!S()){var i=t(d),o=n(),r=i-(e+o);2*o>r&&w()}}function v(){o(h)}function g(){o("__clear",h)}function w(){b(!0);var e=A.getAttribute("href");a.post(e,{_ajax:1},{onDone:function(e){return y(e,!0)},onFail:function(e){return y(e,!1)}})}function y(e,t){b(!1);var n=t?"data-success-handler":"data-fail-handler";n=d.getAttribute(n),wd.handle(n,{$loadMore:d,response:e}),d=null,A=null,g(),_()}function b(e){A&&(l.setLoading(A,e),d[u]=e)}function S(){return d&&d[u]}function C(){return{onFail:E,onSuccess:function(e){var t=e.response;d.outerHTML=t,f()}}}function k(){return{onFail:E,onSuccess:function(e){var t=e.response,n=t.pads,i=t.nextPageUrl;Object.keys(n).forEach(function(e){var t=n[e];s.addContent(e,t)}),i?m(i):f()}}}function E(e){console.error("LoadMore: failed to load more",e)}},"./static/js/mobile/modules/skins/base/Loading/Loading.js":function(){var e=t(['\n    <div class="','">\n      <div class="Loading__dots">\n        <div class="Loading__dot Loading__dot_0"></div>\n        <div class="Loading__dot Loading__dot_1"></div>\n        <div class="Loading__dot Loading__dot_2"></div>\n      </div>\n    </div>\n  '],['\n    <div class="','">\n      <div class="Loading__dots">\n        <div class="Loading__dot Loading__dot_0"></div>\n        <div class="Loading__dot Loading__dot_1"></div>\n        <div class="Loading__dot Loading__dot_2"></div>\n      </div>\n    </div>\n  ']);function t(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.Loading=n;function n(t){t||(t={});var n=q["class"](t.mix,"Loading",{white:t.white,large:t.large});return q.html(e,n)}},"./static/js/mobile/modules/skins/base/Oval/Oval.js":function(){Object.assign(window,{Oval:e,Oval_isHidden:t});function e(e){return wd.html({"class":[bem["class"]("Oval",{type:e.gray?"minor":e.type,hidden:t(e.value)}),e.mix],inner:e.value})}function t(e){return!e||0>=e}},"./static/js/mobile/modules/skins/base/Oval/Oval_0.js":function(){Object.assign(Oval,{setValue:t});var e={hidden:"Oval_hidden"};function t(t,n){if(t){var i=Oval_isHidden(n);t.innerText=n,t.classList.toggle(e.hidden,i)}}},"./static/js/mobile/modules/skins/base/Pad/Pad_0.js":function(){var e=need("$$");window.Pad={addContent:i};var t={pad:function(e){return'.Pad[data-id="'+e+'"]'},content:".Pad__content"},n={empty:"Pad_empty"};function i(i,o){o&&e(t.pad(i)).forEach(function(e){var i=e.$(t.content);e.classList.remove(n.empty),i.insertAdjacentHTML("beforeend",o)})}},"./static/js/mobile/modules/skins/base/Popup/Popup_0.js":function(){{var e=window,t=e.cancelEvent;e.geByClass1,e.addClass,e.removeClass}window.Popup={open:r,close:a},function(){Popup._onOverlayClick=o,Popup._onTouchMove=t}();var n={open:"Popup_open"},i={open:"."+n.open,popup:".Popup"};function o(e){var t=e.closest(i.popup);a(t)}function r(e){e.classList.add(n.open)}function a(e){e||(e=$(i.open)),e.classList.remove(n.open)}},"./static/js/mobile/modules/skins/base/ScrollView/ScrollView.js":function(){window.ScrollView=e;function e(e){return Brick({mix:q["class"](e.mix,"ScrollView"),attrs:e.attrs,inner:e.inner})}},"./static/js/mobile/modules/skins/base/ScrollView/ScrollView_healScrollForIOS.js":function(){!function(){(browser.ios||browser.ipad)&&window.MutationObserver&&document.addEventListener("DOMContentLoaded",n)}();var e={scrollView:".ScrollView"},t="_scrollViewHealed";function n(){i();var e=new MutationObserver(i);e.observe(document.body,{childList:!0,subtree:!0})}function i(){$$(e.scrollView).forEach(o),$$(".sp_body").forEach(o)}function o(e){var n=function(){return r(e)};if(n(),!e[t]){e[t]=!0;var i=getComputedStyle(e),o=parseInt(i.paddingTop,10),a=parseInt(i.paddingBottom,10);e.style.paddingTop=o+1+"px",e.style.paddingBottom=a+1+"px",n();var s=void 0;e.addEventListener("scroll",function(){s&&clearTimeout(s),s=setTimeout(n,50)})}}function r(e){0===e.scrollTop?e.scrollTop+=1:e.scrollTop+e.offsetHeight===e.scrollHeight&&(e.scrollTop-=1)}},"./static/js/mobile/modules/skins/base/SearchPanel/SearchPanel_0.js":function(){var e=need("$"),t=need("wd");window.SearchPanel={setQuery:o},function(){SearchPanel._onInput=r,SearchPanel._onClearClick=a}();var n={hasQuery:"SearchPanel_hasQuery"},i={searchPanel:".SearchPanel",input:".SearchPanel__input",inputById:function(e){return'.SearchPanel[data-id="'+e+'"] .SearchPanel__input'}};function o(t,n){var o=e(i.inputById(t));n=n||"",o.value!==n&&(o.value=n,s(o,n))}function r(e,n){var i=e.value;s(e,i),t.handle(n,{query:i})}function a(e){var t=e.closest(i.searchPanel),n=t.$(i.input);n.value="",n.oninput()}function s(e,t){var o=e.closest(i.searchPanel);o.classList.toggle(n.hasQuery,!!t)}},"./static/js/mobile/modules/skins/base/Select/Select_0.js":function(){var e=need("wd");window.Select={},function(){Select._onChange=n}();var t={optionByValue:function(e){return'.Select__option[value="'+e+'"]'}};function n(n,i){var o=n.value,r=n.$(t.optionByValue(o));e.handle(i,{$select:n,$option:r,value:o,name:n.name,label:r.textContent})}},"./static/js/mobile/modules/skins/base/Slider/Slider_0.js":function(){var e=(need("$"),need("$$")),t=need("page"),n=need("browser"),i=need("onDOMReady");window.Slider={scrollToElem:r},function(){Slider._onWheel=a,s()}();var o={slider:".Slider",scroll:".Slider__scroll"};function r(e){var t=e.closest(o.scroll);t.scrollLeft=e.offsetLeft-t.offsetWidth/2+e.offsetWidth/2}function a(e,t){var n=e.deltaX,i=e.deltaY;Math.abs(n)>Math.abs(i)&&(e.preventDefault(),t.scrollLeft+=n)}function s(){n.ios&&(i(c),t.onChange(c),window.MutationObserver&&i(function(){var e=new MutationObserver(l);e.observe(document.body,{subtree:!0,childList:!0})}))}function l(e){e.forEach(function(e){e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&e.$$(o.slider).forEach(u)})})}function c(){e(o.slider).forEach(u)}function u(e){var t=getComputedStyle(e),n=Number(t.paddingTop.replace("px","")),i=Number(t.paddingBottom.replace("px",""));e.style.overflow="hidden",e.style.height=e.offsetHeight-n-i+"px",e.$(o.scroll).style.paddingBottom="20px"}},"./static/js/mobile/modules/skins/base/Spinner/Spinner.js":function(){window.Spinner=e;function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?e.mix:"";return Icon({mix:t+" Spinner",icon:"spinner"})}},"./static/js/mobile/modules/skins/base/TabRow/TabRow_0.js":function(){var e=need("$");window.TabRow={setSelectedTab:i,setTabUrl:o};var t={selected:"TabRow__tab_selected"},n={tabRowById:function(e){return'.TabRow[data-id="'+e+'"]'},tabById:function(e){return'.TabRow__tab[data-id="'+e+'"]'},tabSelected:".TabRow__tab_selected"};function i(i,o){var r=e(n.tabRowById(i)),a=r.$(n.tabSelected),s=r.$(n.tabById(o));a.classList.remove(t.selected),s.classList.add(t.selected)}function o(t,i,o){var r=e(n.tabRowById(t)),a=r.$(n.tabById(i));a.setAttribute("href",o)}},"./static/js/mobile/modules/skins/base/Unfold/Unfold.js":function(){var e=n(['\n    <div class="','" ',">\n      ",'\n      <div class="Unfold__popup {$props.popup_class}">\n        ',"\n      </div>\n    </div>\n  "],['\n    <div class="','" ',">\n      ",'\n      <div class="Unfold__popup {$props.popup_class}">\n        ',"\n      </div>\n    </div>\n  "]),t=n(['\n    <a href="','" class="Unfold__trigger" '," ",">\n      ","\n    </a>\n  "],['\n    <a href="','" class="Unfold__trigger" '," ",">\n      ","\n    </a>\n  "]);function n(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.Unfold=i;function i(t){var n=q["class"](t.mix,"Unfold",{position:t.position,asIcon:!!t.icon||!!t.icon_html,open:t.opened}),i=o(t),a=q.list(t.items,r),s=t.name&&q.attr("data-name",t.name);return q.html(e,n,s,i,a)}function o(e){var n=q.onMouseDown("Unfold._onTriggerMouseDown","this"),i=q.onClick("Unfold._onTriggerClick","event"),o=void 0;if(e.icon)o=Icon({icon:e.icon});else if(e.icon_html)o=e.icon_html;else{for(var r=e.items,a=r.length,s="",l="",c=0;a>c;c++){var u=r[c];if(u&&u.active){s=u.text,l=u.activeCount;break}}o=[Brick({mix:"Unfold__triggerText",inner:[s,l?Brick({mix:"Unfold__triggerTextCount",inner:l}):""]}),Icon({mix:"Unfold__triggerIcon",icon:"reveal"})],o=q.list(o)}var d=e.opened?e.close_url:e.open_url;return q.html(t,d,i,n,o)}function r(e){return e?Brick({mix:q["class"](e.mix,"Unfold__item",{active:e.active,name:e.name,disabled:e.disabled}),url:e.url,tag:e.tag,attrs:e.attrs,inner:[e.icon?Icon({mix:"Unfold__itemIcon",icon:e.icon}):"",Brick({mix:"Unfold__itemText",inner:e.text}),e.count?Oval({mix:"Unfold__itemCount",gray:!0,value:e.count}):""]}):""}},"./static/js/mobile/modules/skins/base/Unfold/Unfold_0.js":function(){Object.assign(Unfold,{onOpen:befall.kind("unfoldName"),getByName:n,setActive:i,setCount:r,setTitle:o,toggleItemEnabled:l}),function(){Unfold._onTriggerMouseDown=s,Unfold._onTriggerClick=a}();var e={itemActive:"Unfold__item_active",itemDisabled:"Unfold__item_disabled",open:"Unfold_open"},t={unfold:".Unfold",unfoldByName:function(e){return'.Unfold[data-name="'+e+'"]'},itemActive:"."+e.itemActive,itemByName:function(e){return".Unfold__item_name_"+e},itemCountByName:function(e){return t.itemByName(e)+" .Unfold__itemCount"},item:".Unfold__item",itemDisabled:"."+e.itemDisabled,triggerText:".Unfold__triggerText",itemText:".Unfold__itemText",popup:".Unfold__popup"};function n(e){return $(t.unfoldByName(e))}function i(n){var i=void 0,o=void 0;if(1===arguments.length?(o=n,n=o.closest(t.unfold)):o=n.$(t.itemByName(itemElemOrName)),i=n.$(t.itemActive),i&&o){i.classList.remove(e.itemActive),o.classList.add(e.itemActive);var r=n.$(t.triggerText),a=o.$(t.itemText);r.innerText=a.textContent.trim()}}function o(e,n,i){var o=e.$(t.itemByName(n)),r=o.$(t.itemText);r.innerText=i}function r(e,n,i){var o=e.$(t.itemCountByName(n));Oval.setValue(o,i)}function a(e){preventEvent(e)}function s(n){var i=n.closest(t.unfold),o=isTouch?"touchend":"mousedown",r=!isTouch&&window.innerWidth<882,a=i.getAttribute("data-name"),s=!1;a&&Unfold.onOpen(a)(),i.classList.add(e.open),document.addEventListener("keydown",u),document.addEventListener("touchmove",c),document.addEventListener(o,d,!0);function l(){i.classList.remove(e.open),document.removeEventListener("keydown",u),document.removeEventListener("touchmove",c),document.removeEventListener(o,d,!0)}function c(e){var n=e.target.closest(t.popup);n||l(),s=!0}function u(e){var t=27;e.keyCode===t&&l()}function d(e){if(s)return void(s=!1);var n=e.target.closest(t.itemDisabled);if(!n){var i=e.target.closest(t.item+"[href]");if(i)return void(browser.safari&&browser.safari_mobile&&browser.version<9?setTimeout(l,500):l());if(i=e.target.closest(t.item+"[onmousedown]"))return void setTimeout(l);if(i=e.target.closest("label"+t.item))return void setTimeout(l);if(i=e.target.closest("input[onchange]"))return void(browser.safari&&browser.safari_mobile&&browser.version<9?setTimeout(l,500):setTimeout(l))}(isTouch||r||n)&&(e.preventDefault(),e.stopImmediatePropagation()),(r||!isTouch&&n)&&document.addEventListener("click",A,!0),n||l()}function A(e){e.preventDefault(),e.stopImmediatePropagation(),document.removeEventListener("click",A,!0)}}function l(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,r=n.$(t.itemByName(i));r&&r.classList.toggle(e.itemDisabled,!o)}},"./static/js/mobile/modules/skins/common/Bell/Bell.js":function(){window.Bell=e;function e(e){var t=lang,n=e.count;return wd.html({"class":[bem["class"]("Bell",{empty:!n}),"al_menu"],href:e.url,"aria-label":t.mobile_notifications_title,"data-header":t.mobile_notifications_title,inner:[wd.html(Icon({mix:"Bell__icon",icon:"bell"})),{"class":"Bell__counter",inner:n}]})}},"./static/js/mobile/modules/skins/common/Bell/Bell_0.js":function(){var e=window.Bell;Object.assign(e,{setCount:i});var t={empty:"Bell_empty"},n={bell:".Bell",counter:".Bell__counter"};function i(e){$$(n.bell).forEach(function(i){var o=i.$(n.counter);i.classList.toggle(t.empty,!e),o.innerText=e})}},"./static/js/mobile/modules/skins/common/CookiePolicy/CookiePolicy_0.js":function(){var e=need("$"),t=need("ajax"),n=need("onDOMReady"),i=need("onBodyResize");window.CookiePolicy={},function(){n(r),CookiePolicy._onHideClick=s}();var o={body:"body",fixedHeader:"._hfixed",cookiePolicy:".CookiePolicy"};function r(){e(o.cookiePolicy)&&(a(),i(a))}function a(){if(e(o.fixedHeader)){var t=e(o.body),n=e(o.cookiePolicy),i=n.offsetHeight,r=parseInt(getComputedStyle(t).paddingBottom,10);t.style.paddingBottom=r+i+7+"px"}}function s(e,n){e.preventDefault();var r=n.getAttribute("href"),s=n.closest(o.cookiePolicy);s.style.display="none",i("__clear",a),t.post(r,{_ajax:1})}},"./static/js/mobile/modules/skins/common/PrivacyPolicy/PrivacyPolicy_0.js":function(){var e=need("$"),t=need("Btn");window.PrivacyPolicy={},function(){PrivacyPolicy._onAcceptToggle=i}();var n={submit:".PrivacyPolicy__submit"};function i(i){var o=i.checked,r=e(n.submit);t.toggleDisabled(r,!o)}},"./static/js/mobile/modules/skins/common/Typing/Typing.js":function(){var e=n(['\n    <div class="','">\n      ','\n      <div class="typing__names">',"</div>\n      ","\n    </div>\n  "],['\n    <div class="','">\n      ','\n      <div class="typing__names">',"</div>\n      ","\n    </div>\n  "]),t=n(['\n    <div class="typing__dotsWrap">\n      <div class="typing__dots">...</div>\n    </div>\n  '],['\n    <div class="typing__dotsWrap">\n      <div class="typing__dots">...</div>\n    </div>\n  ']);function n(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.assign(window,{Typing:i,Typing_renderNames:a,Typing_isEmpty:o});function i(t){var n=t.gray,i=t.typing,s=q["class"]("typing",{gray:n,id:t.id,empty:o(i)}),l=a(i),c=void 0,u=void 0;return n?(c=Loading({mix:"typing__loading"}),u=""):(c="",u=r()),q.html(e,s,c,l,u)}function o(e){return isArray(e)?0===e.length:!e}function r(){return q.html(t)}function a(e){var t=window.lang;if(!isArray(e))return e?t.mobile_mail_typing_1_short:"";var n=e,i=n.length,o="";if(1===i){var r=n[0];o=t.mobile_mail_typing_1,o=o.replace("{name}",r)}else if(2===i){var a=n[0],s=n[1];o=t.mobile_mail_typing_2,o=o.replace("{name1}",a),o=o.replace("{name2}",s)}else if(i>2){var l=n[0];o=t.mobile_mail_typing_many,o=o.replace("{name}",l),o=o.replace("{count}",i-1)}return o}},"./static/js/mobile/modules/skins/common/Typing/Typing_0.js":function(){Object.assign(Typing,{setTyping:e});function e(e,t){var n="string"==typeof e?$(".typing_id_"+e):e,i=n.$(".typing__names");n.classList.toggle("typing_empty",Typing_isEmpty(t)),i.innerText=Typing_renderNames(t)}},"./static/js/mobile/modules/skins/mail/convo/convo.js":function(){var e=t(['\n    <div class="','" '," ",">\n      ","\n      ",'\n      <a class="convo__body" href="','">\n        <div class="convo__row convo__row_title">\n          <div class="convo__title">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__date">','</div>\n          </div>\n        </div>\n        <div class="convo__row convo__row_text">\n          <div class="convo__typing">','</div>\n          <div class="convo__text">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__unreadOut"></div>\n          </div>\n        </div>\n      </a>\n    </div>\n  '],['\n    <div class="','" '," ",">\n      ","\n      ",'\n      <a class="convo__body" href="','">\n        <div class="convo__row convo__row_title">\n          <div class="convo__title">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__date">','</div>\n          </div>\n        </div>\n        <div class="convo__row convo__row_text">\n          <div class="convo__typing">','</div>\n          <div class="convo__text">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__unreadOut"></div>\n          </div>\n        </div>\n      </a>\n    </div>\n  ']);function t(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.assign(window,{Convo:n,Convo__online:i});function n(t){var n=t.more,o="",r="",a=0,s=!1,l="";n&&(o=n.text,r=n.date,a=n.unreadCount,s=n.muted,l=n.typingNames&&n.typingNames.length?Typing({typing:n.typingNames}):"");var c=q["class"]("clickable","convo",{id:t.id,"short":!n,last:t.isLast,typing:!!(n&&n.typingNames&&n.typingNames.length>0),important:t.important,unread:t.isLast&&a>0,unreadOut:t.isLast&&0>a}),u=Avatar({mix:"convo__avatar",photos:t.photos,url:t.profileUrl}),d=t.isLast?Oval({mix:"convo__unread",value:a,gray:s}):"",A=i(t.online),m=Icon({mix:"convo__star",icon:"star",blue:!0}),f=t.url,p=q.onMouseDown("Convo._onMouseDown","event",f),_=q.onClick("Convo._onClick","event",f);return q.html(e,c,p,_,A,u,t.url,t.title,m,r,l,o,d)}function i(e){return"mobile"===e?Icon({mix:q["class"]("convo__online",{mobile:!0}),icon:"phone"}):Brick("desktop"===e?{mix:q["class"]("convo__online",{desktop:!0})}:{mix:"convo__online"})}},"./static/js/mobile/modules/skins/mail/convo/convo_0.js":function(){Object.assign(Convo,{onTap:befall("url"),setOnline:t,setLastMsg:n,setTyping:o,setUnreadCount:i}),function(){isTouch?(Convo._onMouseDown=function(){},Convo._onClick=e):(Convo._onMouseDown=e,Convo._onClick=function(){})}();function e(e,t){e.target.closest("a.convo__avatar")||setTimeout(function(){Convo.onTap(t)},50)}function t(e,t){$$(".convo_id_"+e+" .convo__online").forEach(function(e){e.outerHTML=Convo__online(t)})}function n(e,t,n){$$(".convo_last.convo_id_"+e).forEach(function(e){e.$(".convo__text").innerHTML=t,e.$(".convo__date").innerText=n})}function i(e,t){$$(".convo_last.convo_id_"+e).forEach(function(e){var n=e.$(".Oval");e.classList.toggle("convo_unread",t>0),e.classList.toggle("convo_unreadOut",0>t),Oval.setValue(n,t)})}function o(e,t){$$(".convo_last.convo_id_"+e).forEach(function(e){var n=e.$(".convo__typing");if(t&&0!==t.length){var i=n.$(".Typing");i?Typing.setTyping(i,t):(e.classList.add("convo_typing"),n.innerHTML=Typing({typing:t}))}else n.innerHTML="",e.classList.remove("convo_typing")})}},"./static/js/mobile/modules/skins/mail/mailActs/mailActs.js":function(){var e=o(['\n    <div class="','">\n\n      ','\n\n      <div class="mailActs__counter"></div>\n\n      <div class="mailActs__buttons">\n        <div class="mailActs__buttonsIn">\n          ',"\n          ",'\n        </div>\n        <div class="mailActs__chevron">\n          <div class="mailActs__chevronIn">\n            ',"\n            ","\n            ","\n            ","\n            ",'\n          </div>\n          <div class="mailActs__chevronMore">\n            <div class="mailActs__chevronMoreIcon" ','></div>\n            <div class="mailActs__chevronList">\n              ',"\n              ","\n              ","\n              ","\n              ","\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  "],['\n    <div class="','">\n\n      ','\n\n      <div class="mailActs__counter"></div>\n\n      <div class="mailActs__buttons">\n        <div class="mailActs__buttonsIn">\n          ',"\n          ",'\n        </div>\n        <div class="mailActs__chevron">\n          <div class="mailActs__chevronIn">\n            ',"\n            ","\n            ","\n            ","\n            ",'\n          </div>\n          <div class="mailActs__chevronMore">\n            <div class="mailActs__chevronMoreIcon" ','></div>\n            <div class="mailActs__chevronList">\n              ',"\n              ","\n              ","\n              ","\n              ","\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  "]),t=o(['\n    <button class="','" ',">\n      ","\n    </button>\n  "],['\n    <button class="','" ',">\n      ","\n    </button>\n  "]),n=o(['\n    <button class="','" aria-label="','" ',"></button>\n  "],['\n    <button class="','" aria-label="','" ',"></button>\n  "]),i=o(['\n    <div class="','" ',">","</div>\n  "],['\n    <div class="','" ',">","</div>\n  "]);function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.MailActs=r;function r(t){t||(t={});var n=(window.lang,q.onClick("MailActs._onMoreClick")),i=Icon({mix:"mailActs__close",icon:"close12",attrs:q.onClick("MailActs._onCloseClick")}),o=a("reply"),r=a("forward"),c=s("edit",t),u=s("pin",t),d=s("important",t),A=s("remove",t),m=s("spam",t),f=l("edit",t),p=l("pin",t),_=l("important",t),h=l("remove",t),v=l("spam",t),g=q["class"]("mailActs",{canPin:t.canPin,pinned:t.isPinned,important:t.isImportant,isVkcomgroup:t.isVkcomgroup});return q.html(e,g,i,o,r,c,u,d,A,m,n,f,p,_,h,v)}function a(e){var n=window.lang,i=q["class"]("mailActs__button",{type:e}),o=q.onClick("MailActs._onButtonClick",e),r="reply"===e?n.mobile_mail_messages_actions_reply:n.mobile_mail_messages_actions_forward;return q.html(t,i,o,r)}function s(e,t){var i=window.lang,o=q["class"]("mailActs__icon",{type:e}),r=q.onClick("MailActs._onButtonClick",e),a=t.isPinned?i.mobile_mail_messages_actions_unpin:i.mobile_mail_messages_actions_pin,s=t.isImportant?i.mobile_mail_messages_actions_important_off:i.mobile_mail_messages_actions_important,l=void 0;switch(e){case"edit":l=i.mobile_mail_messages_actions_edit;break;case"pin":l=a;break;case"important":l=s;break;case"remove":l=i.mobile_mail_messages_actions_delete;break;case"spam":l=i.mobile_mail_messages_actions_spam}return q.html(n,o,l,r)}function l(e,t){var n=window.lang,o=q["class"]("mailActs__chevronListItem",{type:e}),r=q.onClick("MailActs._onButtonClick",e),a=t.isPinned?n.mobile_mail_messages_actions_unpin:n.mobile_mail_messages_actions_pin,s=t.isImportant?n.mobile_mail_messages_actions_important_off:n.mobile_mail_messages_actions_important,l=void 0;switch(e){case"edit":l=n.mobile_mail_messages_actions_edit;break;case"pin":l=a;break;case"important":l=s;break;case"remove":l=n.mobile_mail_messages_actions_delete;break;case"spam":l=n.mobile_mail_messages_actions_spam}return q.html(i,o,r,l)}},"./static/js/mobile/modules/skins/mail/mailActs/mailActs_0.js":function(){Object.assign(MailActs,{onCloseClick:befall(),onRemoveClick:befall(),onImportantClick:befall(),onReplyClick:befall(),onForwardClick:befall(),onSpamClick:befall(),onPinClick:befall(),onMoreClick:befall(),onEditClick:befall(),setCount:e,setEditAvailable:i,setImportantAvailable:o,togglePin:c,setModifiers:r,setLabels:a,update:u}),function(){MailActs._onButtonClick=s,MailActs._onCloseClick=MailActs.onCloseClick,MailActs._onMoreClick=d,onBodyResize(t),document.addEventListener("click",n)}();function e(e){var t=langNumeric(e,lang.mobile_mail_messages_selected),n=t.replace("{count}",e);$$(".mailActs__counter").forEach(function(e){return e.innerText=n}),1!=e&&i(!1),u()}function t(){store.mail.cur&&u()}function n(e){store.mail.cur&&l(e)}function i(e){r({canEdit:e})}function o(e){r({canImportant:e})}function r(e){$$(".mailActs").forEach(function(t){var n=q.parseClass("mailActs",t.getAttribute("class"));t.setAttribute("class",q["class"]("mailActs",Object.assign({},n,e)))})}function a(e){var t=window.lang,n=e.pinned?t.mobile_mail_messages_actions_unpin:t.mobile_mail_messages_actions_pin,i=e.important?t.mobile_mail_messages_actions_important_off:t.mobile_mail_messages_actions_important;$(".mailActs__icon_type_pin").setAttribute("aria-label",n),$(".mailActs__icon_type_important").setAttribute("aria-label",i),$(".mailActs__chevronListItem_type_pin").innerHTML=n,$(".mailActs__chevronListItem_type_important").innerHTML=i}function s(e){switch(e){case"edit":MailActs.onEditClick();break;case"remove":MailActs.onRemoveClick();break;case"important":MailActs.onImportantClick();break;case"reply":MailActs.onReplyClick();break;case"forward":MailActs.onForwardClick();break;case"spam":MailActs.onSpamClick();break;case"pin":MailActs.onPinClick()}}function l(e){var t=".mailActs__chevronMoreIcon",n=".mailActs__chevronList",i="mailActs_menuOpened",o=e.target,r=$(".mailActs");r&&r.classList.contains(i)&&!o.closest(n)&&!o.closest(t)&&r.classList.remove("mailActs_menuOpened")}function c(e){$$(".mailActs").forEach(function(t){return t.classList.toggle("mailActs_canPin",e)})}function u(){var e=36,t=34,n=".mailActs__chevron",i=".mailActs__chevronListItem",o=".mailActs__icon",a="mailActs__icon_hidden",s="mailActs__chevronListItem_hidden",l=document.querySelector(n),c=l.offsetWidth-1,u=l.querySelectorAll(i),d=l.querySelectorAll(o);Array.prototype.forEach.call(d,function(n,i){c<e*d.length?c-t>=e*(i+1)?(n.classList.remove(a),u[i].classList.add(s)):(n.classList.add(a),u[i].classList.remove(s)):(n.classList.remove(a),u[i].classList.add(s))}),r({cutted:c<e*d.length})}function d(){$$(".mailActs").forEach(function(e){return e.classList.toggle("mailActs_menuOpened")})}},"./static/js/mobile/modules/skins/mail/mailDialog/mailDialog.js":function(){var e=t(['\n    <div class="','">\n      <div class="mailDialog__overlay" ','></div>\n      <div class="mailDialog__wrap">\n        <div class="mailDialog__content">\n          <div class="mailDialog__close" ','></div>\n          <div class="mailDialog__text"></div>\n          <footer class="mailDialog__footer">\n            <div class="mailDialog__checkbox">\n              <label class="mailDialog__checkboxIn">\n                <input type="checkbox" class="mailDialog__checkboxInput">\n                <span class="mailDialog__checkboxLabel">','</span>\n              </label>\n            </div>\n            <div class="mailDialog__button" ',">",'</div>\n            <div class="mailDialog__button mailDialog__button_secondary" ',">","</div>\n          </footer>\n        </div>\n      </div>\n    </div>\n  "],['\n    <div class="','">\n      <div class="mailDialog__overlay" ','></div>\n      <div class="mailDialog__wrap">\n        <div class="mailDialog__content">\n          <div class="mailDialog__close" ','></div>\n          <div class="mailDialog__text"></div>\n          <footer class="mailDialog__footer">\n            <div class="mailDialog__checkbox">\n              <label class="mailDialog__checkboxIn">\n                <input type="checkbox" class="mailDialog__checkboxInput">\n                <span class="mailDialog__checkboxLabel">','</span>\n              </label>\n            </div>\n            <div class="mailDialog__button" ',">",'</div>\n            <div class="mailDialog__button mailDialog__button_secondary" ',">","</div>\n          </footer>\n        </div>\n      </div>\n    </div>\n  "]);function t(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.MailDialog=n;function n(t){t||(t={});var n=window.lang,i=q.onClick("MailDialog._onDialogClose"),o=q.onClick("MailDialog._onConfirmDelete"),r=n.mobile_mail_delete_for_all,a=n.mobile_mail_delete_popup_delete,s=n.mobile_mail_delete_popup_cancel,l=q["class"]("mailDialog",{});return q.html(e,l,i,i,r,o,a,i,s)}},"./static/js/mobile/modules/skins/mail/mailDialog/mailDialog_0.js":function(){Object.assign(MailDialog,{onConfirmDelete:befall(),closeDialog:e,openDialog:t,isDeleteMessagesForAll:i}),function(){MailDialog._onDialogClose=e,MailDialog._onConfirmDelete=MailDialog.onConfirmDelete}();function e(){lsSet("delete_message_for_all_checked",!!$(".mailDialog__checkboxInput").checked),$$(".mailDialog").forEach(function(e){e.classList.remove("mailDialog_deleteConfirmation","mailDialog_deleteConfirmationNoAll")})}function t(e){var t=e.canDeleteForAll,i=e.isEditing;i||n(t),$$(".mailDialog").forEach(function(e){e.classList.add("mailDialog_deleteConfirmation"),$$(".mailDialog__text").forEach(i?function(e){e.innerHTML=lang.mobile_mail_dialog_msg_delete_for_all}:function(e){var t=Object.keys(store.mail.cur.msgSelected).length;e.innerHTML=langNumeric(t,lang.mobile_mail_dialog_msg_delete_N)}),(i||!t)&&e.classList.add("mailDialog_deleteConfirmationNoAll")})}function n(e){var t=lsGet("delete_message_for_all_checked");if(null===t){var n=$(".mailDialog__checkboxInput").checked;lsSet("delete_message_for_all_checked",n),t=n}e||(t=!1),$$(".mailDialog__checkboxInput").forEach(function(e){e.checked=t})}function i(){return $(".mailDialog__checkboxInput").checked}},"./static/js/mobile/modules/skins/mail/mailFilter/mailFilter.js":function(){window.MailFilter=e;function e(e){var t=window.lang,n=e.query;return wd.html({"class":[bem["class"]("mailFilter",{hasQuery:!!n}),e.mix],inner:[wd.html(Icon({icon:"search"})),{"class":"mailFilter__input",tag:"input",placeholder:t.mobile_search,value:n,oninput:["MailFilter._onInput","this"]},{"class":"mailFilter__right",inner:[wd.html(Icon({mix:"mailFilter__create",icon:"plus",url:e.createUrl})),wd.html(Icon({mix:"mailFilter__clear",icon:"close12",attrs:q.onMouseDown("MailFilter._onClearMouseDown","this")}))]}]})}},"./static/js/mobile/modules/skins/mail/mailFilter/mailFilter_0.js":function(){Object.assign(MailFilter,{onChange:befall("query"),onClear:befall(),setQuery:e}),function(){MailFilter._onInput=t,MailFilter._onClearMouseDown=n}();function e(e){var t=$(".mailFilter__input");t&&t.value!==e&&(t.value=e,MailFilter.onChange(e),i(e))}function t(e){requestAnimationFrame(function(){var t=e.value;i(e.value),MailFilter.onChange(t)})}function n(e){var t=e.closest(".mailFilter").$(".mailFilter__input"),n=document.activeElement===t,o=browser.ios?setTimeout:requestAnimationFrame;o(function(){i(""),t.value="",n&&t.focus(),MailFilter.onClear(),MailFilter.onChange("")})}function i(e){$$(".mailFilter").forEach(function(t){return t.classList.toggle("mailFilter_hasQuery",!!e)})}},"./static/js/mobile/modules/skins/mail/mailHat/mailHat.js":function(){var e=s(['\n    <div class="mailHat '," "," "," ",'">\n      <div class="mailHat__left">','</div>\n      <div class="mailHat__center">','</div>\n      <div class="mailHat__right">',"</div>\n    </div>\n  "],['\n    <div class="mailHat '," "," "," ",'">\n      <div class="mailHat__left">','</div>\n      <div class="mailHat__center">','</div>\n      <div class="mailHat__right">',"</div>\n    </div>\n  "]),t=s(['\n    <div class="','" ',">\n      ","\n      ","\n    </div>\n  "],['\n    <div class="','" ',">\n      ","\n      ","\n    </div>\n  "]),n=s(['\n    <div class="mailHat__unreadCount mailHat__unreadCount_length_','">\n      ',"\n    </div>\n  "],['\n    <div class="mailHat__unreadCount mailHat__unreadCount_length_','">\n      ',"\n    </div>\n  "]),i=s(['\n    <div class="mailHat__forwardTitle">\n      ',"\n    </div>\n  "],['\n    <div class="mailHat__forwardTitle">\n      ',"\n    </div>\n  "]),o=s(['\n    <div class="mailHat__editingTitle">\n      ',"\n    </div>\n  "],['\n    <div class="mailHat__editingTitle">\n      ',"\n    </div>\n  "]),r=s(['\n    <a class="','" href="','">\n      ','\n      <div class="mailHat__convoBody">\n        <div class="mailHat__convoTitle">',"</div>\n        ","\n      </div>\n    </a>\n  "],['\n    <a class="','" href="','">\n      ','\n      <div class="mailHat__convoBody">\n        <div class="mailHat__convoTitle">',"</div>\n        ","\n      </div>\n    </a>\n  "]),a=s(['\n    <div class="mailHat__convoDetails">\n      <div class="mailHat__convoDetailsText">',"</div>\n      ","\n    </div>\n  "],['\n    <div class="mailHat__convoDetails">\n      <div class="mailHat__convoDetailsText">',"</div>\n      ","\n    </div>\n  "]);function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.assign(window,{MailHat_main:l,MailHat_convo:c,MailHat_getOnlineText:b,MailHat__convoDetails:y,MailHat__unreadCount:f});function l(e){var t=d(),n=A(e.folder,e.urls,e.withUnrespond,e.importantCount),i=m(e.unreadCount),o=p(),r=h();return u({type:"main",left:""+t+o,center:""+n+r,right:""+e.notifier+i,forwarding:e.forwarding})}function c(e){var t=g(),n=_(),i=w(e),o=v();return u({type:"convo",left:""+t+n,center:""+i+o,right:S(e.actions),hasPinnedMsg:e.hasPinnedMsg,editing:e.editing})}function u(t){var n=t.forwarding?"mailHat_forwarding":"",i=t.hasPinnedMsg?"mailHat_hasPinnedMsg":"",o="mailHat_type_"+t.type,r=t.editing?"mailHat_editing":"";return q.html(e,o,n,i,r,t.left,t.center,t.right)}function d(){return Icon({mix:"mailHat__burger",icon:"burger",attrs:q.onClick("MailHat_main.onBurgerClick")})}function A(e,t,n,i){var o=window.lang;return Unfold({mix:"mailHat__folder",items:[{name:"all",text:o.mobile_mail_tab_all,active:"all"===e,url:t.all},n?{name:"unrespond",text:o.mobile_mail_tab_unrespond,active:"unrespond"===e,url:t.unrespond}:"",{name:"unread",text:o.mobile_mail_tab_unread,active:"unread"===e,url:t.unread},{name:"important",text:o.mobile_mail_tab_important,active:"important"===e,count:i,url:t.important}]})}function m(e){var n=q["class"]("mailHat__unread",{hasUnread:e>0}),i=Icon({mix:"mailHat__unreadIcon",icon:"msg"}),o=f(e),r=q.onClick("MailHat_main.onUnreadClick");return q.html(t,n,r,i,o)}function f(e){var t=void 0;return e>999?(e="999+",t=4):t=e>99?3:e>9?2:1,q.html(n,t,e)}function p(){return Icon({mix:"mailHat__cancelForward",icon:"back",attrs:q.onMouseDown("MailHat_main.onCancelForwardTap")})}function _(){return Icon({mix:"mailHat__cancelEditing",icon:"close",attrs:q.onMouseDown("MailHat_convo.onCancelEditingTap")})}function h(){var e=window.lang;return q.html(i,e.mobile_mail_choose_recipient)}function v(){var e=window.lang;return q.html(o,e.mobile_mail_message_editing)}function g(){return Icon({mix:"mailHat__back",icon:"back",attrs:q.onMouseDown("MailHat_convo.onBackTap")})}function w(e){var t=q["class"]("mailHat__convo",{mobile:e.mobile}),n=Avatar({mix:"mailHat__convoAvatar",photos:e.photos,size:36}),i=y(e);return q.html(r,t,e.url,n,e.title,i)}function y(e){var t=window.lang,n=e.membersCount,i="",o="";if(n>0)o=e.isVkcomgroup?langNumeric(n,t.mobile_mail_im_n_vkcomgroup_members):langNumeric(n,t.mobile_mail_N_members);else{var r=e.onlinePlatform;o=b(e.isOnline,e.offlineText),"vkmobile"===r?i=Icon({mix:q["class"]("mailHat__onlineIcon",{platform:"vkmobile"}),icon:"vkmobile",white:!0}):"mobile"===r&&(i=Icon({mix:q["class"]("mailHat__onlineIcon",{platform:"mobile"}),icon:"phoneMini"}))}return q.html(a,o,i)}function b(e,t){var n=window.lang;return e?n.mobile_mail_online:t}function S(e){return Unfold({mix:"mailHat__actions",icon:"dots",position:"topRight",items:e})}},"./static/js/mobile/modules/skins/mail/mailHat/mailHat_0.js":function(){Object.assign(MailHat_main,{onUnreadClick:befall(),onBurgerClick:befall(),onCancelForwardTap:befall(),setFolder:e,setUnreadCount:t,setImportantCount:n,setForwarding:i,setModifiers:s}),Object.assign(MailHat_convo,{onBackTap:befall(),onCancelEditingTap:befall(),setOnline:o,setMobile:r,setHasPinnedMsg:a,setModifiers:s});function e(e){$$(".mailHat__folder").forEach(function(t){Unfold.setActive(t,e)})}function t(e){$$(".mailHat_type_main").forEach(function(t){var n=t.$(".mailHat__unread"),i=t.$(".mailHat__unreadCount");n.classList.toggle("mailHat__unread_hasUnread",e>0),i.outerHTML=MailHat__unreadCount(e)})}function n(e){$$(".mailHat__folder").forEach(function(t){Unfold.setCount(t,"important",e)})}function i(e){$$(".mailHat_type_main").forEach(function(t){return t.classList.toggle("mailHat_forwarding",e)})}function o(e,t){var n=MailHat_getOnlineText(e,t);$$(".mailHat__convoDetailsText").forEach(function(e){return e.innerText=n})}function r(e){$$(".mailHat__convo").forEach(function(t){return t.classList.toggle("mailHat__convo_mobile",e)})}function a(e){$$(".mailHat_type_convo").forEach(function(t){return t.classList.toggle("mailHat_hasPinnedMsg",e)})}function s(e){$$(".mailHat").forEach(function(t){var n=q.parseClass("mailHat",t.getAttribute("class"));t.setAttribute("class",q["class"]("mailHat",Object.assign({},n,e)))})}},"./static/js/mobile/modules/skins/mail/msg/msg.js":function(){var e=r(['\n    <div class="','" '," ",">\n      ","\n    </div>\n  "],['\n    <div class="','" '," ",">\n      ","\n    </div>\n  "]),t=r(["\n    ",'\n    <div class="msg__content">\n      <div class="msg__head">\n        <a class="msg__author" href="','">','</a>\n        <div class="msg__date">',"</div>\n        ","\n        ","\n        ","\n        ",'\n      </div>\n      <div class="msg__text">\n        ','\n      </div>\n    </div>\n    <div class="msg__restore">\n      ',"\n    </div>\n  "],["\n    ",'\n    <div class="msg__content">\n      <div class="msg__head">\n        <a class="msg__author" href="','">','</a>\n        <div class="msg__date">',"</div>\n        ","\n        ","\n        ","\n        ",'\n      </div>\n      <div class="msg__text">\n        ','\n      </div>\n    </div>\n    <div class="msg__restore">\n      ',"\n    </div>\n  "]),n=r(['\n    <div class="msg__admin">\n      (<a class="msg__adminLink" href="','">',"</a>)\n    </div>\n  "],['\n    <div class="msg__admin">\n      (<a class="msg__adminLink" href="','">',"</a>)\n    </div>\n  "]),i=r(['\n    <span class="msg__edited">\n      <span class="msg__editedMiddot">&middot;</span>',"\n    </span>\n  "],['\n    <span class="msg__edited">\n      <span class="msg__editedMiddot">&middot;</span>',"\n    </span>\n  "]),o=r(['\n    <span class="msg__restoreText msg__restoreText_remove">\n      ','\n    </span>\n    <span class="msg__restoreText msg__restoreText_spam">\n      ','\n    </span>\n    <span class="msg__restoreText msg__restoreLink" ',">\n      ","\n    </span>\n  "],['\n    <span class="msg__restoreText msg__restoreText_remove">\n      ','\n    </span>\n    <span class="msg__restoreText msg__restoreText_spam">\n      ','\n    </span>\n    <span class="msg__restoreText msg__restoreLink" ',">\n      ","\n    </span>\n  "]);function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.Msg=a,window.Msg_renderRestoreInner=u;function a(t){if("for_all"===t.removed)return"";var n=t.id,i=t.removed,o=t.service,r=s(t),a=q["class"]("msg",{id:n,service:o,unread:t.unread,important:t.important,removed:!!i,spam:"spam"===i}),l="",c="";return o||(l=q.onClick("Msg._onClick","event","this",n),c=q.onTouchStart("Msg._onTouchStart")),q.html(e,a,l,c,r)}function s(e){if(e.service)return e.text;var n=Avatar({mix:"msg__avatar",url:e.authorUrl,photos:[e.authorPhoto],size:40}),i=Icon({mix:"msg__check",icon:"check"}),o=Icon({mix:"msg__star",icon:"star",blue:!0}),r=e.admin?l(e.admin):"",a=e.removed?u(e.id):"",s=e.edited?c():"";return q.html(t,n,e.authorUrl,e.authorName,e.date,s,r,i,o,e.text,a)}function l(e){return q.html(n,e.url,e.name)}function c(){var e=window.lang;return q.html(i,e.mobile_mail_edited)}function u(e){var t=window.lang,n=q.onClick("Msg._onRestoreClick","event",e);return q.html(o,t.mobile_msg_mail_message_deleted,t.mobile_msg_mail_message_marked_as_spam,n,t.mobile_restore)}},"./static/js/mobile/modules/skins/mail/msg/msg_0.js":function(){var e=need("Voting");Object.assign(Msg,{"class":"msg",onClick:befall("msgId"),onRestoreClick:befall("msgId"),destroy:function(e){return $(".msg_id_"+e).outerHTML=""},getElem:function(e){return $(".msg_id_"+e)},remove:r,spam:a,restore:l,unselectAll:c,toggleImportant:d,markAsRead:u,getId:p,getTextHtml:_}),function(){Msg._onClick=A,Msg._onTouchStart=m,Msg._onRestoreClick=o}();var t={msg:"msg"},n={text:".msg__text"},i=!1;function o(e,t){e.stopPropagation(),t=parseInt(t,10),Msg.onRestoreClick(t)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;t?$$(".msg_id_"+e).forEach(function(e){return e.remove()}):s(e,!1)}function a(e){s(e,!0)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=Msg_renderRestoreInner(e);$$(".msg_id_"+e).forEach(function(e){e.$(".msg__restore").innerHTML=n,e.classList.remove("msg_selected"),e.classList.add("msg_removed"),e.classList.toggle("msg_spam",t)})}function l(e){$$(".msg_id_"+e).forEach(function(e){e.classList.remove("msg_removed"),e.classList.remove("msg_spam")})}function c(){$$(".msg_selected").forEach(function(e){return e.classList.remove("msg_selected")})}function u(e){$$(".msg_id_"+e).forEach(function(e){return e.classList.remove("msg_unread")})}function d(e,t){[].concat(e).forEach(function(e){var n=$(".msg_id_"+e);n&&n.classList.toggle("msg_important",t)})}function A(t,n,o){for(var r=t.target;r!==n;){if("A"===r.tagName||"BUTTON"===r.tagName||r.getAttribute("onclick")||r.classList.contains("im_msg_audiomsg")||r.classList.contains("articleSnippet__block")||r.closest("."+e.cls))return;r=r.parentElement}i?i=!1:f()||n.classList.contains("msg_removed")||n.classList.contains("msg_spam")||store.mail.cur.editing||(n.classList.toggle("msg_selected"),Msg.onClick(o))}function m(){f()&&(i=!0)}function f(){return window.getSelection().toString().length>0}function p(e){var n=q.parseClass(t.msg,e.className);return Number(n.id)}function _(e){return e.$(n.text).innerHTML}},"./static/js/mobile/modules/skins/settings/ActivitySettings/ActivitySettings_0.js":function(){"use strict"},"./static/js/mobile/modules/skins/settings/AuthCheck/AuthCheck_0.js":function(){var e=window.Popup,t=window.Btn;window.AuthCheck={},function(){AuthCheck._onDropConfirmationClick=o,AuthCheck._onResetSessionSubmit=r,AuthCheck._onCurBrowserDropClick=a}();var n={popupByIndex:function(e){return".AuthCheck__popup_index_"+e},dropConfirmation:function(e){return'.AuthCheck__dropConfirmation[data-index="'+e+'"]'},dropConfirmationSubmit:".AuthCheck__dropConfirmationSubmit"},i={dropConfirmationSuccess:"AuthCheck__dropConfirmation_success"};function o(t){var i=$(n.popupByIndex(t));e.open(i)}function r(o,r){o.preventDefault();var a=o.target,s=$('iframe[name="'+o.target.target+'"]'),l=a.$(n.dropConfirmationSubmit);a.submit(),t.setLoading(l,!0),addEvent(s,"load",function(){var o=$(n.dropConfirmation(r));o.classList.toggle(i.dropConfirmationSuccess),e.close(),t.setLoading(l,!1)})}function a(o){var r=o.$btn;t.setLoading(r,!0),ajax.click(r,{onDone:function(){var o=$(n.dropConfirmation("0"));o.classList.toggle(i.dropConfirmationSuccess),e.close(),t.setLoading(r,!1)}})}},"./static/js/mobile/modules/skins/settings/AuthCheckIntro/AuthCheckIntro_0.js":function(){var e=window.$;window.AuthCheckIntro={},function(){AuthCheckIntro._onMount=t}();function t(){var t=e(n.intro),i=new Scroller(t,{byPage:!0,ignoreMouseWheel:!0,noAutoScroll:!0});i.init(),cur.destroy.push(function(){return i.destroy()})}var n={intro:".AuthCheckIntro"}},"./static/js/mobile/modules/skins/settings/CodeGenerator/CodeGenerator_0.js":function(){"use strict"},"./static/js/mobile/modules/skins/settings/ReservedCodes/ReservedCodes_0.js":function(){window.ReservedCodes={},function(){ReservedCodes._onShowRestCodesClick=e}();function e(){var e=$(t.self);e.classList.toggle(n.restCodesShown)}var t={self:".ReservedCodes"},n={restCodesShown:"ReservedCodes_restCodesShown"}},"./static/js/mobile/modules/skins/settings/Settings/Settings_privacy.js":function(){var e=window,t=e.$;window.Settings={_privacy:{}},function(){Settings._privacy.onRadioChange=o}();var n={pad:function(e){return'.Settings__privacyPad[data-privacy="'+e+'"]'},submit:".Settings__privacySubmitRow",form:".Settings__privacyForm",forbid:".Settings__privacySelectForbiddenLink"},i={padVisible:"Settings__privacyPad_visible",submitVisible:"Settings__privacySubmitRow_visible"};function o(e,i){if("none"===e)r("allowed",!1),r("forbidden",!1),a(!0);else if("allowed"===e)r("allowed",!0),r("forbidden",!1),a(!1);else if("forbidden"===e){r("allowed",!1),r("forbidden",!0),a(!0);var o=t(n.form),s=t(n.forbid),l=i.name,c=i.value,u=o.getAttribute("action"),d=u+"&"+l+"="+c+"&forbid";s.setAttribute("href",d)}}function r(e,o){var r=t(n.pad(e));r.classList.toggle(i.padVisible,o)}function a(e){var o=t(n.submit);o.classList.toggle(i.submitVisible,e)}},"./static/js/mobile/modules/skins/stories/Stories/Stories_0.js":function(e,t,n){var i=function(){function e(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(l){o=!0,r=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n("./static/js/mobile/modules/skins/stories/StoryAuthor/StoryAuthor_0.js"),r=u(o),a=n("./static/js/mobile/modules/skins/stories/StoryViews/StoryViews_0.js"),s=u(a),l=n("./static/js/mobile/modules/lib/befall.js"),c=u(l);function u(e){return e&&e.__esModule?e:{"default":e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var A=window,m=A.append,f=A.ce,p=A.remove,_=A.intval,h=A.val,v=A.geByClass1,g=A.each,w=A.removeClass,y=A.addClass,b=A.page,S=A.audio,C=A.parseJSON,k=A.zlayer,E=A.browser,M="StoryAuthor_current",T="Stories_paused",j="Stories_inited",D="Stories_touchMove",x=300,I="vk__story_open",P="Stories_menuOpened",B="Stories_commentOpened",F="Story__commentSend_active",L="Stories__flash",O="Stories__flashText",N="Stories__flash_show",H=.563,R=1.78,V=540,q=320,U=1.5,z={init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=extend({replace:!1,reply:!1,replyTo:!1,restore:!1,forceAuthorIndex:!0},n);var o=this._parseList(e).split("/"),r=i(o,3),a=r[0],s=r[1],l=r[2],c=a.split("_"),u=i(c,1),d=u[0];this.initRaw=e,this.storyOwner=_(d),this.storyRaw=a,this.storyExtra=l,this.storyList=s,this.needAudioRestore=S.playing(),this.Views={},this.popoutOpen=!1,this.slideTimer=null,this.createLayer(),this._initStore(),this.detectAutoplay().then(function(){t.isRestored?t._init():t._checkPreloadedList()?(t._initPreloadedList(),t._init()):t._requestList().then(function(e){var n=e.items,i=e.list;n&&(t.store.authors=n,t.store.listLoaded=!0,t.store.list=i,t.store.inited=!0,t._init())},function(){})})},_checkPreloadedList:function(){return window.store&&window.store.storiesLists&&window.store.storiesLists[this.storyList]?!0:!1},_initPreloadedList:function(){var e=window.store.storiesLists[this.storyList];e&&(this.store.authors=e,this.store.listLoaded=!0,this.store.list=this.storyList,this.store.inited=!0)},pushPreloadedList:function(e){var t=C(e);window.store||(window.store={}),window.store.storiesLists||(window.store.storiesLists={}),extend(window.store.storiesLists,t),window.store.stories||(window.store.stories={}),Object.keys(t).forEach(function(e){window.store&&window.store.storiesLayers&&window.store.storiesLayers.includes(e)||delete window.store.stories[e]})},_init:function(){var e=this,t=window,n=t.Peppermint;this.createAuthors();var i=this.getFirstStoryIndex();this.setCurrentStory(i);var o=this.getCurrentStory();this.params.restore||this.setHistory(o.raw_id,{nav_init:!0,replace:this.params.replace}),this.onRender(),this.sliderEl=ge("StoriesSlider"),this.slider=n(this.sliderEl,{speed:x,startSlide:this.getCurrentAuthorIndex(),onSlideChange:function(t){var n=e.getCurrentAuthorIndex();e.setAllAuthorStoriesReaded(n),clearTimeout(e.slideTimer),t!==n&&(e.setCurrentAuthor(t),e.slideTimer=setTimeout(function(){e.renderStory()},x))},onSetup:function(){y(e.layer,j),e.renderStory()}}),1===this.store.authors.length&&(y(this.layer,j),this.renderStory()),this.store.showViews&&this.showViews(o.raw_id)},_initStore:function(){window.store||(window.store={stories:{},storiesLayers:[]}),window.store.stories||(window.store.stories={}),window.store.storiesLayers||(window.store.storiesLayers=[]),window.store.stories[this.storyList]&&window.store.stories[this.storyList].inited?(this.store=window.store.stories[this.storyList],this.isRestored=!0):(this.store={authors:[],listLoaded:!1,readedStories:{},_requests:[],viewers:{},viewersState:{},replies:{},showMenu:!1,storyList:this.storyList,initRaw:this.initRaw,storyIndex:0,authorIndex:0,isReply:this.params.reply,replyTo:this.params.replyTo,inited:!1},window.store.stories[this.storyList]=this.store,this.isRestored=!1),this.params.restore||window.store.storiesLayers.push(this.store.storyList)},_abortRequests:function(){g(this.store._requests,function(e,t){t.readyState<4&&t.abort()}),this.store._requests=[]},_saveRequest:function(e){this.store._requests.push(e)},getStore:function(){return this.store},setAllAuthorStoriesReaded:function(e){var t=this;this.store.authors[e].items.forEach(function(e){e.unread&&(t.store.readedStories[e.raw_id]=!0)})},createAuthors:function(){var e=this,t="";this.Authors=[],g(this.store.authors,function(n,i){var o=new r["default"](n,i);e.Authors.push(o),t+=o.renderEmpty()}),h(v("Stories__authors",this.layer),t),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),g(this.Authors,function(e,t){t.updateHeader()});var n=this.getCurrentAuthorIndex();(!this.isRestored||this.params.forceAuthorIndex)&&(n=this.getFirstAuthorIndex()),this.setCurrentAuthor(n)},getFirstStoryIndex:function(){var e=this,t=this.store.authors[this.getCurrentAuthorIndex()].items.findIndex(function(t){return t.raw_id===e.storyRaw});return-1!==t?t:this.getCurrentStoryIndex()},getFirstAuthorIndex:function(){var e=this,t=this.store.authors.findIndex(function(t){return t.author.id===e.storyOwner});return-1!==t?t:0},getCurrentAuthorIndex:function(){return this.store.authorIndex},getCurrentStoryIndex:function(){var e=this.store.authors;return e[this.getCurrentAuthorIndex()].index},getCurrentStory:function(){var e=this.store.authors;return e[this.getCurrentAuthorIndex()].items[this.getCurrentStoryIndex()]},setCurrentAuthor:function(e){this.store.authorPrevIndex=this.store.authorIndex,this.store.authorIndex=e,this.updateCurrentAuthor()},setCurrentStory:function(e){var t=this.store.authors;t[this.getCurrentAuthorIndex()].index=e},drawSiblingPreview:function(){for(var e=this.getCurrentAuthorIndex(),t=2,n=-t;t>=n;n++){var i=e+n;this.authors[i]&&i!==e&&this.drawPreview(this.authors[i])}},drawPreview:function(e){setStyle(e,"background-image","url("+attr(e,"data-src")+")")},updateCurrentAuthor:function(){var e=this.authors[this.store.authorIndex];g(this.authors,function(e,t){w(t,M)}),y(e,M)},getSizes:function(){var e=window.innerHeight,t=window.innerWidth,n=void 0,i=void 0;return V>t?(n=t,i=e,k.open(),k.onResize=this.onResize.bind(this)):(n=Math.floor(Math.min(V,Math.max(q,e*H))),i=Math.floor(n*R),y(document.body,I)),[n,i]},createLayer:function(){var e=window.innerWidth;V>e?(k.open(),k.onResize=this.onResize.bind(this)):y(document.body,I);var t=this.getSizes(),n=i(t,2),o=n[0],r=n[1];this.storyW=o;var a=wd.html({id:"StoriesView","class":"Stories__layer _preventMenuOpen",style:"max-width: "+o+"px; max-height: "+r+"px",inner:[{"class":"Stories__loading",inner:{"class":"Stories__loadingInner"}},{id:"StoriesSlider","class":"Stories__authors peppermint peppermint-inactive",ontouchmove:"Stories.onTouchMove(event);",inner:""},{"class":"Stories__layerClose",inner:{"class":"Story__icon Story__icon_close"},onclick:"return Stories.clickClose();"},{"class":"Stories__popout"},{"class":"Stories__flash",onclick:"Stories.hideFlashPopup()",inner:{"class":"Stories__flashText"}},{"class":"Stories__swipeText Stories__swipeText_top"}]});this.layer=m(f("div",{className:"Stories",innerHTML:a}),document.body),attr(this.layer,"ontouchmove","event.preventDefault();"),this.loader=v("Stories__loading",this.layer),this.popout=v("Stories__popout",this.layer),this.swipeTextTop=v("Stories__swipeText_top",this.layer)},onResize:function(){var e=ge("StoriesView"),t=this.getSizes(),n=i(t,2),o=n[0],r=n[1];attr(e,"style","max-width: "+o+"px; max-height: "+r+"px"),this.storyW=o,this.authors.forEach(function(e){setStyle(e,"width",o+"px")}),this.store&&this.store.authors.length>1&&this.slider&&this.slider.recalcWidth()},getWidth:function(){return this.storyW},renderStory:function(){var e=this.store.authorPrevIndex,t=this.getCurrentAuthorIndex(),n=this.authors[t],i=this.Authors[t];if(i.update(),!isNaN(e)&&e!==t){var o=this.Authors[e],r=this.authors[e];o.update();var a=o.renderEmpty(),s=ceFromString(a);replace(s,r)}var l=ceFromString(i.render());replace(l,n),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),this.updateCurrentAuthor(),i.updateHeader(),this.onRender(),this.drawSiblingPreview()},getCurrentAuthor:function(){var e=this.getCurrentAuthorIndex();return this.Authors[e]},getAuthorElems:function(){return this.authors},prevStory:function(){var e=this;this.stopStory(),this.store.isStopped=!1,requestAnimationFrame(function(){var t=e.getCurrentStoryIndex(),n=e.getCurrentAuthorIndex();if(0>t-1)if(0>n-1)e.setCurrentStory(0),e.renderStory();else{e.slider.slideTo(n-1);var i=e.store.authors[n-1].items.length-1;e.setCurrentStory(i)}else e.setCurrentStory(t-1),e.renderStory()})},nextStory:function(){var e=this;this.stopStory(),this.store.isStopped=!1,requestAnimationFrame(function(){var t=e.store.authors,n=t[e.getCurrentAuthorIndex()],i=e.getCurrentStoryIndex(),o=e.getCurrentAuthorIndex(),r=n.items.length,a=t.length;i>=r-1?o>=a-1?requestAnimationFrame(function(){e.close()}):(e.slider.slideTo(o+1),e.setCurrentStory(0)):(e.setCurrentStory(i+1),e.renderStory())})},stopStory:function(){this.store.isStopped=!0,this.pauseStory()},pauseStory:function(e){var t=this.getCurrentAuthor();if(t){var n=(t.getCurrentStory(),t.getCountDown());e&&y(this.layer,T),n&&n.pause()}},playStory:function(){this.store.isStopped=!1;var e=this.getCurrentAuthor();if(e){var t=(e.getCurrentStory(),e.getCountDown());w(this.layer,T),t&&t.start()}},pauseAudio:function(){var e=window,t=e.audio;t&&t.pause()},restoreAudio:function(){var e=window,t=e.audio;this.needAudioRestore&&t&&t.play()},showMenu:function(){this.store.showMenu=!0,this.stopStory(),y(this.layer,P)},hideMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.store.showMenu=!1,w(this.layer,P),e&&this.playStory()},showLoading:function(){var e=this;this.loader&&(clearTimeout(this.loaderTimer),this.loaderTimer=setTimeout(function(){show(e.loader)},100))},hideLoading:function(){this.loader&&(clearTimeout(this.loaderTimer),hide(this.loader))},onRepliesScroll:function(e,t){if(this.Views[t]){var n=this.store.viewersState[t];n.repliesScrollLeft=e.target.scrollLeft}},showViews:function(e){var t=this;if(this.hideMenu(),this.store.showViews=!0,this.stopStory(),this.Views[e]){var n=(this.store.viewersState[e],this.Views[e].render());this.popoutOpen=!0,h(this.popout,n);var i=v("Views__repliesBody",this.popout);i&&(i.scrollLeft=0)}else{var o=this.store.viewersState[e],r=this.store.viewers[e];if(o&&r)return void this.createViews(e);this.showLoading(),this._requestFeedback(e).then(function(){t.createViews(e),t.hideLoading()})}},createViews:function(e){var t=this.store.viewersState[e],n=new s["default"](e),i=n.render();this.popoutOpen=!0,h(this.popout,i),this.Views[e]=n;var o=v("Views__repliesBody",this.popout);o&&(o.scrollLeft=t.repliesScrollLeft)},hideViews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;e&&this.playStory(),this.store.showViews=!1,this.popoutOpen=!1,h(this.popout,"")},loadViews:function(e){var t=this,n=this.store.viewersState[e],i=n.loading,o=n.nextFrom;!i&&o&&(n.loading=!0,this.showLoading(),this._requestFeedback(e,o).then(function(){var i=new s["default"](e),o=i.render();t.popoutOpen=!0;var r=v("Views__body",t.layer).scrollTop;h(t.popout,o),v("Views__body",t.layer).scrollTop=r,t.Views[e]=i,t.hideLoading(),n.loading=!1}))},showComment:function(){var e=this.authors[this.store.authorIndex],t=v("Story__commentTextarea",e);this.store.showComment=!0,this.stopStory(),y(this.layer,B),requestAnimationFrame(function(){t&&t.focus()})},hideComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.store.showMenu=!1,w(this.layer,B),e&&this.playStory()},onInputComment:function(e){var t=this.authors[this.store.authorIndex],n=v("Story__commentSend",t),i=h(e);toggleClass(F,n,!!i)},sendComment:function(){var e=this.authors[this.store.authorIndex],t=v("Story__commentTextarea",e),n=v("Story__commentSend",e),i=h(t);if(hasClass(F,n)){h(t,"");var o=this.getCurrentAuthorIndex(),r=this.getCurrentStory(),a=this.store.authors[o],s=a.send_hash,l=a.author.id,c=r.raw_id;this._sendMessage(s,c,i,l),this.hideComment()}},showFlashPopup:function(e){var t=this,n=1500;this.stopStory();var i=v(L,this.layer);h(v(O,i),e),show(i),setTimeout(function(){y(i,N)}),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer),this.flashTimer=setTimeout(function(){w(i,N),t.flashHideTimer=setTimeout(function(){t.hideFlashPopup()},n)},n)},hideFlashPopup:function(){this.playStory(),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer);var e=v(L,this.layer);hide(e)},removeCurrentStory:function(){var e=this,t=window,n=t.lang;if(confirm(n.mobile_stories_delete_story.replace(/(<([^>]+)>)/gi,"\n"))){var i=this.getCurrentAuthor();if(i){var o=i.getCurrentStory(),r=i.data.remove_hash,a=o.can_remove,s=o.raw_id,l=this.getCurrentAuthorIndex(),c=this.getCurrentStoryIndex();a&&(this.pauseStory(),this._requestRemoveStory(s,r).then(function(){e._requestFeedBlock(),0===c?e.close():(e.store.authors[l].items.splice(c,1),e.hideMenu(),e.prevStory())},function(){}))}}},onScrollViews:function(e,t){var n=this.store.viewersState[t],i=n.loading,o=n.nextFrom;if(!i&&o){var r=400;e.scrollHeight-e.offsetHeight-r<=e.scrollTop&&this.loadViews(t)}},onTouchStart:function(e){var t=this,n=this.getCurrentAuthor(),i=n.story;if(i&&"video"===i.getType()){var o=i.getVideo();if(o&&o.paused)return void(this.preventedTap=!0)}this.pauseStory(!0),this.isTap=!0,"touchstart"===e.type?(this.tapStartX=e.changedTouches[0].clientX,this.tapStartY=e.changedTouches[0].clientY):(this.tapStartX=e.clientX,this.tapStartY=e.clientY),clearTimeout(this.isTapTimer),this.isYmove=null,w(this.layer,D),this.isTapTimer=setTimeout(function(){t.isTap=!1},200)},onTouchMove:function(e){var t=0,n=0;"touchmove"===e.type&&(t=this.tapStartX-e.changedTouches[0].clientX,n=this.tapStartY-e.changedTouches[0].clientY),null===this.isYmove&&(this.isYmove=Math.abs(t)<Math.abs(n),this.isYmove&&y(this.layer,D)),this.onVerticalSwipe(this.isYmove?-n/U:0)},onTouchEnd:function(e){clearTimeout(this.isTapTimer);var t=20,n=void 0,i=void 0;if("touchend"===e.type?(n=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(n=e.clientX,i=e.clientY),(Math.abs(this.tapStartX-n)>t||Math.abs(this.tapStartY-i)>t)&&(this.isTap=!1),w(this.layer,D),setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform(v("Story__moreLink"),1,[0,0]),this.needGoToLink){var o=this.getCurrentAuthor(),r=o.story;if(this.needGoToLink=!1,r&&r.hasLink()){var a=r.getLinkUrl();return this.stopStory(),this.showLoading(),void nav.go(a)}}return this.needClose?void this.close():(this.isTap&&this.nextStory(),void this.playStory(!0))},onVerticalSwipe:function(e){var t=window,n=t.lang;if(this.needClose=!1,this.needGoToLink=!1,e){var i=e>0,o=this.sliderEl.offsetHeight,r=o/3.5,a=Math.abs(e),s=a>r;if(i){var l=.6,c=s?n.mobile_zphoto_release_to_close:n.mobile_zphoto_move_to_close,u=s?"":i?"zpv_close_move_down":"zpv_close_move_up",d=Math.max(1-.75*e/o,l);h(this.swipeTextTop,'<div class="zpv_close_msg '+u+'">'+c+"</div>"),setStyle(this.sliderEl,"opacity",d),setStyle.transform(this.sliderEl,1,[0,e/U]),setStyle(this.swipeTextTop,"opacity",Math.abs(d-1-l)),setStyle.transform(this.swipeTextTop,1,[0,e/U*.85]),this.needClose=s}else{var A=Math.min(1-.5*e/o,1.1);setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform(v("Story__moreLink"),A,[0,Math.max(e/(1.6*U),-90)]),this.needGoToLink=s}}else setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform(v("Story__moreLink"),1,[0,0]),this.needClose=!1,this.needGoToLink=!1},preventScroll:function(){return this.popoutOpen},_requestRemoveStory:function(e,t){return new Promise(function(n,i){ajax.post("stories.php",{_ajax:1,act:"remove_story",hash:t,story_raw:e},{onDone:function(){n()},onFail:function(){i()}})})},_requestList:function(){var e=this;return new Promise(function(t,n){var i={storyOwner:e.storyOwner,list:e.storyList,storyRaw:e.storyRaw,extra:e.storyExtra},o=ajax.post("stories.php",{_ajax:1,act:"get_list",list:i.list,story_raw:i.storyRaw,extra:i.extra},{onDone:function(e){i.items=e,t(i)},onFail:function(){n()}});e._saveRequest(o)})},_requestFeedback:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.store;return new Promise(function(o,r){var a=ajax.post("stories.php",{_ajax:1,act:"feedback",offset:n,story_raw:e},{onDone:function(t,n,r,a,s,l){if(a&&a.length&&(i.replies[e]=a),i.viewers[e]){var c;(c=i.viewers[e]).push.apply(c,d(t))}else i.viewers[e]=t;i.viewersState[e]?extend(i.viewersState[e],{count:n,nextFrom:r}):i.viewersState[e]={count:n,nextFrom:r,repliesCountText:s,authorCountText:l,repliesScrollLeft:0},s&&(i.viewersState[e].repliesCountText=s),l&&(i.viewersState[e].authorCountText=l),o({viewers:t,count:n,nextFrom:r,repliesCountText:s,authorCountText:l})},onFail:function(){r()}});t._saveRequest(a)})},_requestReadStories:function(){var e=this.store,t=Object.keys(e.readedStories),n="";if(t.length){this.store.list.includes("feed")?n="feed":this.store.list.includes("replies")&&(n="reply");var i=ajax.post("stories.php",{_ajax:1,act:"read_stories",hash:this.store.authors[0].read_hash,stories:t.join(","),source:n},{onDone:function(){e.readedStories={},"feed"===n&&z._requestFeedBlock()}});this._saveRequest(i)}},_requestFeedBlock:function(){if(!window.store.storiesLayers.length){ajax.post("stories.php",{_ajax:1,act:"feed_block"},{onDone:function(e,t){var n=ge("StoriesFeedBlock");n&&replace(ceFromString(e),n),z.pushPreloadedList(t)}})}},_sendMessage:function(e,t,n,i){var o=ajax.post("mail.php",{_ajax:1,act:"send",entrypoint:"stories_comment",hash:e,media:"story"+t,message:n,to:i},{onDone:function(){var e=window,t=e.lang;z.showFlashPopup(t.mobile_stories_comment_success)}});this._saveRequest(o)},_parseList:function(e){e=decodeURIComponent(e);var t=e.match(/^story(-?\d+)_(\d+)(\/([a-z0-9\_\-]+))?(\/([a-z0-9\_\=\;\-]+))?$/i);if(t){var n=i(t,7),o=n[1],r=n[2],a=n[4],s=n[6],l=o+"_"+r;return e.match(/from_feed\=1/)?a="feed":e.match(/profile\=1/)?a="profile":a||(a=l),l+"/"+a+"/"+s}return e},setHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nav_init:!1,replace:!0},n=window,i=n.nav,o=this.getHistoryURL(e),r=i.getQuery();r.z=o;var a=i.path+obj2qs(r)+i.hash,s={push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0};i.go(a,null,s)},getFrom:function(){var e=window,t=e.nav,n=t.getQuery(),i="z="+n.z,o="";return"/write"===t.path.substr(0,6)?o="write"+t.path.substr(0,6)+"?"+i:"/mail"===t.path?o="write"+n.peer+"?"+i:"/feed"===t.path?o=n.section&&"notifications"===n.section?"feed?section=notifications&"+i:"feed?"+i:n.from&&(o=n.from),encodeURIComponent(o)},getHistoryURL:function(e){var t=this.store.list;return"story"+e+(t?"/"+t:"")},getParams:function(){return this.params||{}},reportCurrentStory:function(e){var t=window,n=t.nav,i=this.getHistoryURL(e),o=(n.getQuery(),this.getFrom()),r="/reports?act=add&object="+i+"&refrom="+o;n.go(r)},share:function(e){this.stopStory(),this.showLoading();var t="/like?act=publish&object=story"+e+"&from="+this.getFrom();nav.go(t)},openReplies:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;this.playStory(),this.destroy();var n=e.split("/"),o=i(n,2),r=o[1];if(r){var a=window.store.storiesLayers.indexOf(r);if(~a){var s=this.store.list,l=r;this.restore(s,l)}else this.init(e,{reply:!0,replyTo:t})}else this.close()},clickClose:function(){var e=this;requestAnimationFrame(function(){e.close()})},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(extend({isPopState:!1,storyRaw:!1},e),!e.isPopState){var t=window,n=t.nav,o=n.getQuery();if(window.store.storiesLayers[window.store.storiesLayers.length-1-1]){var r=window.store.storiesLayers[window.store.storiesLayers.length-1-1],a=window.store.stories[r],s=a.authorIndex,l=a.authors[s].index,c=a.authors[s].items[l];o.z=this.getHistoryURL(c.raw_id)}else delete o.z;var u=n.path+obj2qs(o)+n.hash;n.go(u,null,{push_only:!0})}if(this.destroy(),e.isPopState&&e.storyRaw){var d=this._parseList(e.storyRaw).split("/"),A=i(d,2),m=A[1];this.store?this.restore(this.store.storyList,m,e.storyRaw):this.init(e.storyRaw,{replace:!0})}else this.store&&this.store.storyList&&this.restore(this.store.storyList)},hideAllViews:function(){var e=window,t=e.store;t&&(t.storiesLayers=[],t.stories&&Object.keys(t.stories).forEach(function(e){t.stories[e].showViews=!1,t.stories[e].isStopped=!1}))},restore:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if(window.store.storiesLayers){var o=window.store.storiesLayers.indexOf(e);window.store.storiesLayers.splice(o,1)}if(window.store.storiesLayers.length||t||n){t=t||window.store.storiesLayers[window.store.storiesLayers.length-1];var r=window.store.stories[e],a=window.store.stories[t];if(r&&a){var s=Object.keys(r.readedStories);g(s,function(e,t){var n=t.split("_"),o=i(n,2),s=o[0],l=(o[1],a.replies[r.replyTo]);if(l){var c=l.filter(function(e){return e.owner_id==s}),u=i(c,1),d=u[0];d&&(d.has_new=!1)}}),this.init(a.initRaw,{restore:!0,forceAuthorIndex:!1,reply:!0})}else n&&this.init(n,{restore:!0,forceAuthorIndex:!1,reply:!0})}else this.hideAllViews()},clearStore:function(){this.store=this._initStore()},destroy:function(){var e=this;if(this.restoreAudio(),this.store){this.slider=null,this.hideMenu(!1),this._abortRequests(),this._requestReadStories(),w(this.layer,j);var t=this.getCurrentAuthorIndex();if("undefined"!=typeof t&&this.Authors){var n=this.Authors[t];n.destroy()}this.onRender.off(),p(this.layer),Object.keys(this).forEach(function(t){"store"!==t&&"supportAutoplay"!==t&&"function"!=typeof e[t]&&(e[t]=null,delete e[t])}),k.close(),w(document.body,I)}},isAutoplaySupport:function(){return this.supportAutoplay},isGoodBrowser:function(){return E.ios&&E.safari_mobile&&parseInt(E.version,10)>=10},detectAutoplay:function(){var e=this;return new Promise(function(t){if(e.supportAutoplay)return void t();if(e.isGoodBrowser())return e.supportAutoplay=!0,void t();e.supportAutoplay=!1;var n=f("video"),i=f("source");i.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var o=f("source");o.src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM",m(o,n),m(i,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),m(n,document.body);var r=ge("base64testvideo");if(E.android&&E.chrome)return e.supportAutoplay=!0,p(n),t(),void clearTimeout(e.autoDetectTimeout);if(E.mobile&&E.ios&&E.ios<10)return e.supportAutoplay=!1,p(n),t(),void clearTimeout(e.autoDetectTimeout);if(!E.safari_mobile||E.safari_mobile&&parseInt(E.version,10)>=10){var a=n.play();void 0!==a&&a.then(function(){e.supportAutoplay=!0,p(n),t(),clearTimeout(e.autoDetectTimeout)})["catch"](function(){})}r.onplay=function(){e.supportAutoplay=!0,p(n),t(),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout(function(){r.paused||(e.supportAutoplay=!0),p(n),t()},250)})},onRender:c["default"]()};b.onChange(function(){window.store.storiesLayers=[],window.store.stories={}}),window.Stories=z},"./static/js/mobile/modules/skins/stories/Story/Story_0.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("./static/js/mobile/modules/lib/befall.js"),o=s(i),r=n("./static/js/mobile/modules/skins/stories/StoryMenu/StoryMenu_0.js"),a=s(r);function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(t,n,i,r){if(c(this,e),this.store=Stories.getStore(),this.state={authorIndex:i,storyIndex:r},this.date=t.date,this.preview=t.preview_url,this.type=t.type,this.photo_url=t.photo_url,this.video_url=t.video_url,this.videoSupport=!!window.HTMLVideoElement,this.views=t.views,this.answers=t.answers,this.link=t.link,this.unread=t.unread,this.raw_id=t.raw_id,this.is_expired=t.is_expired,this.is_ads=t.is_ads,this.can_comment=t.can_comment,this.can_share=t.can_share,this.can_remove=t.can_remove,this.can_report=!t.can_manage,this.name=n.name,this.avatar=n.photo,this.href=n.href,this.prometheus=n.verify.includes("page_top_author"),this.verified=n.verify.includes("page_verified"),this.authorIcon=this.prometheus||this.verified,this.content=null,this.paused=!0,this.onAutoPlay=o["default"](),this.onDestroy=o["default"](),this.onVideoBuffering=o["default"](),this.onVideoData=o["default"](),this.onVideoPlayEvent=o["default"](),this.onVideoPauseEvent=o["default"](),this.onVideoEndedEvent=o["default"](),this.reply=t.reply_to,this.reply){var s=this.reply.list;this.reply=extend(this.reply,{onclick:'Stories.openReplies("'+s+'");'})}this.duration=8e3,this.views&&(this.viewsText=this.views),this.answers&&(this.answersText=this.answers.count),this.StoryMenu=new a["default"](extend(t,{can_report:this.can_report})),this.needMenu=this.StoryMenu.needMenu(),this.storyMenuHTML=this.StoryMenu.render()}return e.prototype.update=function(e){var t=Stories.getCurrentStoryIndex(),n=Stories.getCurrentAuthorIndex();this.state.authorIndex===n&&this.state.storyIndex===t?(this.loadContent(e),Stories.setHistory(this.raw_id)):(this.destroy(),val(e,""))},e.prototype.getDuration=function(){return this.duration},e.prototype.getPreview=function(){return this.preview},e.prototype.hasLink=function(){return!!this.link},e.prototype.getLinkUrl=function(){var e=this.link.url;return~e.indexOf("vk.com/")&&(e="/"+e.split("vk.com/")[1]),e},e.prototype.loadContent=function(e){var t=window,n=t.lang;if(this.is_expired){Stories.hideLoading();var i={"class":"Story__content_expired",inner:wd.wrap(n.mobile_stories_error_expired)};val(e,wd.html(i)),Stories.restoreAudio()}else if("photo"===this.type){Stories.showLoading(),this.img=new Image,this.onLoadImgBind=this.onLoadImg.bind(this),addEvent(this.img,"load",this.onLoadImgBind),this.img.src=this.photo_url;var o={style:"background-image: url("+this.photo_url+")","class":"Story__content_image"};val(e,wd.html(o)),Stories.restoreAudio()}else"video"===this.type&&(this.videoSupport&&Stories.isAutoplaySupport()?(Stories.showLoading(),this.video=ce("video",{src:this.video_url,className:"Story__content_video"}),attr(this.video,"autoplay","autoplay"),attr(this.video,"playsinline","playsinline"),attr(this.video,"webkit-playsinline","webkit-playsinline"),attr(this.video,"muted","muted"),this.onCanPlayBind=this.onCanPlay.bind(this),this.onVideoWaitingBind=this.onVideoBuffer.bind(this),this.onVideoLoadedDataBind=this.onVideoLoadedData.bind(this),this.onVideoPlayBind=this.onVideoPlay.bind(this),this.onVideoPauseBind=this.onVideoPause.bind(this),this.onVideoEndedBind=this.onVideoEnded.bind(this),addEvent(this.video,"ended",this.onVideoEndedBind),addEvent(this.video,"play",this.onVideoPlayBind),addEvent(this.video,"pause",this.onVideoPauseBind),addEvent(this.video,"canplaythrough",this.onCanPlayBind),addEvent(this.video,"waiting",this.onVideoWaitingBind),addEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),append(this.video,e),Stories.pauseAudio()):this.renderError(e,n.mobile_stories_inline_video_error));this.markSeen()},e.prototype.markSeen=function(){this.store.readedStories[this.raw_id]=!0,this.store.authors[this.state.authorIndex].items[this.state.storyIndex].unread=!1},e.prototype.pause=function(){this.paused||(this.paused=!0,this.video&&this.video.pause())},e.prototype.play=function(){this.paused&&(this.paused=!1,this.video&&this.video.play())},e.prototype.onVideoEnded=function(){this.onVideoEndedEvent()},e.prototype.onVideoPlay=function(){this.onVideoPlayEvent()},e.prototype.onVideoPause=function(){this.onVideoPauseEvent()},e.prototype.onLoadImg=function(){Stories.hideLoading(),this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})},e.prototype.onVideoBuffer=function(){this.onVideoBuffering()},e.prototype.onVideoLoadedData=function(){if(0===this.video.duration){var e=16e3;this.duration=e}else this.duration=1e3*this.video.duration+100;this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})},e.prototype.onCanPlay=function(){Stories.hideLoading(),this.onAutoPlay({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex}),this.store.isStopped&&this.video.pause()},e.prototype.getType=function(){return this.type},e.prototype.getVideoState=function(){return this.video?this.video.readyState:0},e.prototype.getVideo=function(){return this.video?this.video:void 0},e.prototype.renderError=function(e,t){var n=this,i={"class":"Story__content_expired",inner:wd.wrap(t)};val(e,wd.html(i)),Stories.hideLoading(),this.type="broken",requestAnimationFrame(function(){n.onVideoData({paused:n.paused,authorIndex:n.state.authorIndex,storyIndex:n.state.storyIndex})})},e.prototype.render=function(){var e,t,n=window,i=n.isTouch,o=n.lang,r=n.winToUtf,a=i?"ontouchstart":"onmousedown",s=i?"ontouchend":"onmouseup";return wd.html({"class":"Story",inner:[{"class":"Story__header",inner:[this.reply?{"class":"Story__reply",inner:this.reply.is_deleted||this.reply.is_private?{"class":"Story__replyDeleted",inner:{"class":"Story__replyDeletedContainer",inner:[{"class":bem["class"]("Story__icon",{deleted:this.reply.is_deleted,"private":this.reply.is_private})},{"class":"Story__replyDeletedTitle",inner:this.reply.is_deleted?o.mobile_stories_reply_deleted_title:o.mobile_stories_reply_private_title}]}}:{"class":"Story__replyPreview",onclick:this.reply.onclick,style:"background-image: url("+this.reply.photo_url+")",inner:{"class":"Story__replyTitle",inner:r(this.reply.name)}}}:null,{"class":"Story__table",inner:[{"class":"Story__cell Story__cell_header",inner:{"class":"Story__table Story__link al_empty",href:this.href,"data-skiponclick":1,inner:[{"class":"Story__cell Story__cell_avatar",inner:{"class":"Story__avatar",src:this.avatar,tag:"img"}},{"class":"Story__cell Story__cell_title",inner:[{"class":"Story__title",inner:[{"class":"Story__name",inner:r(this.name)},this.authorIcon?{"class":"Story__verified",inner:{"class":bem["class"]("Story__icon",{verified:this.verified,prometheus:this.prometheus})}}:null]},{"class":"Story__date",inner:this.is_ads?o.mobile_stories_is_promo_title:this.date}]}]}},{"class":"Story__cell Story__cell_close",onclick:"return Stories.clickClose();",inner:{"class":"Story__close",inner:{"class":"Story__icon Story__icon_close"}}}]}]},{"class":"Story__footer",inner:this.is_expired?null:{"class":"Story__table",inner:[{"class":bem["class"]("Story__cell",{empty:!!this.link&&!this.answers&&!this.views,hidden:!this.answers&&!this.views&&!this.link,stats:!0}),inner:this.answers||this.views?{"class":"Story__stats",inner:[this.answers?{"class":"Story__replies Story__cell",onclick:'Stories.showViews("'+this.raw_id+'")',inner:[{"class":"Story__cell",inner:{"class":"Story__icon Story__icon_replies Story__repliesIcon"}},{"class":"Story__cell Story__repliesText",inner:this.link?this.answers.count:this.answersText}]}:null,this.views?{"class":"Story__views Story__cell",onclick:'Stories.showViews("'+this.raw_id+'")',inner:[{"class":"Story__cell",inner:{"class":"Story__icon Story__icon_views Story__viewsIcon"}},{"class":"Story__cell Story__viewsText",inner:this.link?this.views:this.viewsText}]}:null]}:null},this.link?{"class":"Story__cell Story__cell_moreLink",inner:{"class":"Story__moreLink",inner:[{"class":"Story__moreLinkText",inner:r(this.link.text)},{"class":"Story__icon Story__icon_topArrow"}],href:this.getLinkUrl()}}:this.can_comment?{"class":"Story__cell Story__cell_comment",inner:{"class":"Story__commentButton",inner:{"class":"Story__commentButtonText",inner:o.mobile_stories_comment_placeholder},onclick:"Stories.showComment();"}}:null,this.can_share?{"class":"Story__cell Story__cell_share",inner:{"class":"Story__share",onclick:'Stories.share("'+this.raw_id+'");',inner:{"class":"Story__icon Story__icon_share","data-skiponclick":1}}}:null,this.needMenu?{"class":"Story__cell Story__cell_menu",inner:wd.wrap(this.storyMenuHTML)}:null]}},this.can_comment?{"class":"Story__comment",inner:[(e={"class":"Story__commentOverlay"},l(e,a,"cancelEvent(event);"),l(e,s,"cancelEvent(event);"),l(e,"ontouchmove","cancelEvent(event);"),e),{"class":"Story__commentPopout",ontouchmove:"cancelEvent(event);",onmousedown:"event.stopPropagation();",ontouchend:"event.stopPropagation();",inner:[{"class":"Story__commentHeader",inner:o.mobile_stories_comment_title},{"class":"Story__commentBody",inner:{"class":"Story__commentTextarea",tag:"textarea",placeholder:o.mobile_stories_comment_textarea,oninput:"Stories.onInputComment(this);"}},{"class":"Story__commentFooter",inner:[{"class":"Story__commentSend",onclick:"Stories.sendComment();",inner:o.mobile_stories_comment_ok},{"class":"Story__commentCancel",inner:o.mobile_stories_comment_cancel,onclick:"Stories.hideComment();"}]}]}]}:null,(t={"class":"Story__overlay"},l(t,a,"cancelEvent(event);"),l(t,s,"cancelEvent(event); Stories.hideMenu();"),l(t,"ontouchmove","cancelEvent(event);"),t),{"class":"Story__body",style:"background-image: url("+this.preview+")"}]})},e.prototype.pauseAudio=function(){var e=window,t=e.Stories;t.pauseAudio()},e.prototype.destroy=function(){this.img&&removeEvent(this.video,"load",this.onLoadImgBind),this.video&&(removeEvent(this.video,"ended",this.onVideoEndedBind),removeEvent(this.video,"play",this.onVideoPlayBind),removeEvent(this.video,"pause",this.onVideoPauseBind),removeEvent(this.video,"canplaythrough",this.onCanPlayBind),removeEvent(this.video,"waiting",this.onVideoWaitingBind),removeEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),this.video.src="",this.video.load()),this.onDestroy(),this.onAutoPlay.off(),this.onDestroy.off(),this.onVideoBuffering.off(),this.onVideoData.off(),this.onVideoPlayEvent.off(),this.onVideoPauseEvent.off(),this.onVideoEndedEvent.off()},e}();t["default"]=u},"./static/js/mobile/modules/skins/stories/StoryAuthor/StoryAuthor_0.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n("./static/js/mobile/modules/skins/stories/Story/Story_0.js"),o=s(i),r=n("./static/js/mobile/modules/components/common/Countdown.js"),a=s(r);function s(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u="StoryAuthor__progressItem_filled",d="StoryAuthor_paused",A="StoryAuthor_videoHold",m=window,f=m.setStyle,p=function(){function e(t,n){var i=this;c(this,e),this.store=Stories.getStore(),this.data=n,this.state={authorIndex:t};var r=this.getCurrentStoryIndex();this.setCurrentStoryIndex(r),this.story=new o["default"](this.data.items[r],this.data.author,t,r),this.authorStoriesHTML=wd.html(this.story.render()),this.progressItemElems=null,Stories.onRender(function(){i.updateStory()})}return e.prototype.getCurrentStory=function(){return this.story?this.story:void 0},e.prototype.destroy=function(){this.story&&this.story.destroy()},e.prototype.update=function(){var e=this.data.index;this.destroy(),this.story=new o["default"](this.data.items[e],this.data.author,this.state.authorIndex,e),this.authorStoriesHTML=wd.html(this.story.render())},e.prototype.updateHeader=function(){this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex],this.progressItemElems=Array.from(geByClass("StoryAuthor__progressItem",this.authorElem)),this.drawFilledProgressItems()},e.prototype.updateStory=function(){var e=this;this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex];var t=geByClass1("Story__body",this.authorElem);this.story.update(t),this.story.onVideoData(function(n){var i=(n.authorIndex,n.storyIndex,e.story.getDuration()),o=e.story.getType(),r=e.store.isStopped;if(e.countdown=new a["default"](i,{tick:13,onTick:function(t){var n=(100-Math.min(t/i*100,100))/100;e.drawCurrentProgress(n)},onEnd:function(){"video"!==o&&(e.drawCurrentProgress(100),Stories.nextStory(),removeClass(e.authorElem,d))},onPause:function(){e.story.pause(),addClass(e.authorElem,d)},onStart:function(){e.story.play(),removeClass(e.authorElem,A),removeClass(e.authorElem,d)}}),"photo"!==o&&"broken"!==o||r){if("video"===o){var s=e.story.getVideoState(),l=e.story.getVideo();addClass(t,"Story__body_video"),4!==s||r||l.paused||e.countdown.start()}}else e.countdown.start()}),this.story.onVideoEndedEvent(function(){e.drawCurrentProgress(100),Stories.nextStory()}),this.story.onVideoPauseEvent(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoBuffering(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoPlayEvent(function(){e.countdown&&!e.store.isStopped&&e.countdown.start()}),this.story.onAutoPlay(function(){var t=window,n=t.lang,i=e.story.getVideo();Stories.pauseAudio();var o=geByClass1("Story__body",e.authorElem),r=Stories.isGoodBrowser();i.play(),i.paused&&!r?e.story.renderError(o,n.mobile_stories_inline_video_error):!e.countdown||e.store.isStopped||i.paused?r&&i.paused&&addClass(e.authorElem,A):e.countdown.start()}),this.story.onDestroy(function(){e.countdown&&(e.countdown.stop(),e.countdown=null)})},e.prototype.getCountDown=function(){return this.countdown?this.countdown:void 0},e.prototype.getFirstUnreadStoryIndex=function(){var e=this.data.items.findIndex(function(e){return e.unread===!0});return-1!==e?e:0},e.prototype.getCurrentStoryIndex=function(){if(!this.data.index){var e=this.getFirstUnreadStoryIndex();this.setCurrentStoryIndex(e)}return this.data.index},e.prototype.drawCurrentProgress=function(e){if(this.progressItemElems){var t=this.progressItemElems[this.data.index];f.transform(geByClass1("StoryAuthor__progressItemCurrent",t),[e,1])}},e.prototype.drawFilledProgressItems=function(){var e=this.data.index;if(this.progressItemElems)for(each(this.progressItemElems,function(e,t){removeClass(t,u)});e>=0;)addClass(this.progressItemElems[--e],u)},e.prototype.setCurrentStoryIndex=function(e){this.data.index=e,this.drawFilledProgressItems()},e.prototype.renderEmpty=function(){var e=this.story.getPreview(),t=Stories.getWidth();return wd.html({"class":"StoryAuthor StoryAuthor_empty",style:"width: "+t+"px;",attrs:{"data-src":e}})},e.prototype.render=function(){var e,t,n=window,i=n.isTouch,o=Stories.getWidth(),r=i?"ontouchstart":"onmousedown",a=i?"ontouchend":"onmouseup";return wd.html({"class":"StoryAuthor StoryAuthor_inited",style:"width: "+o+"px;",inner:[{"class":"StoryAuthor__header",inner:{"class":"StoryAuthor__progress",inner:this.data.items.map(function(){return{"class":"StoryAuthor__progressItem",inner:{"class":"StoryAuthor__progressItemBar",inner:{"class":"StoryAuthor__progressItemCurrent"}}}})}},(e={"class":"StoryAuthor__next"},l(e,r,"Stories.onTouchStart(event);"),l(e,a,"Stories.onTouchEnd(event);"),l(e,"ontouchcancel","Stories.onTouchEnd(event);"),e),(t={"class":"StoryAuthor__prev"},l(t,r,"Stories.pauseStory(true);"),l(t,a,"Stories.playStory(true);"),l(t,"onclick","Stories.prevStory(); "),t),{"class":"StoryAuthor__body",inner:this.authorStoriesHTML}]})},e}();t["default"]=p},"./static/js/mobile/modules/skins/stories/StoryMenu/StoryMenu_0.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){n(this,e),this.store=Stories.getStore(),this.data=t,this.raw_id=t.raw_id,this.can_remove=t.can_remove,this.can_report=t.can_report}return e.prototype.needMenu=function(){return this.can_remove||this.can_report},e.prototype.render=function(){var e=window,t=e.lang;return wd.html({"class":"StoryMenu",inner:[{"class":"StoryMenu__trigger",onclick:"Stories.showMenu();",inner:{"class":"Story__icon Story__icon_menu"}},{"class":"StoryMenu__container",inner:[this.can_remove?{"class":"StoryMenu__row",inner:{"class":"StoryMenu__button",onclick:"Stories.removeCurrentStory();",inner:t.mobile_stories_menu_remove_title}}:null,this.can_report?{"class":"StoryMenu__row",inner:{"class":"StoryMenu__button",onclick:'Stories.reportCurrentStory("'+this.raw_id+'");',inner:t.mobile_stories_menu_report_title}}:null]}]})},e}();t["default"]=i},"./static/js/mobile/modules/skins/stories/StoryViews/StoryViews_0.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){n(this,e);var i=window,o=i.lang;this.store=Stories.getStore(),this.viewers=this.store.viewers[t]||[],this.viewersState=this.store.viewersState[t],this.replies=this.store.replies[t]||[];var r=this.viewersState,a=r.count,s=r.repliesCountText,l=r.authorCountText;this.raw_id=t,this.count=a,this.countText=langNumeric(this.count,o.mobile_stories_views_title),this.repliesCountText=s,this.repliesAuthorCountText=l,this.viewers.length&&this.replies.length?this.title=o.mobile_stories_views_title_replies_and_views:this.viewers.length?this.title=this.countText:this.replies.length&&(this.title=o.mobile_stories_views_title_replies)}return e.prototype.render=function(){var e=this,t=window,n=t.winToUtf;return wd.html({"class":bem["class"]("Views",{"short":!(this.viewers.length||!this.replies.length)}),inner:[{"class":"Views__overlay",onclick:"Stories.hideViews();"},{"class":"Views__header",inner:[{"class":"Views__table",inner:[{"class":"Views__cell",inner:{"class":"Views__title",inner:this.title}}]},{"class":"Views__close",onclick:"Stories.hideViews();"}]},{"class":"Views__body ScrollView",onscroll:'Stories.onScrollViews(this, "'+this.raw_id+'")',ontouchmove:"event.stopPropagation();",inner:[this.replies.length?{"class":"Views__replies",inner:[{"class":"Views__table Views__repliesHeader",inner:[{"class":"Views__cell Views__repliesCount",inner:this.repliesCountText},this.repliesAuthorCountText?{"class":"Views__cell Views__repliesAuthorCount",inner:this.repliesAuthorCountText}:null]},{"class":"Views__repliesBody",onscroll:'Stories.onRepliesScroll(event, "'+this.raw_id+'")',inner:{"class":"Views__repliesScroll",inner:this.replies.map(function(t){return{"class":"Views__reply "+(t.has_new?"Views__reply_new":""),onclick:'Stories.openReplies("'+t.owner_id+"/"+t.list+'", "'+e.raw_id+'");',inner:[{"class":"Views__replyAvatarWrap",inner:{"class":"Views__replyAvatar",src:t.avatar,tag:"img"}},{"class":"Views__replyName",inner:t.name?n(t.name):lang.mobile_stories_reply_you}]}})}}]}:null,{"class":"Views__viewers",inner:[this.viewers.length&&this.replies.length?{"class":"Views__viewersHeader",inner:this.countText}:null,{"class":"Views__viewersBody",inner:this.viewers.map(function(e){return{"class":"Views__viewer",href:e.href,inner:{"class":"Views__table",inner:[{"class":"Views__cell Views__cell_avatar",inner:{"class":"Views__avatar",src:e.photo,tag:"img"}},{"class":"Views__cell Views__cell_name",inner:{"class":"Views__name",inner:e.name}}]}}})}]},this.viewersState.nextFrom?{"class":"Views__viewersLoader",onclick:'Stories.loadViews("'+this.raw_id+'")'}:null]}]})},e}();t["default"]=i},"./static/js/mobile/modules/skins/voting/Voting/Voting_0.js":function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=need("$$"),n=need("befall"),i=need("Url"),o=(need("Btn"),need("wd"));window.Voting={cls:"Voting",setLoading:A,setHtml:l,onHtmlUpdate:n("$voting")},function(){Voting._onSubmit=m,Voting._onSingleAnswerClick=d,Voting._onCheckboxClick=u,Voting._onRevoteClick=f}();var r="_Voting_singleAnswerAction",a={loading:"Voting_loading",beforeAnimation:"Voting_beforeAnimation",hasCheckedOptions:"Voting_hasCheckedOptions"},s={voting:".Voting",votingById:function(e){return'.Voting[data-id="'+e+'"]'},optionControl:".Voting__optionControl",submit:".Voting__submit"};function l(e,t){c(e).forEach(function(e){e.outerHTML=t}),c(e).forEach(function(e){e.classList.add(a.beforeAnimation)}),setTimeout(function(){c(e).forEach(function(e){e.classList.remove(a.beforeAnimation),Voting.onHtmlUpdate(e)})},30)}function c(e){return t(s.votingById(e))}function u(e){var n=e.closest(s.voting),i=Array.from(t(s.optionControl)),o=i.some(function(e){return e.checked});n.classList.toggle(a.hasCheckedOptions,o)}function d(t){var n=t.name,o=t.value,a=t.closest("form"),s=a.getAttribute("action");a[r]=i.make(s,e({},n,o))}function A(e){e.classList.add(a.loading)}function m(e,t,n){e.preventDefault();var i;if(t[r])i=t[r],A(t);else{var a=Array.from(t.$$("input:checked"));if(0===a.length)return;{var l=a[0].name,c=a.map(function(e){return e.value}).join(","),u=t.getAttribute("action"),d=u.includes("?")?"&":"?";t.$(s.submit)}A(t);var m=t.$('input[name="is_board"]').value;i=""+u+d+l+"="+c+"&is_board="+m}o.handle(n,{$voting:t,url:i})}function f(e,t){var n=e.closest(s.voting);o.handle(t,{$voting:n})}},"./static/js/mobile/modules/skins/voting/VotingBcg/VotingBcg.js":function(){Object.assign(window,{VotingBcg:e});function e(e){var r=e.bcg,a=r.type;return{"class":bem["class"]("VotingBcg",{type:a}),style:"photo"===a?t(r):"gradient"===a?n(r):"tile"===a?i(r):null,inner:"photo"===a?o(e):null}}function t(e){return r({"background-color":e.color})}function n(e){var t,n=[],i=e.points.length;for(t=0;i>t;t++){var o=e.points[t];n.push(o.color+" "+o.percent+"%")}var a=e.angle-90;return n=n.join(", "),r({background:"linear-gradient("+a+"deg, "+n+")"})}function i(e){var t=e.image,n=e.width,i=e.height;return r({"background-image":"url('"+t+"')","background-position":"top center","background-size":n+"px "+i+"px"})}function o(e){var t=e.bcg,n=t.photo,i=t.color,o="rgba(255, 255, 255, 0)";return{"class":"VotingBcg__photoBox",style:r({height:e.photoHeight+"px"}),inner:[{"class":"VotingBcg__photoImage",style:r({"background-image":"url('"+n+"')"})},{"class":"VotingBcg__photoGradient",style:r({background:"linear-gradient(to bottom, "+o+", "+i+")"})}]}}function r(e){var t,n=[],i=Object.keys(e),o=i.length;for(t=0;o>t;t++){var r=i[t],a=e[r];n.push(r+": "+a+";")}return n.join(" ")}},"./static/js/mobile/modules/skins/voting/VotingForm/VotingForm.renderBcg.js":function(){window.VotingForm||(window.VotingForm={}),Object.assign(VotingForm,{_renderBcg:e});function e(e,t){return{tag:"label","class":bem["class"]("VotingForm__bcg",{light:"default"===t.type}),inner:[{"class":"VotingForm__bcgPreview",inner:[VotingBcg({bcg:t,photoHeight:48}),{"class":bem["class"]("VotingForm__bcgTextGhost",{0:!0})},{"class":bem["class"]("VotingForm__bcgTextGhost",{1:!0})},{"class":bem["class"]("VotingForm__bcgTextGhost",{2:!0})},{"class":bem["class"]("VotingForm__bcgTextGhost",{3:!0})},{"class":bem["class"]("VotingForm__bcgTextGhost",{4:!0})},{"class":bem["class"]("VotingForm__bcgTextGhost",{5:!0})}]},{tag:"input","class":"VotingForm__bcgRadio",type:"radio",name:e,checked:t.checked?"checked":null,value:t.id},{"class":"VotingForm__bcgControl"}]}}},"./static/js/mobile/modules/skins/voting/VotingForm/VotingForm.renderOption.js":function(){window.VotingForm||(window.VotingForm={}),Object.assign(window.VotingForm,{_renderOption:e});function e(e){return{"class":"VotingForm__option","data-created":e.is_created?"1":"0",inner:[Input({"class":"VotingForm__optionInput",name:e.name,value:e.value,on_key_down:"VotingForm._onOptionKeyDown"}),{"class":"VotingForm__optionRemove",onclick:["VotingForm._onOptionRemoveClick","this"],inner:wd.wrap(Icon({icon:"close16"}))}]}}},"./static/js/mobile/modules/skins/voting/VotingForm/VotingForm_0.js":function(){var e=need("$"),t=(need("Input"),need("Slider")),n=need("VotingForm");!function(){n._onInit=u,n._onAddOptionClick=c,n._onExpireChange=A,n._onOptionRemoveClick=m,n._onTitleKeyDown=s,n._onOptionKeyDown=l,mediaUpload.onComplete(_),mediaUpload.onStart(h),mediaUpload.onError(v)}();var i={uploading:"VotingForm_uploading",withExpire:"VotingForm_withExpire",maxOptions:"VotingForm_maxOptions"},o={form:".VotingForm",maxOptions:".VotingForm_maxOptions",option:".VotingForm__option",options:".VotingForm__options",upload:".VotingForm__upload",bcg:".VotingForm__bcg",bcgRadioChecked:".VotingForm__bcgRadio:checked"},r=13,a=8;function s(e){e.keyCode===r&&e.preventDefault()}function l(t){if(s(t),t.keyCode===r){if(!e(o.maxOptions)){var n=e(".VotingForm__option:last-child input")===document.activeElement;if(n){d(!0);var i=e(".VotingForm__option:last-child input");return void i.focus()}}if(document.activeElement){var l=document.activeElement.closest(".VotingForm__option"),c=l.nextElementSibling&&l.nextElementSibling.$("input");c&&(c.focus(),c.selectionStart=c.value.length,c.selectionEnd=c.value.length)}}else if(t.keyCode===a){if(1===$$(".VotingForm__option").length)return;var u=t.target;u.value||setTimeout(function(){var e=u.closest(".VotingForm__option"),t=e.previousElementSibling;if(e.outerHTML="",p(),t){var n=t.$("input");n.focus(),n.selectionStart=n.value.length,n.selectionEnd=n.value.length}})}}function c(){d();var t=e(".VotingForm__option:last-child input");t.focus()}function u(){var n=e(o.bcgRadioChecked).closest(o.bcg);t.scrollToElem(n)}function d(){var t=e(o.options),i=n._renderOption({});t.insertAdjacentHTML("beforeend",wd.html(i)),f(),p()}function A(e){var t=e.$control,n=e.checked,r=t.closest(o.form);r.classList.toggle(i.withExpire,n)}function m(e){var t=e.closest(o.option);t.outerHTML="",f(),p()}function f(){var e=Array.from($$('.VotingForm__option[data-created="0"] input'));e.forEach(function(e,t){e.setAttribute("name","answers["+t+"]")})}function p(){var t=e(o.form),n=Number(t.getAttribute("data-max-options")),r=$$(o.option).length;t.classList.toggle(i.maxOptions,r===n)}function _(t){var i=e(o.form);if(i){var r=e(o.upload),a=(i.getAttribute("data-upload-html"),wd.html(n._renderBcg("poll_background_id",{id:"photo_"+t.photo_id,type:"photo",photo:t.src,color:t.color,checked:!0})));r.insertAdjacentHTML("beforebegin",a),g()}}function h(){var t=e(o.upload);t&&t.classList.add(i.uploading)}function v(){var t=e(o.form),n=t.getAttribute("data-upload-error-msg");g(),alert(n)}function g(){var t=e(o.form),n=e(o.upload);n.outerHTML=t.getAttribute("data-upload-html")}},"./static/js/mobile/modules/skins/voting/VotingStatsFilters/VotingStatsFilters_0.js":function(){var e=need("$");window.VotingStatsFilters={},function(){VotingStatsFilters._onCountryChange=n}();var t={countrySection:".VotingStatsFilters__section_country",citySection:".VotingStatsFilters__section_city"};function n(n){var i=n.$option,o=e(t.countrySection),r=e(t.citySection),a=i.getAttribute("data-city-section-html");r&&(r.outerHTML=""),a&&o.insertAdjacentHTML("afterend",a)}},"./static/js/mobile/modules/stats/FeedAssistanceStats.js":function(){var e,t,n,i,o;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=window,s=a.throttle,l=a.onDOMReady,c=a.addEvent,u=a.lsSet,d=a.lsGet,A=a.befall,m=a.hasClass,f=(a.clog,a.domCA),p=a.scrollGetY,_=a.getCh,h=a.nav,v=a.page,g=a.getCw,w=a.ajax,y=a.extend;window.FeedAssistanceStats=(e={register:ln,forceRegister:cn,onScroll:s(_n,50),onStartViewElement:A("element"),onEndViewElement:A("element"),onStopTrackElement:A("element"),onViewedElement:A("element"),onBeforePageChange:bn,onPageChanged:Sn,getElementType:fn,registerElements:an,registerTrackingCls:on,unregisterTrackingCls:rn},r(e,"unregisterTrackingCls",rn),r(e,"setParenViewableX",un),r(e,"forceProcessTrack",dn),r(e,"dispatchElementEvent",An),r(e,"dispatchEvent",mn),r(e,"serializeEventData",pn),r(e,"clearElemsCache",kn),r(e,"_debug",hi),r(e,"getFromRef",mi),r(e,"getRoot",fi),r(e,"BLOCKS",{}),r(e,"EVENTS",{}),e);var b=1e3,S=60*b,C=.5,k=.25,E=.5*b,M=.5*b,T=.5*b,j=5*S,D=2.5*b,x=10*b,I=6*b,P=20*b,B=30*b,F=5*b,L=6*S,O=100,N="_feedAssistanceStatsType",H="_feedAssistanceStatsIdled",R="_feedAssistanceStatsModule",V="_feedAssistanceStatsStarted",q="_feedAssistanceStatsProcessed",U="_feedAssistanceStatsEventTs",z="_feedAssistanceStatsCachedY",$="_feedAssistanceStatsCachedX",W="_feedAssistanceStatsLeft",Y="_feedAssistanceStatsHeight",X="_feedAssistanceStatsWidth",G="_feedAssistanceStatsTop",Q="_feedAssistanceStatsBottom",K="_feedAssistanceStatsParentViewableX",J="BLOCK_TYPE_RECOMMENDED_SLIDER",Z="BLOCK_TYPE_RECOMMENDED_CARD",et="BLOCK_TYPE_DEFAULT",tt="BLOCK_TYPE_EXPLORE_BAIT",nt="BLOCK_TYPE_PROFILE_PHOTO",it="BLOCK_TYPE_PROMO_BUTTON",ot="BLOCK_TYPE_IMPORT_CONTACTS",rt="BLOCK_TYPE_PUSH_SWITCH",at="view_block",st="show_user_rec",lt="open_user",ct="add_friend",ut="click_recommended_friends_slider",dt="explore_bait",At="feed_assistance",mt="hide",ft="promo_button",pt="SUB_EXPLORE_BAIT",_t="view",ht="like",vt="comment",gt="opened",wt="subscribe",yt="unsubscribe",bt="open_user",St="open_group",Ct="hide",kt="report",Et="seen",Mt="filled",Tt="enable_push",jt="decline_push",Dt="SUB_PROMO_BUTTON",xt="clicked",It=(t={},r(t,J,at),r(t,it,at),r(t,Z,st),r(t,tt,dt),r(t,nt,At),r(t,ot,At),r(t,rt,At),t),Pt=(n={},r(n,J,M),r(n,Z,T),r(n,tt,E),r(n,nt,E),r(n,ot,E),r(n,rt,E),n),Bt=(i={},r(i,ti(J,at),function(e){var t=m("goodAuthorsSlider",fi(e))?"authors_rec":"user_rec";return pn(at,t,e)}),r(i,ti(it,at),function(e){var t=geByClass1("feedAssistancePromoButtonInstallApp__button",e)?"promo_install_app":"promo_button";return pn(at,t,e)}),r(i,ti(Z,st),function(e){return pn(st,e)}),r(i,ti(Z,lt),function(e){var t=m("goodAuthorsSlider",fi(e))?"authors_rec":"user_rec";return pn(ut,e,t)}),r(i,ti(tt,dt),function(){return pn(pt,_t)}),r(i,ti(nt,At),function(e){return pn(At,e,"m_ph",Et)}),r(i,ti(ot,At),function(e){return pn(At,e,"m_mp",Et)}),r(i,ti(rt,At),function(e){return pn(At,e,"m_push_switch",Et)}),i),Ft=(o={},r(o,ut,function(e,t){var n=_i(e);return[n,Date.now(),t].join("|")}),r(o,st,function(e){var t=_i(e),n=m("goodAuthorsSlider",fi(e)),i=n?"authors_rec":"user_rec",o=mi(e);return[t,pi(e),domChildIndex(e),o,i].join("|")}),r(o,at,function(e,t){return[e,domChildIndex(t),pi(t),mi(t)].join("|")}),r(o,pt,function(e){return e}),r(o,At,function(e,t,n){return[t,n,mi(e)].join("|")}),r(o,mt,function(e,t){return[e,pi(t),domChildIndex(t),mi(t)].join("|")}),r(o,Dt,function(e,t,n){return[domChildIndex(e),t,n||""].join("|")}),o),Lt="feed_other",Ot="feedAssistance",Nt="feedAssistanceStat.events",Ht="feedAssistanceStat.idled",Rt="/feed",Vt="assistance_stats",qt=[],Ut=[],zt=Date.now(),$t=0,Wt=0,Yt=!1,Xt=null,Gt=null,Qt=null,Kt=null,Jt=null,Zt=[],en=[],tn=!1;nn();function nn(){FeedAssistanceStats.BLOCKS=vn(),FeedAssistanceStats.EVENTS=hn(),c(window,"blur",wn),c(window,"focus",yn),l(function(){setTimeout(sn,500)}),c(window,"scroll",function(){var e=p(),t=_();_n(e,t)}),h.onBeforeGo(function(){return bn()}),v.onChange(function(){return Sn()})}function on(e){en.push(e)}function rn(e){si(en,e)}function an(){var e=[];each(en,function(){e=e.concat(geByClass(this))}),each(e,function(){ln(this,"feed")})}function sn(){an();var e=Qn();e.length&&(Wn(e),Kn()),dn(),On()}function ln(e,t){!e[N]&&Jn(e)&&(e[N]=fn(e),e[R]=t,qt.push(e))}function cn(e,t){e[N]=fn(e),e[R]=t,qt.push(e)}function un(e,t){e[K]=t}function dn(){var e=p(),t=_();En(e,t)}function An(e,t){var n=t[N]||fn(t),i=ti(n,e),o=li(i),r={type:e,data:o(t)};Tn(r)}function mn(e){Tn(e)}function fn(e){return e[N]?e[N]:m("feedAssistance_recommendedFriends",e)?J:m("prettyCard_friend",e)?Z:m("prettyCard__photo",e)?Z:m("prettyCard__bodyLink",e)?Z:m("post_exploreBait",e)?tt:m("feedAssistance_profilePhoto",e)?nt:m("feedAssistance_promoButton",e)?it:m("feedAssistance_importContacts",e)?ot:m("feedAssistance_pushNotificationsSwitch",e)?rt:et}function pn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];return Ft[e].apply(Ft,n)}function _n(e,t){var n=_n,i=e||p(),o=t||_();En(i,o),Yt||tn?(clearTimeout(n.timer),n.timer=setTimeout(gn,150),tn=!1):(Yt=!0,Ln(),In())}function hn(){return{EVENT_OPEN_USER:lt,EVENT_VIEW_BLOCK:at,EVENT_VIEW_RECOMMENDED_CARD:st,EVENT_ACCEPT_FRIEND:ct,EVENT_EXPLORE_BAIT:dt,EVENT_EXPLORE_BAIT_SUB:pt,EVENT_FEED_ASSISTANCE:At,SUB_EVENT_EXPLORE_BAIT_VIEW:_t,SUB_EVENT_EXPLORE_BAIT_LIKE:ht,SUB_EVENT_EXPLORE_BAIT_COMMENT:vt,SUB_EVENT_EXPLORE_BAIT_OPENED:gt,SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE:wt,SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:yt,SUB_EVENT_EXPLORE_BAIT_OPEN_USER:bt,SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP:St,SUB_EVENT_EXPLORE_BAIT_HIDE:Ct,SUB_EVENT_EXPLORE_BAIT_REPORT:kt,SUB_EVENT_SEEN:Et,SUB_EVENT_FILLED:Mt,EVENT_HIDE_BLOCK:mt,SUB_EVENT_ENABLE_PUSH:Tt,SUB_EVENT_DECLINE_PUSH:jt,EVENT_PROMO_BUTTON:ft,EVENT_PROMO_BUTTON_SUB:Dt,SUB_EVENT_PROMO_BUTTON_CLICK:xt}}function vn(){return{BLOCK_TYPE_RECOMMENDED_SLIDER:J,BLOCK_TYPE_RECOMMENDED_CARD:Z,BLOCK_TYPE_EXPLORE_BAIT:tt,BLOCK_TYPE_PROFILE_PHOTO:nt,BLOCK_TYPE_PROMO_BUTTON:it,BLOCK_TYPE_IMPORT_CONTACTS:ot}}function gn(){Ln(),Fn(),Yt=!1}function wn(){Ln(),Un(),Nn()}function yn(){Ut.forEach(function(e){e[V]=Date.now()}),Yn(null),Xn(null),Fn(),Nn(),On()}function bn(){Ln(),Cn(),tn=!0,Fn()}function Sn(){an(),dn()}function Cn(){Ai(Ut),Zt=Zt.concat(ei(Ut)),ui(Ut),Ut=[]}function kn(){qt.forEach(function(e){e[z]=!1,e[$]=!1})}function En(e,t){var n=[];qt.forEach(function(i){return ai(i)?void n.push(i):void(jn(i,e,t)?(i[V]=Date.now(),Ut.push(i),FeedAssistanceStats.onStartViewElement(i)):Dn(i,e,t)?(i[H]?delete i[H]:(Mn(i),FeedAssistanceStats.onEndViewElement(i)),delete i[V]):xn(i)&&(Mn(i),FeedAssistanceStats.onViewedElement(i)))}),n.forEach(function(e){si(qt,e),FeedAssistanceStats.onStopTrackElement(e)})}function Mn(e){si(Ut,e),di(e),Tn(ri(e)),ci(e)}function Tn(e){e&&Zt.push(e)}function jn(e,t,n){return!e[V]&&Pn(e,C,t,n)&&Bn(e,C)}function Dn(e,t,n){return e[V]&&(!Pn(e,k,t,n)||!Bn(e,k))}function xn(e){if(!e[V])return!1;var t=Math.min(j,Date.now()-e[V]),n=oi(e);return t>n}function In(){var e=ge("vk_head");$t=e&&e.offsetHeight,Wt=0}function Pn(e,t,n,i){if(!e)return!1;e[z]||(e[z]=!0,e[Y]=e.offsetHeight,e[G]=n+e.getBoundingClientRect().top,e[Q]=e[G]+e[Y]);var o=i-$t-Wt,r=n+$t,a=n+i-Wt,s=e[Y],l=e[G],c=e[Q],u=c>r&&a>l?Math.min(a,c)-Math.max(r,l):0;return u>=Math.min(o*t,s*t)}function Bn(e,t){var n=e[K],i=0;n&&!n[$]&&~qt.indexOf(n)&&(n[$]=!0,n[X]=n.clientWidth,n[W]=n.getBoundingClientRect().left+n.clientLeft),e[$]||(e[$]=!0,e[X]=e.offsetWidth);var o=n?n[X]||n.clientWidth:g(),r=n?n[W]||n.getBoundingClientRect().left+i:i,a=o+r,s=e[X],l=e.getBoundingClientRect().left,c=s+l,u=s*t,d=s*Math.max(0,1-t);return l+u>=r&&a>=c-d}function Fn(){Xt=setTimeout(Hn,D),Gt=setTimeout(Rn,x),Qt=setTimeout(Vn,I),Kt=setTimeout(qn,P)}function Ln(){clearTimeout(Xt),clearTimeout(Gt),clearTimeout(Qt),clearTimeout(Kt)}function On(){Jt=setInterval(zn,B)}function Nn(){clearInterval(Jt)}function Hn(){Zt.length&&Yn(Zt)}function Rn(){Wn(Zt),Zt=[],Yn(null)}function Vn(){Ut.length&&(Xn(ei(Ut)),Qt=setTimeout(Vn,F))}function qn(){clearTimeout(Qt),Ai(Ut),Wn(ei(Ut)),ui(Ut),Ut.forEach(function(e){e[H]=!0}),Ut=[],Xn(null)}function Un(){Ai(Ut),Wn(Zt.concat(ei(Ut))),ui(Ut),Zt=[],Ut=[]}function zn(){Zt.length>=O&&Rn()}function $n(e){var t={};return each(e,function(){var e=t[this.type];e?t[this.type].push(this.data):t[this.type]=[this.data]}),t}function Wn(e){if(e&&e.length){var t={act:Vt};t=y(t,$n(e)),w.post(Rt,t)}}function Yn(e){Gn(Nt,e)}function Xn(e){Gn(Ht,e)}function Gn(e,t){var n=d(e)||{};t?n[zt]=t:delete n[zt],u(e,n)}function Qn(){var e=Qn,t=[],n=d(Nt)||{},i=d(Ht)||{};return e.iterator||(e.iterator=function(e){return function(n){Zn(n)&&(t=t.concat(e[n]))}}),Object.keys(n).forEach(e.iterator(n)),Object.keys(i).forEach(e.iterator(i)),t}function Kn(){var e=Kn,t=d(Nt)||{},n=d(Ht)||{};e.iterator||(e.iterator=function(e){return function(t){Zn(t)&&delete e[t]}}),Object.keys(t).forEach(e.iterator(t)),Object.keys(n).forEach(e.iterator(n)),u(Nt,t),u(Ht,n)}function Jn(e){return!~qt.indexOf(e)}function Zn(e){var t=Number(e);return t!==zt&&Date.now()-t>=L}function ei(e){var t=[];return e.forEach(function(e){var n=ri(e);n&&t.push(n)}),t}function ti(e,t){return e+"_"+t}function ni(e){return It[e[N]]}function ii(e,t){var n=Bt[ti(e[N],t)];return n(e)}function oi(e){var t=fn(e);return Pt[t]||E}function ri(e){if(ai(e))return null;if(!xn(e))return null;var t=ni(e);return{type:t,data:ii(e,t)}}function ai(e){return e[q]||!document.body.contains(e)}function si(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function li(e){return Bt[e]}function ci(e){ai(e)||xn(e)&&(e[q]=!0)}function ui(e){each(e,function(){ci(this)})}function di(e){e[U]=Date.now()}function Ai(e){e.forEach(di)}function mi(e){return e=fi(e),e?domData(e,"from-ref")||Lt:Lt}function fi(e){return m(e,Ot)||(e=f(e,"."+Ot)),e}function pi(e){var t=(new Date).getTime();return e?e[U]||e[V]||t:t}function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uid";return intval(domData(e,t))}function hi(){return{started:Ut,tracking:qt,events:Zt,blindTop:$t,blindBottom:Wt}}},"./static/js/mobile/modules/stickers/stickers.js":function(e,t,n){var i=n("./static/js/al/modules/stickers/stickers_animation.js"),o=n("./static/js/al/modules/stickers/stickers_settings.js");window.StickersAnimation=i.StickersAnimation,window.StickersSettings=o.StickersSettings},"./static/js/mobile/modules/thover.js":function(){var e=window,t=e.removeClass,n=e.addClass,i=e.geByClass1,o={obj:null,highlight:!1,start:function(e){e.touches&&1==e.touches.length&&(o.clear(),o.end(e),o.obj=this||null,o.obj&&(o.highlight=!0,n("hover",o.obj)))},cancel:function(e){o.obj&&(o.highlight=!1,o.end(e))},end:function(){o.obj&&(t("hover",o.obj),o.highlight&&(o.clear(),n("active",o.obj)),o.obj=null,o.highlight=!1)},clear:function(){t("active",i("active","vk_wrap"))}};window.thover=o},"./static/js/mobile/modules/tooltip.js":function(){var e=window,t=e.each,n={tt:!1,handlers:[],show:function(){n.shown||(n.tt=Array.prototype.slice.call(arguments))},hide:function(){n.tt&&(n.tt=!1)},addHandler:function(e){e&&n.handlers.push(e)},removeHandler:function(e){return e?void t(n.handlers,function(t){return e===this?(n.handlers.splice(t,1),!1):void 0}):void(n.handlers=[])},onClose:function(){t(n.handlers,function(){this()})},clear:function(){n.tt&&(n.hide(),n.onClose(),n.removeHandler())},closeByTap:function(e){if(!n.tt||!e.target)return!1;var t=e.target;do for(var i=0;i<n.tt.length;i++)if(t===n.tt[i])return!1;while(t=t.parentNode);return n.hide(),n.onClose(),!0}};window.tooltip=n},"./static/js/mobile/modules/units/base/uVK_0.js":function(){window.uVK={onReady:befall(),onResize:befall(),onOrientationChange:befall()},onDOMReady(function(){if(window.isNewMail){uVK.onReady();var e=document.body.getAttribute("onresize"),t=document.body.getAttribute("onorientationchange");document.body.setAttribute("onresize","uVK.onResize(); "+e),document.body.setAttribute("onorientationchange","uVK.onOrientationChange(); "+t)}})},"./static/js/mobile/modules/units/common/uBell.js":function(){window.uBell=e;function e(){var e=store;return Bell({url:"/feed?section=notifications",count:e.notificationsCount})}},"./static/js/mobile/modules/units/mail/uConvo.js":function(){Object.assign(window,{uConvo:e,uConvo_getUnreadCount:i,uConvo_getLastMsg:a,uConvo_getPeer:o,uConvo_getLastMsgId:r,uConvo_getOnline:t});function e(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="last"===o,s=store.mail,l=s.peers[e],c=l.url,u=null;if(o){a||(c=c+"&msg="+o);var d=a?r(e):o,A=s.msgs[d];u={text:A.textShort,date:A.dateShort,unreadCount:i(e),muted:l.isMuted,typingNames:l.typing.map(n)}}return Convo({id:e,url:c,photos:l.avatarImages,title:l.title,online:t(l),important:l.isImportant,profileUrl:l.profileUrl,isLast:a,more:u})}function t(e){return e.isOnline?"desktop"===e.onlinePlatform?"desktop":"mobile":!1}function n(e){return store.mail.members[e].name}function i(e){var t=o(e),n=t.countUnread;if(0===n){var i=store.mail,a=r(e),s=a?i.msgs[a]:null;s&&s.isUnread&&s.authorId===i.cur.viewerId&&(n=-1)}return n}function o(e){var t=store.mail.peers[e];return t}function r(e){var t=store.mail,n=t.cur.msgRemoved,i=t.rolls.peer[e],o=null;if(i){for(var r=[],a=0;a<i.length;a++){var s=i[a];n[s]||r.push(s)}r.length&&(o=r)}var l=o?last(o):null;return l}function a(e){var t=store.mail.msgs,n=r(e),i=n?t[n]:null;return i}},"./static/js/mobile/modules/units/mail/uConvo_0.js":function(){Object.assign(uConvo,{onTap:Convo.onTap,redrawOnline:e,redrawUnread:t,redrawLastMsg:n,redrawTyping:i});function e(e){var t=store.mail.peers[e];if(t){var n=uConvo_getOnline(t);Convo.setOnline(e,n)}}function t(e){if(store.mail.peers[e]){var t=uConvo_getUnreadCount(e);Convo.setUnreadCount(e,t)}}function n(e){var t=uConvo_getLastMsg(e);t&&Convo.setLastMsg(e,t.textShort,t.dateShort)}function i(e){var t=store.mail,n=t.cur,i=t.peers,o=t.members;if(n){var r=i[e];if(r){var a=r.typing;if(1===a.length&&a[0]===e)Convo.setTyping(e,!0);else{var s=a.map(function(e){return o[e].name});Convo.setTyping(e,s)}}}}},"./static/js/mobile/modules/units/mail/uCurConvoTyping.js":function(){Object.assign(window,{uCurConvoTyping:e,uCurConvoTyping_getNames:t});function e(){return Typing({id:"curConvo",gray:!0,typing:t()})}function t(){var e=store.mail,t=e.cur.peerId;if(!t)return[];for(var n=e.members,i=e.peers[t].typing,o=i.length,r=[],a=0;o>a;a++){var s=n[i[a]].name;r.push(s)}return r}},"./static/js/mobile/modules/units/mail/uCurConvoTyping_0.js":function(){Object.assign(uCurConvoTyping,{redraw:e});function e(){if(store.mail.cur.peerId){var e=uCurConvoTyping_getNames();Typing.setTyping("curConvo",e)}}},"./static/js/mobile/modules/units/mail/uMailHat.js":function(){window.uMailHat=e;function e(){var e=store.mail.cur.peerId;return e?n(e):t()}function t(){var e=store.mail.cur,t=Math.abs(e.groupId),n=t?"&community="+t:"",i=t?"?community="+t:"";return MailHat_main({folder:e.folder,urls:{all:"/mail"+i,unrespond:"/mail?act=unrespond"+n,unread:"/mail?act=unread"+n,important:"/mail?act=important"+n},unreadCount:e.countUnread,importantCount:e.countImportant,withUnrespond:!!t,forwarding:!!e.forwardFromId,notifier:uBell()})}function n(e){var t=store.mail,n=t.peers[e],o=e>2e9,r={title:n.title,photos:n.avatarImages,actions:i(e),editing:t.cur.editing};if(o){var a=o?e-2e9:null;if(r.url="/mail?act=info&chat="+a,r.membersCount=n.countMembers,r.hasPinnedMsg=n.hasPinnedMsg,r.isVkcomgroup=n.isVkcomgroup,r.isVkcomgroup){var s=-n.ownerId;r.url="/club"+s}}else r.url=n.profileUrl,r.isOnline=n.isOnline,r.onlinePlatform=n.onlinePlatform,r.offlineText=n.offlineText;return MailHat_convo(r)}function i(e){var t=store.mail,n=t.peers[e].actionUrls,i=t.peers[e].isVkcomgroup,r=[];return r=e>-2e9&&0>e?[o("showMedias",n.showMedia),o("deleteHistory",n.flushHistory),o("blockCommunity",n.blockCommunity),o("unblockCommunity",n.unblockCommunity)]:e>2e9?[o("chatAdd",n.addToChat),o("inviteLink",n.inviteLink,"",i),o("showMedias",n.showMedia),n.unpinMsg?o("chatUnpinMsg",n.unpinMsg):"",n.unpinMsg?o("chatShowPinnedMsg",null,'onmousedown="uMessenger.onShowPinnedMsgClick()"'):"",n.unpinMsg?o("chatHidePinnedMsg",null,'onmousedown="uMessenger.onHidePinnedMsgClick()"'):"",o("chatSettings",n.chatSettings,"",i),o("chatDeleteHistory",n.flushHistory),o("chatReturn",n.returnToChat,"",i),o("chatLeave",n.leaveChat,"",i)]:t.cur.groupId?[o("showMedias",n.showMedia),o("markAsAnswered",n.communityMarkAsAnswered),n.isDialogImportant?o("removeImportantMark",n.communityToggleImportant):o("markAsImportant",n.communityToggleImportant),n.isBlacklisted?o("unbanUser",n.userBan):o("banUser",n.userBan),o("deleteHistory",n.flushHistory)]:[o("showMedias",n.showMedia),o("deleteHistory",n.flushHistory)]}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1,o=window.lang;if(!t&&!n)return null;var r={showMedias:[o.mobile_mail_show_medias,"attach"],deleteHistory:[o.mobile_mail_delete_history,"delete"],blockCommunity:[o.mobile_mail_block_community,"block"],unblockCommunity:[o.mobile_mail_unblock_community,"allow"],chatAdd:[o.mobile_mail_add_to_chat,"plus"],chatUnpinMsg:[o.mobile_mail_unpin_msg,"unpin","unpin"],chatShowPinnedMsg:[o.mobile_mail_pin_show,"show","showPinned"],chatHidePinnedMsg:[o.mobile_mail_pin_hide,"hide","hidePinned"],chatSettings:[o.mobile_mail_chat_settings,"settings"],chatDeleteHistory:[o.mobile_mail_delete_chat_history,"delete"],chatReturn:[i?o.mobile_mail_return_to_channel:o.mobile_mail_chat_return,"revert","returnToChat"],chatLeave:[i?o.mobile_mail_channel_leave:o.mobile_mail_chat_leave,"close16","leaveChat"],markAsAnswered:[o.mobile_mail_mark_as_answered,"answered"],removeImportantMark:[o.mobile_mail_remove_important_mark,"important"],markAsImportant:[o.mobile_mail_mark_as_important,"important"],unbanUser:[o.mobile_settings_blacklist_unban_user,"allow"],banUser:[o.mobile_settings_blacklist_ban_user,"block"],inviteLink:[i?o.mobile_mail_vkcomgroup_invite_link:o.mobile_mail_invite_link,"invite"]},a={text:r[e][0],icon:r[e][1],attrs:n,url:t};return r[e][2]&&(a.name=r[e][2]),a}},"./static/js/mobile/modules/units/mail/uMailHat_0.js":function(){Object.assign(uMailHat,{onUnreadClick:befall(),onBackClick:befall(),onBackToDialogClick:befall(),onCancelEditing:befall(),setModifiers:MailHat_convo.setModifiers,redrawCounter:r,redrawOnline:s,redraw:o,startStatusUpdate:n,cancelStatusUpdate:i}),function(){MailHat_main.onUnreadClick(uMailHat.onUnreadClick),MailHat_main.onBurgerClick(menu.open),MailHat_main.onCancelForwardTap(uMailHat.onBackToDialogClick),MailHat_convo.onBackTap(uMailHat.onBackClick),MailHat_convo.onCancelEditingTap(uMailHat.onCancelEditing),uVK.onReady(t),uVK.onReady(a),page.onChange(a)}();var e=void 0;function t(){if(store.mail&&store.mail.cur){var e=store.mail.cur.peerId;e&&n()}}function n(){var t=store.mail.cur.peerId,o=3e4;return t?void(e=setTimeout(function(){s(),n()},o)):void i()}function i(){e&&clearTimeout(e)}function o(){$$(".mailHat").forEach(function(e){return e.outerHTML=uMailHat()})}function r(){if(!nav.getQuery("community")){var e=geBySel1(".mmi_mail .mm_counter2"),t=store.mail.cur.countUnread;t>0?(e.innerText=t,attr(e,"style","display: inline")):hide(e),MailHat_main.setUnreadCount(t)}}function a(){return}function s(){var e=window.lang,t=store.mail,n=t.cur,i=t.peers,r=n.peerId;if(r){var a=i[r];if(a.lastActionTime&&!a.isOnline){var s=n.timeshift,c=l(a.lastActionTime,s);a.offlineText=langSex(a.sex,e.mobile_mail_last_activity_tip).replace("{time}",c)}o()}}function l(e,t){var n=window.lang,i="";e+=t;var o=parseInt(Date.now()/1e3)-e;if(60>o)i=n.mobile_profile_status_just_now;else if(3600>o){var r=intval(o/60);i=langWordNumeric(r,n.mobile_profile_status_word_mins_ago,n.mobile_profile_status_mins_ago)}else if(14400>o){var a=intval(o/3600);i=langWordNumeric(a,n.mobile_profile_status_word_hours_ago,n.mobile_profile_status_hours_ago)}else i=c(e);return i}function c(e){var t=1e3*e,n=new Date(t),i=new Date,o=window.lang;return n.getFullYear()!=i.getFullYear()&&n.getTime()<i.getTime()-1728e5||Math.abs(n.getTime()-i.getTime())>157248e5?langDate(t,o.mobile_mail_date,0,o.months_sm_of,!1):langDate(t,o.mobile_mail_short_date_time,0,o.months_sm_of,!1)}},"./static/js/mobile/modules/units/mail/uMsg.js":function(){var e=n(["\n    ","\n    ","\n  "],["\n    ","\n    ","\n  "]),t=n(['\n    <div class="msg__newMsgsDivider">\n      <span class="msg__newMsgDividerText">',"</span>\n    </div>\n  "],['\n    <div class="msg__newMsgsDivider">\n      <span class="msg__newMsgDividerText">',"</span>\n    </div>\n  "]);function n(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}window.uMsg=i;function i(t){var n=t.msgId,i=t.withDivider?o():"",r=store.mail,a=r.msgs[n],s=r.members[a.authorId],l=void 0,c=a.peerId,u="";return u=c>2e9?s.name:c>-2e9&&0>c?a.authorId===r.cur.userId?s.firstName:s.name:s.firstName,l=Msg(a.isService?{id:n,text:a.textFull,service:!0,unread:a.isUnread}:{id:n,text:a.textFull,important:a.isImportant,unread:a.isUnread,authorPhoto:s.avatar,authorName:u,authorUrl:s.url,date:a.date,removed:r.cur.msgRemoved[n],admin:a.adminName?{name:a.adminName,url:a.adminUrl}:null,edited:a.edited}),q.html(e,i,l)}function o(){var e=window.lang;return q.html(t,e.mobile_mail_new_msgs)}},"./static/js/mobile/modules/units/voting/uVoting/uVoting_0.js":function(){var e=need("Voting");window.uVoting={},function(){uVoting._onSubmit=t,uVoting._onRevoteClick=n}();function t(e){var t=e.$voting,n=e.url;i(t,n)}function n(e,t){var n=t.$voting;i(n,e)}function i(t,n){var i=setTimeout(function(){e.setLoading(t)},140);ajax.post(n,{_ajax:1},{onDone:function(t,n){clearTimeout(i),e.setHtml(t,n)}})}},"./static/js/mobile/modules/zlayer.js":function(){var e={onClose:befall(),inited:!1,width:!1,height:!1,onResize:null,_lastNav:!1,_opened:!1,_destroy:!1,init:function(){e.inited||(e.inited=!0,e.initEvents())},initEvents:function(){var t=function(t){e.fixHeight(vkNow()+2e3,t)};addEvent(window,"orientationchange",t),onBodyResize(t),t(!0)},opened:function(){return hasClass("z_opened",window.bodyNode)!==e.opened&&toggleClass("z_opened",window.bodyNode,e._opened),e._opened},toggle:function(t,n){return checkEvent(t)?!0:(e.opened()?e.close(t,n):e.open(t,n),!1)},open:function(t){return checkEvent(t)?!0:e.opened()?!1:(thover.clear(),e.init(),e._st=scrollTop(),e._lastNav=!1,addClass("z_opened",window.bodyNode),e._opened=!0,e.fixHeight(vkNow()+2e3,!0),scrollTop(0),!1)},close:function(t){return checkEvent(t)?!0:e.opened()?(thover.clear(),val("z",""),removeClass("z_opened",window.bodyNode),e._lastNav={cur:nav.cur,path:nav.path,params:nav.params,hash:nav.hash},e._opened=!1,e._destroy&&(e._destroy(),e._destroy=!1),scrollTop(e._st,1),e._st=!1,e.onResize=null,e.onClose(),!1):!1},updateSize:function(){var t=ge("z");t&&t.offsetWidth&&t.offsetHeight&&(e.width=t.offsetWidth,e.height=t.offsetHeight,e.onResize&&e.onResize())},fixHeight:function(t,n){if((e._opened||n)&&(t&&!(vkNow()>t)||n)){var i=getCw(),o=getCh();(e._lastWidth!=i||e._lastHeight!=o||n)&&(e._lastWidth=i,e._lastHeight=o,setStyle("z","height",o),e.updateSize(),scrollTop()||scrollTop(0)),clearTimeout(e._fixTo),e._fixTo=setTimeout(e.fixHeight,50,t)}},create:function(t,n){val("z",t),e._destroy=n}};window.zlayer=e},2:function(e,t,n){e.exports=n("./static/js/mobile/modules/entries/common.js")}});
/*804*/